var k6=Object.defineProperty;var M6=(n,t,e)=>t in n?k6(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var z=(n,t,e)=>(M6(n,typeof t!="symbol"?t+"":t,e),e),p2=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var c=(n,t,e)=>(p2(n,t,"read from private field"),e?e.call(n):t.get(n)),x=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},b=(n,t,e,i)=>(p2(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e);var xe=(n,t,e,i)=>({set _(s){b(n,t,s,e)},get _(){return c(n,t,i)}}),E=(n,t,e)=>(p2(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function _3(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var k3={exports:{}},_x={},M3={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z0=Symbol.for("react.element"),L6=Symbol.for("react.portal"),R6=Symbol.for("react.fragment"),D6=Symbol.for("react.strict_mode"),F6=Symbol.for("react.profiler"),I6=Symbol.for("react.provider"),N6=Symbol.for("react.context"),O6=Symbol.for("react.forward_ref"),B6=Symbol.for("react.suspense"),j6=Symbol.for("react.memo"),V6=Symbol.for("react.lazy"),ZT=Symbol.iterator;function $6(n){return n===null||typeof n!="object"?null:(n=ZT&&n[ZT]||n["@@iterator"],typeof n=="function"?n:null)}var L3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R3=Object.assign,D3={};function pf(n,t,e){this.props=n,this.context=t,this.refs=D3,this.updater=e||L3}pf.prototype.isReactComponent={};pf.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};pf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function F3(){}F3.prototype=pf.prototype;function RE(n,t,e){this.props=n,this.context=t,this.refs=D3,this.updater=e||L3}var DE=RE.prototype=new F3;DE.constructor=RE;R3(DE,pf.prototype);DE.isPureReactComponent=!0;var JT=Array.isArray,I3=Object.prototype.hasOwnProperty,FE={current:null},N3={key:!0,ref:!0,__self:!0,__source:!0};function O3(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)I3.call(t,i)&&!N3.hasOwnProperty(i)&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=e;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:z0,type:n,key:r,ref:o,props:s,_owner:FE.current}}function z6(n,t){return{$$typeof:z0,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function IE(n){return typeof n=="object"&&n!==null&&n.$$typeof===z0}function U6(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var tP=/\/+/g;function m2(n,t){return typeof n=="object"&&n!==null&&n.key!=null?U6(""+n.key):t.toString(36)}function G1(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case z0:case L6:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+m2(o,0):i,JT(s)?(e="",n!=null&&(e=n.replace(tP,"$&/")+"/"),G1(s,t,e,"",function(u){return u})):s!=null&&(IE(s)&&(s=z6(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(tP,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",JT(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+m2(r,a);o+=G1(r,t,e,l,s)}else if(l=$6(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+m2(r,a++),o+=G1(r,t,e,l,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function u1(n,t,e){if(n==null)return n;var i=[],s=0;return G1(n,i,"","",function(r){return t.call(e,r,s++)}),i}function H6(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var En={current:null},X1={transition:null},W6={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:X1,ReactCurrentOwner:FE};function B3(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:u1,forEach:function(n,t,e){u1(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return u1(n,function(){t++}),t},toArray:function(n){return u1(n,function(t){return t})||[]},only:function(n){if(!IE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};at.Component=pf;at.Fragment=R6;at.Profiler=F6;at.PureComponent=RE;at.StrictMode=D6;at.Suspense=B6;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W6;at.act=B3;at.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=R3({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=FE.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in t)I3.call(t,l)&&!N3.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:z0,type:n.type,key:s,ref:r,props:i,_owner:o}};at.createContext=function(n){return n={$$typeof:N6,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:I6,_context:n},n.Consumer=n};at.createElement=O3;at.createFactory=function(n){var t=O3.bind(null,n);return t.type=n,t};at.createRef=function(){return{current:null}};at.forwardRef=function(n){return{$$typeof:O6,render:n}};at.isValidElement=IE;at.lazy=function(n){return{$$typeof:V6,_payload:{_status:-1,_result:n},_init:H6}};at.memo=function(n,t){return{$$typeof:j6,type:n,compare:t===void 0?null:t}};at.startTransition=function(n){var t=X1.transition;X1.transition={};try{n()}finally{X1.transition=t}};at.unstable_act=B3;at.useCallback=function(n,t){return En.current.useCallback(n,t)};at.useContext=function(n){return En.current.useContext(n)};at.useDebugValue=function(){};at.useDeferredValue=function(n){return En.current.useDeferredValue(n)};at.useEffect=function(n,t){return En.current.useEffect(n,t)};at.useId=function(){return En.current.useId()};at.useImperativeHandle=function(n,t,e){return En.current.useImperativeHandle(n,t,e)};at.useInsertionEffect=function(n,t){return En.current.useInsertionEffect(n,t)};at.useLayoutEffect=function(n,t){return En.current.useLayoutEffect(n,t)};at.useMemo=function(n,t){return En.current.useMemo(n,t)};at.useReducer=function(n,t,e){return En.current.useReducer(n,t,e)};at.useRef=function(n){return En.current.useRef(n)};at.useState=function(n){return En.current.useState(n)};at.useSyncExternalStore=function(n,t,e){return En.current.useSyncExternalStore(n,t,e)};at.useTransition=function(){return En.current.useTransition()};at.version="18.3.1";M3.exports=at;var M=M3.exports;const fs=_3(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G6=M,X6=Symbol.for("react.element"),Y6=Symbol.for("react.fragment"),K6=Object.prototype.hasOwnProperty,q6=G6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q6={key:!0,ref:!0,__self:!0,__source:!0};function j3(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)K6.call(t,i)&&!Q6.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:X6,type:n,key:r,ref:o,props:s,_owner:q6.current}}_x.Fragment=Y6;_x.jsx=j3;_x.jsxs=j3;k3.exports=_x;var C=k3.exports,_b={},V3={exports:{}},gi={},$3={exports:{}},z3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(N,$){var H=N.length;N.push($);t:for(;0<H;){var W=H-1>>>1,G=N[W];if(0<s(G,$))N[W]=$,N[H]=G,H=W;else break t}}function e(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var $=N[0],H=N.pop();if(H!==$){N[0]=H;t:for(var W=0,G=N.length,Z=G>>>1;W<Z;){var dt=2*(W+1)-1,vt=N[dt],ut=dt+1,lt=N[ut];if(0>s(vt,H))ut<G&&0>s(lt,vt)?(N[W]=lt,N[ut]=H,W=ut):(N[W]=vt,N[dt]=H,W=dt);else if(ut<G&&0>s(lt,H))N[W]=lt,N[ut]=H,W=ut;else break t}}return $}function s(N,$){var H=N.sortIndex-$.sortIndex;return H!==0?H:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,p=!1,g=!1,y=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var $=e(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=N)i(u),$.sortIndex=$.expirationTime,t(l,$);else break;$=e(u)}}function S(N){if(y=!1,w(N),!g)if(e(l)!==null)g=!0,O(T);else{var $=e(u);$!==null&&j(S,$.startTime-N)}}function T(N,$){g=!1,y&&(y=!1,m(k),k=-1),p=!0;var H=f;try{for(w($),d=e(l);d!==null&&(!(d.expirationTime>$)||N&&!R());){var W=d.callback;if(typeof W=="function"){d.callback=null,f=d.priorityLevel;var G=W(d.expirationTime<=$);$=n.unstable_now(),typeof G=="function"?d.callback=G:d===e(l)&&i(l),w($)}else i(l);d=e(l)}if(d!==null)var Z=!0;else{var dt=e(u);dt!==null&&j(S,dt.startTime-$),Z=!1}return Z}finally{d=null,f=H,p=!1}}var P=!1,_=null,k=-1,L=5,D=-1;function R(){return!(n.unstable_now()-D<L)}function I(){if(_!==null){var N=n.unstable_now();D=N;var $=!0;try{$=_(!0,N)}finally{$?B():(P=!1,_=null)}}else P=!1}var B;if(typeof v=="function")B=function(){v(I)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=I,B=function(){V.postMessage(null)}}else B=function(){A(I,0)};function O(N){_=N,P||(P=!0,B())}function j(N,$){k=A(function(){N(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,O(T))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(N){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var H=f;f=$;try{return N()}finally{f=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=f;f=N;try{return $()}finally{f=H}},n.unstable_scheduleCallback=function(N,$,H){var W=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?W+H:W):H=W,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=H+G,N={id:h++,callback:$,priorityLevel:N,startTime:H,expirationTime:G,sortIndex:-1},H>W?(N.sortIndex=H,t(u,N),e(l)===null&&N===e(u)&&(y?(m(k),k=-1):y=!0,j(S,H-W))):(N.sortIndex=G,t(l,N),g||p||(g=!0,O(T))),N},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(N){var $=f;return function(){var H=f;f=$;try{return N.apply(this,arguments)}finally{f=H}}}})(z3);$3.exports=z3;var Z6=$3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J6=M,fi=Z6;function U(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U3=new Set,Dp={};function Jc(n,t){Jd(n,t),Jd(n+"Capture",t)}function Jd(n,t){for(Dp[n]=t,n=0;n<t.length;n++)U3.add(t[n])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kb=Object.prototype.hasOwnProperty,tN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eP={},nP={};function eN(n){return kb.call(nP,n)?!0:kb.call(eP,n)?!1:tN.test(n)?nP[n]=!0:(eP[n]=!0,!1)}function nN(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iN(n,t,e,i){if(t===null||typeof t>"u"||nN(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cn(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Qe[n]=new Cn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Qe[t]=new Cn(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Qe[n]=new Cn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Qe[n]=new Cn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Qe[n]=new Cn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Qe[n]=new Cn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Qe[n]=new Cn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Qe[n]=new Cn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Qe[n]=new Cn(n,5,!1,n.toLowerCase(),null,!1,!1)});var NE=/[\-:]([a-z])/g;function OE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(NE,OE);Qe[t]=new Cn(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(NE,OE);Qe[t]=new Cn(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(NE,OE);Qe[t]=new Cn(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Qe[n]=new Cn(n,1,!1,n.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Qe[n]=new Cn(n,1,!1,n.toLowerCase(),null,!0,!0)});function BE(n,t,e,i){var s=Qe.hasOwnProperty(t)?Qe[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iN(t,e,s,i)&&(e=null),i||s===null?eN(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var ao=J6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,h1=Symbol.for("react.element"),vu=Symbol.for("react.portal"),wu=Symbol.for("react.fragment"),jE=Symbol.for("react.strict_mode"),Mb=Symbol.for("react.profiler"),H3=Symbol.for("react.provider"),W3=Symbol.for("react.context"),VE=Symbol.for("react.forward_ref"),Lb=Symbol.for("react.suspense"),Rb=Symbol.for("react.suspense_list"),$E=Symbol.for("react.memo"),mo=Symbol.for("react.lazy"),G3=Symbol.for("react.offscreen"),iP=Symbol.iterator;function Sf(n){return n===null||typeof n!="object"?null:(n=iP&&n[iP]||n["@@iterator"],typeof n=="function"?n:null)}var Jt=Object.assign,g2;function Vf(n){if(g2===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);g2=t&&t[1]||""}return`
`+g2+n}var y2=!1;function v2(n,t){if(!n||y2)return"";y2=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{y2=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Vf(n):""}function sN(n){switch(n.tag){case 5:return Vf(n.type);case 16:return Vf("Lazy");case 13:return Vf("Suspense");case 19:return Vf("SuspenseList");case 0:case 2:case 15:return n=v2(n.type,!1),n;case 11:return n=v2(n.type.render,!1),n;case 1:return n=v2(n.type,!0),n;default:return""}}function Db(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case wu:return"Fragment";case vu:return"Portal";case Mb:return"Profiler";case jE:return"StrictMode";case Lb:return"Suspense";case Rb:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case W3:return(n.displayName||"Context")+".Consumer";case H3:return(n._context.displayName||"Context")+".Provider";case VE:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case $E:return t=n.displayName||null,t!==null?t:Db(n.type)||"Memo";case mo:t=n._payload,n=n._init;try{return Db(n(t))}catch{}}return null}function rN(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Db(t);case 8:return t===jE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function X3(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oN(n){var t=X3(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function d1(n){n._valueTracker||(n._valueTracker=oN(n))}function Y3(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=X3(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function zy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Fb(n,t){var e=t.checked;return Jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function sP(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=Fa(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K3(n,t){t=t.checked,t!=null&&BE(n,"checked",t,!1)}function Ib(n,t){K3(n,t);var e=Fa(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Nb(n,t.type,e):t.hasOwnProperty("defaultValue")&&Nb(n,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function rP(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Nb(n,t,e){(t!=="number"||zy(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var $f=Array.isArray;function Hu(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Fa(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function Ob(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return Jt({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function oP(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(U(92));if($f(e)){if(1<e.length)throw Error(U(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Fa(e)}}function q3(n,t){var e=Fa(t.value),i=Fa(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function aP(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function Q3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bb(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?Q3(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var f1,Z3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(f1=f1||document.createElement("div"),f1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=f1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function Fp(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var fp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aN=["Webkit","ms","Moz","O"];Object.keys(fp).forEach(function(n){aN.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),fp[t]=fp[n]})});function J3(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||fp.hasOwnProperty(n)&&fp[n]?(""+t).trim():t+"px"}function t4(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=J3(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var lN=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jb(n,t){if(t){if(lN[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Vb(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $b=null;function zE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zb=null,Wu=null,Gu=null;function lP(n){if(n=W0(n)){if(typeof zb!="function")throw Error(U(280));var t=n.stateNode;t&&(t=Dx(t),zb(n.stateNode,n.type,t))}}function e4(n){Wu?Gu?Gu.push(n):Gu=[n]:Wu=n}function n4(){if(Wu){var n=Wu,t=Gu;if(Gu=Wu=null,lP(n),t)for(n=0;n<t.length;n++)lP(t[n])}}function i4(n,t){return n(t)}function s4(){}var w2=!1;function r4(n,t,e){if(w2)return n(t,e);w2=!0;try{return i4(n,t,e)}finally{w2=!1,(Wu!==null||Gu!==null)&&(s4(),n4())}}function Ip(n,t){var e=n.stateNode;if(e===null)return null;var i=Dx(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(U(231,t,typeof e));return e}var Ub=!1;if(Zr)try{var Ef={};Object.defineProperty(Ef,"passive",{get:function(){Ub=!0}}),window.addEventListener("test",Ef,Ef),window.removeEventListener("test",Ef,Ef)}catch{Ub=!1}function cN(n,t,e,i,s,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var pp=!1,Uy=null,Hy=!1,Hb=null,uN={onError:function(n){pp=!0,Uy=n}};function hN(n,t,e,i,s,r,o,a,l){pp=!1,Uy=null,cN.apply(uN,arguments)}function dN(n,t,e,i,s,r,o,a,l){if(hN.apply(this,arguments),pp){if(pp){var u=Uy;pp=!1,Uy=null}else throw Error(U(198));Hy||(Hy=!0,Hb=u)}}function tu(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function o4(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function cP(n){if(tu(n)!==n)throw Error(U(188))}function fN(n){var t=n.alternate;if(!t){if(t=tu(n),t===null)throw Error(U(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return cP(s),n;if(r===i)return cP(s),t;r=r.sibling}throw Error(U(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===e){o=!0,e=s,i=r;break}if(a===i){o=!0,i=s,e=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===e){o=!0,e=r,i=s;break}if(a===i){o=!0,i=r,e=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(e.alternate!==i)throw Error(U(190))}if(e.tag!==3)throw Error(U(188));return e.stateNode.current===e?n:t}function a4(n){return n=fN(n),n!==null?l4(n):null}function l4(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=l4(n);if(t!==null)return t;n=n.sibling}return null}var c4=fi.unstable_scheduleCallback,uP=fi.unstable_cancelCallback,pN=fi.unstable_shouldYield,mN=fi.unstable_requestPaint,he=fi.unstable_now,gN=fi.unstable_getCurrentPriorityLevel,UE=fi.unstable_ImmediatePriority,u4=fi.unstable_UserBlockingPriority,Wy=fi.unstable_NormalPriority,yN=fi.unstable_LowPriority,h4=fi.unstable_IdlePriority,kx=null,qs=null;function vN(n){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(kx,n,void 0,(n.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:bN,wN=Math.log,xN=Math.LN2;function bN(n){return n>>>=0,n===0?32:31-(wN(n)/xN|0)|0}var p1=64,m1=4194304;function zf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gy(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var a=o&~s;a!==0?i=zf(a):(r&=o,r!==0&&(i=zf(r)))}else o=e&~s,o!==0?i=zf(o):r!==0&&(i=zf(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-ps(t),s=1<<e,i|=n[e],t&=~s;return i}function AN(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SN(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-ps(r),a=1<<o,l=s[o];l===-1?(!(a&e)||a&i)&&(s[o]=AN(a,t)):l<=t&&(n.expiredLanes|=a),r&=~a}}function Wb(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function d4(){var n=p1;return p1<<=1,!(p1&4194240)&&(p1=64),n}function x2(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function U0(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-ps(t),n[t]=e}function EN(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-ps(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function HE(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-ps(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var At=0;function f4(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var p4,WE,m4,g4,y4,Gb=!1,g1=[],Aa=null,Sa=null,Ea=null,Np=new Map,Op=new Map,vo=[],CN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hP(n,t){switch(n){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":Np.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(t.pointerId)}}function Cf(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=W0(t),t!==null&&WE(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function TN(n,t,e,i,s){switch(t){case"focusin":return Aa=Cf(Aa,n,t,e,i,s),!0;case"dragenter":return Sa=Cf(Sa,n,t,e,i,s),!0;case"mouseover":return Ea=Cf(Ea,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return Np.set(r,Cf(Np.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Op.set(r,Cf(Op.get(r)||null,n,t,e,i,s)),!0}return!1}function v4(n){var t=ll(n.target);if(t!==null){var e=tu(t);if(e!==null){if(t=e.tag,t===13){if(t=o4(e),t!==null){n.blockedOn=t,y4(n.priority,function(){m4(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Y1(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Xb(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);$b=i,e.target.dispatchEvent(i),$b=null}else return t=W0(e),t!==null&&WE(t),n.blockedOn=e,!1;t.shift()}return!0}function dP(n,t,e){Y1(n)&&e.delete(t)}function PN(){Gb=!1,Aa!==null&&Y1(Aa)&&(Aa=null),Sa!==null&&Y1(Sa)&&(Sa=null),Ea!==null&&Y1(Ea)&&(Ea=null),Np.forEach(dP),Op.forEach(dP)}function Tf(n,t){n.blockedOn===t&&(n.blockedOn=null,Gb||(Gb=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,PN)))}function Bp(n){function t(s){return Tf(s,n)}if(0<g1.length){Tf(g1[0],n);for(var e=1;e<g1.length;e++){var i=g1[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Aa!==null&&Tf(Aa,n),Sa!==null&&Tf(Sa,n),Ea!==null&&Tf(Ea,n),Np.forEach(t),Op.forEach(t),e=0;e<vo.length;e++)i=vo[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<vo.length&&(e=vo[0],e.blockedOn===null);)v4(e),e.blockedOn===null&&vo.shift()}var Xu=ao.ReactCurrentBatchConfig,Xy=!0;function _N(n,t,e,i){var s=At,r=Xu.transition;Xu.transition=null;try{At=1,GE(n,t,e,i)}finally{At=s,Xu.transition=r}}function kN(n,t,e,i){var s=At,r=Xu.transition;Xu.transition=null;try{At=4,GE(n,t,e,i)}finally{At=s,Xu.transition=r}}function GE(n,t,e,i){if(Xy){var s=Xb(n,t,e,i);if(s===null)M2(n,t,i,Yy,e),hP(n,i);else if(TN(s,n,t,e,i))i.stopPropagation();else if(hP(n,i),t&4&&-1<CN.indexOf(n)){for(;s!==null;){var r=W0(s);if(r!==null&&p4(r),r=Xb(n,t,e,i),r===null&&M2(n,t,i,Yy,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else M2(n,t,i,null,e)}}var Yy=null;function Xb(n,t,e,i){if(Yy=null,n=zE(i),n=ll(n),n!==null)if(t=tu(n),t===null)n=null;else if(e=t.tag,e===13){if(n=o4(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Yy=n,null}function w4(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gN()){case UE:return 1;case u4:return 4;case Wy:case yN:return 16;case h4:return 536870912;default:return 16}default:return 16}}var xa=null,XE=null,K1=null;function x4(){if(K1)return K1;var n,t=XE,e=t.length,i,s="value"in xa?xa.value:xa.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return K1=s.slice(n,1<i?1-i:void 0)}function q1(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function y1(){return!0}function fP(){return!1}function yi(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?y1:fP,this.isPropagationStopped=fP,this}return Jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=y1)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=y1)},persist:function(){},isPersistent:y1}),t}var mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},YE=yi(mf),H0=Jt({},mf,{view:0,detail:0}),MN=yi(H0),b2,A2,Pf,Mx=Jt({},H0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Pf&&(Pf&&n.type==="mousemove"?(b2=n.screenX-Pf.screenX,A2=n.screenY-Pf.screenY):A2=b2=0,Pf=n),b2)},movementY:function(n){return"movementY"in n?n.movementY:A2}}),pP=yi(Mx),LN=Jt({},Mx,{dataTransfer:0}),RN=yi(LN),DN=Jt({},H0,{relatedTarget:0}),S2=yi(DN),FN=Jt({},mf,{animationName:0,elapsedTime:0,pseudoElement:0}),IN=yi(FN),NN=Jt({},mf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ON=yi(NN),BN=Jt({},mf,{data:0}),mP=yi(BN),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$N={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zN(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=$N[n])?!!t[n]:!1}function KE(){return zN}var UN=Jt({},H0,{key:function(n){if(n.key){var t=jN[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=q1(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KE,charCode:function(n){return n.type==="keypress"?q1(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?q1(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),HN=yi(UN),WN=Jt({},Mx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gP=yi(WN),GN=Jt({},H0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KE}),XN=yi(GN),YN=Jt({},mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),KN=yi(YN),qN=Jt({},Mx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),QN=yi(qN),ZN=[9,13,27,32],qE=Zr&&"CompositionEvent"in window,mp=null;Zr&&"documentMode"in document&&(mp=document.documentMode);var JN=Zr&&"TextEvent"in window&&!mp,b4=Zr&&(!qE||mp&&8<mp&&11>=mp),yP=String.fromCharCode(32),vP=!1;function A4(n,t){switch(n){case"keyup":return ZN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function S4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xu=!1;function tO(n,t){switch(n){case"compositionend":return S4(t);case"keypress":return t.which!==32?null:(vP=!0,yP);case"textInput":return n=t.data,n===yP&&vP?null:n;default:return null}}function eO(n,t){if(xu)return n==="compositionend"||!qE&&A4(n,t)?(n=x4(),K1=XE=xa=null,xu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return b4&&t.locale!=="ko"?null:t.data;default:return null}}var nO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wP(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!nO[n.type]:t==="textarea"}function E4(n,t,e,i){e4(i),t=Ky(t,"onChange"),0<t.length&&(e=new YE("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var gp=null,jp=null;function iO(n){I4(n,0)}function Lx(n){var t=Su(n);if(Y3(t))return n}function sO(n,t){if(n==="change")return t}var C4=!1;if(Zr){var E2;if(Zr){var C2="oninput"in document;if(!C2){var xP=document.createElement("div");xP.setAttribute("oninput","return;"),C2=typeof xP.oninput=="function"}E2=C2}else E2=!1;C4=E2&&(!document.documentMode||9<document.documentMode)}function bP(){gp&&(gp.detachEvent("onpropertychange",T4),jp=gp=null)}function T4(n){if(n.propertyName==="value"&&Lx(jp)){var t=[];E4(t,jp,n,zE(n)),r4(iO,t)}}function rO(n,t,e){n==="focusin"?(bP(),gp=t,jp=e,gp.attachEvent("onpropertychange",T4)):n==="focusout"&&bP()}function oO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Lx(jp)}function aO(n,t){if(n==="click")return Lx(t)}function lO(n,t){if(n==="input"||n==="change")return Lx(t)}function cO(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var gs=typeof Object.is=="function"?Object.is:cO;function Vp(n,t){if(gs(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!kb.call(t,s)||!gs(n[s],t[s]))return!1}return!0}function AP(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function SP(n,t){var e=AP(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=AP(e)}}function P4(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?P4(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function _4(){for(var n=window,t=zy();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=zy(n.document)}return t}function QE(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function uO(n){var t=_4(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&P4(e.ownerDocument.documentElement,e)){if(i!==null&&QE(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=SP(e,r);var o=SP(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hO=Zr&&"documentMode"in document&&11>=document.documentMode,bu=null,Yb=null,yp=null,Kb=!1;function EP(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Kb||bu==null||bu!==zy(i)||(i=bu,"selectionStart"in i&&QE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),yp&&Vp(yp,i)||(yp=i,i=Ky(Yb,"onSelect"),0<i.length&&(t=new YE("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=bu)))}function v1(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Au={animationend:v1("Animation","AnimationEnd"),animationiteration:v1("Animation","AnimationIteration"),animationstart:v1("Animation","AnimationStart"),transitionend:v1("Transition","TransitionEnd")},T2={},k4={};Zr&&(k4=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function Rx(n){if(T2[n])return T2[n];if(!Au[n])return n;var t=Au[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in k4)return T2[n]=t[e];return n}var M4=Rx("animationend"),L4=Rx("animationiteration"),R4=Rx("animationstart"),D4=Rx("transitionend"),F4=new Map,CP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function za(n,t){F4.set(n,t),Jc(t,[n])}for(var P2=0;P2<CP.length;P2++){var _2=CP[P2],dO=_2.toLowerCase(),fO=_2[0].toUpperCase()+_2.slice(1);za(dO,"on"+fO)}za(M4,"onAnimationEnd");za(L4,"onAnimationIteration");za(R4,"onAnimationStart");za("dblclick","onDoubleClick");za("focusin","onFocus");za("focusout","onBlur");za(D4,"onTransitionEnd");Jd("onMouseEnter",["mouseout","mouseover"]);Jd("onMouseLeave",["mouseout","mouseover"]);Jd("onPointerEnter",["pointerout","pointerover"]);Jd("onPointerLeave",["pointerout","pointerover"]);Jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uf));function TP(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,dN(i,t,void 0,n),n.currentTarget=null}function I4(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;TP(s,a,u),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;TP(s,a,u),r=l}}}if(Hy)throw n=Hb,Hy=!1,Hb=null,n}function Nt(n,t){var e=t[tA];e===void 0&&(e=t[tA]=new Set);var i=n+"__bubble";e.has(i)||(N4(t,n,2,!1),e.add(i))}function k2(n,t,e){var i=0;t&&(i|=4),N4(e,n,i,t)}var w1="_reactListening"+Math.random().toString(36).slice(2);function $p(n){if(!n[w1]){n[w1]=!0,U3.forEach(function(e){e!=="selectionchange"&&(pO.has(e)||k2(e,!1,n),k2(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[w1]||(t[w1]=!0,k2("selectionchange",!1,t))}}function N4(n,t,e,i){switch(w4(t)){case 1:var s=_N;break;case 4:s=kN;break;default:s=GE}e=s.bind(null,t,e,n),s=void 0,!Ub||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function M2(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ll(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}r4(function(){var u=r,h=zE(e),d=[];t:{var f=F4.get(n);if(f!==void 0){var p=YE,g=n;switch(n){case"keypress":if(q1(e)===0)break t;case"keydown":case"keyup":p=HN;break;case"focusin":g="focus",p=S2;break;case"focusout":g="blur",p=S2;break;case"beforeblur":case"afterblur":p=S2;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=RN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XN;break;case M4:case L4:case R4:p=IN;break;case D4:p=KN;break;case"scroll":p=MN;break;case"wheel":p=QN;break;case"copy":case"cut":case"paste":p=ON;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gP}var y=(t&4)!==0,A=!y&&n==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,w;v!==null;){w=v;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,m!==null&&(S=Ip(v,m),S!=null&&y.push(zp(v,S,w)))),A)break;v=v.return}0<y.length&&(f=new p(f,g,null,e,h),d.push({event:f,listeners:y}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==$b&&(g=e.relatedTarget||e.fromElement)&&(ll(g)||g[Jr]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=e.relatedTarget||e.toElement,p=u,g=g?ll(g):null,g!==null&&(A=tu(g),g!==A||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(y=pP,S="onMouseLeave",m="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(y=gP,S="onPointerLeave",m="onPointerEnter",v="pointer"),A=p==null?f:Su(p),w=g==null?f:Su(g),f=new y(S,v+"leave",p,e,h),f.target=A,f.relatedTarget=w,S=null,ll(h)===u&&(y=new y(m,v+"enter",g,e,h),y.target=w,y.relatedTarget=A,S=y),A=S,p&&g)e:{for(y=p,m=g,v=0,w=y;w;w=au(w))v++;for(w=0,S=m;S;S=au(S))w++;for(;0<v-w;)y=au(y),v--;for(;0<w-v;)m=au(m),w--;for(;v--;){if(y===m||m!==null&&y===m.alternate)break e;y=au(y),m=au(m)}y=null}else y=null;p!==null&&PP(d,f,p,y,!1),g!==null&&A!==null&&PP(d,A,g,y,!0)}}t:{if(f=u?Su(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=sO;else if(wP(f))if(C4)T=lO;else{T=oO;var P=rO}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=aO);if(T&&(T=T(n,u))){E4(d,T,e,h);break t}P&&P(n,f,u),n==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Nb(f,"number",f.value)}switch(P=u?Su(u):window,n){case"focusin":(wP(P)||P.contentEditable==="true")&&(bu=P,Yb=u,yp=null);break;case"focusout":yp=Yb=bu=null;break;case"mousedown":Kb=!0;break;case"contextmenu":case"mouseup":case"dragend":Kb=!1,EP(d,e,h);break;case"selectionchange":if(hO)break;case"keydown":case"keyup":EP(d,e,h)}var _;if(qE)t:{switch(n){case"compositionstart":var k="onCompositionStart";break t;case"compositionend":k="onCompositionEnd";break t;case"compositionupdate":k="onCompositionUpdate";break t}k=void 0}else xu?A4(n,e)&&(k="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(k="onCompositionStart");k&&(b4&&e.locale!=="ko"&&(xu||k!=="onCompositionStart"?k==="onCompositionEnd"&&xu&&(_=x4()):(xa=h,XE="value"in xa?xa.value:xa.textContent,xu=!0)),P=Ky(u,k),0<P.length&&(k=new mP(k,n,null,e,h),d.push({event:k,listeners:P}),_?k.data=_:(_=S4(e),_!==null&&(k.data=_)))),(_=JN?tO(n,e):eO(n,e))&&(u=Ky(u,"onBeforeInput"),0<u.length&&(h=new mP("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=_))}I4(d,t)})}function zp(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Ky(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Ip(n,e),r!=null&&i.unshift(zp(n,r,s)),r=Ip(n,t),r!=null&&i.push(zp(n,r,s))),n=n.return}return i}function au(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function PP(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var a=e,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,s?(l=Ip(e,r),l!=null&&o.unshift(zp(e,l,a))):s||(l=Ip(e,r),l!=null&&o.push(zp(e,l,a)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var mO=/\r\n?/g,gO=/\u0000|\uFFFD/g;function _P(n){return(typeof n=="string"?n:""+n).replace(mO,`
`).replace(gO,"")}function x1(n,t,e){if(t=_P(t),_P(n)!==t&&e)throw Error(U(425))}function qy(){}var qb=null,Qb=null;function Zb(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jb=typeof setTimeout=="function"?setTimeout:void 0,yO=typeof clearTimeout=="function"?clearTimeout:void 0,kP=typeof Promise=="function"?Promise:void 0,vO=typeof queueMicrotask=="function"?queueMicrotask:typeof kP<"u"?function(n){return kP.resolve(null).then(n).catch(wO)}:Jb;function wO(n){setTimeout(function(){throw n})}function L2(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),Bp(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);Bp(t)}function Ca(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function MP(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var gf=Math.random().toString(36).slice(2),Ys="__reactFiber$"+gf,Up="__reactProps$"+gf,Jr="__reactContainer$"+gf,tA="__reactEvents$"+gf,xO="__reactListeners$"+gf,bO="__reactHandles$"+gf;function ll(n){var t=n[Ys];if(t)return t;for(var e=n.parentNode;e;){if(t=e[Jr]||e[Ys]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=MP(n);n!==null;){if(e=n[Ys])return e;n=MP(n)}return t}n=e,e=n.parentNode}return null}function W0(n){return n=n[Ys]||n[Jr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Su(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(U(33))}function Dx(n){return n[Up]||null}var eA=[],Eu=-1;function Ua(n){return{current:n}}function Ot(n){0>Eu||(n.current=eA[Eu],eA[Eu]=null,Eu--)}function Dt(n,t){Eu++,eA[Eu]=n.current,n.current=t}var Ia={},fn=Ua(Ia),jn=Ua(!1),Gc=Ia;function tf(n,t){var e=n.type.contextTypes;if(!e)return Ia;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function Vn(n){return n=n.childContextTypes,n!=null}function Qy(){Ot(jn),Ot(fn)}function LP(n,t,e){if(fn.current!==Ia)throw Error(U(168));Dt(fn,t),Dt(jn,e)}function O4(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(U(108,rN(n)||"Unknown",s));return Jt({},e,i)}function Zy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ia,Gc=fn.current,Dt(fn,n),Dt(jn,jn.current),!0}function RP(n,t,e){var i=n.stateNode;if(!i)throw Error(U(169));e?(n=O4(n,t,Gc),i.__reactInternalMemoizedMergedChildContext=n,Ot(jn),Ot(fn),Dt(fn,n)):Ot(jn),Dt(jn,e)}var lr=null,Fx=!1,R2=!1;function B4(n){lr===null?lr=[n]:lr.push(n)}function AO(n){Fx=!0,B4(n)}function Ha(){if(!R2&&lr!==null){R2=!0;var n=0,t=At;try{var e=lr;for(At=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}lr=null,Fx=!1}catch(s){throw lr!==null&&(lr=lr.slice(n+1)),c4(UE,Ha),s}finally{At=t,R2=!1}}return null}var Cu=[],Tu=0,Jy=null,tv=0,Oi=[],Bi=0,Xc=null,Gr=1,Xr="";function qa(n,t){Cu[Tu++]=tv,Cu[Tu++]=Jy,Jy=n,tv=t}function j4(n,t,e){Oi[Bi++]=Gr,Oi[Bi++]=Xr,Oi[Bi++]=Xc,Xc=n;var i=Gr;n=Xr;var s=32-ps(i)-1;i&=~(1<<s),e+=1;var r=32-ps(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Gr=1<<32-ps(t)+s|e<<s|i,Xr=r+n}else Gr=1<<r|e<<s|i,Xr=n}function ZE(n){n.return!==null&&(qa(n,1),j4(n,1,0))}function JE(n){for(;n===Jy;)Jy=Cu[--Tu],Cu[Tu]=null,tv=Cu[--Tu],Cu[Tu]=null;for(;n===Xc;)Xc=Oi[--Bi],Oi[Bi]=null,Xr=Oi[--Bi],Oi[Bi]=null,Gr=Oi[--Bi],Oi[Bi]=null}var di=null,hi=null,Ut=!1,ds=null;function V4(n,t){var e=Vi(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function DP(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,di=n,hi=Ca(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,di=n,hi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=Xc!==null?{id:Gr,overflow:Xr}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Vi(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,di=n,hi=null,!0):!1;default:return!1}}function nA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function iA(n){if(Ut){var t=hi;if(t){var e=t;if(!DP(n,t)){if(nA(n))throw Error(U(418));t=Ca(e.nextSibling);var i=di;t&&DP(n,t)?V4(i,e):(n.flags=n.flags&-4097|2,Ut=!1,di=n)}}else{if(nA(n))throw Error(U(418));n.flags=n.flags&-4097|2,Ut=!1,di=n}}}function FP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;di=n}function b1(n){if(n!==di)return!1;if(!Ut)return FP(n),Ut=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!Zb(n.type,n.memoizedProps)),t&&(t=hi)){if(nA(n))throw $4(),Error(U(418));for(;t;)V4(n,t),t=Ca(t.nextSibling)}if(FP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(U(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){hi=Ca(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}hi=null}}else hi=di?Ca(n.stateNode.nextSibling):null;return!0}function $4(){for(var n=hi;n;)n=Ca(n.nextSibling)}function ef(){hi=di=null,Ut=!1}function tC(n){ds===null?ds=[n]:ds.push(n)}var SO=ao.ReactCurrentBatchConfig;function _f(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(U(309));var i=e.stateNode}if(!i)throw Error(U(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(U(284));if(!e._owner)throw Error(U(290,n))}return n}function A1(n,t){throw n=Object.prototype.toString.call(t),Error(U(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function IP(n){var t=n._init;return t(n._payload)}function z4(n){function t(m,v){if(n){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function e(m,v){if(!n)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function i(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=ka(m,v),m.index=0,m.sibling=null,m}function r(m,v,w){return m.index=w,n?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,v,w,S){return v===null||v.tag!==6?(v=j2(w,m.mode,S),v.return=m,v):(v=s(v,w),v.return=m,v)}function l(m,v,w,S){var T=w.type;return T===wu?h(m,v,w.props.children,S,w.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===mo&&IP(T)===v.type)?(S=s(v,w.props),S.ref=_f(m,v,w),S.return=m,S):(S=iy(w.type,w.key,w.props,null,m.mode,S),S.ref=_f(m,v,w),S.return=m,S)}function u(m,v,w,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=V2(w,m.mode,S),v.return=m,v):(v=s(v,w.children||[]),v.return=m,v)}function h(m,v,w,S,T){return v===null||v.tag!==7?(v=Uc(w,m.mode,S,T),v.return=m,v):(v=s(v,w),v.return=m,v)}function d(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=j2(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case h1:return w=iy(v.type,v.key,v.props,null,m.mode,w),w.ref=_f(m,null,v),w.return=m,w;case vu:return v=V2(v,m.mode,w),v.return=m,v;case mo:var S=v._init;return d(m,S(v._payload),w)}if($f(v)||Sf(v))return v=Uc(v,m.mode,w,null),v.return=m,v;A1(m,v)}return null}function f(m,v,w,S){var T=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(m,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case h1:return w.key===T?l(m,v,w,S):null;case vu:return w.key===T?u(m,v,w,S):null;case mo:return T=w._init,f(m,v,T(w._payload),S)}if($f(w)||Sf(w))return T!==null?null:h(m,v,w,S,null);A1(m,w)}return null}function p(m,v,w,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(w)||null,a(v,m,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case h1:return m=m.get(S.key===null?w:S.key)||null,l(v,m,S,T);case vu:return m=m.get(S.key===null?w:S.key)||null,u(v,m,S,T);case mo:var P=S._init;return p(m,v,w,P(S._payload),T)}if($f(S)||Sf(S))return m=m.get(w)||null,h(v,m,S,T,null);A1(v,S)}return null}function g(m,v,w,S){for(var T=null,P=null,_=v,k=v=0,L=null;_!==null&&k<w.length;k++){_.index>k?(L=_,_=null):L=_.sibling;var D=f(m,_,w[k],S);if(D===null){_===null&&(_=L);break}n&&_&&D.alternate===null&&t(m,_),v=r(D,v,k),P===null?T=D:P.sibling=D,P=D,_=L}if(k===w.length)return e(m,_),Ut&&qa(m,k),T;if(_===null){for(;k<w.length;k++)_=d(m,w[k],S),_!==null&&(v=r(_,v,k),P===null?T=_:P.sibling=_,P=_);return Ut&&qa(m,k),T}for(_=i(m,_);k<w.length;k++)L=p(_,m,k,w[k],S),L!==null&&(n&&L.alternate!==null&&_.delete(L.key===null?k:L.key),v=r(L,v,k),P===null?T=L:P.sibling=L,P=L);return n&&_.forEach(function(R){return t(m,R)}),Ut&&qa(m,k),T}function y(m,v,w,S){var T=Sf(w);if(typeof T!="function")throw Error(U(150));if(w=T.call(w),w==null)throw Error(U(151));for(var P=T=null,_=v,k=v=0,L=null,D=w.next();_!==null&&!D.done;k++,D=w.next()){_.index>k?(L=_,_=null):L=_.sibling;var R=f(m,_,D.value,S);if(R===null){_===null&&(_=L);break}n&&_&&R.alternate===null&&t(m,_),v=r(R,v,k),P===null?T=R:P.sibling=R,P=R,_=L}if(D.done)return e(m,_),Ut&&qa(m,k),T;if(_===null){for(;!D.done;k++,D=w.next())D=d(m,D.value,S),D!==null&&(v=r(D,v,k),P===null?T=D:P.sibling=D,P=D);return Ut&&qa(m,k),T}for(_=i(m,_);!D.done;k++,D=w.next())D=p(_,m,k,D.value,S),D!==null&&(n&&D.alternate!==null&&_.delete(D.key===null?k:D.key),v=r(D,v,k),P===null?T=D:P.sibling=D,P=D);return n&&_.forEach(function(I){return t(m,I)}),Ut&&qa(m,k),T}function A(m,v,w,S){if(typeof w=="object"&&w!==null&&w.type===wu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case h1:t:{for(var T=w.key,P=v;P!==null;){if(P.key===T){if(T=w.type,T===wu){if(P.tag===7){e(m,P.sibling),v=s(P,w.props.children),v.return=m,m=v;break t}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===mo&&IP(T)===P.type){e(m,P.sibling),v=s(P,w.props),v.ref=_f(m,P,w),v.return=m,m=v;break t}e(m,P);break}else t(m,P);P=P.sibling}w.type===wu?(v=Uc(w.props.children,m.mode,S,w.key),v.return=m,m=v):(S=iy(w.type,w.key,w.props,null,m.mode,S),S.ref=_f(m,v,w),S.return=m,m=S)}return o(m);case vu:t:{for(P=w.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){e(m,v.sibling),v=s(v,w.children||[]),v.return=m,m=v;break t}else{e(m,v);break}else t(m,v);v=v.sibling}v=V2(w,m.mode,S),v.return=m,m=v}return o(m);case mo:return P=w._init,A(m,v,P(w._payload),S)}if($f(w))return g(m,v,w,S);if(Sf(w))return y(m,v,w,S);A1(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(e(m,v.sibling),v=s(v,w),v.return=m,m=v):(e(m,v),v=j2(w,m.mode,S),v.return=m,m=v),o(m)):e(m,v)}return A}var nf=z4(!0),U4=z4(!1),ev=Ua(null),nv=null,Pu=null,eC=null;function nC(){eC=Pu=nv=null}function iC(n){var t=ev.current;Ot(ev),n._currentValue=t}function sA(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function Yu(n,t){nv=n,eC=Pu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(On=!0),n.firstContext=null)}function Hi(n){var t=n._currentValue;if(eC!==n)if(n={context:n,memoizedValue:t,next:null},Pu===null){if(nv===null)throw Error(U(308));Pu=n,nv.dependencies={lanes:0,firstContext:n}}else Pu=Pu.next=n;return t}var cl=null;function sC(n){cl===null?cl=[n]:cl.push(n)}function H4(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,sC(t)):(e.next=s.next,s.next=e),t.interleaved=e,to(n,i)}function to(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var go=!1;function rC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W4(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Ta(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,pt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,to(n,e)}return s=i.interleaved,s===null?(t.next=t,sC(i)):(t.next=s.next,s.next=t),i.interleaved=t,to(n,e)}function Q1(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,HE(n,e)}}function NP(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function iv(n,t,e,i){var s=n.updateQueue;go=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,h=u=l=null,a=r;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=n,y=a;switch(f=t,p=e,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(p,d,f);break t}d=g;break t;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break t;d=Jt({},d,f);break t;case 2:go=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);Kc|=o,n.lanes=o,n.memoizedState=d}}function OP(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(U(191,s));s.call(i)}}}var G0={},Qs=Ua(G0),Hp=Ua(G0),Wp=Ua(G0);function ul(n){if(n===G0)throw Error(U(174));return n}function oC(n,t){switch(Dt(Wp,t),Dt(Hp,n),Dt(Qs,G0),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bb(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=Bb(t,n)}Ot(Qs),Dt(Qs,t)}function sf(){Ot(Qs),Ot(Hp),Ot(Wp)}function G4(n){ul(Wp.current);var t=ul(Qs.current),e=Bb(t,n.type);t!==e&&(Dt(Hp,n),Dt(Qs,e))}function aC(n){Hp.current===n&&(Ot(Qs),Ot(Hp))}var Xt=Ua(0);function sv(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var D2=[];function lC(){for(var n=0;n<D2.length;n++)D2[n]._workInProgressVersionPrimary=null;D2.length=0}var Z1=ao.ReactCurrentDispatcher,F2=ao.ReactCurrentBatchConfig,Yc=0,Qt=null,Ee=null,Ne=null,rv=!1,vp=!1,Gp=0,EO=0;function Ze(){throw Error(U(321))}function cC(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!gs(n[e],t[e]))return!1;return!0}function uC(n,t,e,i,s,r){if(Yc=r,Qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Z1.current=n===null||n.memoizedState===null?_O:kO,n=e(i,s),vp){r=0;do{if(vp=!1,Gp=0,25<=r)throw Error(U(301));r+=1,Ne=Ee=null,t.updateQueue=null,Z1.current=MO,n=e(i,s)}while(vp)}if(Z1.current=ov,t=Ee!==null&&Ee.next!==null,Yc=0,Ne=Ee=Qt=null,rv=!1,t)throw Error(U(300));return n}function hC(){var n=Gp!==0;return Gp=0,n}function Ss(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?Qt.memoizedState=Ne=n:Ne=Ne.next=n,Ne}function Wi(){if(Ee===null){var n=Qt.alternate;n=n!==null?n.memoizedState:null}else n=Ee.next;var t=Ne===null?Qt.memoizedState:Ne.next;if(t!==null)Ne=t,Ee=n;else{if(n===null)throw Error(U(310));Ee=n,n={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ne===null?Qt.memoizedState=Ne=n:Ne=Ne.next=n}return Ne}function Xp(n,t){return typeof t=="function"?t(n):t}function I2(n){var t=Wi(),e=t.queue;if(e===null)throw Error(U(311));e.lastRenderedReducer=n;var i=Ee,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,u=r;do{var h=u.lane;if((Yc&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Qt.lanes|=h,Kc|=h}u=u.next}while(u!==null&&u!==r);l===null?o=i:l.next=a,gs(i,t.memoizedState)||(On=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,Qt.lanes|=r,Kc|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function N2(n){var t=Wi(),e=t.queue;if(e===null)throw Error(U(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);gs(r,t.memoizedState)||(On=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function X4(){}function Y4(n,t){var e=Qt,i=Wi(),s=t(),r=!gs(i.memoizedState,s);if(r&&(i.memoizedState=s,On=!0),i=i.queue,dC(Q4.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||Ne!==null&&Ne.memoizedState.tag&1){if(e.flags|=2048,Yp(9,q4.bind(null,e,i,s,t),void 0,null),Oe===null)throw Error(U(349));Yc&30||K4(e,t,s)}return s}function K4(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function q4(n,t,e,i){t.value=e,t.getSnapshot=i,Z4(t)&&J4(n)}function Q4(n,t,e){return e(function(){Z4(t)&&J4(n)})}function Z4(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!gs(n,e)}catch{return!0}}function J4(n){var t=to(n,1);t!==null&&ms(t,n,1,-1)}function BP(n){var t=Ss();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:n},t.queue=n,n=n.dispatch=PO.bind(null,Qt,n),[t.memoizedState,n]}function Yp(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=Qt.updateQueue,t===null?(t={lastEffect:null,stores:null},Qt.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function tL(){return Wi().memoizedState}function J1(n,t,e,i){var s=Ss();Qt.flags|=n,s.memoizedState=Yp(1|t,e,void 0,i===void 0?null:i)}function Ix(n,t,e,i){var s=Wi();i=i===void 0?null:i;var r=void 0;if(Ee!==null){var o=Ee.memoizedState;if(r=o.destroy,i!==null&&cC(i,o.deps)){s.memoizedState=Yp(t,e,r,i);return}}Qt.flags|=n,s.memoizedState=Yp(1|t,e,r,i)}function jP(n,t){return J1(8390656,8,n,t)}function dC(n,t){return Ix(2048,8,n,t)}function eL(n,t){return Ix(4,2,n,t)}function nL(n,t){return Ix(4,4,n,t)}function iL(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function sL(n,t,e){return e=e!=null?e.concat([n]):null,Ix(4,4,iL.bind(null,t,n),e)}function fC(){}function rL(n,t){var e=Wi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&cC(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function oL(n,t){var e=Wi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&cC(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function aL(n,t,e){return Yc&21?(gs(e,t)||(e=d4(),Qt.lanes|=e,Kc|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,On=!0),n.memoizedState=e)}function CO(n,t){var e=At;At=e!==0&&4>e?e:4,n(!0);var i=F2.transition;F2.transition={};try{n(!1),t()}finally{At=e,F2.transition=i}}function lL(){return Wi().memoizedState}function TO(n,t,e){var i=_a(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},cL(n))uL(t,e);else if(e=H4(n,t,e,i),e!==null){var s=Sn();ms(e,n,i,s),hL(e,t,i)}}function PO(n,t,e){var i=_a(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(cL(n))uL(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,e);if(s.hasEagerState=!0,s.eagerState=a,gs(a,o)){var l=t.interleaved;l===null?(s.next=s,sC(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}e=H4(n,t,s,i),e!==null&&(s=Sn(),ms(e,n,i,s),hL(e,t,i))}}function cL(n){var t=n.alternate;return n===Qt||t!==null&&t===Qt}function uL(n,t){vp=rv=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function hL(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,HE(n,e)}}var ov={readContext:Hi,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},_O={readContext:Hi,useCallback:function(n,t){return Ss().memoizedState=[n,t===void 0?null:t],n},useContext:Hi,useEffect:jP,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,J1(4194308,4,iL.bind(null,t,n),e)},useLayoutEffect:function(n,t){return J1(4194308,4,n,t)},useInsertionEffect:function(n,t){return J1(4,2,n,t)},useMemo:function(n,t){var e=Ss();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Ss();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=TO.bind(null,Qt,n),[i.memoizedState,n]},useRef:function(n){var t=Ss();return n={current:n},t.memoizedState=n},useState:BP,useDebugValue:fC,useDeferredValue:function(n){return Ss().memoizedState=n},useTransition:function(){var n=BP(!1),t=n[0];return n=CO.bind(null,n[1]),Ss().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=Qt,s=Ss();if(Ut){if(e===void 0)throw Error(U(407));e=e()}else{if(e=t(),Oe===null)throw Error(U(349));Yc&30||K4(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,jP(Q4.bind(null,i,r,n),[n]),i.flags|=2048,Yp(9,q4.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Ss(),t=Oe.identifierPrefix;if(Ut){var e=Xr,i=Gr;e=(i&~(1<<32-ps(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=Gp++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=EO++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},kO={readContext:Hi,useCallback:rL,useContext:Hi,useEffect:dC,useImperativeHandle:sL,useInsertionEffect:eL,useLayoutEffect:nL,useMemo:oL,useReducer:I2,useRef:tL,useState:function(){return I2(Xp)},useDebugValue:fC,useDeferredValue:function(n){var t=Wi();return aL(t,Ee.memoizedState,n)},useTransition:function(){var n=I2(Xp)[0],t=Wi().memoizedState;return[n,t]},useMutableSource:X4,useSyncExternalStore:Y4,useId:lL,unstable_isNewReconciler:!1},MO={readContext:Hi,useCallback:rL,useContext:Hi,useEffect:dC,useImperativeHandle:sL,useInsertionEffect:eL,useLayoutEffect:nL,useMemo:oL,useReducer:N2,useRef:tL,useState:function(){return N2(Xp)},useDebugValue:fC,useDeferredValue:function(n){var t=Wi();return Ee===null?t.memoizedState=n:aL(t,Ee.memoizedState,n)},useTransition:function(){var n=N2(Xp)[0],t=Wi().memoizedState;return[n,t]},useMutableSource:X4,useSyncExternalStore:Y4,useId:lL,unstable_isNewReconciler:!1};function qi(n,t){if(n&&n.defaultProps){t=Jt({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function rA(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:Jt({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Nx={isMounted:function(n){return(n=n._reactInternals)?tu(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Sn(),s=_a(n),r=Kr(i,s);r.payload=t,e!=null&&(r.callback=e),t=Ta(n,r,s),t!==null&&(ms(t,n,s,i),Q1(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Sn(),s=_a(n),r=Kr(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Ta(n,r,s),t!==null&&(ms(t,n,s,i),Q1(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Sn(),i=_a(n),s=Kr(e,i);s.tag=2,t!=null&&(s.callback=t),t=Ta(n,s,i),t!==null&&(ms(t,n,i,e),Q1(t,n,i))}};function VP(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!Vp(e,i)||!Vp(s,r):!0}function dL(n,t,e){var i=!1,s=Ia,r=t.contextType;return typeof r=="object"&&r!==null?r=Hi(r):(s=Vn(t)?Gc:fn.current,i=t.contextTypes,r=(i=i!=null)?tf(n,s):Ia),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Nx,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function $P(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&Nx.enqueueReplaceState(t,t.state,null)}function oA(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},rC(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=Hi(r):(r=Vn(t)?Gc:fn.current,s.context=tf(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(rA(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Nx.enqueueReplaceState(s,s.state,null),iv(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function rf(n,t){try{var e="",i=t;do e+=sN(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function O2(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function aA(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var LO=typeof WeakMap=="function"?WeakMap:Map;function fL(n,t,e){e=Kr(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){lv||(lv=!0,yA=i),aA(n,t)},e}function pL(n,t,e){e=Kr(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){aA(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){aA(n,t),typeof i!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function zP(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new LO;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=WO.bind(null,n,t,e),t.then(n,n))}function UP(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function HP(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Kr(-1,1),t.tag=2,Ta(e,t,1))),e.lanes|=1),n)}var RO=ao.ReactCurrentOwner,On=!1;function bn(n,t,e,i){t.child=n===null?U4(t,null,e,i):nf(t,n.child,e,i)}function WP(n,t,e,i,s){e=e.render;var r=t.ref;return Yu(t,s),i=uC(n,t,e,i,r,s),e=hC(),n!==null&&!On?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(Ut&&e&&ZE(t),t.flags|=1,bn(n,t,i,s),t.child)}function GP(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!bC(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,mL(n,t,r,i,s)):(n=iy(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:Vp,e(o,i)&&n.ref===t.ref)return eo(n,t,s)}return t.flags|=1,n=ka(r,i),n.ref=t.ref,n.return=t,t.child=n}function mL(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if(Vp(r,i)&&n.ref===t.ref)if(On=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(On=!0);else return t.lanes=n.lanes,eo(n,t,s)}return lA(n,t,e,i,s)}function gL(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(ku,ci),ci|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Dt(ku,ci),ci|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,Dt(ku,ci),ci|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,Dt(ku,ci),ci|=i;return bn(n,t,s,e),t.child}function yL(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function lA(n,t,e,i,s){var r=Vn(e)?Gc:fn.current;return r=tf(t,r),Yu(t,s),e=uC(n,t,e,i,r,s),i=hC(),n!==null&&!On?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,eo(n,t,s)):(Ut&&i&&ZE(t),t.flags|=1,bn(n,t,e,s),t.child)}function XP(n,t,e,i,s){if(Vn(e)){var r=!0;Zy(t)}else r=!1;if(Yu(t,s),t.stateNode===null)ty(n,t),dL(t,e,i),oA(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Hi(u):(u=Vn(e)?Gc:fn.current,u=tf(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&$P(t,o,i,u),go=!1;var f=t.memoizedState;o.state=f,iv(t,i,o,s),l=t.memoizedState,a!==i||f!==l||jn.current||go?(typeof h=="function"&&(rA(t,e,h,i),l=t.memoizedState),(a=go||VP(t,e,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,W4(n,t),a=t.memoizedProps,u=t.type===t.elementType?a:qi(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=Hi(l):(l=Vn(e)?Gc:fn.current,l=tf(t,l));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&$P(t,o,i,l),go=!1,f=t.memoizedState,o.state=f,iv(t,i,o,s);var g=t.memoizedState;a!==d||f!==g||jn.current||go?(typeof p=="function"&&(rA(t,e,p,i),g=t.memoizedState),(u=go||VP(t,e,u,i,f,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return cA(n,t,e,i,r,s)}function cA(n,t,e,i,s,r){yL(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&RP(t,e,!1),eo(n,t,r);i=t.stateNode,RO.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=nf(t,n.child,null,r),t.child=nf(t,null,a,r)):bn(n,t,a,r),t.memoizedState=i.state,s&&RP(t,e,!0),t.child}function vL(n){var t=n.stateNode;t.pendingContext?LP(n,t.pendingContext,t.pendingContext!==t.context):t.context&&LP(n,t.context,!1),oC(n,t.containerInfo)}function YP(n,t,e,i,s){return ef(),tC(s),t.flags|=256,bn(n,t,e,i),t.child}var uA={dehydrated:null,treeContext:null,retryLane:0};function hA(n){return{baseLanes:n,cachePool:null,transitions:null}}function wL(n,t,e){var i=t.pendingProps,s=Xt.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Dt(Xt,s&1),n===null)return iA(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=jx(o,i,0,null),n=Uc(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=hA(e),t.memoizedState=uA,n):pC(t,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DO(n,t,o,i,a,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=ka(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ka(a,r):(r=Uc(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?hA(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=uA,i}return r=n.child,n=r.sibling,i=ka(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function pC(n,t){return t=jx({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function S1(n,t,e,i){return i!==null&&tC(i),nf(t,n.child,null,e),n=pC(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function DO(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=O2(Error(U(422))),S1(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=jx({mode:"visible",children:i.children},s,0,null),r=Uc(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&nf(t,n.child,null,o),t.child.memoizedState=hA(o),t.memoizedState=uA,r);if(!(t.mode&1))return S1(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(U(419)),i=O2(r,i,void 0),S1(n,t,o,i)}if(a=(o&n.childLanes)!==0,On||a){if(i=Oe,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,to(n,s),ms(i,n,s,-1))}return xC(),i=O2(Error(U(421))),S1(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=GO.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,hi=Ca(s.nextSibling),di=t,Ut=!0,ds=null,n!==null&&(Oi[Bi++]=Gr,Oi[Bi++]=Xr,Oi[Bi++]=Xc,Gr=n.id,Xr=n.overflow,Xc=t),t=pC(t,i.children),t.flags|=4096,t)}function KP(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),sA(n.return,t,e)}function B2(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function xL(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(bn(n,t,i.children,e),i=Xt.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&KP(n,e,t);else if(n.tag===19)KP(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Dt(Xt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&sv(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),B2(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&sv(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}B2(t,!0,e,null,r);break;case"together":B2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ty(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function eo(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Kc|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(U(153));if(t.child!==null){for(n=t.child,e=ka(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=ka(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function FO(n,t,e){switch(t.tag){case 3:vL(t),ef();break;case 5:G4(t);break;case 1:Vn(t.type)&&Zy(t);break;case 4:oC(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Dt(ev,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Dt(Xt,Xt.current&1),t.flags|=128,null):e&t.child.childLanes?wL(n,t,e):(Dt(Xt,Xt.current&1),n=eo(n,t,e),n!==null?n.sibling:null);Dt(Xt,Xt.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return xL(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Xt,Xt.current),i)break;return null;case 22:case 23:return t.lanes=0,gL(n,t,e)}return eo(n,t,e)}var bL,dA,AL,SL;bL=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};dA=function(){};AL=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,ul(Qs.current);var r=null;switch(e){case"input":s=Fb(n,s),i=Fb(n,i),r=[];break;case"select":s=Jt({},s,{value:void 0}),i=Jt({},i,{value:void 0}),r=[];break;case"textarea":s=Ob(n,s),i=Ob(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=qy)}jb(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dp.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(a=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(r||(r=[]),r.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nt("scroll",n),r||a===l||(r=[])):(r=r||[]).push(u,l))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};SL=function(n,t,e,i){e!==i&&(t.flags|=4)};function kf(n,t){if(!Ut)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Je(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function IO(n,t,e){var i=t.pendingProps;switch(JE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return Vn(t.type)&&Qy(),Je(t),null;case 3:return i=t.stateNode,sf(),Ot(jn),Ot(fn),lC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(b1(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ds!==null&&(xA(ds),ds=null))),dA(n,t),Je(t),null;case 5:aC(t);var s=ul(Wp.current);if(e=t.type,n!==null&&t.stateNode!=null)AL(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(U(166));return Je(t),null}if(n=ul(Qs.current),b1(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[Ys]=t,i[Up]=r,n=(t.mode&1)!==0,e){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(s=0;s<Uf.length;s++)Nt(Uf[s],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":sP(i,r),Nt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Nt("invalid",i);break;case"textarea":oP(i,r),Nt("invalid",i)}jb(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&x1(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&x1(i.textContent,a,n),s=["children",""+a]):Dp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Nt("scroll",i)}switch(e){case"input":d1(i),rP(i,r,!0);break;case"textarea":d1(i),aP(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=qy)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Q3(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[Ys]=t,n[Up]=i,bL(n,t,!1,!1),t.stateNode=n;t:{switch(o=Vb(e,i),e){case"dialog":Nt("cancel",n),Nt("close",n),s=i;break;case"iframe":case"object":case"embed":Nt("load",n),s=i;break;case"video":case"audio":for(s=0;s<Uf.length;s++)Nt(Uf[s],n);s=i;break;case"source":Nt("error",n),s=i;break;case"img":case"image":case"link":Nt("error",n),Nt("load",n),s=i;break;case"details":Nt("toggle",n),s=i;break;case"input":sP(n,i),s=Fb(n,i),Nt("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Jt({},i,{value:void 0}),Nt("invalid",n);break;case"textarea":oP(n,i),s=Ob(n,i),Nt("invalid",n);break;default:s=i}jb(e,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?t4(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Z3(n,l)):r==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&Fp(n,l):typeof l=="number"&&Fp(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Dp.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Nt("scroll",n):l!=null&&BE(n,r,l,o))}switch(e){case"input":d1(n),rP(n,i,!1);break;case"textarea":d1(n),aP(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Fa(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?Hu(n,!!i.multiple,r,!1):i.defaultValue!=null&&Hu(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=qy)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(n&&t.stateNode!=null)SL(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(U(166));if(e=ul(Wp.current),ul(Qs.current),b1(t)){if(i=t.stateNode,e=t.memoizedProps,i[Ys]=t,(r=i.nodeValue!==e)&&(n=di,n!==null))switch(n.tag){case 3:x1(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&x1(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[Ys]=t,t.stateNode=i}return Je(t),null;case 13:if(Ot(Xt),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ut&&hi!==null&&t.mode&1&&!(t.flags&128))$4(),ef(),t.flags|=98560,r=!1;else if(r=b1(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Ys]=t}else ef(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Je(t),r=!1}else ds!==null&&(xA(ds),ds=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||Xt.current&1?Te===0&&(Te=3):xC())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return sf(),dA(n,t),n===null&&$p(t.stateNode.containerInfo),Je(t),null;case 10:return iC(t.type._context),Je(t),null;case 17:return Vn(t.type)&&Qy(),Je(t),null;case 19:if(Ot(Xt),r=t.memoizedState,r===null)return Je(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)kf(r,!1);else{if(Te!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=sv(n),o!==null){for(t.flags|=128,kf(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Dt(Xt,Xt.current&1|2),t.child}n=n.sibling}r.tail!==null&&he()>of&&(t.flags|=128,i=!0,kf(r,!1),t.lanes=4194304)}else{if(!i)if(n=sv(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),kf(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ut)return Je(t),null}else 2*he()-r.renderingStartTime>of&&e!==1073741824&&(t.flags|=128,i=!0,kf(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=he(),t.sibling=null,e=Xt.current,Dt(Xt,i?e&1|2:e&1),t):(Je(t),null);case 22:case 23:return wC(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ci&1073741824&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function NO(n,t){switch(JE(t),t.tag){case 1:return Vn(t.type)&&Qy(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return sf(),Ot(jn),Ot(fn),lC(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return aC(t),null;case 13:if(Ot(Xt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(U(340));ef()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Ot(Xt),null;case 4:return sf(),null;case 10:return iC(t.type._context),null;case 22:case 23:return wC(),null;case 24:return null;default:return null}}var E1=!1,un=!1,OO=typeof WeakSet=="function"?WeakSet:Set,K=null;function _u(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){se(n,t,i)}else e.current=null}function fA(n,t,e){try{e()}catch(i){se(n,t,i)}}var qP=!1;function BO(n,t){if(qb=Xy,n=_4(),QE(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,a=-1,l=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===s&&(a=o),f===r&&++h===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(Qb={focusedElem:n,selectionRange:e},Xy=!1,K=t;K!==null;)if(t=K,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,K=n;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,A=g.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:qi(t.type,y),A);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(S){se(t,t.return,S)}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}return g=qP,qP=!1,g}function wp(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&fA(t,e,r)}s=s.next}while(s!==i)}}function Ox(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function pA(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function EL(n){var t=n.alternate;t!==null&&(n.alternate=null,EL(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Ys],delete t[Up],delete t[tA],delete t[xO],delete t[bO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function CL(n){return n.tag===5||n.tag===3||n.tag===4}function QP(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||CL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function mA(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=qy));else if(i!==4&&(n=n.child,n!==null))for(mA(n,t,e),n=n.sibling;n!==null;)mA(n,t,e),n=n.sibling}function gA(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(gA(n,t,e),n=n.sibling;n!==null;)gA(n,t,e),n=n.sibling}var Xe=null,hs=!1;function uo(n,t,e){for(e=e.child;e!==null;)TL(n,t,e),e=e.sibling}function TL(n,t,e){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(kx,e)}catch{}switch(e.tag){case 5:un||_u(e,t);case 6:var i=Xe,s=hs;Xe=null,uo(n,t,e),Xe=i,hs=s,Xe!==null&&(hs?(n=Xe,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):Xe.removeChild(e.stateNode));break;case 18:Xe!==null&&(hs?(n=Xe,e=e.stateNode,n.nodeType===8?L2(n.parentNode,e):n.nodeType===1&&L2(n,e),Bp(n)):L2(Xe,e.stateNode));break;case 4:i=Xe,s=hs,Xe=e.stateNode.containerInfo,hs=!0,uo(n,t,e),Xe=i,hs=s;break;case 0:case 11:case 14:case 15:if(!un&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&fA(e,t,o),s=s.next}while(s!==i)}uo(n,t,e);break;case 1:if(!un&&(_u(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(a){se(e,t,a)}uo(n,t,e);break;case 21:uo(n,t,e);break;case 22:e.mode&1?(un=(i=un)||e.memoizedState!==null,uo(n,t,e),un=i):uo(n,t,e);break;default:uo(n,t,e)}}function ZP(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new OO),t.forEach(function(i){var s=XO.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function Gi(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,hs=!1;break t;case 3:Xe=a.stateNode.containerInfo,hs=!0;break t;case 4:Xe=a.stateNode.containerInfo,hs=!0;break t}a=a.return}if(Xe===null)throw Error(U(160));TL(r,o,s),Xe=null,hs=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){se(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PL(t,n),t=t.sibling}function PL(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Gi(t,n),ws(n),i&4){try{wp(3,n,n.return),Ox(3,n)}catch(y){se(n,n.return,y)}try{wp(5,n,n.return)}catch(y){se(n,n.return,y)}}break;case 1:Gi(t,n),ws(n),i&512&&e!==null&&_u(e,e.return);break;case 5:if(Gi(t,n),ws(n),i&512&&e!==null&&_u(e,e.return),n.flags&32){var s=n.stateNode;try{Fp(s,"")}catch(y){se(n,n.return,y)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&K3(s,r),Vb(a,o);var u=Vb(a,r);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?t4(s,d):h==="dangerouslySetInnerHTML"?Z3(s,d):h==="children"?Fp(s,d):BE(s,h,d,u)}switch(a){case"input":Ib(s,r);break;case"textarea":q3(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Hu(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Hu(s,!!r.multiple,r.defaultValue,!0):Hu(s,!!r.multiple,r.multiple?[]:"",!1))}s[Up]=r}catch(y){se(n,n.return,y)}}break;case 6:if(Gi(t,n),ws(n),i&4){if(n.stateNode===null)throw Error(U(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(y){se(n,n.return,y)}}break;case 3:if(Gi(t,n),ws(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Bp(t.containerInfo)}catch(y){se(n,n.return,y)}break;case 4:Gi(t,n),ws(n);break;case 13:Gi(t,n),ws(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(yC=he())),i&4&&ZP(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(un=(u=un)||h,Gi(t,n),un=u):Gi(t,n),ws(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(K=n,h=n.child;h!==null;){for(d=K=h;K!==null;){switch(f=K,p=f.child,f.tag){case 0:case 11:case 14:case 15:wp(4,f,f.return);break;case 1:_u(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){se(i,e,y)}}break;case 5:_u(f,f.return);break;case 22:if(f.memoizedState!==null){t_(d);continue}}p!==null?(p.return=f,K=p):t_(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=J3("display",o))}catch(y){se(n,n.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){se(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gi(t,n),ws(n),i&4&&ZP(n);break;case 21:break;default:Gi(t,n),ws(n)}}function ws(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(CL(e)){var i=e;break t}e=e.return}throw Error(U(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Fp(s,""),i.flags&=-33);var r=QP(n);gA(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=QP(n);mA(n,a,o);break;default:throw Error(U(161))}}catch(l){se(n,n.return,l)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function jO(n,t,e){K=n,_L(n)}function _L(n,t,e){for(var i=(n.mode&1)!==0;K!==null;){var s=K,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||E1;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||un;a=E1;var u=un;if(E1=o,(un=l)&&!u)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?e_(s):l!==null?(l.return=o,K=l):e_(s);for(;r!==null;)K=r,_L(r),r=r.sibling;K=s,E1=a,un=u}JP(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,K=r):JP(n)}}function JP(n){for(;K!==null;){var t=K;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:un||Ox(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!un)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:qi(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&OP(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}OP(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Bp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}un||t.flags&512&&pA(t)}catch(f){se(t,t.return,f)}}if(t===n){K=null;break}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}}function t_(n){for(;K!==null;){var t=K;if(t===n){K=null;break}var e=t.sibling;if(e!==null){e.return=t.return,K=e;break}K=t.return}}function e_(n){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Ox(4,t)}catch(l){se(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(l){se(t,s,l)}}var r=t.return;try{pA(t)}catch(l){se(t,r,l)}break;case 5:var o=t.return;try{pA(t)}catch(l){se(t,o,l)}}}catch(l){se(t,t.return,l)}if(t===n){K=null;break}var a=t.sibling;if(a!==null){a.return=t.return,K=a;break}K=t.return}}var VO=Math.ceil,av=ao.ReactCurrentDispatcher,mC=ao.ReactCurrentOwner,zi=ao.ReactCurrentBatchConfig,pt=0,Oe=null,ve=null,qe=0,ci=0,ku=Ua(0),Te=0,Kp=null,Kc=0,Bx=0,gC=0,xp=null,Nn=null,yC=0,of=1/0,rr=null,lv=!1,yA=null,Pa=null,C1=!1,ba=null,cv=0,bp=0,vA=null,ey=-1,ny=0;function Sn(){return pt&6?he():ey!==-1?ey:ey=he()}function _a(n){return n.mode&1?pt&2&&qe!==0?qe&-qe:SO.transition!==null?(ny===0&&(ny=d4()),ny):(n=At,n!==0||(n=window.event,n=n===void 0?16:w4(n.type)),n):1}function ms(n,t,e,i){if(50<bp)throw bp=0,vA=null,Error(U(185));U0(n,e,i),(!(pt&2)||n!==Oe)&&(n===Oe&&(!(pt&2)&&(Bx|=e),Te===4&&wo(n,qe)),$n(n,i),e===1&&pt===0&&!(t.mode&1)&&(of=he()+500,Fx&&Ha()))}function $n(n,t){var e=n.callbackNode;SN(n,t);var i=Gy(n,n===Oe?qe:0);if(i===0)e!==null&&uP(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&uP(e),t===1)n.tag===0?AO(n_.bind(null,n)):B4(n_.bind(null,n)),vO(function(){!(pt&6)&&Ha()}),e=null;else{switch(f4(i)){case 1:e=UE;break;case 4:e=u4;break;case 16:e=Wy;break;case 536870912:e=h4;break;default:e=Wy}e=NL(e,kL.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function kL(n,t){if(ey=-1,ny=0,pt&6)throw Error(U(327));var e=n.callbackNode;if(Ku()&&n.callbackNode!==e)return null;var i=Gy(n,n===Oe?qe:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=uv(n,i);else{t=i;var s=pt;pt|=2;var r=LL();(Oe!==n||qe!==t)&&(rr=null,of=he()+500,zc(n,t));do try{UO();break}catch(a){ML(n,a)}while(1);nC(),av.current=r,pt=s,ve!==null?t=0:(Oe=null,qe=0,t=Te)}if(t!==0){if(t===2&&(s=Wb(n),s!==0&&(i=s,t=wA(n,s))),t===1)throw e=Kp,zc(n,0),wo(n,i),$n(n,he()),e;if(t===6)wo(n,i);else{if(s=n.current.alternate,!(i&30)&&!$O(s)&&(t=uv(n,i),t===2&&(r=Wb(n),r!==0&&(i=r,t=wA(n,r))),t===1))throw e=Kp,zc(n,0),wo(n,i),$n(n,he()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(U(345));case 2:Qa(n,Nn,rr);break;case 3:if(wo(n,i),(i&130023424)===i&&(t=yC+500-he(),10<t)){if(Gy(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Sn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=Jb(Qa.bind(null,n,Nn,rr),t);break}Qa(n,Nn,rr);break;case 4:if(wo(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-ps(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=he()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VO(i/1960))-i,10<i){n.timeoutHandle=Jb(Qa.bind(null,n,Nn,rr),i);break}Qa(n,Nn,rr);break;case 5:Qa(n,Nn,rr);break;default:throw Error(U(329))}}}return $n(n,he()),n.callbackNode===e?kL.bind(null,n):null}function wA(n,t){var e=xp;return n.current.memoizedState.isDehydrated&&(zc(n,t).flags|=256),n=uv(n,t),n!==2&&(t=Nn,Nn=e,t!==null&&xA(t)),n}function xA(n){Nn===null?Nn=n:Nn.push.apply(Nn,n)}function $O(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!gs(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wo(n,t){for(t&=~gC,t&=~Bx,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-ps(t),i=1<<e;n[e]=-1,t&=~i}}function n_(n){if(pt&6)throw Error(U(327));Ku();var t=Gy(n,0);if(!(t&1))return $n(n,he()),null;var e=uv(n,t);if(n.tag!==0&&e===2){var i=Wb(n);i!==0&&(t=i,e=wA(n,i))}if(e===1)throw e=Kp,zc(n,0),wo(n,t),$n(n,he()),e;if(e===6)throw Error(U(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Qa(n,Nn,rr),$n(n,he()),null}function vC(n,t){var e=pt;pt|=1;try{return n(t)}finally{pt=e,pt===0&&(of=he()+500,Fx&&Ha())}}function qc(n){ba!==null&&ba.tag===0&&!(pt&6)&&Ku();var t=pt;pt|=1;var e=zi.transition,i=At;try{if(zi.transition=null,At=1,n)return n()}finally{At=i,zi.transition=e,pt=t,!(pt&6)&&Ha()}}function wC(){ci=ku.current,Ot(ku)}function zc(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,yO(e)),ve!==null)for(e=ve.return;e!==null;){var i=e;switch(JE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qy();break;case 3:sf(),Ot(jn),Ot(fn),lC();break;case 5:aC(i);break;case 4:sf();break;case 13:Ot(Xt);break;case 19:Ot(Xt);break;case 10:iC(i.type._context);break;case 22:case 23:wC()}e=e.return}if(Oe=n,ve=n=ka(n.current,null),qe=ci=t,Te=0,Kp=null,gC=Bx=Kc=0,Nn=xp=null,cl!==null){for(t=0;t<cl.length;t++)if(e=cl[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}cl=null}return n}function ML(n,t){do{var e=ve;try{if(nC(),Z1.current=ov,rv){for(var i=Qt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}rv=!1}if(Yc=0,Ne=Ee=Qt=null,vp=!1,Gp=0,mC.current=null,e===null||e.return===null){Te=1,Kp=t,ve=null;break}t:{var r=n,o=e.return,a=e,l=t;if(t=qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=UP(o);if(p!==null){p.flags&=-257,HP(p,o,a,r,t),p.mode&1&&zP(r,u,t),t=p,l=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break t}else{if(!(t&1)){zP(r,u,t),xC();break t}l=Error(U(426))}}else if(Ut&&a.mode&1){var A=UP(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),HP(A,o,a,r,t),tC(rf(l,a));break t}}r=l=rf(l,a),Te!==4&&(Te=2),xp===null?xp=[r]:xp.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=fL(r,l,t);NP(r,m);break t;case 1:a=l;var v=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Pa===null||!Pa.has(w)))){r.flags|=65536,t&=-t,r.lanes|=t;var S=pL(r,a,t);NP(r,S);break t}}r=r.return}while(r!==null)}DL(e)}catch(T){t=T,ve===e&&e!==null&&(ve=e=e.return);continue}break}while(1)}function LL(){var n=av.current;return av.current=ov,n===null?ov:n}function xC(){(Te===0||Te===3||Te===2)&&(Te=4),Oe===null||!(Kc&268435455)&&!(Bx&268435455)||wo(Oe,qe)}function uv(n,t){var e=pt;pt|=2;var i=LL();(Oe!==n||qe!==t)&&(rr=null,zc(n,t));do try{zO();break}catch(s){ML(n,s)}while(1);if(nC(),pt=e,av.current=i,ve!==null)throw Error(U(261));return Oe=null,qe=0,Te}function zO(){for(;ve!==null;)RL(ve)}function UO(){for(;ve!==null&&!pN();)RL(ve)}function RL(n){var t=IL(n.alternate,n,ci);n.memoizedProps=n.pendingProps,t===null?DL(n):ve=t,mC.current=null}function DL(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=NO(e,t),e!==null){e.flags&=32767,ve=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Te=6,ve=null;return}}else if(e=IO(e,t,ci),e!==null){ve=e;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=n}while(t!==null);Te===0&&(Te=5)}function Qa(n,t,e){var i=At,s=zi.transition;try{zi.transition=null,At=1,HO(n,t,e,i)}finally{zi.transition=s,At=i}return null}function HO(n,t,e,i){do Ku();while(ba!==null);if(pt&6)throw Error(U(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(U(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(EN(n,r),n===Oe&&(ve=Oe=null,qe=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||C1||(C1=!0,NL(Wy,function(){return Ku(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=zi.transition,zi.transition=null;var o=At;At=1;var a=pt;pt|=4,mC.current=null,BO(n,e),PL(e,n),uO(Qb),Xy=!!qb,Qb=qb=null,n.current=e,jO(e),mN(),pt=a,At=o,zi.transition=r}else n.current=e;if(C1&&(C1=!1,ba=n,cv=s),r=n.pendingLanes,r===0&&(Pa=null),vN(e.stateNode),$n(n,he()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(lv)throw lv=!1,n=yA,yA=null,n;return cv&1&&n.tag!==0&&Ku(),r=n.pendingLanes,r&1?n===vA?bp++:(bp=0,vA=n):bp=0,Ha(),null}function Ku(){if(ba!==null){var n=f4(cv),t=zi.transition,e=At;try{if(zi.transition=null,At=16>n?16:n,ba===null)var i=!1;else{if(n=ba,ba=null,cv=0,pt&6)throw Error(U(331));var s=pt;for(pt|=4,K=n.current;K!==null;){var r=K,o=r.child;if(K.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:wp(8,h,r)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var f=h.sibling,p=h.return;if(EL(h),h===u){K=null;break}if(f!==null){f.return=p,K=f;break}K=p}}}var g=r.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var A=y.sibling;y.sibling=null,y=A}while(y!==null)}}K=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,K=o;else t:for(;K!==null;){if(r=K,r.flags&2048)switch(r.tag){case 0:case 11:case 15:wp(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,K=m;break t}K=r.return}}var v=n.current;for(K=v;K!==null;){o=K;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,K=w;else t:for(o=v;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ox(9,a)}}catch(T){se(a,a.return,T)}if(a===o){K=null;break t}var S=a.sibling;if(S!==null){S.return=a.return,K=S;break t}K=a.return}}if(pt=s,Ha(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(kx,n)}catch{}i=!0}return i}finally{At=e,zi.transition=t}}return!1}function i_(n,t,e){t=rf(e,t),t=fL(n,t,1),n=Ta(n,t,1),t=Sn(),n!==null&&(U0(n,1,t),$n(n,t))}function se(n,t,e){if(n.tag===3)i_(n,n,e);else for(;t!==null;){if(t.tag===3){i_(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Pa===null||!Pa.has(i))){n=rf(e,n),n=pL(t,n,1),t=Ta(t,n,1),n=Sn(),t!==null&&(U0(t,1,n),$n(t,n));break}}t=t.return}}function WO(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=Sn(),n.pingedLanes|=n.suspendedLanes&e,Oe===n&&(qe&e)===e&&(Te===4||Te===3&&(qe&130023424)===qe&&500>he()-yC?zc(n,0):gC|=e),$n(n,t)}function FL(n,t){t===0&&(n.mode&1?(t=m1,m1<<=1,!(m1&130023424)&&(m1=4194304)):t=1);var e=Sn();n=to(n,t),n!==null&&(U0(n,t,e),$n(n,e))}function GO(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),FL(n,e)}function XO(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(t),FL(n,e)}var IL;IL=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||jn.current)On=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return On=!1,FO(n,t,e);On=!!(n.flags&131072)}else On=!1,Ut&&t.flags&1048576&&j4(t,tv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ty(n,t),n=t.pendingProps;var s=tf(t,fn.current);Yu(t,e),s=uC(null,t,i,n,s,e);var r=hC();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vn(i)?(r=!0,Zy(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rC(t),s.updater=Nx,t.stateNode=s,s._reactInternals=t,oA(t,i,n,e),t=cA(null,t,i,!0,r,e)):(t.tag=0,Ut&&r&&ZE(t),bn(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(ty(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=KO(i),n=qi(i,n),s){case 0:t=lA(null,t,i,n,e);break t;case 1:t=XP(null,t,i,n,e);break t;case 11:t=WP(null,t,i,n,e);break t;case 14:t=GP(null,t,i,qi(i.type,n),e);break t}throw Error(U(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:qi(i,s),lA(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:qi(i,s),XP(n,t,i,s,e);case 3:t:{if(vL(t),n===null)throw Error(U(387));i=t.pendingProps,r=t.memoizedState,s=r.element,W4(n,t),iv(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=rf(Error(U(423)),t),t=YP(n,t,i,e,s);break t}else if(i!==s){s=rf(Error(U(424)),t),t=YP(n,t,i,e,s);break t}else for(hi=Ca(t.stateNode.containerInfo.firstChild),di=t,Ut=!0,ds=null,e=U4(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(ef(),i===s){t=eo(n,t,e);break t}bn(n,t,i,e)}t=t.child}return t;case 5:return G4(t),n===null&&iA(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,Zb(i,s)?o=null:r!==null&&Zb(i,r)&&(t.flags|=32),yL(n,t),bn(n,t,o,e),t.child;case 6:return n===null&&iA(t),null;case 13:return wL(n,t,e);case 4:return oC(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=nf(t,null,i,e):bn(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:qi(i,s),WP(n,t,i,s,e);case 7:return bn(n,t,t.pendingProps,e),t.child;case 8:return bn(n,t,t.pendingProps.children,e),t.child;case 12:return bn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Dt(ev,i._currentValue),i._currentValue=o,r!==null)if(gs(r.value,o)){if(r.children===s.children&&!jn.current){t=eo(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Kr(-1,e&-e),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}r.lanes|=e,l=r.alternate,l!==null&&(l.lanes|=e),sA(r.return,e,t),a.lanes|=e;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(U(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),sA(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}bn(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Yu(t,e),s=Hi(s),i=i(s),t.flags|=1,bn(n,t,i,e),t.child;case 14:return i=t.type,s=qi(i,t.pendingProps),s=qi(i.type,s),GP(n,t,i,s,e);case 15:return mL(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:qi(i,s),ty(n,t),t.tag=1,Vn(i)?(n=!0,Zy(t)):n=!1,Yu(t,e),dL(t,i,s),oA(t,i,s,e),cA(null,t,i,!0,n,e);case 19:return xL(n,t,e);case 22:return gL(n,t,e)}throw Error(U(156,t.tag))};function NL(n,t){return c4(n,t)}function YO(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vi(n,t,e,i){return new YO(n,t,e,i)}function bC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function KO(n){if(typeof n=="function")return bC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===VE)return 11;if(n===$E)return 14}return 2}function ka(n,t){var e=n.alternate;return e===null?(e=Vi(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function iy(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")bC(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case wu:return Uc(e.children,s,r,t);case jE:o=8,s|=8;break;case Mb:return n=Vi(12,e,t,s|2),n.elementType=Mb,n.lanes=r,n;case Lb:return n=Vi(13,e,t,s),n.elementType=Lb,n.lanes=r,n;case Rb:return n=Vi(19,e,t,s),n.elementType=Rb,n.lanes=r,n;case G3:return jx(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H3:o=10;break t;case W3:o=9;break t;case VE:o=11;break t;case $E:o=14;break t;case mo:o=16,i=null;break t}throw Error(U(130,n==null?n:typeof n,""))}return t=Vi(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function Uc(n,t,e,i){return n=Vi(7,n,i,t),n.lanes=e,n}function jx(n,t,e,i){return n=Vi(22,n,i,t),n.elementType=G3,n.lanes=e,n.stateNode={isHidden:!1},n}function j2(n,t,e){return n=Vi(6,n,null,t),n.lanes=e,n}function V2(n,t,e){return t=Vi(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function qO(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=x2(0),this.expirationTimes=x2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=x2(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function AC(n,t,e,i,s,r,o,a,l){return n=new qO(n,t,e,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Vi(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},rC(r),n}function QO(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function OL(n){if(!n)return Ia;n=n._reactInternals;t:{if(tu(n)!==n||n.tag!==1)throw Error(U(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(Vn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(U(171))}if(n.tag===1){var e=n.type;if(Vn(e))return O4(n,e,t)}return t}function BL(n,t,e,i,s,r,o,a,l){return n=AC(e,i,!0,n,s,r,o,a,l),n.context=OL(null),e=n.current,i=Sn(),s=_a(e),r=Kr(i,s),r.callback=t??null,Ta(e,r,s),n.current.lanes=s,U0(n,s,i),$n(n,i),n}function Vx(n,t,e,i){var s=t.current,r=Sn(),o=_a(s);return e=OL(e),t.context===null?t.context=e:t.pendingContext=e,t=Kr(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=Ta(s,t,o),n!==null&&(ms(n,s,o,r),Q1(n,s,o)),o}function hv(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function s_(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function SC(n,t){s_(n,t),(n=n.alternate)&&s_(n,t)}function ZO(){return null}var jL=typeof reportError=="function"?reportError:function(n){console.error(n)};function EC(n){this._internalRoot=n}$x.prototype.render=EC.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(U(409));Vx(n,t,null,null)};$x.prototype.unmount=EC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;qc(function(){Vx(null,n,null,null)}),t[Jr]=null}};function $x(n){this._internalRoot=n}$x.prototype.unstable_scheduleHydration=function(n){if(n){var t=g4();n={blockedOn:null,target:n,priority:t};for(var e=0;e<vo.length&&t!==0&&t<vo[e].priority;e++);vo.splice(e,0,n),e===0&&v4(n)}};function CC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function zx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function r_(){}function JO(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=hv(o);r.call(u)}}var o=BL(t,i,n,0,null,!1,!1,"",r_);return n._reactRootContainer=o,n[Jr]=o.current,$p(n.nodeType===8?n.parentNode:n),qc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var u=hv(l);a.call(u)}}var l=AC(n,0,!1,null,null,!1,!1,"",r_);return n._reactRootContainer=l,n[Jr]=l.current,$p(n.nodeType===8?n.parentNode:n),qc(function(){Vx(t,l,e,i)}),l}function Ux(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=hv(o);a.call(l)}}Vx(t,o,n,s)}else o=JO(e,t,n,s,i);return hv(o)}p4=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=zf(t.pendingLanes);e!==0&&(HE(t,e|1),$n(t,he()),!(pt&6)&&(of=he()+500,Ha()))}break;case 13:qc(function(){var i=to(n,1);if(i!==null){var s=Sn();ms(i,n,1,s)}}),SC(n,1)}};WE=function(n){if(n.tag===13){var t=to(n,134217728);if(t!==null){var e=Sn();ms(t,n,134217728,e)}SC(n,134217728)}};m4=function(n){if(n.tag===13){var t=_a(n),e=to(n,t);if(e!==null){var i=Sn();ms(e,n,t,i)}SC(n,t)}};g4=function(){return At};y4=function(n,t){var e=At;try{return At=n,t()}finally{At=e}};zb=function(n,t,e){switch(t){case"input":if(Ib(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=Dx(i);if(!s)throw Error(U(90));Y3(i),Ib(i,s)}}}break;case"textarea":q3(n,e);break;case"select":t=e.value,t!=null&&Hu(n,!!e.multiple,t,!1)}};i4=vC;s4=qc;var t8={usingClientEntryPoint:!1,Events:[W0,Su,Dx,e4,n4,vC]},Mf={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e8={bundleType:Mf.bundleType,version:Mf.version,rendererPackageName:Mf.rendererPackageName,rendererConfig:Mf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=a4(n),n===null?null:n.stateNode},findFiberByHostInstance:Mf.findFiberByHostInstance||ZO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{kx=T1.inject(e8),qs=T1}catch{}}gi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t8;gi.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CC(t))throw Error(U(200));return QO(n,t,null,e)};gi.createRoot=function(n,t){if(!CC(n))throw Error(U(299));var e=!1,i="",s=jL;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=AC(n,1,!1,null,null,e,!1,i,s),n[Jr]=t.current,$p(n.nodeType===8?n.parentNode:n),new EC(t)};gi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(U(188)):(n=Object.keys(n).join(","),Error(U(268,n)));return n=a4(t),n=n===null?null:n.stateNode,n};gi.flushSync=function(n){return qc(n)};gi.hydrate=function(n,t,e){if(!zx(t))throw Error(U(200));return Ux(null,n,t,!0,e)};gi.hydrateRoot=function(n,t,e){if(!CC(n))throw Error(U(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=jL;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=BL(t,null,n,1,e??null,s,!1,r,o),n[Jr]=t.current,$p(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new $x(t)};gi.render=function(n,t,e){if(!zx(t))throw Error(U(200));return Ux(null,n,t,!1,e)};gi.unmountComponentAtNode=function(n){if(!zx(n))throw Error(U(40));return n._reactRootContainer?(qc(function(){Ux(null,null,n,!1,function(){n._reactRootContainer=null,n[Jr]=null})}),!0):!1};gi.unstable_batchedUpdates=vC;gi.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!zx(e))throw Error(U(200));if(n==null||n._reactInternals===void 0)throw Error(U(38));return Ux(n,t,e,!1,i)};gi.version="18.3.1-next-f1338f8080-20240426";function VL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VL)}catch(n){console.error(n)}}VL(),V3.exports=gi;var n8=V3.exports,o_=n8;_b.createRoot=o_.createRoot,_b.hydrateRoot=o_.hydrateRoot;var $L={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a_=fs.createContext&&fs.createContext($L),Ma=globalThis&&globalThis.__assign||function(){return Ma=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ma.apply(this,arguments)},i8=globalThis&&globalThis.__rest||function(n,t){var e={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(e[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(e[i[s]]=n[i[s]]);return e};function zL(n){return n&&n.map(function(t,e){return fs.createElement(t.tag,Ma({key:e},t.attr),zL(t.child))})}function mt(n){return function(t){return fs.createElement(s8,Ma({attr:Ma({},n.attr)},t),zL(n.child))}}function s8(n){var t=function(e){var i=n.attr,s=n.size,r=n.title,o=i8(n,["attr","size","title"]),a=s||e.size||"1em",l;return e.className&&(l=e.className),n.className&&(l=(l?l+" ":"")+n.className),fs.createElement("svg",Ma({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,i,o,{className:l,style:Ma(Ma({color:n.color||e.color},e.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&fs.createElement("title",null,r),n.children)};return a_!==void 0?fs.createElement(a_.Consumer,null,function(e){return t(e)}):t($L)}function r8(n){return mt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"}}]})(n)}function TC(n){return mt({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(n)}function UL(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(n)}function PC(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"}}]})(n)}function l_(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(n)}function o8(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(n)}function a8(n){return mt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M97.12 362.63c-8.69-8.69-4.16-6.24-25.12-11.85-9.51-2.55-17.87-7.45-25.43-13.32L1.2 448.7c-4.39 10.77 3.81 22.47 15.43 22.03l52.69-2.01L105.56 507c8 8.44 22.04 5.81 26.43-4.96l52.05-127.62c-10.84 6.04-22.87 9.58-35.31 9.58-19.5 0-37.82-7.59-51.61-21.37zM382.8 448.7l-45.37-111.24c-7.56 5.88-15.92 10.77-25.43 13.32-21.07 5.64-16.45 3.18-25.12 11.85-13.79 13.78-32.12 21.37-51.62 21.37-12.44 0-24.47-3.55-35.31-9.58L252 502.04c4.39 10.77 18.44 13.4 26.43 4.96l36.25-38.28 52.69 2.01c11.62.44 19.82-11.27 15.43-22.03zM263 340c15.28-15.55 17.03-14.21 38.79-20.14 13.89-3.79 24.75-14.84 28.47-28.98 7.48-28.4 5.54-24.97 25.95-45.75 10.17-10.35 14.14-25.44 10.42-39.58-7.47-28.38-7.48-24.42 0-52.83 3.72-14.14-.25-29.23-10.42-39.58-20.41-20.78-18.47-17.36-25.95-45.75-3.72-14.14-14.58-25.19-28.47-28.98-27.88-7.61-24.52-5.62-44.95-26.41-10.17-10.35-25-14.4-38.89-10.61-27.87 7.6-23.98 7.61-51.9 0-13.89-3.79-28.72.25-38.89 10.61-20.41 20.78-17.05 18.8-44.94 26.41-13.89 3.79-24.75 14.84-28.47 28.98-7.47 28.39-5.54 24.97-25.95 45.75-10.17 10.35-14.15 25.44-10.42 39.58 7.47 28.36 7.48 24.4 0 52.82-3.72 14.14.25 29.23 10.42 39.59 20.41 20.78 18.47 17.35 25.95 45.75 3.72 14.14 14.58 25.19 28.47 28.98C104.6 325.96 106.27 325 121 340c13.23 13.47 33.84 15.88 49.74 5.82a39.676 39.676 0 0 1 42.53 0c15.89 10.06 36.5 7.65 49.73-5.82zM97.66 175.96c0-53.03 42.24-96.02 94.34-96.02s94.34 42.99 94.34 96.02-42.24 96.02-94.34 96.02-94.34-42.99-94.34-96.02z"}}]})(n)}function HL(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(n)}function WL(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M320 336c0 8.84-7.16 16-16 16h-96c-8.84 0-16-7.16-16-16v-48H0v144c0 25.6 22.4 48 48 48h416c25.6 0 48-22.4 48-48V288H320v48zm144-208h-80V80c0-25.6-22.4-48-48-48H176c-25.6 0-48 22.4-48 48v48H48c-25.6 0-48 22.4-48 48v80h512v-80c0-25.6-22.4-48-48-48zm-144 0H192V96h128v32z"}}]})(n)}function l8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z"}}]})(n)}function c8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(n)}function _C(n){return mt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(n)}function kC(n){return mt({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(n)}function u8(n){return mt({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(n)}function bA(n){return mt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"}}]})(n)}function h8(n){return mt({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"}}]})(n)}function d8(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"}}]})(n)}function dv(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"}}]})(n)}function AA(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(n)}function GL(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(n)}function f8(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"}}]})(n)}function p8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"}}]})(n)}function m8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"}}]})(n)}function g8(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(n)}function y8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(n)}function v8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(n)}function w8(n){return mt({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"}}]})(n)}function x8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12H124c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(n)}function b8(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 192v32c0 6.6-5.4 12-12 12h-56v56c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-56h-56c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h56v-56c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v56h56c6.6 0 12 5.4 12 12zm201 284.7L476.7 505c-9.4 9.4-24.6 9.4-33.9 0L343 405.3c-4.5-4.5-7-10.6-7-17V372c-35.3 27.6-79.7 44-128 44C93.1 416 0 322.9 0 208S93.1 0 208 0s208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7l99.7 99.7c9.3 9.4 9.3 24.6 0 34zM344 208c0-75.2-60.8-136-136-136S72 132.8 72 208s60.8 136 136 136 136-60.8 136-136z"}}]})(n)}function XL(n){return mt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"}}]})(n)}function MC(n){return mt({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(n)}function A8(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"}}]})(n)}function c_(n){return mt({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(n)}const YL=M.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Hx=M.createContext({}),Wx=M.createContext(null),Gx=typeof document<"u",LC=Gx?M.useLayoutEffect:M.useEffect,KL=M.createContext({strict:!1}),RC=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),S8="framerAppearId",qL="data-"+RC(S8);function E8(n,t,e,i){const{visualElement:s}=M.useContext(Hx),r=M.useContext(KL),o=M.useContext(Wx),a=M.useContext(YL).reducedMotion,l=M.useRef();i=i||r.renderer,!l.current&&i&&(l.current=i(n,{visualState:t,parent:s,props:e,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;M.useInsertionEffect(()=>{u&&u.update(e,o)});const h=M.useRef(!!(e[qL]&&!window.HandoffComplete));return LC(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),M.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Mu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function C8(n,t,e){return M.useCallback(i=>{i&&n.mount&&n.mount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Mu(e)&&(e.current=i))},[t])}function qp(n){return typeof n=="string"||Array.isArray(n)}function Xx(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const DC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],FC=["initial",...DC];function Yx(n){return Xx(n.animate)||FC.some(t=>qp(n[t]))}function QL(n){return!!(Yx(n)||n.variants)}function T8(n,t){if(Yx(n)){const{initial:e,animate:i}=n;return{initial:e===!1||qp(e)?e:void 0,animate:qp(i)?i:void 0}}return n.inherit!==!1?t:{}}function P8(n){const{initial:t,animate:e}=T8(n,M.useContext(Hx));return M.useMemo(()=>({initial:t,animate:e}),[u_(t),u_(e)])}function u_(n){return Array.isArray(n)?n.join(" "):n}const h_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qp={};for(const n in h_)Qp[n]={isEnabled:t=>h_[n].some(e=>!!t[e])};function _8(n){for(const t in n)Qp[t]={...Qp[t],...n[t]}}const IC=M.createContext({}),ZL=M.createContext({}),k8=Symbol.for("motionComponentSymbol");function M8({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:s}){n&&_8(n);function r(a,l){let u;const h={...M.useContext(YL),...a,layoutId:L8(a)},{isStatic:d}=h,f=P8(a),p=i(a,d);if(!d&&Gx){f.visualElement=E8(s,p,h,t);const g=M.useContext(ZL),y=M.useContext(KL).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,y,n,g))}return M.createElement(Hx.Provider,{value:f},u&&f.visualElement?M.createElement(u,{visualElement:f.visualElement,...h}):null,e(s,a,C8(p,f.visualElement,l),p,d,f.visualElement))}const o=M.forwardRef(r);return o[k8]=s,o}function L8({layoutId:n}){const t=M.useContext(IC).id;return t&&n!==void 0?t+"-"+n:n}function R8(n){function t(i,s={}){return M8(n(i,s))}if(typeof Proxy>"u")return t;const e=new Map;return new Proxy(t,{get:(i,s)=>(e.has(s)||e.set(s,t(s)),e.get(s))})}const D8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NC(n){return typeof n!="string"||n.includes("-")?!1:!!(D8.indexOf(n)>-1||/[A-Z]/.test(n))}const fv={};function F8(n){Object.assign(fv,n)}const X0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eu=new Set(X0);function JL(n,{layout:t,layoutId:e}){return eu.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!fv[n]||n==="opacity")}const zn=n=>!!(n&&n.getVelocity),I8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},N8=X0.length;function O8(n,{enableHardwareAcceleration:t=!0,allowTransformNone:e=!0},i,s){let r="";for(let o=0;o<N8;o++){const a=X0[o];if(n[a]!==void 0){const l=I8[a]||a;r+=`${l}(${n[a]}) `}}return t&&!n.z&&(r+="translateZ(0)"),r=r.trim(),s?r=s(n,i?"":r):e&&i&&(r="none"),r}const tR=n=>t=>typeof t=="string"&&t.startsWith(n),eR=tR("--"),SA=tR("var(--"),B8=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,j8=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Na=(n,t,e)=>Math.min(Math.max(e,n),t),nu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ap={...nu,transform:n=>Na(0,1,n)},P1={...nu,default:1},Sp=n=>Math.round(n*1e5)/1e5,Kx=/(-)?([\d]*\.?[\d])+/g,nR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,V8=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Y0(n){return typeof n=="string"}const K0=n=>({test:t=>Y0(t)&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),ho=K0("deg"),Zs=K0("%"),J=K0("px"),$8=K0("vh"),z8=K0("vw"),d_={...Zs,parse:n=>Zs.parse(n)/100,transform:n=>Zs.transform(n*100)},f_={...nu,transform:Math.round},iR={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:ho,rotateX:ho,rotateY:ho,rotateZ:ho,scale:P1,scaleX:P1,scaleY:P1,scaleZ:P1,skew:ho,skewX:ho,skewY:ho,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Ap,originX:d_,originY:d_,originZ:J,zIndex:f_,fillOpacity:Ap,strokeOpacity:Ap,numOctaves:f_};function OC(n,t,e,i){const{style:s,vars:r,transform:o,transformOrigin:a}=n;let l=!1,u=!1,h=!0;for(const d in t){const f=t[d];if(eR(d)){r[d]=f;continue}const p=iR[d],g=j8(f,p);if(eu.has(d)){if(l=!0,o[d]=g,!h)continue;f!==(p.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=g):s[d]=g}if(t.transform||(l||i?s.transform=O8(n.transform,e,h,i):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:p=0}=a;s.transformOrigin=`${d} ${f} ${p}`}}const BC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sR(n,t,e){for(const i in t)!zn(t[i])&&!JL(i,e)&&(n[i]=t[i])}function U8({transformTemplate:n},t,e){return M.useMemo(()=>{const i=BC();return OC(i,t,{enableHardwareAcceleration:!e},n),Object.assign({},i.vars,i.style)},[t])}function H8(n,t,e){const i=n.style||{},s={};return sR(s,i,n),Object.assign(s,U8(n,t,e)),n.transformValues?n.transformValues(s):s}function W8(n,t,e){const i={},s=H8(n,t,e);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=s,i}const G8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||G8.has(n)}let rR=n=>!pv(n);function X8(n){n&&(rR=t=>t.startsWith("on")?!pv(t):n(t))}try{X8(require("@emotion/is-prop-valid").default)}catch{}function Y8(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(rR(s)||e===!0&&pv(s)||!t&&!pv(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}function p_(n,t,e){return typeof n=="string"?n:J.transform(t+e*n)}function K8(n,t,e){const i=p_(t,n.x,n.width),s=p_(e,n.y,n.height);return`${i} ${s}`}const q8={offset:"stroke-dashoffset",array:"stroke-dasharray"},Q8={offset:"strokeDashoffset",array:"strokeDasharray"};function Z8(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?q8:Q8;n[r.offset]=J.transform(-i);const o=J.transform(t),a=J.transform(e);n[r.array]=`${o} ${a}`}function jC(n,{attrX:t,attrY:e,attrScale:i,originX:s,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},h,d,f){if(OC(n,u,h,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:g,dimensions:y}=n;p.transform&&(y&&(g.transform=p.transform),delete p.transform),y&&(s!==void 0||r!==void 0||g.transform)&&(g.transformOrigin=K8(y,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(p.x=t),e!==void 0&&(p.y=e),i!==void 0&&(p.scale=i),o!==void 0&&Z8(p,o,a,l,!1)}const oR=()=>({...BC(),attrs:{}}),VC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function J8(n,t,e,i){const s=M.useMemo(()=>{const r=oR();return jC(r,t,{enableHardwareAcceleration:!1},VC(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};sR(r,n.style,n),s.style={...r,...s.style}}return s}function tB(n=!1){return(e,i,s,{latestValues:r},o)=>{const l=(NC(e)?J8:W8)(i,r,o,e),h={...Y8(i,typeof e=="string",n),...l,ref:s},{children:d}=i,f=M.useMemo(()=>zn(d)?d.get():d,[d]);return M.createElement(e,{...h,children:f})}}function aR(n,{style:t,vars:e},i,s){Object.assign(n.style,t,s&&s.getProjectionStyles(i));for(const r in e)n.style.setProperty(r,e[r])}const lR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cR(n,t,e,i){aR(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(lR.has(s)?s:RC(s),t.attrs[s])}function $C(n,t){const{style:e}=n,i={};for(const s in e)(zn(e[s])||t.style&&zn(t.style[s])||JL(s,n))&&(i[s]=e[s]);return i}function uR(n,t){const e=$C(n,t);for(const i in n)if(zn(n[i])||zn(t[i])){const s=X0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;e[s]=n[i]}return e}function zC(n,t,e,i={},s={}){return typeof t=="function"&&(t=t(e!==void 0?e:n.custom,i,s)),typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"&&(t=t(e!==void 0?e:n.custom,i,s)),t}function hR(n){const t=M.useRef(null);return t.current===null&&(t.current=n()),t.current}const mv=n=>Array.isArray(n),eB=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),nB=n=>mv(n)?n[n.length-1]||0:n;function sy(n){const t=zn(n)?n.get():n;return eB(t)?t.toValue():t}function iB({scrapeMotionValuesFromProps:n,createRenderState:t,onMount:e},i,s,r){const o={latestValues:sB(i,s,r,n),renderState:t()};return e&&(o.mount=a=>e(i,a,o)),o}const dR=n=>(t,e)=>{const i=M.useContext(Hx),s=M.useContext(Wx),r=()=>iB(n,t,i,s);return e?r():hR(r)};function sB(n,t,e,i){const s={},r=i(n,{});for(const f in r)s[f]=sy(r[f]);let{initial:o,animate:a}=n;const l=Yx(n),u=QL(n);t&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=e?e.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Xx(d)&&(Array.isArray(d)?d:[d]).forEach(p=>{const g=zC(n,p);if(!g)return;const{transitionEnd:y,transition:A,...m}=g;for(const v in m){let w=m[v];if(Array.isArray(w)){const S=h?w.length-1:0;w=w[S]}w!==null&&(s[v]=w)}for(const v in y)s[v]=y[v]}),s}const re=n=>n;class m_{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const e=this.order.indexOf(t);e!==-1&&(this.order.splice(e,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function rB(n){let t=new m_,e=new m_,i=0,s=!1,r=!1;const o=new WeakSet,a={schedule:(l,u=!1,h=!1)=>{const d=h&&s,f=d?t:e;return u&&o.add(l),f.add(l)&&d&&s&&(i=t.order.length),l},cancel:l=>{e.remove(l),o.delete(l)},process:l=>{if(s){r=!0;return}if(s=!0,[t,e]=[e,t],e.clear(),i=t.order.length,i)for(let u=0;u<i;u++){const h=t.order[u];h(l),o.has(h)&&(a.schedule(h),n())}s=!1,r&&(r=!1,a.process(l))}};return a}const _1=["prepare","read","update","preRender","render","postRender"],oB=40;function aB(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=_1.reduce((d,f)=>(d[f]=rB(()=>e=!0),d),{}),o=d=>r[d].process(s),a=()=>{const d=performance.now();e=!1,s.delta=i?1e3/60:Math.max(Math.min(d-s.timestamp,oB),1),s.timestamp=d,s.isProcessing=!0,_1.forEach(o),s.isProcessing=!1,e&&t&&(i=!1,n(a))},l=()=>{e=!0,i=!0,s.isProcessing||n(a)};return{schedule:_1.reduce((d,f)=>{const p=r[f];return d[f]=(g,y=!1,A=!1)=>(e||l(),p.schedule(g,y,A)),d},{}),cancel:d=>_1.forEach(f=>r[f].cancel(d)),state:s,steps:r}}const{schedule:It,cancel:no,state:ln,steps:$2}=aB(typeof requestAnimationFrame<"u"?requestAnimationFrame:re,!0),lB={useVisualState:dR({scrapeMotionValuesFromProps:uR,createRenderState:oR,onMount:(n,t,{renderState:e,latestValues:i})=>{It.read(()=>{try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}),It.render(()=>{jC(e,i,{enableHardwareAcceleration:!1},VC(t.tagName),n.transformTemplate),cR(t,e)})}})},cB={useVisualState:dR({scrapeMotionValuesFromProps:$C,createRenderState:BC})};function uB(n,{forwardMotionProps:t=!1},e,i){return{...NC(n)?lB:cB,preloadedFeatures:e,useRender:tB(t),createVisualElement:i,Component:n}}function Yr(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}const fR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function qx(n,t="page"){return{point:{x:n[t+"X"],y:n[t+"Y"]}}}const hB=n=>t=>fR(t)&&n(t,qx(t));function qr(n,t,e,i){return Yr(n,t,hB(e),i)}const dB=(n,t)=>e=>t(n(e)),La=(...n)=>n.reduce(dB);function pR(n){let t=null;return()=>{const e=()=>{t=null};return t===null?(t=n,e):!1}}const g_=pR("dragHorizontal"),y_=pR("dragVertical");function mR(n){let t=!1;if(n==="y")t=y_();else if(n==="x")t=g_();else{const e=g_(),i=y_();e&&i?t=()=>{e(),i()}:(e&&e(),i&&i())}return t}function gR(){const n=mR(!0);return n?(n(),!1):!0}let Wa=class{constructor(t){this.isMounted=!1,this.node=t}update(){}};function v_(n,t){const e="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),s=(r,o)=>{if(r.pointerType==="touch"||gR())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",t),a[i]&&It.update(()=>a[i](r,o))};return qr(n.current,e,s,{passive:!n.getProps()[i]})}let fB=class extends Wa{mount(){this.unmount=La(v_(this.node,!0),v_(this.node,!1))}unmount(){}},pB=class extends Wa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=La(Yr(this.node.current,"focus",()=>this.onFocus()),Yr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};const yR=(n,t)=>t?n===t?!0:yR(n,t.parentElement):!1;function z2(n,t){if(!t)return;const e=new PointerEvent("pointer"+n);t(e,qx(e))}let mB=class extends Wa{constructor(){super(...arguments),this.removeStartListeners=re,this.removeEndListeners=re,this.removeAccessibleListeners=re,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),r=qr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();It.update(()=>{!d&&!yR(this.node.current,a.target)?h&&h(a,l):u&&u(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=qr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=La(r,o),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=r=>{if(r.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||z2("up",(l,u)=>{const{onTap:h}=this.node.getProps();h&&It.update(()=>h(l,u))})};this.removeEndListeners(),this.removeEndListeners=Yr(this.node.current,"keyup",o),z2("down",(a,l)=>{this.startPress(a,l)})},e=Yr(this.node.current,"keydown",t),i=()=>{this.isPressing&&z2("cancel",(r,o)=>this.cancelPress(r,o))},s=Yr(this.node.current,"blur",i);this.removeAccessibleListeners=La(e,s)}}startPress(t,e){this.isPressing=!0;const{onTapStart:i,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&It.update(()=>i(t,e))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!gR()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&It.update(()=>i(t,e))}mount(){const t=this.node.getProps(),e=qr(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Yr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=La(e,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}};const EA=new WeakMap,U2=new WeakMap,gB=n=>{const t=EA.get(n.target);t&&t(n)},yB=n=>{n.forEach(gB)};function vB({root:n,...t}){const e=n||document;U2.has(e)||U2.set(e,{});const i=U2.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(yB,{root:n,...t})),i[s]}function wB(n,t,e){const i=vB(t);return EA.set(n,e),i.observe(n),()=>{EA.delete(n),i.unobserve(n)}}const xB={some:0,all:1};let bB=class extends Wa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:xB[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(l)};return wB(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(AB(t,e))&&this.startObserver()}unmount(){}};function AB({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const SB={inView:{Feature:bB},tap:{Feature:mB},focus:{Feature:pB},hover:{Feature:fB}};function vR(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}function EB(n){const t={};return n.values.forEach((e,i)=>t[i]=e.get()),t}function CB(n){const t={};return n.values.forEach((e,i)=>t[i]=e.getVelocity()),t}function Qx(n,t,e){const i=n.getProps();return zC(i,t,e!==void 0?e:i.custom,EB(n),CB(n))}let TB=re,UC=re;const Ra=n=>n*1e3,Qr=n=>n/1e3,PB={current:!1},wR=n=>Array.isArray(n)&&typeof n[0]=="number";function xR(n){return!!(!n||typeof n=="string"&&bR[n]||wR(n)||Array.isArray(n)&&n.every(xR))}const Hf=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,bR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hf([0,.65,.55,1]),circOut:Hf([.55,0,1,.45]),backIn:Hf([.31,.01,.66,-.59]),backOut:Hf([.33,1.53,.69,.99])};function AR(n){if(n)return wR(n)?Hf(n):Array.isArray(n)?n.map(AR):bR[n]}function _B(n,t,e,{delay:i=0,duration:s,repeat:r=0,repeatType:o="loop",ease:a,times:l}={}){const u={[t]:e};l&&(u.offset=l);const h=AR(a);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:i,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"})}function kB(n,{repeat:t,repeatType:e="loop"}){const i=t&&e!=="loop"&&t%2===1?0:n.length-1;return n[i]}const SR=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,MB=1e-7,LB=12;function RB(n,t,e,i,s){let r,o,a=0;do o=t+(e-t)/2,r=SR(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>MB&&++a<LB);return o}function q0(n,t,e,i){if(n===t&&e===i)return re;const s=r=>RB(r,0,1,n,e);return r=>r===0||r===1?r:SR(s(r),t,i)}const DB=q0(.42,0,1,1),FB=q0(0,0,.58,1),ER=q0(.42,0,.58,1),IB=n=>Array.isArray(n)&&typeof n[0]!="number",CR=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,TR=n=>t=>1-n(1-t),HC=n=>1-Math.sin(Math.acos(n)),PR=TR(HC),NB=CR(HC),_R=q0(.33,1.53,.69,.99),WC=TR(_R),OB=CR(WC),BB=n=>(n*=2)<1?.5*WC(n):.5*(2-Math.pow(2,-10*(n-1))),jB={linear:re,easeIn:DB,easeInOut:ER,easeOut:FB,circIn:HC,circInOut:NB,circOut:PR,backIn:WC,backInOut:OB,backOut:_R,anticipate:BB},w_=n=>{if(Array.isArray(n)){UC(n.length===4);const[t,e,i,s]=n;return q0(t,e,i,s)}else if(typeof n=="string")return jB[n];return n},GC=(n,t)=>e=>!!(Y0(e)&&V8.test(e)&&e.startsWith(n)||t&&Object.prototype.hasOwnProperty.call(e,t)),kR=(n,t,e)=>i=>{if(!Y0(i))return i;const[s,r,o,a]=i.match(Kx);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},VB=n=>Na(0,255,n),H2={...nu,transform:n=>Math.round(VB(n))},hl={test:GC("rgb","red"),parse:kR("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+H2.transform(n)+", "+H2.transform(t)+", "+H2.transform(e)+", "+Sp(Ap.transform(i))+")"};function $B(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const CA={test:GC("#"),parse:$B,transform:hl.transform},Lu={test:GC("hsl","hue"),parse:kR("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Zs.transform(Sp(t))+", "+Zs.transform(Sp(e))+", "+Sp(Ap.transform(i))+")"},wn={test:n=>hl.test(n)||CA.test(n)||Lu.test(n),parse:n=>hl.test(n)?hl.parse(n):Lu.test(n)?Lu.parse(n):CA.parse(n),transform:n=>Y0(n)?n:n.hasOwnProperty("red")?hl.transform(n):Lu.transform(n)},Kt=(n,t,e)=>-e*n+e*t+n;function W2(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function zB({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,l=2*e-a;s=W2(l,a,n+1/3),r=W2(l,a,n),o=W2(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}const G2=(n,t,e)=>{const i=n*n;return Math.sqrt(Math.max(0,e*(t*t-i)+i))},UB=[CA,hl,Lu],HB=n=>UB.find(t=>t.test(n));function x_(n){const t=HB(n);let e=t.parse(n);return t===Lu&&(e=zB(e)),e}const MR=(n,t)=>{const e=x_(n),i=x_(t),s={...e};return r=>(s.red=G2(e.red,i.red,r),s.green=G2(e.green,i.green,r),s.blue=G2(e.blue,i.blue,r),s.alpha=Kt(e.alpha,i.alpha,r),hl.transform(s))};function WB(n){var t,e;return isNaN(n)&&Y0(n)&&(((t=n.match(Kx))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(nR))===null||e===void 0?void 0:e.length)||0)>0}const LR={regex:B8,countKey:"Vars",token:"${v}",parse:re},RR={regex:nR,countKey:"Colors",token:"${c}",parse:wn.parse},DR={regex:Kx,countKey:"Numbers",token:"${n}",parse:nu.parse};function X2(n,{regex:t,countKey:e,token:i,parse:s}){const r=n.tokenised.match(t);r&&(n["num"+e]=r.length,n.tokenised=n.tokenised.replace(t,i),n.values.push(...r.map(s)))}function gv(n){const t=n.toString(),e={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return e.value.includes("var(--")&&X2(e,LR),X2(e,RR),X2(e,DR),e}function FR(n){return gv(n).values}function IR(n){const{values:t,numColors:e,numVars:i,tokenised:s}=gv(n),r=t.length;return o=>{let a=s;for(let l=0;l<r;l++)l<i?a=a.replace(LR.token,o[l]):l<i+e?a=a.replace(RR.token,wn.transform(o[l])):a=a.replace(DR.token,Sp(o[l]));return a}}const GB=n=>typeof n=="number"?0:n;function XB(n){const t=FR(n);return IR(n)(t.map(GB))}const Oa={test:WB,parse:FR,createTransformer:IR,getAnimatableNone:XB},NR=(n,t)=>e=>`${e>0?t:n}`;function OR(n,t){return typeof n=="number"?e=>Kt(n,t,e):wn.test(n)?MR(n,t):n.startsWith("var(")?NR(n,t):jR(n,t)}const BR=(n,t)=>{const e=[...n],i=e.length,s=n.map((r,o)=>OR(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}},YB=(n,t)=>{const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=OR(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}},jR=(n,t)=>{const e=Oa.createTransformer(t),i=gv(n),s=gv(t);return i.numVars===s.numVars&&i.numColors===s.numColors&&i.numNumbers>=s.numNumbers?La(BR(i.values,s.values),e):NR(n,t)},Zp=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i},b_=(n,t)=>e=>Kt(n,t,e);function KB(n){return typeof n=="number"?b_:typeof n=="string"?wn.test(n)?MR:jR:Array.isArray(n)?BR:typeof n=="object"?YB:b_}function qB(n,t,e){const i=[],s=e||KB(n[0]),r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(t){const l=Array.isArray(t)?t[o]||re:t;a=La(l,a)}i.push(a)}return i}function VR(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(UC(r===t.length),r===1)return()=>t[0];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const o=qB(t,i,s),a=o.length,l=u=>{let h=0;if(a>1)for(;h<n.length-2&&!(u<n[h+1]);h++);const d=Zp(n[h],n[h+1],u);return o[h](d)};return e?u=>l(Na(n[0],n[r-1],u)):l}function QB(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Zp(0,t,i);n.push(Kt(e,1,s))}}function ZB(n){const t=[0];return QB(t,n.length-1),t}function JB(n,t){return n.map(e=>e*t)}function tj(n,t){return n.map(()=>t||ER).splice(0,n.length-1)}function yv({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=IB(i)?i.map(w_):w_(i),r={done:!1,value:t[0]},o=JB(e&&e.length===t.length?e:ZB(t),n),a=VR(o,t,{ease:Array.isArray(s)?s:tj(t,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}function $R(n,t){return t?n*(1e3/t):0}const ej=5;function zR(n,t,e){const i=Math.max(t-ej,0);return $R(e-n(i),t-i)}const Y2=.001,nj=.01,A_=10,ij=.05,sj=1;function rj({duration:n=800,bounce:t=.25,velocity:e=0,mass:i=1}){let s,r;TB(n<=Ra(A_));let o=1-t;o=Na(ij,sj,o),n=Na(nj,A_,Qr(n)),o<1?(s=u=>{const h=u*o,d=h*n,f=h-e,p=TA(u,o),g=Math.exp(-d);return Y2-f/p*g},r=u=>{const d=u*o*n,f=d*e+e,p=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-d),y=TA(Math.pow(u,2),o);return(-s(u)+Y2>0?-1:1)*((f-p)*g)/y}):(s=u=>{const h=Math.exp(-u*n),d=(u-e)*n+1;return-Y2+h*d},r=u=>{const h=Math.exp(-u*n),d=(e-u)*(n*n);return h*d});const a=5/n,l=aj(s,r,a);if(n=Ra(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const oj=12;function aj(n,t,e){let i=e;for(let s=1;s<oj;s++)i=i-n(i)/t(i);return i}function TA(n,t){return n*Math.sqrt(1-t*t)}const lj=["duration","bounce"],cj=["stiffness","damping","mass"];function S_(n,t){return t.some(e=>n[e]!==void 0)}function uj(n){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!S_(n,cj)&&S_(n,lj)){const e=rj(n);t={...t,...e,mass:1},t.isResolvedFromDuration=!0}return t}function UR({keyframes:n,restDelta:t,restSpeed:e,...i}){const s=n[0],r=n[n.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=uj({...i,velocity:-Qr(i.velocity||0)}),p=d||0,g=l/(2*Math.sqrt(a*u)),y=r-s,A=Qr(Math.sqrt(a/u)),m=Math.abs(y)<5;e||(e=m?.01:2),t||(t=m?.005:.5);let v;if(g<1){const w=TA(A,g);v=S=>{const T=Math.exp(-g*A*S);return r-T*((p+g*A*y)/w*Math.sin(w*S)+y*Math.cos(w*S))}}else if(g===1)v=w=>r-Math.exp(-A*w)*(y+(p+A*y)*w);else{const w=A*Math.sqrt(g*g-1);v=S=>{const T=Math.exp(-g*A*S),P=Math.min(w*S,300);return r-T*((p+g*A*y)*Math.sinh(P)+w*y*Math.cosh(P))/w}}return{calculatedDuration:f&&h||null,next:w=>{const S=v(w);if(f)o.done=w>=h;else{let T=p;w!==0&&(g<1?T=zR(v,w,S):T=0);const P=Math.abs(T)<=e,_=Math.abs(r-S)<=t;o.done=P&&_}return o.value=o.done?r:S,o}}}function E_({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],f={done:!1,value:d},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let y=e*t;const A=d+y,m=o===void 0?A:o(A);m!==A&&(y=m-d);const v=k=>-y*Math.exp(-k/i),w=k=>m+v(k),S=k=>{const L=v(k),D=w(k);f.done=Math.abs(L)<=u,f.value=f.done?m:D};let T,P;const _=k=>{p(f.value)&&(T=k,P=UR({keyframes:[f.value,g(f.value)],velocity:zR(w,k,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:h}))};return _(0),{calculatedDuration:null,next:k=>{let L=!1;return!P&&T===void 0&&(L=!0,S(k),_(k)),T!==void 0&&k>T?P.next(k-T):(!L&&S(k),f)}}}const hj=n=>{const t=({timestamp:e})=>n(e);return{start:()=>It.update(t,!0),stop:()=>no(t),now:()=>ln.isProcessing?ln.timestamp:performance.now()}},C_=2e4;function T_(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<C_;)t+=e,i=n.next(t);return t>=C_?1/0:t}const dj={decay:E_,inertia:E_,tween:yv,keyframes:yv,spring:UR};function vv({autoplay:n=!0,delay:t=0,driver:e=hj,keyframes:i,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:h,onUpdate:d,...f}){let p=1,g=!1,y,A;const m=()=>{A=new Promise(W=>{y=W})};m();let v;const w=dj[s]||yv;let S;w!==yv&&typeof i[0]!="number"&&(S=VR([0,100],i,{clamp:!1}),i=[0,100]);const T=w({...f,keyframes:i});let P;a==="mirror"&&(P=w({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let _="idle",k=null,L=null,D=null;T.calculatedDuration===null&&r&&(T.calculatedDuration=T_(T));const{calculatedDuration:R}=T;let I=1/0,B=1/0;R!==null&&(I=R+o,B=I*(r+1)-o);let F=0;const V=W=>{if(L===null)return;p>0&&(L=Math.min(L,W)),p<0&&(L=Math.min(W-B/p,L)),k!==null?F=k:F=Math.round(W-L)*p;const G=F-t*(p>=0?1:-1),Z=p>=0?G<0:G>B;F=Math.max(G,0),_==="finished"&&k===null&&(F=B);let dt=F,vt=T;if(r){const je=Math.min(F,B)/I;let gt=Math.floor(je),oe=je%1;!oe&&je>=1&&(oe=1),oe===1&&gt--,gt=Math.min(gt,r+1),!!(gt%2)&&(a==="reverse"?(oe=1-oe,o&&(oe-=o/I)):a==="mirror"&&(vt=P)),dt=Na(0,1,oe)*I}const ut=Z?{done:!1,value:i[0]}:vt.next(dt);S&&(ut.value=S(ut.value));let{done:lt}=ut;!Z&&R!==null&&(lt=p>=0?F>=B:F<=0);const vi=k===null&&(_==="finished"||_==="running"&&lt);return d&&d(ut.value),vi&&N(),ut},O=()=>{v&&v.stop(),v=void 0},j=()=>{_="idle",O(),y(),m(),L=D=null},N=()=>{_="finished",h&&h(),O(),y()},$=()=>{if(g)return;v||(v=e(V));const W=v.now();l&&l(),k!==null?L=W-k:(!L||_==="finished")&&(L=W),_==="finished"&&m(),D=L,k=null,_="running",v.start()};n&&$();const H={then(W,G){return A.then(W,G)},get time(){return Qr(F)},set time(W){W=Ra(W),F=W,k!==null||!v||p===0?k=W:L=v.now()-W/p},get duration(){const W=T.calculatedDuration===null?T_(T):T.calculatedDuration;return Qr(W)},get speed(){return p},set speed(W){W===p||!v||(p=W,H.time=Qr(F))},get state(){return _},play:$,pause:()=>{_="paused",k=F},stop:()=>{g=!0,_!=="idle"&&(_="idle",u&&u(),j())},cancel:()=>{D!==null&&V(D),j()},complete:()=>{_="finished"},sample:W=>(L=0,V(W))};return H}function fj(n){let t;return()=>(t===void 0&&(t=n()),t)}const pj=fj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),mj=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),k1=10,gj=2e4,yj=(n,t)=>t.type==="spring"||n==="backgroundColor"||!xR(t.ease);function vj(n,t,{onUpdate:e,onComplete:i,...s}){if(!(pj()&&mj.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const h=()=>{l=new Promise(w=>{a=w})};h();let{keyframes:d,duration:f=300,ease:p,times:g}=s;if(yj(t,s)){const w=vv({...s,repeat:0,delay:0});let S={done:!1,value:d[0]};const T=[];let P=0;for(;!S.done&&P<gj;)S=w.sample(P),T.push(S.value),P+=k1;g=void 0,d=T,f=P-k1,p="linear"}const y=_B(n.owner.current,t,d,{...s,duration:f,ease:p,times:g}),A=()=>{u=!1,y.cancel()},m=()=>{u=!0,It.update(A),a(),h()};return y.onfinish=()=>{u||(n.set(kB(d,s)),i&&i(),m())},{then(w,S){return l.then(w,S)},attachTimeline(w){return y.timeline=w,y.onfinish=null,re},get time(){return Qr(y.currentTime||0)},set time(w){y.currentTime=Ra(w)},get speed(){return y.playbackRate},set speed(w){y.playbackRate=w},get duration(){return Qr(f)},play:()=>{o||(y.play(),no(A))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:w}=y;if(w){const S=vv({...s,autoplay:!1});n.setWithVelocity(S.sample(w-k1).value,S.sample(w).value,k1)}m()},complete:()=>{u||y.finish()},cancel:m}}function wj({keyframes:n,delay:t,onUpdate:e,onComplete:i}){const s=()=>(e&&e(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:re,pause:re,stop:re,then:r=>(r(),Promise.resolve()),cancel:re,complete:re});return t?vv({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const xj={type:"spring",stiffness:500,damping:25,restSpeed:10},bj=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Aj={type:"keyframes",duration:.8},Sj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ej=(n,{keyframes:t})=>t.length>2?Aj:eu.has(n)?n.startsWith("scale")?bj(t[1]):xj:Sj,PA=(n,t)=>n==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Oa.test(t)||t==="0")&&!t.startsWith("url(")),Cj=new Set(["brightness","contrast","saturate","opacity"]);function Tj(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(Kx)||[];if(!i)return n;const s=e.replace(i,"");let r=Cj.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const Pj=/([a-z-]*)\(.*?\)/g,_A={...Oa,getAnimatableNone:n=>{const t=n.match(Pj);return t?t.map(Tj).join(" "):n}},_j={...iR,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:_A,WebkitFilter:_A},XC=n=>_j[n];function HR(n,t){let e=XC(n);return e!==_A&&(e=Oa),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const WR=n=>/^0[^.\s]+$/.test(n);function kj(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||WR(n)}function Mj(n,t,e,i){const s=PA(t,e);let r;Array.isArray(e)?r=[...e]:r=[null,e];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let u=0;u<r.length;u++)r[u]===null&&(r[u]=u===0?o:r[u-1]),kj(r[u])&&l.push(u),typeof r[u]=="string"&&r[u]!=="none"&&r[u]!=="0"&&(a=r[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const h=l[u];r[h]=HR(t,a)}return r}function Lj({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}function YC(n,t){return n[t]||n.default||n}const Rj={skipAnimations:!1},KC=(n,t,e,i={})=>s=>{const r=YC(i,n)||{},o=r.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Ra(o);const l=Mj(t,n,e,r),u=l[0],h=l[l.length-1],d=PA(n,u),f=PA(n,h);let p={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...r,delay:-a,onUpdate:g=>{t.set(g),r.onUpdate&&r.onUpdate(g)},onComplete:()=>{s(),r.onComplete&&r.onComplete()}};if(Lj(r)||(p={...p,...Ej(n,p)}),p.duration&&(p.duration=Ra(p.duration)),p.repeatDelay&&(p.repeatDelay=Ra(p.repeatDelay)),!d||!f||PB.current||r.type===!1||Rj.skipAnimations)return wj(p);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=vj(t,n,p);if(g)return g}return vv(p)};function wv(n){return!!(zn(n)&&n.add)}const GR=n=>/^\-?\d*\.?\d+$/.test(n);function qC(n,t){n.indexOf(t)===-1&&n.push(t)}function QC(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}let ZC=class{constructor(){this.subscriptions=[]}add(t){return qC(this.subscriptions,t),()=>QC(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};const Dj=n=>!isNaN(parseFloat(n));let Fj=class{constructor(t,e={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,s=!0)=>{this.prev=this.current,this.current=i;const{delta:r,timestamp:o}=ln;this.lastUpdated!==o&&(this.timeDelta=r,this.lastUpdated=o,It.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>It.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Dj(this.current),this.owner=e.owner}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new ZC);const i=this.events[t].add(e);return t==="change"?()=>{i(),It.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?$R(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function af(n,t){return new Fj(n,t)}const XR=n=>t=>t.test(n),Ij={test:n=>n==="auto",parse:n=>n},YR=[nu,J,Zs,ho,z8,$8,Ij],Lf=n=>YR.find(XR(n)),Nj=[...YR,wn,Oa],Oj=n=>Nj.find(XR(n));function Bj(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,af(e))}function jj(n,t){const e=Qx(n,t);let{transitionEnd:i={},transition:s={},...r}=e?n.makeTargetAnimatable(e,!1):{};r={...r,...i};for(const o in r){const a=nB(r[o]);Bj(n,o,a)}}function Vj(n,t,e){var i,s;const r=Object.keys(t).filter(a=>!n.hasValue(a)),o=r.length;if(o)for(let a=0;a<o;a++){const l=r[a],u=t[l];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(i=e[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&s!==void 0?s:t[l]),h!=null&&(typeof h=="string"&&(GR(h)||WR(h))?h=parseFloat(h):!Oj(h)&&Oa.test(u)&&(h=HR(l,u)),n.addValue(l,af(h,{owner:n})),e[l]===void 0&&(e[l]=h),h!==null&&n.setBaseTarget(l,h))}}function $j(n,t){return t?(t[n]||t.default||t).from:void 0}function zj(n,t,e){const i={};for(const s in n){const r=$j(s,t);if(r!==void 0)i[s]=r;else{const o=e.getValue(s);o&&(i[s]=o.get())}}return i}function Uj({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function Hj(n,t){const e=n.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}else return e!==t}function KR(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(t);const l=n.getValue("willChange");i&&(r=i);const u=[],h=s&&n.animationState&&n.animationState.getState()[s];for(const d in a){const f=n.getValue(d),p=a[d];if(!f||p===void 0||h&&Uj(h,d))continue;const g={delay:e,elapsed:0,...YC(r||{},d)};if(window.HandoffAppearAnimations){const m=n.getProps()[qL];if(m){const v=window.HandoffAppearAnimations(m,d,f,It);v!==null&&(g.elapsed=v,g.isHandoff=!0)}}let y=!g.isHandoff&&!Hj(f,p);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(KC(d,f,p,n.shouldReduceMotion&&eu.has(d)?{type:!1}:g));const A=f.animation;wv(l)&&(l.add(d),A.then(()=>l.remove(d))),u.push(A)}return o&&Promise.all(u).then(()=>{o&&jj(n,o)}),u}function kA(n,t,e={}){const i=Qx(n,t,e.custom);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all(KR(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return Wj(n,t,u+l,h,d,e)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[r,o]:[o,r];return l().then(()=>u())}else return Promise.all([r(),o(e.delay)])}function Wj(n,t,e=0,i=0,s=1,r){const o=[],a=(n.variantChildren.size-1)*i,l=s===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(Gj).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(kA(u,t,{...r,delay:e+l(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Gj(n,t){return n.sortNodePosition(t)}function Xj(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>kA(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=kA(n,t,e);else{const s=typeof t=="function"?Qx(n,t,e.custom):t;i=Promise.all(KR(n,s,e))}return i.then(()=>n.notify("AnimationComplete",t))}const Yj=[...DC].reverse(),Kj=DC.length;function qj(n){return t=>Promise.all(t.map(({animation:e,options:i})=>Xj(n,e,i)))}function Qj(n){let t=qj(n);const e=Jj();let i=!0;const s=(l,u)=>{const h=Qx(n,u);if(h){const{transition:d,transitionEnd:f,...p}=h;l={...l,...p,...f}}return l};function r(l){t=l(n)}function o(l,u){const h=n.getProps(),d=n.getVariantContext(!0)||{},f=[],p=new Set;let g={},y=1/0;for(let m=0;m<Kj;m++){const v=Yj[m],w=e[v],S=h[v]!==void 0?h[v]:d[v],T=qp(S),P=v===u?w.isActive:null;P===!1&&(y=m);let _=S===d[v]&&S!==h[v]&&T;if(_&&i&&n.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...g},!w.isActive&&P===null||!S&&!w.prevProp||Xx(S)||typeof S=="boolean")continue;let L=Zj(w.prevProp,S)||v===u&&w.isActive&&!_&&T||m>y&&T,D=!1;const R=Array.isArray(S)?S:[S];let I=R.reduce(s,{});P===!1&&(I={});const{prevResolvedValues:B={}}=w,F={...B,...I},V=O=>{L=!0,p.has(O)&&(D=!0,p.delete(O)),w.needsAnimating[O]=!0};for(const O in F){const j=I[O],N=B[O];if(g.hasOwnProperty(O))continue;let $=!1;mv(j)&&mv(N)?$=!vR(j,N):$=j!==N,$?j!==void 0?V(O):p.add(O):j!==void 0&&p.has(O)?V(O):w.protectedKeys[O]=!0}w.prevProp=S,w.prevResolvedValues=I,w.isActive&&(g={...g,...I}),i&&n.blockInitialAnimation&&(L=!1),L&&(!_||D)&&f.push(...R.map(O=>({animation:O,options:{type:v,...l}})))}if(p.size){const m={};p.forEach(v=>{const w=n.getBaseTarget(v);w!==void 0&&(m[v]=w)}),f.push({animation:m})}let A=!!f.length;return i&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(A=!1),i=!1,A?t(f):Promise.resolve()}function a(l,u,h){var d;if(e[l].isActive===u)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(l,u)}),e[l].isActive=u;const f=o(h,l);for(const p in e)e[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>e}}function Zj(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!vR(t,n):!1}function Xa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jj(){return{animate:Xa(!0),whileInView:Xa(),whileHover:Xa(),whileTap:Xa(),whileDrag:Xa(),whileFocus:Xa(),exit:Xa()}}let tV=class extends Wa{constructor(t){super(t),t.animationState||(t.animationState=Qj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Xx(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){}},eV=0,nV=class extends Wa{constructor(){super(...arguments),this.id=eV++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e,custom:i}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});e&&!t&&r.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}};const iV={animation:{Feature:tV},exit:{Feature:nV}},P_=(n,t)=>Math.abs(n-t);function sV(n,t){const e=P_(n.x,t.x),i=P_(n.y,t.y);return Math.sqrt(e**2+i**2)}let qR=class{constructor(t,e,{transformPagePoint:i,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=q2(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=sV(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=d,{timestamp:y}=ln;this.history.push({...g,timestamp:y});const{onStart:A,onMove:m}=this.handlers;f||(A&&A(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=K2(f,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=q2(d.type==="pointercancel"?this.lastMoveEventInfo:K2(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,A),g&&g(d,A)},!fR(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.contextWindow=s||window;const o=qx(t),a=K2(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=ln;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=e;h&&h(t,q2(a,this.history)),this.removeListeners=La(qr(this.contextWindow,"pointermove",this.handlePointerMove),qr(this.contextWindow,"pointerup",this.handlePointerUp),qr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),no(this.updatePoint)}};function K2(n,t){return t?{point:t(n.point)}:n}function __(n,t){return{x:n.x-t.x,y:n.y-t.y}}function q2({point:n},t){return{point:n,delta:__(n,QR(t)),offset:__(n,rV(t)),velocity:oV(t,.1)}}function rV(n){return n[0]}function QR(n){return n[n.length-1]}function oV(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=QR(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>Ra(t)));)e--;if(!i)return{x:0,y:0};const r=Qr(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function pi(n){return n.max-n.min}function MA(n,t=0,e=.01){return Math.abs(n-t)<=e}function k_(n,t,e,i=.5){n.origin=i,n.originPoint=Kt(t.min,t.max,n.origin),n.scale=pi(e)/pi(t),(MA(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=Kt(e.min,e.max,n.origin)-n.originPoint,(MA(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Ep(n,t,e,i){k_(n.x,t.x,e.x,i?i.originX:void 0),k_(n.y,t.y,e.y,i?i.originY:void 0)}function M_(n,t,e){n.min=e.min+t.min,n.max=n.min+pi(t)}function aV(n,t,e){M_(n.x,t.x,e.x),M_(n.y,t.y,e.y)}function L_(n,t,e){n.min=t.min-e.min,n.max=n.min+pi(t)}function Cp(n,t,e){L_(n.x,t.x,e.x),L_(n.y,t.y,e.y)}function lV(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Kt(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Kt(e,n,i.max):Math.min(n,e)),n}function R_(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function cV(n,{top:t,left:e,bottom:i,right:s}){return{x:R_(n.x,e,s),y:R_(n.y,t,i)}}function D_(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function uV(n,t){return{x:D_(n.x,t.x),y:D_(n.y,t.y)}}function hV(n,t){let e=.5;const i=pi(n),s=pi(t);return s>i?e=Zp(t.min,t.max-i,n.min):i>s&&(e=Zp(n.min,n.max-s,t.min)),Na(0,1,e)}function dV(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const LA=.35;function fV(n=LA){return n===!1?n=0:n===!0&&(n=LA),{x:F_(n,"left","right"),y:F_(n,"top","bottom")}}function F_(n,t,e){return{min:I_(n,t),max:I_(n,e)}}function I_(n,t){return typeof n=="number"?n:n[t]||0}const N_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ru=()=>({x:N_(),y:N_()}),O_=()=>({min:0,max:0}),pe=()=>({x:O_(),y:O_()});function Si(n){return[n("x"),n("y")]}function ZR({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function pV({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function mV(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function Q2(n){return n===void 0||n===1}function RA({scale:n,scaleX:t,scaleY:e}){return!Q2(n)||!Q2(t)||!Q2(e)}function Za(n){return RA(n)||JR(n)||n.z||n.rotate||n.rotateX||n.rotateY}function JR(n){return B_(n.x)||B_(n.y)}function B_(n){return n&&n!=="0%"}function xv(n,t,e){const i=n-e,s=t*i;return e+s}function j_(n,t,e,i,s){return s!==void 0&&(n=xv(n,s,i)),xv(n,e,i)+t}function DA(n,t=0,e=1,i,s){n.min=j_(n.min,t,e,i,s),n.max=j_(n.max,t,e,i,s)}function tD(n,{x:t,y:e}){DA(n.x,t.translate,t.scale,t.originPoint),DA(n.y,e.translate,e.scale,e.originPoint)}function gV(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=e[a],o=r.projectionDelta;const l=r.instance;l&&l.style&&l.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Du(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,tD(n,o)),i&&Za(r.latestValues)&&Du(n,r.latestValues))}t.x=V_(t.x),t.y=V_(t.y)}function V_(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function yo(n,t){n.min=n.min+t,n.max=n.max+t}function $_(n,t,[e,i,s]){const r=t[s]!==void 0?t[s]:.5,o=Kt(n.min,n.max,r);DA(n,t[e],t[i],o,t.scale)}const yV=["x","scaleX","originX"],vV=["y","scaleY","originY"];function Du(n,t){$_(n.x,t,yV),$_(n.y,t,vV)}function eD(n,t){return ZR(mV(n.getBoundingClientRect(),t))}function wV(n,t,e){const i=eD(n,e),{scroll:s}=t;return s&&(yo(i.x,s.offset.x),yo(i.y,s.offset.y)),i}const nD=({current:n})=>n?n.ownerDocument.defaultView:null,xV=new WeakMap;let bV=class{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pe(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(qx(h,"page").point)},r=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=mR(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Si(A=>{let m=this.getAxisMotionValue(A).get()||0;if(Zs.test(m)){const{projection:v}=this.visualElement;if(v&&v.layout){const w=v.layout.layoutBox[A];w&&(m=pi(w)*(parseFloat(m)/100))}}this.originPoint[A]=m}),g&&It.update(()=>g(h,d),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:A}=d;if(p&&this.currentDirection===null){this.currentDirection=AV(A),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,A),this.updateAxis("y",d.point,A),this.visualElement.render(),y&&y(h,d)},a=(h,d)=>this.stop(h,d),l=()=>Si(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new qR(t,{onSessionStart:s,onStart:r,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:nD(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&It.update(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!M1(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=lV(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&Mu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=cV(s.layoutBox,e):this.constraints=!1,this.elastic=fV(i),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Si(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=dV(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Mu(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=wV(i,s.root,this.visualElement.getTransformPagePoint());let o=uV(s.layout.layoutBox,r);if(e){const a=e(pV(o));this.hasMutatedConstraints=!!a,a&&(o=ZR(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Si(h=>{if(!M1(h,e,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:i?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,g)});return Promise.all(u).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return i.start(KC(t,i,0,e))}stopAnimation(){Si(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Si(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Si(e=>{const{drag:i}=this.getProps();if(!M1(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[e];r.set(t[e]-Kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Mu(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Si(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=hV({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Si(o=>{if(!M1(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Kt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;xV.set(this.visualElement,this);const t=this.visualElement.current,e=qr(t,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Mu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),i();const o=Yr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Si(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=LA,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}};function M1(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function AV(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}let SV=class extends Wa{constructor(t){super(t),this.removeGroupControls=re,this.removeListeners=re,this.controls=new bV(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||re}unmount(){this.removeGroupControls(),this.removeListeners()}};const z_=n=>(t,e)=>{n&&It.update(()=>n(t,e))};let EV=class extends Wa{constructor(){super(...arguments),this.removePointerDownListener=re}onPointerDown(t){this.session=new qR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nD(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:z_(t),onStart:z_(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&It.update(()=>s(r,o))}}}mount(){this.removePointerDownListener=qr(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};function CV(){const n=M.useContext(Wx);if(n===null)return[!0,null];const{isPresent:t,onExitComplete:e,register:i}=n,s=M.useId();return M.useEffect(()=>i(s),[]),!t&&e?[!1,()=>e&&e(s)]:[!0]}const ry={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function U_(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Rf={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(J.test(n))n=parseFloat(n);else return n;const e=U_(n,t.target.x),i=U_(n,t.target.y);return`${e}% ${i}%`}},TV={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=Oa.parse(n);if(s.length>5)return i;const r=Oa.createTransformer(n),o=typeof s[0]!="number"?1:0,a=e.x.scale*t.x,l=e.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=Kt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};let PV=class extends fs.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;F8(_V),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),ry.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,o=i.projection;return o&&(o.isPresent=r,s||t.layoutDependency!==e||e===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||It.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}};function iD(n){const[t,e]=CV(),i=M.useContext(IC);return fs.createElement(PV,{...n,layoutGroup:i,switchLayoutGroup:M.useContext(ZL),isPresent:t,safeToRemove:e})}const _V={borderRadius:{...Rf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rf,borderTopRightRadius:Rf,borderBottomLeftRadius:Rf,borderBottomRightRadius:Rf,boxShadow:TV},sD=["TopLeft","TopRight","BottomLeft","BottomRight"],kV=sD.length,H_=n=>typeof n=="string"?parseFloat(n):n,W_=n=>typeof n=="number"||J.test(n);function MV(n,t,e,i,s,r){s?(n.opacity=Kt(0,e.opacity!==void 0?e.opacity:1,LV(i)),n.opacityExit=Kt(t.opacity!==void 0?t.opacity:1,0,RV(i))):r&&(n.opacity=Kt(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,i));for(let o=0;o<kV;o++){const a=`border${sD[o]}Radius`;let l=G_(t,a),u=G_(e,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||W_(l)===W_(u)?(n[a]=Math.max(Kt(H_(l),H_(u),i),0),(Zs.test(u)||Zs.test(l))&&(n[a]+="%")):n[a]=u}(t.rotate||e.rotate)&&(n.rotate=Kt(t.rotate||0,e.rotate||0,i))}function G_(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const LV=rD(0,.5,PR),RV=rD(.5,.95,re);function rD(n,t,e){return i=>i<n?0:i>t?1:e(Zp(n,t,i))}function X_(n,t){n.min=t.min,n.max=t.max}function wi(n,t){X_(n.x,t.x),X_(n.y,t.y)}function Y_(n,t,e,i,s){return n-=t,n=xv(n,1/e,i),s!==void 0&&(n=xv(n,1/s,i)),n}function DV(n,t=0,e=1,i=.5,s,r=n,o=n){if(Zs.test(t)&&(t=parseFloat(t),t=Kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Kt(r.min,r.max,i);n===r&&(a-=t),n.min=Y_(n.min,t,e,a,s),n.max=Y_(n.max,t,e,a,s)}function K_(n,t,[e,i,s],r,o){DV(n,t[e],t[i],t[s],t.scale,r,o)}const FV=["x","scaleX","originX"],IV=["y","scaleY","originY"];function q_(n,t,e,i){K_(n.x,t,FV,e?e.x:void 0,i?i.x:void 0),K_(n.y,t,IV,e?e.y:void 0,i?i.y:void 0)}function Q_(n){return n.translate===0&&n.scale===1}function oD(n){return Q_(n.x)&&Q_(n.y)}function NV(n,t){return n.x.min===t.x.min&&n.x.max===t.x.max&&n.y.min===t.y.min&&n.y.max===t.y.max}function aD(n,t){return Math.round(n.x.min)===Math.round(t.x.min)&&Math.round(n.x.max)===Math.round(t.x.max)&&Math.round(n.y.min)===Math.round(t.y.min)&&Math.round(n.y.max)===Math.round(t.y.max)}function Z_(n){return pi(n.x)/pi(n.y)}let OV=class{constructor(){this.members=[]}add(t){qC(this.members,t),t.scheduleRender()}remove(t){if(QC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function J_(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y;if((s||r)&&(i=`translate3d(${s}px, ${r}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{rotate:l,rotateX:u,rotateY:h}=e;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),h&&(i+=`rotateY(${h}deg) `)}const o=n.x.scale*t.x,a=n.y.scale*t.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const BV=(n,t)=>n.depth-t.depth;let jV=class{constructor(){this.children=[],this.isDirty=!1}add(t){qC(this.children,t),this.isDirty=!0}remove(t){QC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(BV),this.isDirty=!1,this.children.forEach(t)}};function VV(n,t){const e=performance.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(no(i),n(r-t))};return It.read(i,!0),()=>no(i)}function $V(n){window.MotionDebug&&window.MotionDebug.record(n)}function zV(n){return n instanceof SVGElement&&n.tagName!=="svg"}function UV(n,t,e){const i=zn(n)?n:af(n);return i.start(KC("",i,t,e)),i.animation}const tk=["","X","Y","Z"],HV={visibility:"hidden"},ek=1e3;let WV=0;const Ja={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function lD({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=WV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ja.totalNodes=Ja.resolvedTargetDeltas=Ja.recalculatedProjection=0,this.nodes.forEach(YV),this.nodes.forEach(JV),this.nodes.forEach(t$),this.nodes.forEach(KV),$V(Ja)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new jV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ZC),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=zV(o),this.instance=o;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=VV(f,250),ry.hasAnimatedSinceResize&&(ry.hasAnimatedSinceResize=!1,this.nodes.forEach(ik))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||h.getDefaultTransition()||r$,{onLayoutAnimationStart:A,onLayoutAnimationComplete:m}=h.getProps(),v=!this.targetLayout||!aD(this.targetLayout,g)||p,w=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,w);const S={...YC(y,"layout"),onPlay:A,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||ik(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,no(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(e$),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nk);return}this.isUpdating||this.nodes.forEach(QV),this.isUpdating=!1,this.nodes.forEach(ZV),this.nodes.forEach(GV),this.nodes.forEach(XV),this.clearAllSnapshots();const a=performance.now();ln.delta=Na(0,1e3/60,a-ln.timestamp),ln.timestamp=a,ln.isProcessing=!0,$2.update.process(ln),$2.preRender.process(ln),$2.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qV),this.sharedNodes.forEach(n$)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:e(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!oD(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Za(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),o$(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return pe();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(yo(a.x,l.offset.x),yo(a.y,l.offset.y)),a}removeElementScroll(o){const a=pe();wi(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){wi(a,o);const{scroll:f}=this.root;f&&(yo(a.x,-f.offset.x),yo(a.y,-f.offset.y))}yo(a.x,h.offset.x),yo(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const l=pe();wi(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Du(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Za(h.latestValues)&&Du(l,h.latestValues)}return Za(this.latestValues)&&Du(l,this.latestValues),l}removeTransform(o){const a=pe();wi(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Za(u.latestValues))continue;RA(u.latestValues)&&u.updateSnapshot();const h=pe(),d=u.measurePageBox();wi(h,d),q_(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Za(this.latestValues)&&q_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=ln.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Cp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=pe(),this.targetWithTransforms=pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),tD(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pe(),this.relativeTargetOrigin=pe(),Cp(this.relativeTargetOrigin,this.target,p.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ja.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||RA(this.parent.latestValues)||JR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;wi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;gV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Ru(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ru(),this.projectionDeltaWithTransform=Ru());const y=this.projectionTransform;Ep(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=J_(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ja.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=pe(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,A=this.getStack(),m=!A||A.members.length<=1,v=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(s$));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const T=S/1e3;sk(d.x,o.x,T),sk(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),i$(this.relativeTarget,this.relativeTargetOrigin,f,T),w&&NV(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=pe()),wi(w,this.relativeTarget)),y&&(this.animationValues=h,MV(h,u,this.latestValues,T,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(no(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{ry.hasAnimatedSinceResize=!0,this.currentAnimation=UV(0,ek,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ek),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&cD(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||pe();const d=pi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=pi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}wi(a,l),Du(a,h),Ep(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new OV),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<tk.length;h++){const d="rotate"+tk[h];l[d]&&(u[d]=l[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return HV;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=sy(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=sy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Za(this.latestValues)&&(y.transform=h?h({},""):"none",this.hasProjected=!1),y}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=J_(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in fv){if(f[y]===void 0)continue;const{correct:A,applyTo:m}=fv[y],v=u.transform==="none"?f[y]:A(f[y],d);if(m){const w=m.length;for(let S=0;S<w;S++)u[m[S]]=v}else u[y]=v}return this.options.layoutId&&(u.pointerEvents=d===this?sy(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(nk),this.root.sharedNodes.clear()}}}function GV(n){n.updateLayout()}function XV(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=e.source!==n.layout.source;r==="size"?Si(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pi(f);f.min=i[d].min,f.max=f.min+p}):cD(r,e.layoutBox,i)&&Si(d=>{const f=o?e.measuredBox[d]:e.layoutBox[d],p=pi(i[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const a=Ru();Ep(a,i,e.layoutBox);const l=Ru();o?Ep(l,n.applyTransform(s,!0),e.measuredBox):Ep(l,i,e.layoutBox);const u=!oD(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=pe();Cp(g,e.layoutBox,f.layoutBox);const y=pe();Cp(y,i,p.layoutBox),aD(g,y)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function YV(n){Ja.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function KV(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function qV(n){n.clearSnapshot()}function nk(n){n.clearMeasurements()}function QV(n){n.isLayoutDirty=!1}function ZV(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function ik(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function JV(n){n.resolveTargetDelta()}function t$(n){n.calcProjection()}function e$(n){n.resetRotation()}function n$(n){n.removeLeadSnapshot()}function sk(n,t,e){n.translate=Kt(t.translate,0,e),n.scale=Kt(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function rk(n,t,e,i){n.min=Kt(t.min,e.min,i),n.max=Kt(t.max,e.max,i)}function i$(n,t,e,i){rk(n.x,t.x,e.x,i),rk(n.y,t.y,e.y,i)}function s$(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const r$={duration:.45,ease:[.4,0,.1,1]},ok=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ak=ok("applewebkit/")&&!ok("chrome/")?Math.round:re;function lk(n){n.min=ak(n.min),n.max=ak(n.max)}function o$(n){lk(n.x),lk(n.y)}function cD(n,t,e){return n==="position"||n==="preserve-aspect"&&!MA(Z_(t),Z_(e),.2)}const a$=lD({attachResizeListener:(n,t)=>Yr(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z2={current:void 0},uD=lD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Z2.current){const n=new a$({});n.mount(window),n.setOptions({layoutScroll:!0}),Z2.current=n}return Z2.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),l$={pan:{Feature:EV},drag:{Feature:SV,ProjectionNode:uD,MeasureLayout:iD}},c$=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function u$(n){const t=c$.exec(n);if(!t)return[,];const[,e,i]=t;return[e,i]}function FA(n,t,e=1){const[i,s]=u$(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return GR(o)?parseFloat(o):o}else return SA(s)?FA(s,t,e+1):s}function h$(n,{...t},e){const i=n.current;if(!(i instanceof Element))return{target:t,transitionEnd:e};e&&(e={...e}),n.values.forEach(s=>{const r=s.get();if(!SA(r))return;const o=FA(r,i);o&&s.set(o)});for(const s in t){const r=t[s];if(!SA(r))continue;const o=FA(r,i);o&&(t[s]=o,e||(e={}),e[s]===void 0&&(e[s]=r))}return{target:t,transitionEnd:e}}const d$=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),hD=n=>d$.has(n),f$=n=>Object.keys(n).some(hD),ck=n=>n===nu||n===J,uk=(n,t)=>parseFloat(n.split(", ")[t]),hk=(n,t)=>(e,{transform:i})=>{if(i==="none"||!i)return 0;const s=i.match(/^matrix3d\((.+)\)$/);if(s)return uk(s[1],t);{const r=i.match(/^matrix\((.+)\)$/);return r?uk(r[1],n):0}},p$=new Set(["x","y","z"]),m$=X0.filter(n=>!p$.has(n));function g$(n){const t=[];return m$.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t.length&&n.render(),t}const lf={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:hk(4,13),y:hk(5,14)};lf.translateX=lf.x;lf.translateY=lf.y;const y$=(n,t,e)=>{const i=t.measureViewportBox(),s=t.current,r=getComputedStyle(s),{display:o}=r,a={};o==="none"&&t.setStaticValue("display",n.display||"block"),e.forEach(u=>{a[u]=lf[u](i,r)}),t.render();const l=t.measureViewportBox();return e.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),n[u]=lf[u](l,r)}),n},v$=(n,t,e={},i={})=>{t={...t},i={...i};const s=Object.keys(t).filter(hD);let r=[],o=!1;const a=[];if(s.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let h=e[l],d=Lf(h);const f=t[l];let p;if(mv(f)){const g=f.length,y=f[0]===null?1:0;h=f[y],d=Lf(h);for(let A=y;A<g&&f[A]!==null;A++)p?UC(Lf(f[A])===p):p=Lf(f[A])}else p=Lf(f);if(d!==p)if(ck(d)&&ck(p)){const g=u.get();typeof g=="string"&&u.set(parseFloat(g)),typeof f=="string"?t[l]=parseFloat(f):Array.isArray(f)&&p===J&&(t[l]=f.map(parseFloat))}else d!=null&&d.transform&&(p!=null&&p.transform)&&(h===0||f===0)?h===0?u.set(p.transform(h)):t[l]=d.transform(f):(o||(r=g$(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:t[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=y$(t,n,a);return r.length&&r.forEach(([h,d])=>{n.getValue(h).set(d)}),n.render(),Gx&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:t,transitionEnd:i}};function w$(n,t,e,i){return f$(t)?v$(n,t,e,i):{target:t,transitionEnd:i}}const x$=(n,t,e,i)=>{const s=h$(n,t,i);return t=s.target,i=s.transitionEnd,w$(n,t,e,i)},IA={current:null},dD={current:!1};function b$(){if(dD.current=!0,!!Gx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>IA.current=n.matches;n.addListener(t),t()}else IA.current=!1}function A$(n,t,e){const{willChange:i}=t;for(const s in t){const r=t[s],o=e[s];if(zn(r))n.addValue(s,r),wv(i)&&i.add(s);else if(zn(o))n.addValue(s,af(r,{owner:n})),wv(i)&&i.remove(s);else if(o!==r)if(n.hasValue(s)){const a=n.getValue(s);!a.hasAnimated&&a.set(r)}else{const a=n.getStaticValue(s);n.addValue(s,af(a!==void 0?a:r,{owner:n}))}}for(const s in e)t[s]===void 0&&n.removeValue(s);return t}const dk=new WeakMap,fD=Object.keys(Qp),S$=fD.length,fk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],E$=FC.length;let C$=class{constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>It.render(this.render,!1,!0);const{latestValues:a,renderState:l}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Yx(e),this.isVariantNode=QL(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(e,{});for(const d in h){const f=h[d];a[d]!==void 0&&zn(f)&&(f.set(a[d],!1),wv(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,e){return{}}mount(t){this.current=t,dk.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),dD.current||b$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:IA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dk.delete(this.current),this.projection&&this.projection.unmount(),no(this.notifyUpdate),no(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,e){const i=eu.has(t),s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&It.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),r()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...e},i,s,r){let o,a;for(let l=0;l<S$;l++){const u=fD[l],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:p}=Qp[u];f&&(o=f),h(e)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:p}=e;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!h||d&&Mu(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const t in this.features){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}makeTargetAnimatable(t,e=!0){return this.makeTargetAnimatableFromInstance(t,this.props,e)}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<fk.length;i++){const s=fk[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r=t["on"+s];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=A$(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const e={};for(let i=0;i<E$;i++){const s=FC[i],r=this.props[s];(qp(r)||r===!1)&&(e[s]=r)}return e}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){e!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,e)),this.values.set(t,e),this.latestValues[t]=e.get()}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=af(e,{owner:this}),this.addValue(t,i)),i}readValue(t){var e;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(e=this.getBaseTargetFromProps(this.props,t))!==null&&e!==void 0?e:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props,s=typeof i=="string"||typeof i=="object"?(e=zC(this.props,i))===null||e===void 0?void 0:e[t]:void 0;if(i&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!zn(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new ZC),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}},pD=class extends C${sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:e,...i},{transformValues:s},r){let o=zj(i,t||{},this);if(s&&(e&&(e=s(e)),i&&(i=s(i)),o&&(o=s(o))),r){Vj(this,i,o);const a=x$(this,i,o,e);e=a.transitionEnd,i=a.target}return{transition:t,transitionEnd:e,...i}}};function T$(n){return window.getComputedStyle(n)}let P$=class extends pD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,e){if(eu.has(e)){const i=XC(e);return i&&i.default||0}else{const i=T$(t),s=(eR(e)?i.getPropertyValue(e):i[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return eD(t,e)}build(t,e,i,s){OC(t,e,i,s.transformTemplate)}scrapeMotionValuesFromProps(t,e){return $C(t,e)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;zn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(t,e,i,s){aR(t,e,i,s)}},_$=class extends pD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(eu.has(e)){const i=XC(e);return i&&i.default||0}return e=lR.has(e)?e:RC(e),t.getAttribute(e)}measureInstanceViewportBox(){return pe()}scrapeMotionValuesFromProps(t,e){return uR(t,e)}build(t,e,i,s){jC(t,e,i,this.isSVGTag,s.transformTemplate)}renderInstance(t,e,i,s){cR(t,e,i,s)}mount(t){this.isSVGTag=VC(t.tagName),super.mount(t)}};const k$=(n,t)=>NC(n)?new _$(t,{enableHardwareAcceleration:!1}):new P$(t,{enableHardwareAcceleration:!0}),M$={layout:{ProjectionNode:uD,MeasureLayout:iD}},L$={...iV,...SB,...l$,...M$},bt=R8((n,t)=>uB(n,t,L$,k$));function mD(){const n=M.useRef(!1);return LC(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function R$(){const n=mD(),[t,e]=M.useState(0),i=M.useCallback(()=>{n.current&&e(t+1)},[t]);return[M.useCallback(()=>It.postRender(i),[i]),t]}class D$ extends M.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=e.offsetHeight||0,i.width=e.offsetWidth||0,i.top=e.offsetTop,i.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function F$({children:n,isPresent:t}){const e=M.useId(),i=M.useRef(null),s=M.useRef({width:0,height:0,top:0,left:0});return M.useInsertionEffect(()=>{const{width:r,height:o,top:a,left:l}=s.current;if(t||!i.current||!r||!o)return;i.current.dataset.motionPopId=e;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${r}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),M.createElement(D$,{isPresent:t,childRef:i,sizeRef:s},M.cloneElement(n,{ref:i}))}const J2=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o})=>{const a=hR(I$),l=M.useId(),u=M.useMemo(()=>({id:l,initial:t,isPresent:e,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;i&&i()},register:h=>(a.set(h,!1),()=>a.delete(h))}),r?void 0:[e]);return M.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[e]),M.useEffect(()=>{!e&&!a.size&&i&&i()},[e]),o==="popLayout"&&(n=M.createElement(F$,{isPresent:e},n)),M.createElement(Wx.Provider,{value:u},n)};function I$(){return new Map}function N$(n){return M.useEffect(()=>()=>n(),[])}const tl=n=>n.key||"";function O$(n,t){n.forEach(e=>{const i=tl(e);t.set(i,e)})}function B$(n){const t=[];return M.Children.forEach(n,e=>{M.isValidElement(e)&&t.push(e)}),t}const Js=({children:n,custom:t,initial:e=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:r=!0,mode:o="sync"})=>{const a=M.useContext(IC).forceRender||R$()[0],l=mD(),u=B$(n);let h=u;const d=M.useRef(new Map).current,f=M.useRef(h),p=M.useRef(new Map).current,g=M.useRef(!0);if(LC(()=>{g.current=!1,O$(u,p),f.current=h}),N$(()=>{g.current=!0,p.clear(),d.clear()}),g.current)return M.createElement(M.Fragment,null,h.map(v=>M.createElement(J2,{key:tl(v),isPresent:!0,initial:e?void 0:!1,presenceAffectsLayout:r,mode:o},v)));h=[...h];const y=f.current.map(tl),A=u.map(tl),m=y.length;for(let v=0;v<m;v++){const w=y[v];A.indexOf(w)===-1&&!d.has(w)&&d.set(w,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((v,w)=>{if(A.indexOf(w)!==-1)return;const S=p.get(w);if(!S)return;const T=y.indexOf(w);let P=v;if(!P){const _=()=>{d.delete(w);const k=Array.from(p.keys()).filter(L=>!A.includes(L));if(k.forEach(L=>p.delete(L)),f.current=u.filter(L=>{const D=tl(L);return D===w||k.includes(D)}),!d.size){if(l.current===!1)return;a(),i&&i()}};P=M.createElement(J2,{key:tl(S),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:r,mode:o},S),d.set(w,P)}h.splice(T,0,P)}),h=h.map(v=>{const w=v.key;return d.has(w)?v:M.createElement(J2,{key:tl(v),isPresent:!0,presenceAffectsLayout:r,mode:o},v)}),M.createElement(M.Fragment,null,d.size?h:h.map(v=>M.cloneElement(v)))},Zx=n=>{const[t,e]=M.useState(!1);return M.useEffect(()=>{const i=window.matchMedia(n);i.matches!==t&&e(i.matches);const s=()=>{e(i.matches)};return i.addEventListener("change",s),()=>i.removeEventListener("change",s)},[t,n]),t},pk=({sectionId:n,onLinkClick:t,children:e,className:i=""})=>C.jsx("button",{onClick:()=>t(n),className:`font-medium text-slate-300 hover:text-blue-400 transition-all duration-300 hover:drop-shadow-[0_0_5px_#00aaff] border-b-2 border-transparent hover:border-blue-400 pb-1 ${i}`,children:e}),j$=({onLinkClick:n,openModal:t})=>{const[e,i]=M.useState(!1),s=Zx("(min-width: 768px)");M.useEffect(()=>{s&&i(!1)},[s]);const r=l=>{n(l),i(!1)},o=[{id:"about-me",title:"My Story"},{id:"ai-automation",title:"Portfolio"},{id:"experience",title:"Experiences"},{id:"contact",title:"Contact"}],a=()=>{e&&i(!1),t({type:"cv",item:{link:"/data/cv.pdf",title:"Muzahir Abbas - CV"},color:"blue"})};return C.jsxs(C.Fragment,{children:[C.jsx("nav",{className:"fixed top-0 left-0 w-full z-50 bg-black/50 backdrop-blur-sm border-b border-blue-500/30 shadow-lg shadow-blue-500/10",children:C.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[C.jsx("a",{href:"#hero",onClick:l=>{l.preventDefault(),r("hero")},className:"text-xl font-bold text-white hover:text-blue-400 transition-colors",style:{textShadow:"0 0 5px #00aaff"},children:"Muzahir Abbas"}),C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"hidden md:flex items-center gap-6",children:o.map(l=>C.jsx(pk,{sectionId:l.id,onLinkClick:r,children:l.title},l.id))}),C.jsxs("button",{onClick:a,role:"button",className:"glare-container flex-shrink-0 inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-2 px-4 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50",children:[C.jsx(AA,{}),C.jsx("span",{className:"sm:hidden",children:"CV"}),C.jsx("span",{className:"hidden sm:inline",children:"Download CV"})]}),C.jsx("button",{onClick:()=>i(!0),className:"md:hidden p-2 text-white","aria-label":"Open navigation menu",children:C.jsx(HL,{size:20})})]})]})}),C.jsx(Js,{children:e&&C.jsxs(C.Fragment,{children:[C.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] md:hidden"}),C.jsxs(bt.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 h-full w-64 bg-slate-900/90 shadow-lg z-[101] md:hidden flex flex-col",children:[C.jsx("div",{className:"flex justify-end p-4",children:C.jsx("button",{onClick:()=>i(!1),className:"p-2 text-white","aria-label":"Close navigation menu",children:C.jsx(MC,{size:22})})}),C.jsxs("nav",{className:"flex flex-col p-4 space-y-2",children:[o.map(l=>C.jsx(pk,{sectionId:l.id,onLinkClick:r,className:"py-3 text-lg w-full text-left px-2 border-none pb-1",children:l.title},l.id)),C.jsxs("button",{onClick:a,className:"flex items-center gap-2 py-3 text-lg w-full text-left px-2 text-slate-300 hover:text-blue-400 transition-colors duration-300",children:[C.jsx(AA,{})," Download CV"]})]})]})]})})]})},gD=M.createContext({});function V$(n){const t=M.useRef(null);return t.current===null&&(t.current=n()),t.current}const JC=typeof window<"u",$$=JC?M.useLayoutEffect:M.useEffect,tT=M.createContext(null);function eT(n,t){n.indexOf(t)===-1&&n.push(t)}function nT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const io=(n,t,e)=>e>t?t:e<n?n:e;let iT=()=>{};const so={},yD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function vD(n){return typeof n=="object"&&n!==null}const wD=n=>/^0[^.\s]+$/u.test(n);function sT(n){let t;return()=>(t===void 0&&(t=n()),t)}const Ui=n=>n,z$=(n,t)=>e=>t(n(e)),Q0=(...n)=>n.reduce(z$),Jp=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class rT{constructor(){this.subscriptions=[]}add(t){return eT(this.subscriptions,t),()=>nT(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const tr=n=>n*1e3,$i=n=>n/1e3;function xD(n,t){return t?n*(1e3/t):0}const bD=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,U$=1e-7,H$=12;function W$(n,t,e,i,s){let r,o,a=0;do o=t+(e-t)/2,r=bD(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>U$&&++a<H$);return o}function Z0(n,t,e,i){if(n===t&&e===i)return Ui;const s=r=>W$(r,0,1,n,e);return r=>r===0||r===1?r:bD(s(r),t,i)}const AD=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,SD=n=>t=>1-n(1-t),ED=Z0(.33,1.53,.69,.99),oT=SD(ED),CD=AD(oT),TD=n=>(n*=2)<1?.5*oT(n):.5*(2-Math.pow(2,-10*(n-1))),aT=n=>1-Math.sin(Math.acos(n)),PD=SD(aT),_D=AD(aT),G$=Z0(.42,0,1,1),X$=Z0(0,0,.58,1),kD=Z0(.42,0,.58,1),Y$=n=>Array.isArray(n)&&typeof n[0]!="number",MD=n=>Array.isArray(n)&&typeof n[0]=="number",K$={linear:Ui,easeIn:G$,easeInOut:kD,easeOut:X$,circIn:aT,circInOut:_D,circOut:PD,backIn:oT,backInOut:CD,backOut:ED,anticipate:TD},q$=n=>typeof n=="string",mk=n=>{if(MD(n)){iT(n.length===4);const[t,e,i,s]=n;return Z0(t,e,i,s)}else if(q$(n))return K$[n];return n},L1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],gk={value:null,addProjectionMetrics:null};function Q$(n,t){let e=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(h.schedule(d),n()),l++,d(a)}const h={schedule:(d,f=!1,p=!1)=>{const y=p&&s?e:i;return f&&o.add(d),y.has(d)||y.add(d),d},cancel:d=>{i.delete(d),o.delete(d)},process:d=>{if(a=d,s){r=!0;return}s=!0,[e,i]=[i,e],e.forEach(u),t&&gk.value&&gk.value.frameloop[t].push(l),l=0,e.clear(),s=!1,r&&(r=!1,h.process(d))}};return h}const Z$=40;function LD(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=L1.reduce((w,S)=>(w[S]=Q$(r,t?S:void 0),w),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:d,preRender:f,render:p,postRender:g}=o,y=()=>{const w=so.useManualTiming?s.timestamp:performance.now();e=!1,so.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(w-s.timestamp,Z$),1)),s.timestamp=w,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),h.process(s),d.process(s),f.process(s),p.process(s),g.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(y))},A=()=>{e=!0,i=!0,s.isProcessing||n(y)};return{schedule:L1.reduce((w,S)=>{const T=o[S];return w[S]=(P,_=!1,k=!1)=>(e||A(),T.schedule(P,_,k)),w},{}),cancel:w=>{for(let S=0;S<L1.length;S++)o[L1[S]].cancel(w)},state:s,steps:o}}const{schedule:Ht,cancel:Ba,state:Ye,steps:tb}=LD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ui,!0);let oy;function J$(){oy=void 0}const Bn={now:()=>(oy===void 0&&Bn.set(Ye.isProcessing||so.useManualTiming?Ye.timestamp:performance.now()),oy),set:n=>{oy=n,queueMicrotask(J$)}},RD=n=>t=>typeof t=="string"&&t.startsWith(n),lT=RD("--"),t9=RD("var(--"),cT=n=>t9(n)?e9.test(n.split("/*")[0].trim()):!1,e9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},tm={...yf,transform:n=>io(0,1,n)},R1={...yf,default:1},Tp=n=>Math.round(n*1e5)/1e5,uT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function n9(n){return n==null}const i9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hT=(n,t)=>e=>!!(typeof e=="string"&&i9.test(e)&&e.startsWith(n)||t&&!n9(e)&&Object.prototype.hasOwnProperty.call(e,t)),DD=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(uT);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},s9=n=>io(0,255,n),eb={...yf,transform:n=>Math.round(s9(n))},dl={test:hT("rgb","red"),parse:DD("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+eb.transform(n)+", "+eb.transform(t)+", "+eb.transform(e)+", "+Tp(tm.transform(i))+")"};function r9(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const NA={test:hT("#"),parse:r9,transform:dl.transform},J0=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),fo=J0("deg"),er=J0("%"),tt=J0("px"),o9=J0("vh"),a9=J0("vw"),yk=(()=>({...er,parse:n=>er.parse(n)/100,transform:n=>er.transform(n*100)}))(),Fu={test:hT("hsl","hue"),parse:DD("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+er.transform(Tp(t))+", "+er.transform(Tp(e))+", "+Tp(tm.transform(i))+")"},ge={test:n=>dl.test(n)||NA.test(n)||Fu.test(n),parse:n=>dl.test(n)?dl.parse(n):Fu.test(n)?Fu.parse(n):NA.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?dl.transform(n):Fu.transform(n),getAnimatableNone:n=>{const t=ge.parse(n);return t.alpha=0,ge.transform(t)}},l9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function c9(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(uT))==null?void 0:t.length)||0)+(((e=n.match(l9))==null?void 0:e.length)||0)>0}const FD="number",ID="color",u9="var",h9="var(",vk="${}",d9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function em(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(d9,l=>(ge.test(l)?(i.color.push(r),s.push(ID),e.push(ge.parse(l))):l.startsWith(h9)?(i.var.push(r),s.push(u9),e.push(l)):(i.number.push(r),s.push(FD),e.push(parseFloat(l))),++r,vk)).split(vk);return{values:e,split:a,indexes:i,types:s}}function ND(n){return em(n).values}function OD(n){const{split:t,types:e}=em(n),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=e[o];a===FD?r+=Tp(s[o]):a===ID?r+=ge.transform(s[o]):r+=s[o]}return r}}const f9=n=>typeof n=="number"?0:ge.test(n)?ge.getAnimatableNone(n):n;function p9(n){const t=ND(n);return OD(n)(t.map(f9))}const ja={test:c9,parse:ND,createTransformer:OD,getAnimatableNone:p9};function nb(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function m9({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,l=2*e-a;s=nb(l,a,n+1/3),r=nb(l,a,n),o=nb(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function bv(n,t){return e=>e>0?t:n}const qt=(n,t,e)=>n+(t-n)*e,ib=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},g9=[NA,dl,Fu],y9=n=>g9.find(t=>t.test(n));function wk(n){const t=y9(n);if(!t)return!1;let e=t.parse(n);return t===Fu&&(e=m9(e)),e}const xk=(n,t)=>{const e=wk(n),i=wk(t);if(!e||!i)return bv(n,t);const s={...e};return r=>(s.red=ib(e.red,i.red,r),s.green=ib(e.green,i.green,r),s.blue=ib(e.blue,i.blue,r),s.alpha=qt(e.alpha,i.alpha,r),dl.transform(s))},OA=new Set(["none","hidden"]);function v9(n,t){return OA.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function w9(n,t){return e=>qt(n,t,e)}function dT(n){return typeof n=="number"?w9:typeof n=="string"?cT(n)?bv:ge.test(n)?xk:A9:Array.isArray(n)?BD:typeof n=="object"?ge.test(n)?xk:x9:bv}function BD(n,t){const e=[...n],i=e.length,s=n.map((r,o)=>dT(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}}function x9(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=dT(n[s])(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}}function b9(n,t){const e=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=n.indexes[r][i[r]],a=n.values[o]??0;e[s]=a,i[r]++}return e}const A9=(n,t)=>{const e=ja.createTransformer(t),i=em(n),s=em(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?OA.has(n)&&!s.values.length||OA.has(t)&&!i.values.length?v9(n,t):Q0(BD(b9(i,s),s.values),e):bv(n,t)};function jD(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?qt(n,t,e):dT(n)(n,t)}const S9=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>Ht.update(t,e),stop:()=>Ba(t),now:()=>Ye.isProcessing?Ye.timestamp:Bn.now()}},VD=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Av=2e4;function fT(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<Av;)t+=e,i=n.next(t);return t>=Av?1/0:t}function E9(n,t=100,e){const i=e({...n,keyframes:[0,t]}),s=Math.min(fT(i),Av);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:$i(s)}}const C9=5;function $D(n,t,e){const i=Math.max(t-C9,0);return xD(e-n(i),t-i)}const ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sb=.001;function T9({duration:n=ie.duration,bounce:t=ie.bounce,velocity:e=ie.velocity,mass:i=ie.mass}){let s,r,o=1-t;o=io(ie.minDamping,ie.maxDamping,o),n=io(ie.minDuration,ie.maxDuration,$i(n)),o<1?(s=u=>{const h=u*o,d=h*n,f=h-e,p=BA(u,o),g=Math.exp(-d);return sb-f/p*g},r=u=>{const d=u*o*n,f=d*e+e,p=Math.pow(o,2)*Math.pow(u,2)*n,g=Math.exp(-d),y=BA(Math.pow(u,2),o);return(-s(u)+sb>0?-1:1)*((f-p)*g)/y}):(s=u=>{const h=Math.exp(-u*n),d=(u-e)*n+1;return-sb+h*d},r=u=>{const h=Math.exp(-u*n),d=(e-u)*(n*n);return h*d});const a=5/n,l=_9(s,r,a);if(n=tr(n),isNaN(l))return{stiffness:ie.stiffness,damping:ie.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const P9=12;function _9(n,t,e){let i=e;for(let s=1;s<P9;s++)i=i-n(i)/t(i);return i}function BA(n,t){return n*Math.sqrt(1-t*t)}const k9=["duration","bounce"],M9=["stiffness","damping","mass"];function bk(n,t){return t.some(e=>n[e]!==void 0)}function L9(n){let t={velocity:ie.velocity,stiffness:ie.stiffness,damping:ie.damping,mass:ie.mass,isResolvedFromDuration:!1,...n};if(!bk(n,M9)&&bk(n,k9))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,r=2*io(.05,1,1-(n.bounce||0))*Math.sqrt(s);t={...t,mass:ie.mass,stiffness:s,damping:r}}else{const e=T9(n);t={...t,...e,mass:ie.mass},t.isResolvedFromDuration=!0}return t}function Sv(n=ie.visualDuration,t=ie.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=L9({...e,velocity:-$i(e.velocity||0)}),g=f||0,y=u/(2*Math.sqrt(l*h)),A=o-r,m=$i(Math.sqrt(l/h)),v=Math.abs(A)<5;i||(i=v?ie.restSpeed.granular:ie.restSpeed.default),s||(s=v?ie.restDelta.granular:ie.restDelta.default);let w;if(y<1){const T=BA(m,y);w=P=>{const _=Math.exp(-y*m*P);return o-_*((g+y*m*A)/T*Math.sin(T*P)+A*Math.cos(T*P))}}else if(y===1)w=T=>o-Math.exp(-m*T)*(A+(g+m*A)*T);else{const T=m*Math.sqrt(y*y-1);w=P=>{const _=Math.exp(-y*m*P),k=Math.min(T*P,300);return o-_*((g+y*m*A)*Math.sinh(k)+T*A*Math.cosh(k))/T}}const S={calculatedDuration:p&&d||null,next:T=>{const P=w(T);if(p)a.done=T>=d;else{let _=T===0?g:0;y<1&&(_=T===0?tr(g):$D(w,T,P));const k=Math.abs(_)<=i,L=Math.abs(o-P)<=s;a.done=k&&L}return a.value=a.done?o:P,a},toString:()=>{const T=Math.min(fT(S),Av),P=VD(_=>S.next(T*_).value,T,30);return T+"ms "+P},toTransition:()=>{}};return S}Sv.applyToOptions=n=>{const t=E9(n,100,Sv);return n.ease=t.ease,n.duration=tr(t.duration),n.type="keyframes",n};function jA({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],f={done:!1,value:d},p=k=>a!==void 0&&k<a||l!==void 0&&k>l,g=k=>a===void 0?l:l===void 0||Math.abs(a-k)<Math.abs(l-k)?a:l;let y=e*t;const A=d+y,m=o===void 0?A:o(A);m!==A&&(y=m-d);const v=k=>-y*Math.exp(-k/i),w=k=>m+v(k),S=k=>{const L=v(k),D=w(k);f.done=Math.abs(L)<=u,f.value=f.done?m:D};let T,P;const _=k=>{p(f.value)&&(T=k,P=Sv({keyframes:[f.value,g(f.value)],velocity:$D(w,k,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:h}))};return _(0),{calculatedDuration:null,next:k=>{let L=!1;return!P&&T===void 0&&(L=!0,S(k),_(k)),T!==void 0&&k>=T?P.next(k-T):(!L&&S(k),f)}}}function R9(n,t,e){const i=[],s=e||so.mix||jD,r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(t){const l=Array.isArray(t)?t[o]||Ui:t;a=Q0(l,a)}i.push(a)}return i}function D9(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(iT(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=R9(t,i,s),l=a.length,u=h=>{if(o&&h<n[0])return t[0];let d=0;if(l>1)for(;d<n.length-2&&!(h<n[d+1]);d++);const f=Jp(n[d],n[d+1],h);return a[d](f)};return e?h=>u(io(n[0],n[r-1],h)):u}function F9(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Jp(0,t,i);n.push(qt(e,1,s))}}function I9(n){const t=[0];return F9(t,n.length-1),t}function N9(n,t){return n.map(e=>e*t)}function O9(n,t){return n.map(()=>t||kD).splice(0,n.length-1)}function Pp({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=Y$(i)?i.map(mk):mk(i),r={done:!1,value:t[0]},o=N9(e&&e.length===t.length?e:I9(t),n),a=D9(o,t,{ease:Array.isArray(s)?s:O9(t,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}const B9=n=>n!==null;function pT(n,{repeat:t,repeatType:e="loop"},i,s=1){const r=n.filter(B9),a=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const j9={decay:jA,inertia:jA,tween:Pp,keyframes:Pp,spring:Sv};function zD(n){typeof n.type=="string"&&(n.type=j9[n.type])}class mT{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const V9=n=>n/100;class gT extends mT{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:e}=this.options;e&&e.updatedAt!==Bn.now()&&this.tick(Bn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;zD(t);const{type:e=Pp,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:a}=t;const l=e||Pp;l!==Pp&&typeof a[0]!="number"&&(this.mixKeyframes=Q0(V9,jD(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=fT(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:f,repeatDelay:p,type:g,onUpdate:y,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const m=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?m<0:m>s;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,S=i;if(d){const k=Math.min(this.currentTime,s)/a;let L=Math.floor(k),D=k%1;!D&&k>=1&&(D=1),D===1&&L--,L=Math.min(L,d+1),!!(L%2)&&(f==="reverse"?(D=1-D,p&&(D-=p/a)):f==="mirror"&&(S=o)),w=io(0,1,D)*a}const T=v?{done:!1,value:h[0]}:S.next(w);r&&(T.value=r(T.value));let{done:P}=T;!v&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return _&&g!==jA&&(T.value=pT(h,this.options,A,this.speed)),y&&y(T.value),_&&this.finish(),T}then(t,e){return this.finished.then(t,e)}get duration(){return $i(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+$i(t)}get time(){return $i(this.currentTime)}set time(t){var e;t=tr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Bn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=$i(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=S9,startTime:e}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Bn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function $9(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const fl=n=>n*180/Math.PI,VA=n=>{const t=fl(Math.atan2(n[1],n[0]));return $A(t)},z9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:VA,rotateZ:VA,skewX:n=>fl(Math.atan(n[1])),skewY:n=>fl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},$A=n=>(n=n%360,n<0&&(n+=360),n),Ak=VA,Sk=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Ek=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),U9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Sk,scaleY:Ek,scale:n=>(Sk(n)+Ek(n))/2,rotateX:n=>$A(fl(Math.atan2(n[6],n[5]))),rotateY:n=>$A(fl(Math.atan2(-n[2],n[0]))),rotateZ:Ak,rotate:Ak,skewX:n=>fl(Math.atan(n[4])),skewY:n=>fl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function zA(n){return n.includes("scale")?1:0}function UA(n,t){if(!n||n==="none")return zA(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(e)i=U9,s=e;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=z9,s=a}if(!s)return zA(t);const r=i[t],o=s[1].split(",").map(W9);return typeof r=="function"?r(o):o[r]}const H9=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return UA(e,t)};function W9(n){return parseFloat(n.trim())}const vf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wf=(()=>new Set(vf))(),Ck=n=>n===yf||n===tt,G9=new Set(["x","y","z"]),X9=vf.filter(n=>!G9.has(n));function Y9(n){const t=[];return X9.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Hc={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>UA(t,"x"),y:(n,{transform:t})=>UA(t,"y")};Hc.translateX=Hc.x;Hc.translateY=Hc.y;const Wc=new Set;let HA=!1,WA=!1,GA=!1;function UD(){if(WA){const n=Array.from(Wc).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=Y9(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))==null||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}WA=!1,HA=!1,Wc.forEach(n=>n.complete(GA)),Wc.clear()}function HD(){Wc.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(WA=!0)})}function K9(){GA=!0,HD(),UD(),GA=!1}class yT{constructor(t,e,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Wc.add(this),HA||(HA=!0,Ht.read(HD),Ht.resolveKeyframes(UD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&e){const a=i.readValue(e,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}$9(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Wc.delete(this)}cancel(){this.state==="scheduled"&&(Wc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const q9=n=>n.startsWith("--");function Q9(n,t,e){q9(t)?n.style.setProperty(t,e):n.style[t]=e}const Z9=sT(()=>window.ScrollTimeline!==void 0),J9={};function t7(n,t){const e=sT(n);return()=>J9[t]??e()}const WD=t7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Wf=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,Tk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wf([0,.65,.55,1]),circOut:Wf([.55,0,1,.45]),backIn:Wf([.31,.01,.66,-.59]),backOut:Wf([.33,1.53,.69,.99])};function GD(n,t){if(n)return typeof n=="function"?WD()?VD(n,t):"ease-out":MD(n)?Wf(n):Array.isArray(n)?n.map(e=>GD(e,t)||Tk.easeOut):Tk[n]}function e7(n,t,e,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[t]:e};l&&(h.offset=l);const d=GD(a,s);Array.isArray(d)&&(h.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(h,f)}function XD(n){return typeof n=="function"&&"applyToOptions"in n}function n7({type:n,...t}){return XD(n)&&WD()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class i7 extends mT{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,iT(typeof t.type!="string");const u=n7(t);this.animation=e7(e,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=pT(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):Q9(e,i,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return $i(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+$i(t)}get time(){return $i(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=tr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Z9()?(this.animation.timeline=t,Ui):e(this)}}const YD={anticipate:TD,backInOut:CD,circInOut:_D};function s7(n){return n in YD}function r7(n){typeof n.ease=="string"&&s7(n.ease)&&(n.ease=YD[n.ease])}const Pk=10;class o7 extends i7{constructor(t){r7(t),zD(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const a=new gT({...o,autoplay:!1}),l=tr(this.finishedTime??this.time);e.setWithVelocity(a.sample(l-Pk).value,a.sample(l).value,Pk),a.stop()}}const _k=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ja.test(n)||n==="0")&&!n.startsWith("url("));function a7(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function l7(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=_k(s,t),a=_k(r,t);return!o||!a?!1:a7(n)||(e==="spring"||XD(e))&&i}function XA(n){n.duration=0,n.type="keyframes"}const c7=new Set(["opacity","clipPath","filter","transform"]),u7=sT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h7(n){var h;const{motionValue:t,name:e,repeatDelay:i,repeatType:s,damping:r,type:o}=n;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return u7()&&e&&c7.has(e)&&(e!=="transform"||!u)&&!l&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const d7=40;class f7 extends mT{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...d}){var g;super(),this.stop=()=>{var y,A;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=Bn.now();const f={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:r,repeatType:o,name:l,motionValue:u,element:h,...d},p=(h==null?void 0:h.KeyframeResolver)||yT;this.keyframeResolver=new p(a,(y,A,m)=>this.onKeyframesResolved(y,A,f,!m),l,u,h),(g=this.keyframeResolver)==null||g.scheduleResolve()}onKeyframesResolved(t,e,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=Bn.now(),l7(t,r,o,a)||((so.instantAnimations||!l)&&(h==null||h(pT(t,i,e))),t[0]=t[t.length-1],XA(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>d7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},p=!u&&h7(f)?new o7({...f,element:f.motionValue.owner.current}):new gT(f);p.finished.then(()=>this.notifyFinished()).catch(Ui),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),K9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const p7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m7(n){const t=p7.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function KD(n,t,e=1){const[i,s]=m7(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return yD(o)?parseFloat(o):o}return cT(s)?KD(s,t,e+1):s}function vT(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const qD=new Set(["width","height","top","left","right","bottom",...vf]),g7={test:n=>n==="auto",parse:n=>n},QD=n=>t=>t.test(n),ZD=[yf,tt,er,fo,a9,o9,g7],kk=n=>ZD.find(QD(n));function y7(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||wD(n):!0}const v7=new Set(["brightness","contrast","saturate","opacity"]);function w7(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(uT)||[];if(!i)return n;const s=e.replace(i,"");let r=v7.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const x7=/\b([a-z-]*)\(.*?\)/gu,YA={...ja,getAnimatableNone:n=>{const t=n.match(x7);return t?t.map(w7).join(" "):n}},Mk={...yf,transform:Math.round},b7={rotate:fo,rotateX:fo,rotateY:fo,rotateZ:fo,scale:R1,scaleX:R1,scaleY:R1,scaleZ:R1,skew:fo,skewX:fo,skewY:fo,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:tm,originX:yk,originY:yk,originZ:tt},wT={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt,...b7,zIndex:Mk,fillOpacity:tm,strokeOpacity:tm,numOctaves:Mk},A7={...wT,color:ge,backgroundColor:ge,outlineColor:ge,fill:ge,stroke:ge,borderColor:ge,borderTopColor:ge,borderRightColor:ge,borderBottomColor:ge,borderLeftColor:ge,filter:YA,WebkitFilter:YA},JD=n=>A7[n];function t5(n,t){let e=JD(n);return e!==YA&&(e=ja),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const S7=new Set(["auto","none","0"]);function E7(n,t,e){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!S7.has(r)&&em(r).values.length&&(s=n[i]),i++}if(s&&e)for(const r of t)n[r]=t5(e,s)}class C7 extends yT{constructor(t,e,i,s,r){super(t,e,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),cT(u))){const h=KD(u,e.current);h!==void 0&&(t[l]=h),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qD.has(i)||t.length!==2)return;const[s,r]=t,o=kk(s),a=kk(r);if(o!==a)if(Ck(o)&&Ck(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else Hc[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||y7(t[s]))&&i.push(s);i.length&&E7(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hc[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=Hc[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function T7(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;t&&(i=t.current);const s=(e==null?void 0:e[n])??i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const e5=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function P7(n){return vD(n)&&"offsetHeight"in n}const Lk=30,_7=n=>!isNaN(parseFloat(n));class k7{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=Bn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Bn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=_7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new rT);const i=this.events[t].add(e);return t==="change"?()=>{i(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Bn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Lk)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Lk);return xD(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cf(n,t){return new k7(n,t)}const{schedule:xT,cancel:xK}=LD(queueMicrotask,!1),Yi={x:!1,y:!1};function n5(){return Yi.x||Yi.y}function M7(n){return n==="x"||n==="y"?Yi[n]?null:(Yi[n]=!0,()=>{Yi[n]=!1}):Yi.x||Yi.y?null:(Yi.x=Yi.y=!0,()=>{Yi.x=Yi.y=!1})}function i5(n,t){const e=T7(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function Rk(n){return!(n.pointerType==="touch"||n5())}function L7(n,t,e={}){const[i,s,r]=i5(n,e),o=a=>{if(!Rk(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const h=d=>{Rk(d)&&(u(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,s)};return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const s5=(n,t)=>t?n===t?!0:s5(n,t.parentElement):!1,bT=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,R7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function D7(n){return R7.has(n.tagName)||n.tabIndex!==-1}const ay=new WeakSet;function Dk(n){return t=>{t.key==="Enter"&&n(t)}}function rb(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const F7=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=Dk(()=>{if(ay.has(e))return;rb(e,"down");const s=Dk(()=>{rb(e,"up")}),r=()=>rb(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function Fk(n){return bT(n)&&!n5()}function I7(n,t,e={}){const[i,s,r]=i5(n,e),o=a=>{const l=a.currentTarget;if(!Fk(a))return;ay.add(l);const u=t(l,a),h=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),ay.has(l)&&ay.delete(l),Fk(p)&&typeof u=="function"&&u(p,{success:g})},d=p=>{h(p,l===window||l===document||e.useGlobalTarget||s5(l,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(a=>{(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),P7(a)&&(a.addEventListener("focus",u=>F7(u,s)),!D7(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function r5(n){return vD(n)&&"ownerSVGElement"in n}function N7(n){return r5(n)&&n.tagName==="svg"}const dn=n=>!!(n&&n.getVelocity),O7=[...ZD,ge,ja],B7=n=>O7.find(QD(n)),o5=M.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function j7(n=!0){const t=M.useContext(tT);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:s}=t,r=M.useId();M.useEffect(()=>{if(n)return s(r)},[n]);const o=M.useCallback(()=>n&&i&&i(r),[r,i,n]);return!e&&i?[!1,o]:[!0]}const a5=M.createContext({strict:!1}),Ik={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uf={};for(const n in Ik)uf[n]={isEnabled:t=>Ik[n].some(e=>!!t[e])};function V7(n){for(const t in n)uf[t]={...uf[t],...n[t]}}const $7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ev(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$7.has(n)}let l5=n=>!Ev(n);function z7(n){typeof n=="function"&&(l5=t=>t.startsWith("on")?!Ev(t):n(t))}try{z7(require("@emotion/is-prop-valid").default)}catch{}function U7(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(l5(s)||e===!0&&Ev(s)||!t&&!Ev(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const Jx=M.createContext({});function t2(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function nm(n){return typeof n=="string"||Array.isArray(n)}const AT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ST=["initial",...AT];function e2(n){return t2(n.animate)||ST.some(t=>nm(n[t]))}function c5(n){return!!(e2(n)||n.variants)}function H7(n,t){if(e2(n)){const{initial:e,animate:i}=n;return{initial:e===!1||nm(e)?e:void 0,animate:nm(i)?i:void 0}}return n.inherit!==!1?t:{}}function W7(n){const{initial:t,animate:e}=H7(n,M.useContext(Jx));return M.useMemo(()=>({initial:t,animate:e}),[Nk(t),Nk(e)])}function Nk(n){return Array.isArray(n)?n.join(" "):n}const im={};function G7(n){for(const t in n)im[t]=n[t],lT(t)&&(im[t].isCSSVariable=!0)}function u5(n,{layout:t,layoutId:e}){return wf.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!im[n]||n==="opacity")}const X7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Y7=vf.length;function K7(n,t,e){let i="",s=!0;for(let r=0;r<Y7;r++){const o=vf[r],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||e){const u=e5(a,wT[o]);if(!l){s=!1;const h=X7[o]||o;i+=`${h}(${u}) `}e&&(t[o]=u)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function ET(n,t,e){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,a=!1;for(const l in t){const u=t[l];if(wf.has(l)){o=!0;continue}else if(lT(l)){s[l]=u;continue}else{const h=e5(u,wT[l]);l.startsWith("origin")?(a=!0,r[l]=h):i[l]=h}}if(t.transform||(o||e?i.transform=K7(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=r;i.transformOrigin=`${l} ${u} ${h}`}}const CT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function h5(n,t,e){for(const i in t)!dn(t[i])&&!u5(i,e)&&(n[i]=t[i])}function q7({transformTemplate:n},t){return M.useMemo(()=>{const e=CT();return ET(e,t,n),Object.assign({},e.vars,e.style)},[t])}function Q7(n,t){const e=n.style||{},i={};return h5(i,e,n),Object.assign(i,q7(n,t)),i}function Z7(n,t){const e={},i=Q7(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const J7={offset:"stroke-dashoffset",array:"stroke-dasharray"},tz={offset:"strokeDashoffset",array:"strokeDasharray"};function ez(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?J7:tz;n[r.offset]=tt.transform(-i);const o=tt.transform(t),a=tt.transform(e);n[r.array]=`${o} ${a}`}function d5(n,{attrX:t,attrY:e,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...a},l,u,h){if(ET(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:f}=n;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),e!==void 0&&(d.y=e),i!==void 0&&(d.scale=i),s!==void 0&&ez(d,s,r,o,!1)}const f5=()=>({...CT(),attrs:{}}),p5=n=>typeof n=="string"&&n.toLowerCase()==="svg";function nz(n,t,e,i){const s=M.useMemo(()=>{const r=f5();return d5(r,t,p5(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};h5(r,n.style,n),s.style={...r,...s.style}}return s}const iz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TT(n){return typeof n!="string"||n.includes("-")?!1:!!(iz.indexOf(n)>-1||/[A-Z]/u.test(n))}function sz(n,t,e,{latestValues:i},s,r=!1){const a=(TT(n)?nz:Z7)(t,i,s,n),l=U7(t,typeof n=="string",r),u=n!==M.Fragment?{...l,...a,ref:e}:{},{children:h}=t,d=M.useMemo(()=>dn(h)?h.get():h,[h]);return M.createElement(n,{...u,children:d})}function Ok(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function PT(n,t,e,i){if(typeof t=="function"){const[s,r]=Ok(i);t=t(e!==void 0?e:n.custom,s,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,r]=Ok(i);t=t(e!==void 0?e:n.custom,s,r)}return t}function ly(n){return dn(n)?n.get():n}function rz({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,s){return{latestValues:oz(e,i,s,n),renderState:t()}}function oz(n,t,e,i){const s={},r=i(n,{});for(const f in r)s[f]=ly(r[f]);let{initial:o,animate:a}=n;const l=e2(n),u=c5(n);t&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=e?e.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!t2(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=PT(n,f[p]);if(g){const{transitionEnd:y,transition:A,...m}=g;for(const v in m){let w=m[v];if(Array.isArray(w)){const S=h?w.length-1:0;w=w[S]}w!==null&&(s[v]=w)}for(const v in y)s[v]=y[v]}}}return s}const m5=n=>(t,e)=>{const i=M.useContext(Jx),s=M.useContext(tT),r=()=>rz(n,t,i,s);return e?r():V$(r)};function _T(n,t,e){var r;const{style:i}=n,s={};for(const o in i)(dn(i[o])||t.style&&dn(t.style[o])||u5(o,n)||((r=e==null?void 0:e.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const az=m5({scrapeMotionValuesFromProps:_T,createRenderState:CT});function g5(n,t,e){const i=_T(n,t,e);for(const s in n)if(dn(n[s])||dn(t[s])){const r=vf.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const lz=m5({scrapeMotionValuesFromProps:g5,createRenderState:f5}),cz=Symbol.for("motionComponentSymbol");function Iu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function uz(n,t,e){return M.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Iu(e)&&(e.current=i))},[t])}const kT=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),hz="framerAppearId",y5="data-"+kT(hz),v5=M.createContext({});function dz(n,t,e,i,s){var y,A;const{visualElement:r}=M.useContext(Jx),o=M.useContext(a5),a=M.useContext(tT),l=M.useContext(o5).reducedMotion,u=M.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(n,{visualState:t,parent:r,props:e,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,d=M.useContext(v5);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&fz(u.current,e,s,d);const f=M.useRef(!1);M.useInsertionEffect(()=>{h&&f.current&&h.update(e,a)});const p=e[y5],g=M.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,p)));return $$(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),g.current&&h.animationState&&h.animationState.animateChanges())}),M.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),g.current=!1),h.enteringChildren=void 0)}),h}function fz(n,t,e,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:w5(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&Iu(a),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function w5(n){if(n)return n.options.allowProjection!==!1?n.projection:w5(n.parent)}function ob(n,{forwardMotionProps:t=!1}={},e,i){e&&V7(e);const s=TT(n)?lz:az;function r(a,l){let u;const h={...M.useContext(o5),...a,layoutId:pz(a)},{isStatic:d}=h,f=W7(a),p=s(a,d);if(!d&&JC){mz();const g=gz(h);u=g.MeasureLayout,f.visualElement=dz(n,p,h,i,g.ProjectionNode)}return C.jsxs(Jx.Provider,{value:f,children:[u&&f.visualElement?C.jsx(u,{visualElement:f.visualElement,...h}):null,sz(n,a,uz(p,f.visualElement,l),p,d,t)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=M.forwardRef(r);return o[cz]=n,o}function pz({layoutId:n}){const t=M.useContext(gD).id;return t&&n!==void 0?t+"-"+n:n}function mz(n,t){M.useContext(a5).strict}function gz(n){const{drag:t,layout:e}=uf;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function yz(n,t){if(typeof Proxy>"u")return ob;const e=new Map,i=(r,o)=>ob(r,o,n,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(e.has(o)||e.set(o,ob(o,void 0,n,t)),e.get(o))})}function x5({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function vz({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function wz(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function ab(n){return n===void 0||n===1}function KA({scale:n,scaleX:t,scaleY:e}){return!ab(n)||!ab(t)||!ab(e)}function el(n){return KA(n)||b5(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function b5(n){return Bk(n.x)||Bk(n.y)}function Bk(n){return n&&n!=="0%"}function Cv(n,t,e){const i=n-e,s=t*i;return e+s}function jk(n,t,e,i,s){return s!==void 0&&(n=Cv(n,s,i)),Cv(n,e,i)+t}function qA(n,t=0,e=1,i,s){n.min=jk(n.min,t,e,i,s),n.max=jk(n.max,t,e,i,s)}function A5(n,{x:t,y:e}){qA(n.x,t.translate,t.scale,t.originPoint),qA(n.y,e.translate,e.scale,e.originPoint)}const Vk=.999999999999,$k=1.0000000000001;function xz(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=e[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ou(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,A5(n,o)),i&&el(r.latestValues)&&Ou(n,r.latestValues))}t.x<$k&&t.x>Vk&&(t.x=1),t.y<$k&&t.y>Vk&&(t.y=1)}function Nu(n,t){n.min=n.min+t,n.max=n.max+t}function zk(n,t,e,i,s=.5){const r=qt(n.min,n.max,s);qA(n,t,e,r,i)}function Ou(n,t){zk(n.x,t.x,t.scaleX,t.scale,t.originX),zk(n.y,t.y,t.scaleY,t.scale,t.originY)}function S5(n,t){return x5(wz(n.getBoundingClientRect(),t))}function bz(n,t,e){const i=S5(n,e),{scroll:s}=t;return s&&(Nu(i.x,s.offset.x),Nu(i.y,s.offset.y)),i}const Uk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bu=()=>({x:Uk(),y:Uk()}),Hk=()=>({min:0,max:0}),ue=()=>({x:Hk(),y:Hk()}),QA={current:null},E5={current:!1};function Az(){if(E5.current=!0,!!JC)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>QA.current=n.matches;n.addEventListener("change",t),t()}else QA.current=!1}const Sz=new WeakMap;function Ez(n,t,e){for(const i in t){const s=t[i],r=e[i];if(dn(s))n.addValue(i,s);else if(dn(r))n.addValue(i,cf(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,cf(o!==void 0?o:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const Wk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Cz{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=yT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Bn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Ht.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=e2(e),this.isVariantNode=c5(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(e,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&dn(p)&&p.set(l[f])}}mount(t){var e;this.current=t,Sz.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),E5.current||Az(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QA.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Ba(this.notifyUpdate),Ba(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=wf.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in uf){const e=uf[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<Wk.length;i++){const s=Wk[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=Ez(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=cf(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(yD(i)||wD(i))?i=parseFloat(i):!B7(i)&&ja.test(e)&&(i=t5(t,e)),this.setBaseTarget(t,dn(i)?i.get():i)),dn(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const o=PT(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(e&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!dn(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new rT),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){xT.render(this.render)}}class C5 extends Cz{constructor(){super(...arguments),this.KeyframeResolver=C7}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function T5(n,{style:t,vars:e},i,s){const r=n.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in e)r.setProperty(o,e[o])}function Tz(n){return window.getComputedStyle(n)}class Pz extends C5{constructor(){super(...arguments),this.type="html",this.renderInstance=T5}readValueFromInstance(t,e){var i;if(wf.has(e))return(i=this.projection)!=null&&i.isProjecting?zA(e):H9(t,e);{const s=Tz(t),r=(lT(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return S5(t,e)}build(t,e,i){ET(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return _T(t,e,i)}}const P5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _z(n,t,e,i){T5(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(P5.has(s)?s:kT(s),t.attrs[s])}class kz extends C5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(wf.has(e)){const i=JD(e);return i&&i.default||0}return e=P5.has(e)?e:kT(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return g5(t,e,i)}build(t,e,i){d5(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,s){_z(t,e,i,s)}mount(t){this.isSVGTag=p5(t.tagName),super.mount(t)}}const Mz=(n,t)=>TT(n)?new kz(t):new Pz(t,{allowProjection:n!==M.Fragment});function qu(n,t,e){const i=n.getProps();return PT(i,t,e!==void 0?e:i.custom,n)}const ZA=n=>Array.isArray(n);function Lz(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,cf(e))}function Rz(n){return ZA(n)?n[n.length-1]||0:n}function Dz(n,t){const e=qu(n,t);let{transitionEnd:i={},transition:s={},...r}=e||{};r={...r,...i};for(const o in r){const a=Rz(r[o]);Lz(n,o,a)}}function Fz(n){return!!(dn(n)&&n.add)}function JA(n,t){const e=n.getValue("willChange");if(Fz(e))return e.add(t);if(!e&&so.WillChange){const i=new so.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function _5(n){return n.props[y5]}const Iz=n=>n!==null;function Nz(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(Iz),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const Oz={type:"spring",stiffness:500,damping:25,restSpeed:10},Bz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),jz={type:"keyframes",duration:.8},Vz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$z=(n,{keyframes:t})=>t.length>2?jz:wf.has(n)?n.startsWith("scale")?Bz(t[1]):Oz:Vz;function zz({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const MT=(n,t,e,i={},s,r)=>o=>{const a=vT(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-tr(l);const h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:r?void 0:s};zz(a)||Object.assign(h,$z(n,h)),h.duration&&(h.duration=tr(h.duration)),h.repeatDelay&&(h.repeatDelay=tr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(XA(h),h.delay===0&&(d=!0)),(so.instantAnimations||so.skipAnimations)&&(d=!0,XA(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!r&&t.get()!==void 0){const f=Nz(h.keyframes,a);if(f!==void 0){Ht.update(()=>{h.onUpdate(f),h.onComplete()});return}}return a.isSync?new gT(h):new f7(h)};function Uz({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function k5(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(r=i);const l=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const h in a){const d=n.getValue(h,n.latestValues[h]??null),f=a[h];if(f===void 0||u&&Uz(u,h))continue;const p={delay:e,...vT(r||{},h)},g=d.get();if(g!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===g&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const m=_5(n);if(m){const v=window.MotionHandoffAnimation(m,h,Ht);v!==null&&(p.startTime=v,y=!0)}}JA(n,h),d.start(MT(h,d,f,n.shouldReduceMotion&&qD.has(h)?{type:!1}:p,n,y));const A=d.animation;A&&l.push(A)}return o&&Promise.all(l).then(()=>{Ht.update(()=>{o&&Dz(n,o)})}),l}function M5(n,t,e,i=0,s=1){const r=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(t),o=n.size,a=(o-1)*i;return typeof e=="function"?e(r,o):s===1?r*i:a-r*i}function tS(n,t,e={}){var l;const i=qu(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all(k5(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return Hz(n,t,u,h,d,f,e)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,h]=a==="beforeChildren"?[r,o]:[o,r];return u().then(()=>h())}else return Promise.all([r(),o(e.delay)])}function Hz(n,t,e=0,i=0,s=0,r=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",t),a.push(tS(l,t,{...o,delay:e+(typeof i=="function"?0:i)+M5(n.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function Wz(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>tS(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=tS(n,t,e);else{const s=typeof t=="function"?qu(n,t,e.custom):t;i=Promise.all(k5(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function L5(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const Gz=ST.length;function R5(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?R5(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<Gz;e++){const i=ST[e],s=n.props[i];(nm(s)||s===!1)&&(t[i]=s)}return t}const Xz=[...AT].reverse(),Yz=AT.length;function Kz(n){return t=>Promise.all(t.map(({animation:e,options:i})=>Wz(n,e,i)))}function qz(n){let t=Kz(n),e=Gk(),i=!0;const s=l=>(u,h)=>{var f;const d=qu(n,h,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:g,...y}=d;u={...u,...y,...g}}return u};function r(l){t=l(n)}function o(l){const{props:u}=n,h=R5(n.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let A=0;A<Yz;A++){const m=Xz[A],v=e[m],w=u[m]!==void 0?u[m]:h[m],S=nm(w),T=m===l?v.isActive:null;T===!1&&(g=A);let P=w===h[m]&&w!==u[m]&&S;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),v.protectedKeys={...p},!v.isActive&&T===null||!w&&!v.prevProp||t2(w)||typeof w=="boolean")continue;const _=Qz(v.prevProp,w);let k=_||m===l&&v.isActive&&!P&&S||A>g&&S,L=!1;const D=Array.isArray(w)?w:[w];let R=D.reduce(s(m),{});T===!1&&(R={});const{prevResolvedValues:I={}}=v,B={...I,...R},F=j=>{k=!0,f.has(j)&&(L=!0,f.delete(j)),v.needsAnimating[j]=!0;const N=n.getValue(j);N&&(N.liveStyle=!1)};for(const j in B){const N=R[j],$=I[j];if(p.hasOwnProperty(j))continue;let H=!1;ZA(N)&&ZA($)?H=!L5(N,$):H=N!==$,H?N!=null?F(j):f.add(j):N!==void 0&&f.has(j)?F(j):v.protectedKeys[j]=!0}v.prevProp=w,v.prevResolvedValues=R,v.isActive&&(p={...p,...R}),i&&n.blockInitialAnimation&&(k=!1);const V=P&&_;k&&(!V||L)&&d.push(...D.map(j=>{const N={type:m};if(typeof j=="string"&&i&&!V&&n.manuallyAnimateOnMount&&n.parent){const{parent:$}=n,H=qu($,j);if($.enteringChildren&&H){const{delayChildren:W}=H.transition||{};N.delay=M5($.enteringChildren,n,W)}}return{animation:j,options:N}}))}if(f.size){const A={};if(typeof u.initial!="boolean"){const m=qu(n,Array.isArray(u.initial)?u.initial[0]:u.initial);m&&m.transition&&(A.transition=m.transition)}f.forEach(m=>{const v=n.getBaseTarget(m),w=n.getValue(m);w&&(w.liveStyle=!0),A[m]=v??null}),d.push({animation:A})}let y=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(d):Promise.resolve()}function a(l,u){var d;if(e[l].isActive===u)return Promise.resolve();(d=n.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),e[l].isActive=u;const h=o(l);for(const f in e)e[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>e,reset:()=>{e=Gk()}}}function Qz(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!L5(t,n):!1}function Ya(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gk(){return{animate:Ya(!0),whileInView:Ya(),whileHover:Ya(),whileTap:Ya(),whileDrag:Ya(),whileFocus:Ya(),exit:Ya()}}class Ga{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Zz extends Ga{constructor(t){super(t),t.animationState||(t.animationState=qz(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();t2(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let Jz=0;class tU extends Ga{constructor(){super(...arguments),this.id=Jz++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const eU={animation:{Feature:Zz},exit:{Feature:tU}};function sm(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function t1(n){return{point:{x:n.pageX,y:n.pageY}}}const nU=n=>t=>bT(t)&&n(t,t1(t));function _p(n,t,e,i){return sm(n,t,nU(e),i)}const D5=1e-4,iU=1-D5,sU=1+D5,F5=.01,rU=0-F5,oU=0+F5;function An(n){return n.max-n.min}function aU(n,t,e){return Math.abs(n-t)<=e}function Xk(n,t,e,i=.5){n.origin=i,n.originPoint=qt(t.min,t.max,n.origin),n.scale=An(e)/An(t),n.translate=qt(e.min,e.max,n.origin)-n.originPoint,(n.scale>=iU&&n.scale<=sU||isNaN(n.scale))&&(n.scale=1),(n.translate>=rU&&n.translate<=oU||isNaN(n.translate))&&(n.translate=0)}function kp(n,t,e,i){Xk(n.x,t.x,e.x,i?i.originX:void 0),Xk(n.y,t.y,e.y,i?i.originY:void 0)}function Yk(n,t,e){n.min=e.min+t.min,n.max=n.min+An(t)}function lU(n,t,e){Yk(n.x,t.x,e.x),Yk(n.y,t.y,e.y)}function Kk(n,t,e){n.min=t.min-e.min,n.max=n.min+An(t)}function Mp(n,t,e){Kk(n.x,t.x,e.x),Kk(n.y,t.y,e.y)}function Ei(n){return[n("x"),n("y")]}const I5=({current:n})=>n?n.ownerDocument.defaultView:null,qk=(n,t)=>Math.abs(n-t);function cU(n,t){const e=qk(n.x,t.x),i=qk(n.y,t.y);return Math.sqrt(e**2+i**2)}class N5{constructor(t,e,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=cb(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=cU(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:y}=f,{timestamp:A}=Ye;this.history.push({...y,timestamp:A});const{onStart:m,onMove:v}=this.handlers;p||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=lb(p,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=cb(f.type==="pointercancel"?this.lastMoveEventInfo:lb(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,m),y&&y(f,m)},!bT(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const a=t1(t),l=lb(a,this.transformPagePoint),{point:u}=l,{timestamp:h}=Ye;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=e;d&&d(t,cb(l,this.history)),this.removeListeners=Q0(_p(this.contextWindow,"pointermove",this.handlePointerMove),_p(this.contextWindow,"pointerup",this.handlePointerUp),_p(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ba(this.updatePoint)}}function lb(n,t){return t?{point:t(n.point)}:n}function Qk(n,t){return{x:n.x-t.x,y:n.y-t.y}}function cb({point:n},t){return{point:n,delta:Qk(n,O5(t)),offset:Qk(n,uU(t)),velocity:hU(t,.1)}}function uU(n){return n[0]}function O5(n){return n[n.length-1]}function hU(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=O5(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>tr(t)));)e--;if(!i)return{x:0,y:0};const r=$i(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dU(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?qt(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?qt(e,n,i.max):Math.min(n,e)),n}function Zk(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function fU(n,{top:t,left:e,bottom:i,right:s}){return{x:Zk(n.x,e,s),y:Zk(n.y,t,i)}}function Jk(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function pU(n,t){return{x:Jk(n.x,t.x),y:Jk(n.y,t.y)}}function mU(n,t){let e=.5;const i=An(n),s=An(t);return s>i?e=Jp(t.min,t.max-i,n.min):i>s&&(e=Jp(n.min,n.max-s,t.min)),io(0,1,e)}function gU(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const eS=.35;function yU(n=eS){return n===!1?n=0:n===!0&&(n=eS),{x:tM(n,"left","right"),y:tM(n,"top","bottom")}}function tM(n,t,e){return{min:eM(n,t),max:eM(n,e)}}function eM(n,t){return typeof n=="number"?n:n[t]||0}const vU=new WeakMap;class wU{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(t1(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:y}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=M7(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ei(m=>{let v=this.getAxisMotionValue(m).get()||0;if(er.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[m];S&&(v=An(S)*(parseFloat(v)/100))}}this.originPoint[m]=v}),y&&Ht.postRender(()=>y(d,f)),JA(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:y,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:m}=f;if(g&&this.currentDirection===null){this.currentDirection=xU(m),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),A&&A(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ei(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new N5(t,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:I5(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,s=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Ht.postRender(()=>a(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!D1(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=dU(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Iu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=fU(i.layoutBox,t):this.constraints=!1,this.elastic=yU(e),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ei(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=gU(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Iu(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=bz(i,s.root,this.visualElement.getTransformPagePoint());let o=pU(s.layout.layoutBox,r);if(e){const a=e(vz(o));this.hasMutatedConstraints=!!a,a&&(o=x5(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ei(h=>{if(!D1(h,e,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:i?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,g)});return Promise.all(u).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return JA(this.visualElement,t),i.start(MT(t,i,0,e,this.visualElement,!1))}stopAnimation(){Ei(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ei(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Ei(e=>{const{drag:i}=this.getProps();if(!D1(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[e];r.set(t[e]-qt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Iu(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ei(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=mU({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ei(o=>{if(!D1(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(qt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;vU.set(this.visualElement,this);const t=this.visualElement.current,e=_p(t,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Iu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ht.read(i);const o=sm(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ei(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=eS,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function D1(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function xU(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class bU extends Ga{constructor(t){super(t),this.removeGroupControls=Ui,this.removeListeners=Ui,this.controls=new wU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ui}unmount(){this.removeGroupControls(),this.removeListeners()}}const nM=n=>(t,e)=>{n&&Ht.postRender(()=>n(t,e))};class AU extends Ga{constructor(){super(...arguments),this.removePointerDownListener=Ui}onPointerDown(t){this.session=new N5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:I5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:nM(t),onStart:nM(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&Ht.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=_p(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iM(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Df={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(tt.test(n))n=parseFloat(n);else return n;const e=iM(n,t.target.x),i=iM(n,t.target.y);return`${e}% ${i}%`}},SU={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=ja.parse(n);if(s.length>5)return i;const r=ja.createTransformer(n),o=typeof s[0]!="number"?1:0,a=e.x.scale*t.x,l=e.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=qt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};let ub=!1;class EU extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;G7(CU),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),ub&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),cy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,ub=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||Ht.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),xT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;ub=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function B5(n){const[t,e]=j7(),i=M.useContext(gD);return C.jsx(EU,{...n,layoutGroup:i,switchLayoutGroup:M.useContext(v5),isPresent:t,safeToRemove:e})}const CU={borderRadius:{...Df,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Df,borderTopRightRadius:Df,borderBottomLeftRadius:Df,borderBottomRightRadius:Df,boxShadow:SU};function TU(n,t,e){const i=dn(n)?n:cf(n);return i.start(MT("",i,t,e)),i.animation}const PU=(n,t)=>n.depth-t.depth;class _U{constructor(){this.children=[],this.isDirty=!1}add(t){eT(this.children,t),this.isDirty=!0}remove(t){nT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(PU),this.isDirty=!1,this.children.forEach(t)}}function kU(n,t){const e=Bn.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(Ba(i),n(r-t))};return Ht.setup(i,!0),()=>Ba(i)}const j5=["TopLeft","TopRight","BottomLeft","BottomRight"],MU=j5.length,sM=n=>typeof n=="string"?parseFloat(n):n,rM=n=>typeof n=="number"||tt.test(n);function LU(n,t,e,i,s,r){s?(n.opacity=qt(0,e.opacity??1,RU(i)),n.opacityExit=qt(t.opacity??1,0,DU(i))):r&&(n.opacity=qt(t.opacity??1,e.opacity??1,i));for(let o=0;o<MU;o++){const a=`border${j5[o]}Radius`;let l=oM(t,a),u=oM(e,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||rM(l)===rM(u)?(n[a]=Math.max(qt(sM(l),sM(u),i),0),(er.test(u)||er.test(l))&&(n[a]+="%")):n[a]=u}(t.rotate||e.rotate)&&(n.rotate=qt(t.rotate||0,e.rotate||0,i))}function oM(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const RU=V5(0,.5,PD),DU=V5(.5,.95,Ui);function V5(n,t,e){return i=>i<n?0:i>t?1:e(Jp(n,t,i))}function aM(n,t){n.min=t.min,n.max=t.max}function xi(n,t){aM(n.x,t.x),aM(n.y,t.y)}function lM(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function cM(n,t,e,i,s){return n-=t,n=Cv(n,1/e,i),s!==void 0&&(n=Cv(n,1/s,i)),n}function FU(n,t=0,e=1,i=.5,s,r=n,o=n){if(er.test(t)&&(t=parseFloat(t),t=qt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=qt(r.min,r.max,i);n===r&&(a-=t),n.min=cM(n.min,t,e,a,s),n.max=cM(n.max,t,e,a,s)}function uM(n,t,[e,i,s],r,o){FU(n,t[e],t[i],t[s],t.scale,r,o)}const IU=["x","scaleX","originX"],NU=["y","scaleY","originY"];function hM(n,t,e,i){uM(n.x,t,IU,e?e.x:void 0,i?i.x:void 0),uM(n.y,t,NU,e?e.y:void 0,i?i.y:void 0)}function dM(n){return n.translate===0&&n.scale===1}function $5(n){return dM(n.x)&&dM(n.y)}function fM(n,t){return n.min===t.min&&n.max===t.max}function OU(n,t){return fM(n.x,t.x)&&fM(n.y,t.y)}function pM(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function z5(n,t){return pM(n.x,t.x)&&pM(n.y,t.y)}function mM(n){return An(n.x)/An(n.y)}function gM(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class BU{constructor(){this.members=[]}add(t){eT(this.members,t),t.scheduleRender()}remove(t){if(nT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jU(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:g}=e;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),g&&(i+=`skewY(${g}deg) `)}const a=n.x.scale*t.x,l=n.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const hb=["","X","Y","Z"],VU=1e3;let $U=0;function db(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function U5(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=_5(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Ht,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&U5(i)}function H5({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=$U++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(HU),this.nodes.forEach(YU),this.nodes.forEach(KU),this.nodes.forEach(WU)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _U)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new rT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=r5(o)&&!N7(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let h,d=0;const f=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{d=window.innerWidth}),n(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,h&&h(),h=kU(f,250),cy.hasAnimatedSinceResize&&(cy.hasAnimatedSinceResize=!1,this.nodes.forEach(wM)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||tH,{onLayoutAnimationStart:y,onLayoutAnimationComplete:A}=u.getProps(),m=!this.targetLayout||!z5(this.targetLayout,p),v=!d&&f;if(this.options.layoutRoot||this.resumeFrom||v||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...vT(g,"layout"),onPlay:y,onComplete:A};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,v)}else d||wM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ba(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(XU),this.nodes.forEach(zU),this.nodes.forEach(UU)):this.nodes.forEach(vM),this.clearAllSnapshots();const a=Bn.now();Ye.delta=io(0,1e3/60,a-Ye.timestamp),Ye.timestamp=a,Ye.isProcessing=!0,tb.update.process(Ye),tb.preRender.process(Ye),tb.render.process(Ye),Ye.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GU),this.sharedNodes.forEach(QU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!$5(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||el(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),eH(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return ue();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(nH))){const{scroll:h}=this.root;h&&(Nu(a.x,h.offset.x),Nu(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=ue();if(xi(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&xi(a,o),Nu(a.x,d.offset.x),Nu(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=ue();xi(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ou(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),el(h.latestValues)&&Ou(l,h.latestValues)}return el(this.latestValues)&&Ou(l,this.latestValues),l}removeTransform(o){const a=ue();xi(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!el(u.latestValues))continue;KA(u.latestValues)&&u.updateSnapshot();const h=ue(),d=u.measurePageBox();xi(h,d),hM(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return el(this.latestValues)&&hM(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ye.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=Ye.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Mp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),lU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xi(this.target,this.layout.layoutBox),A5(this.target,this.targetDelta)):xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),Mp(this.relativeTargetOrigin,this.target,p.target),xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||KA(this.parent.latestValues)||b5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var g;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ye.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;xi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;xz(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ue());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lM(this.prevProjectionDelta.x,this.projectionDelta.x),lM(this.prevProjectionDelta.y,this.projectionDelta.y)),kp(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!gM(this.projectionDelta.x,this.prevProjectionDelta.x)||!gM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bu(),this.projectionDelta=Bu(),this.projectionDeltaWithTransform=Bu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Bu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ue(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,A=this.getStack(),m=!A||A.members.length<=1,v=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(JU));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const T=S/1e3;xM(d.x,o.x,T),xM(d.y,o.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Mp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZU(this.relativeTarget,this.relativeTargetOrigin,f,T),w&&OU(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ue()),xi(w,this.relativeTarget)),y&&(this.animationValues=h,LU(h,u,this.latestValues,T,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Ba(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{cy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cf(0)),this.currentAnimation=TU(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(VU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&W5(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ue();const d=An(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=An(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}xi(a,l),Ou(a,h),kp(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new BU),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&db("z",o,u,this.animationValues);for(let h=0;h<hb.length;h++)db(`rotate${hb[h]}`,o,u,this.animationValues),db(`skew${hb[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ly(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ly(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!el(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=jU(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in im){if(h[g]===void 0)continue;const{correct:y,applyTo:A,isCSSVariable:m}=im[g],v=d==="none"?h[g]:y(h[g],u);if(A){const w=A.length;for(let S=0;S<w;S++)o[A[S]]=v}else m?this.options.visualElement.renderState.vars[g]=v:o[g]=v}this.options.layoutId&&(o.pointerEvents=u===this?ly(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(yM),this.root.sharedNodes.clear()}}}function zU(n){n.updateLayout()}function UU(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?Ei(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=An(f);f.min=i[d].min,f.max=f.min+p}):W5(r,t.layoutBox,i)&&Ei(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=An(i[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const a=Bu();kp(a,i,t.layoutBox);const l=Bu();o?kp(l,n.applyTransform(s,!0),t.measuredBox):kp(l,i,t.layoutBox);const u=!$5(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=ue();Mp(g,t.layoutBox,f.layoutBox);const y=ue();Mp(y,i,p.layoutBox),z5(g,y)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=y,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function HU(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function WU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function GU(n){n.clearSnapshot()}function yM(n){n.clearMeasurements()}function vM(n){n.isLayoutDirty=!1}function XU(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function wM(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function YU(n){n.resolveTargetDelta()}function KU(n){n.calcProjection()}function qU(n){n.resetSkewAndRotation()}function QU(n){n.removeLeadSnapshot()}function xM(n,t,e){n.translate=qt(t.translate,0,e),n.scale=qt(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function bM(n,t,e,i){n.min=qt(t.min,e.min,i),n.max=qt(t.max,e.max,i)}function ZU(n,t,e,i){bM(n.x,t.x,e.x,i),bM(n.y,t.y,e.y,i)}function JU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const tH={duration:.45,ease:[.4,0,.1,1]},AM=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),SM=AM("applewebkit/")&&!AM("chrome/")?Math.round:Ui;function EM(n){n.min=SM(n.min),n.max=SM(n.max)}function eH(n){EM(n.x),EM(n.y)}function W5(n,t,e){return n==="position"||n==="preserve-aspect"&&!aU(mM(t),mM(e),.2)}function nH(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const iH=H5({attachResizeListener:(n,t)=>sm(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fb={current:void 0},G5=H5({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!fb.current){const n=new iH({});n.mount(window),n.setOptions({layoutScroll:!0}),fb.current=n}return fb.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),sH={pan:{Feature:AU},drag:{Feature:bU,ProjectionNode:G5,MeasureLayout:B5}};function CM(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=i[s];r&&Ht.postRender(()=>r(t,t1(t)))}class rH extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=L7(t,(e,i)=>(CM(this.node,i,"Start"),s=>CM(this.node,s,"End"))))}unmount(){}}class oH extends Ga{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Q0(sm(this.node.current,"focus",()=>this.onFocus()),sm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TM(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=i[s];r&&Ht.postRender(()=>r(t,t1(t)))}class aH extends Ga{mount(){const{current:t}=this.node;t&&(this.unmount=I7(t,(e,i)=>(TM(this.node,i,"Start"),(s,{success:r})=>TM(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const nS=new WeakMap,pb=new WeakMap,lH=n=>{const t=nS.get(n.target);t&&t(n)},cH=n=>{n.forEach(lH)};function uH({root:n,...t}){const e=n||document;pb.has(e)||pb.set(e,{});const i=pb.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(cH,{root:n,...t})),i[s]}function hH(n,t,e){const i=uH(t);return nS.set(n,e),i.observe(n),()=>{nS.delete(n),i.unobserve(n)}}const dH={some:0,all:1};class fH extends Ga{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:dH[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(l)};return hH(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(pH(t,e))&&this.startObserver()}unmount(){}}function pH({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const mH={inView:{Feature:fH},tap:{Feature:aH},focus:{Feature:oH},hover:{Feature:rH}},gH={layout:{ProjectionNode:G5,MeasureLayout:B5}},yH={...eU,...mH,...sH,...gH},vH=yz(yH,Mz),wH=(n,t)=>{const e=new Set([...Object.keys(n),...t.flatMap(s=>Object.keys(s))]),i={};return e.forEach(s=>{i[s]=[n[s],...t.map(r=>r[s])]}),i},Ce=({text:n="",as:t="p",delay:e=200,className:i="",animateBy:s="words",direction:r="top",onAnimationComplete:o,stepDuration:a=.35,...l})=>{const u=t,h=s==="words"?n.split(" "):n.split(""),[d,f]=M.useState(!1),p=M.useRef(null);M.useEffect(()=>{if(!p.current)return;const T=new IntersectionObserver(([P])=>{P.isIntersecting&&(f(!0),T.unobserve(p.current))},{threshold:.1,rootMargin:"0px"});return T.observe(p.current),()=>T.disconnect()},[]);const g=M.useMemo(()=>r==="top"?{filter:"blur(10px)",opacity:0,y:-50}:{filter:"blur(10px)",opacity:0,y:50},[r]),y=M.useMemo(()=>[{filter:"blur(5px)",opacity:.5,y:r==="top"?5:-5},{filter:"blur(0px)",opacity:1,y:0}],[r]),A=g,m=y,v=m.length+1,w=a*(v-1),S=Array.from({length:v},(T,P)=>v===1?0:P/(v-1));return C.jsxs(u,{ref:p,className:i,...l,children:[" ",h.map((T,P)=>{const _=wH(A,m),k={duration:w,times:S,delay:P*e/1e3};return k.ease=L=>L,C.jsxs(vH.span,{className:"inline-block will-change-[transform,filter,opacity]",initial:A,animate:d?_:A,transition:k,onAnimationComplete:P===h.length-1?o:void 0,children:[T===" "?"":T,s==="words"&&P<h.length-1&&""]},P)})]})},xH=({onLinkClick:n})=>{const t=Zx("(min-width: 1024px)"),e="purple",i={cyan:"#00ffff",purple:"#cc00ff",blue:"#00aaff",red:"#ff1111"},s={textShadow:`0 0 5px #fff, 0 0 10px ${i[e]}, 0 0 15px ${i[e]}`},[r,o]=M.useState(!1),a=M.useRef(null);M.useEffect(()=>{const h=d=>{a.current&&!a.current.contains(d.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const l=({text:h,icon:d,sectionId:f,color:p})=>C.jsxs(bt.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring"},onClick:()=>n(f),className:`glare-container inline-flex items-center justify-center gap-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-${p}-500/30 hover:shadow-${p}-500/50 text-md`,children:[d," ",h]}),u=({text:h,icon:d,sectionId:f})=>C.jsxs("button",{onClick:()=>{n(f),o(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-left text-white hover:bg-blue-500/50 transition-colors",children:[d," ",h]});return C.jsx("section",{id:"hero",className:"min-h-screen flex items-center justify-center text-white relative bg-transparent",children:C.jsxs("div",{className:"container relative mx-auto px-4 text-center z-10",children:[C.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-4",style:s,children:C.jsx(Ce,{as:"span",text:"Muzahir Abbas",delay:100,className:`text-${e}-400`})}),C.jsx(Ce,{text:"An AI & Automation Full Stack Developer",delay:50,className:"block max-w-2xl mx-auto text-2xl md:text-3xl text-slate-200 mb-10",style:{textShadow:"0 0 8px rgba(255, 255, 255, 0.3)"}}),t?C.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[C.jsx(l,{text:"My Story",icon:C.jsx(c_,{}),sectionId:"about-me",color:"blue"}),C.jsx(l,{text:"AI & Full Stack Portfolio",icon:C.jsx(bA,{}),sectionId:"ai-automation",color:"blue"}),C.jsx(l,{text:"Legacy Portfolio",icon:C.jsx(dv,{}),sectionId:"interactive-media",color:"blue"})]}):C.jsxs(bt.div,{ref:a,className:"relative inline-block mt-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring"},children:[C.jsxs("button",{onClick:()=>o(!r),className:"glare-container inline-flex items-center justify-center gap-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-8 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 text-lg","aria-haspopup":"true","aria-expanded":r,children:[r?C.jsx(MC,{}):C.jsx(HL,{})," Explore"]}),C.jsx(Js,{children:r&&C.jsxs(bt.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute top-full mt-2 left-0 w-64 bg-slate-900/90 backdrop-blur-md border border-slate-700 rounded-lg shadow-lg overflow-hidden origin-top z-50 transform -translate-x-1/2",children:[C.jsx(u,{text:"My Story",icon:C.jsx(c_,{}),sectionId:"about-me"}),C.jsx(u,{text:"AI & Full Stack",icon:C.jsx(bA,{}),sectionId:"ai-automation"}),C.jsx(u,{text:"Legacy Portfolio",icon:C.jsx(dv,{}),sectionId:"interactive-media"})]})})]})]})})};const bH="radial-gradient(farthest-side circle at var(--pointer-x) var(--pointer-y),hsla(266,100%,90%,var(--card-opacity)) 4%,hsla(266,50%,80%,calc(var(--card-opacity)*0.75)) 10%,hsla(266,25%,70%,calc(var(--card-opacity)*0.5)) 50%,hsla(266,0%,60%,0) 100%),radial-gradient(35% 52% at 55% 20%,#00ffaac4 0%,#073aff00 100%),radial-gradient(100% 100% at 50% 50%,#00c1ffff 1%,#073aff00 76%),conic-gradient(from 124deg at 50% 50%,#c137ffff 0%,#07c6ffff 40%,#07c6ffff 60%,#c137ffff 100%)",AH="linear-gradient(145deg,#60496e8c 0%,#71C4FF44 100%)",Ff={SMOOTH_DURATION:600,INITIAL_DURATION:1500,INITIAL_X_OFFSET:70,INITIAL_Y_OFFSET:60,DEVICE_BETA_OFFSET:20},F1=(n,t=0,e=100)=>Math.min(Math.max(n,t),e),iS=(n,t=3)=>parseFloat(n.toFixed(t)),I1=(n,t,e,i,s)=>iS(i+(s-i)*(n-t)/(e-t)),SH=n=>n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,EH=({avatarUrl:n="<Placeholder for avatar URL>",iconUrl:t="<Placeholder for icon URL>",grainUrl:e="<Placeholder for grain URL>",behindGradient:i,innerGradient:s,showBehindGradient:r=!0,className:o="",enableTilt:a=!0,enableMobileTilt:l=!1,mobileTiltSensitivity:u=5,miniAvatarUrl:h,name:d="Javi A. Torres",title:f="Software Engineer",handle:p="javicodes",status:g="Online",contactText:y="Contact",showUserInfo:A=!0,onContactClick:m})=>{const v=M.useRef(null),w=M.useRef(null),S=M.useMemo(()=>{if(!a)return null;let R=null;const I=(F,V,O,j)=>{const N=O.clientWidth,$=O.clientHeight,H=F1(100/N*F),W=F1(100/$*V),G=H-50,Z=W-50,dt={"--pointer-x":`${H}%`,"--pointer-y":`${W}%`,"--background-x":`${I1(H,0,100,35,65)}%`,"--background-y":`${I1(W,0,100,35,65)}%`,"--pointer-from-center":`${F1(Math.hypot(W-50,H-50)/50,0,1)}`,"--pointer-from-top":`${W/100}`,"--pointer-from-left":`${H/100}`,"--rotate-x":`${iS(-(Z/5))}deg`,"--rotate-y":`${iS(G/4)}deg`};Object.entries(dt).forEach(([vt,ut])=>{j.style.setProperty(vt,ut)})};return{updateCardTransform:I,createSmoothAnimation:(F,V,O,j,N)=>{const $=performance.now(),H=N.clientWidth/2,W=N.clientHeight/2,G=Z=>{const dt=Z-$,vt=F1(dt/F),ut=SH(vt),lt=I1(ut,0,1,V,H),vi=I1(ut,0,1,O,W);I(lt,vi,j,N),vt<1&&(R=requestAnimationFrame(G))};R=requestAnimationFrame(G)},cancelAnimation:()=>{R&&(cancelAnimationFrame(R),R=null)}}},[a]),T=M.useCallback(R=>{const I=w.current,B=v.current;if(!I||!B||!S)return;const F=I.getBoundingClientRect();S.updateCardTransform(R.clientX-F.left,R.clientY-F.top,I,B)},[S]),P=M.useCallback(()=>{const R=w.current,I=v.current;!R||!I||!S||(S.cancelAnimation(),I.classList.add("active"),R.classList.add("active"))},[S]),_=M.useCallback(R=>{const I=w.current,B=v.current;!I||!B||!S||(S.createSmoothAnimation(Ff.SMOOTH_DURATION,R.offsetX,R.offsetY,I,B),B.classList.remove("active"),I.classList.remove("active"))},[S]),k=M.useCallback(R=>{const I=w.current,B=v.current;if(!I||!B||!S)return;const{beta:F,gamma:V}=R;!F||!V||S.updateCardTransform(I.clientWidth/2+V*u,I.clientHeight/2+(F-Ff.DEVICE_BETA_OFFSET)*u,I,B)},[S,u]);M.useEffect(()=>{if(!a||!S)return;const R=w.current,I=v.current;if(!R||!I)return;const B=T,F=P,V=_,O=k,j=()=>{!l||location.protocol!=="https:"||(typeof window.DeviceMotionEvent.requestPermission=="function"?window.DeviceMotionEvent.requestPermission().then(H=>{H==="granted"&&window.addEventListener("deviceorientation",O)}).catch(H=>console.error(H)):window.addEventListener("deviceorientation",O))};R.addEventListener("pointerenter",F),R.addEventListener("pointermove",B),R.addEventListener("pointerleave",V),R.addEventListener("click",j);const N=I.clientWidth-Ff.INITIAL_X_OFFSET,$=Ff.INITIAL_Y_OFFSET;return S.updateCardTransform(N,$,R,I),S.createSmoothAnimation(Ff.INITIAL_DURATION,N,$,R,I),()=>{R.removeEventListener("pointerenter",F),R.removeEventListener("pointermove",B),R.removeEventListener("pointerleave",V),R.removeEventListener("click",j),window.removeEventListener("deviceorientation",O),S.cancelAnimation()}},[a,l,S,T,P,_,k]);const L=M.useMemo(()=>({"--icon":t?`url(${t})`:"none","--grain":e?`url(${e})`:"none","--behind-gradient":r?i??bH:"none","--inner-gradient":s??AH}),[t,e,r,i,s]),D=M.useCallback(()=>{m==null||m()},[m]);return C.jsx("div",{ref:v,className:`pc-card-wrapper ${o}`.trim(),style:L,children:C.jsx("section",{ref:w,className:"pc-card",children:C.jsxs("div",{className:"pc-inside",children:[C.jsx("div",{className:"pc-shine"}),C.jsx("div",{className:"pc-glare"}),C.jsxs("div",{className:"pc-content pc-avatar-content",children:[C.jsx("img",{className:"avatar",src:n,alt:`${d||"User"} avatar`,loading:"lazy",onError:R=>{const I=R.target;I.style.display="none"}}),A&&C.jsxs("div",{className:"pc-user-info",children:[C.jsxs("div",{className:"pc-user-details",children:[C.jsx("div",{className:"pc-mini-avatar",children:C.jsx("img",{src:h||n,alt:`${d||"User"} mini avatar`,loading:"lazy",onError:R=>{const I=R.target;I.style.opacity="0.5",I.src=n}})}),C.jsxs("div",{className:"pc-user-text",children:[C.jsxs("div",{className:"pc-handle",children:["@",p]}),C.jsx("div",{className:"pc-status",children:g})]})]}),C.jsx("button",{className:"pc-contact-btn",onClick:D,style:{pointerEvents:"auto"},type:"button","aria-label":`Contact ${d||"user"}`,children:y})]})]}),C.jsx("div",{className:"pc-content",children:C.jsxs("div",{className:"pc-details",children:[C.jsx("h3",{children:d}),C.jsx("p",{children:f})]})})]})})})},CH=fs.memo(EH),If=({text:n,icon:t,sectionId:e,scrollToSection:i,color:s})=>C.jsxs("button",{onClick:()=>i(e),className:`glare-container w-full inline-flex items-center justify-center gap-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 shadow-lg shadow-${s}-500/30 hover:shadow-${s}-500/50 text-sm`,children:[t," ",n]}),TH=({scrollToSection:n})=>{const t=()=>{n("contact")},e={cyan:"#00ffff",purple:"#cc00ff",blue:"#00aaff",red:"#ff1111"},i={textShadow:`0 0 5px #fff, 0 0 10px ${e.blue}, 0 0 15px ${e.blue}`},s={"--neon-red":e.blue};return C.jsx("section",{id:"about-me",className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:s,children:C.jsxs("div",{className:"neon-border-content p-8 md:p-12 space-y-16 backdrop-blur-sm",children:[C.jsxs(bt.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},style:i,className:"text-4xl font-bold text-center mb-12 flex items-center justify-center gap-3 text-white",children:[C.jsx("span",{className:"text-blue-400",children:C.jsx(A8,{})}),C.jsx(Ce,{as:"span",text:"My Story",delay:100})]}),C.jsxs(bt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8,delay:.5},className:"grid md:grid-cols-2 items-center justify-center gap-12 mt-12",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx(CH,{name:"Muzahir Abbas",title:"AI & Automation Full Stack Developer",handle:"muzahirabbas",status:"Building the future...",contactText:"Contact Me",avatarUrl:"/assets/rbg.png",showUserInfo:!0,enableTilt:!0,enableMobileTilt:!1,onContactClick:t})}),C.jsxs("div",{className:"text-lg text-slate-300 space-y-4 max-w-xl mx-auto md:mx-0",children:[C.jsx(Ce,{text:"I design systems where AI and creativity collide. Starting out in 3D animation and game dev, I fell in love with building efficient workflows in Unreal Engine  pipelines that saved hours and unlocked new creative possibilities. That obsession with automation eventually pulled me into AI, where I now apply the same mindset to creative industries and business operations.",delay:25}),C.jsx(Ce,{text:"What I Do",className:"!font-bold mt-8 !text-white",as:"h3",delay:25}),C.jsx(Ce,{text:" For Creative Teams: AI-powered tools for asset creation, pipeline automation, and interactive experiences.",delay:25}),C.jsx(Ce,{text:" For Businesses: End-to-end automation, custom AI apps, and autonomous agents that cut down repetitive work.",delay:25}),C.jsx(Ce,{text:"My approach is simple: eliminate friction, automate complexity, and scale output  so people can focus on imagination and growth.",delay:25}),C.jsx(Ce,{text:"If youre exploring how to bring AI into your workflow, lets connect.",delay:25})]})]}),C.jsxs("div",{className:"mt-16 pt-12 border-t border-slate-700/50",children:[C.jsx("h3",{className:"text-xl font-semibold text-slate-200 text-center mb-6",children:"Go to section:"}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[C.jsx(If,{text:"AI & Full Stack",icon:C.jsx(bA,{}),sectionId:"ai-automation",scrollToSection:n,color:"blue"}),C.jsx(If,{text:"Legacy Portfolio",icon:C.jsx(dv,{}),sectionId:"interactive-media",scrollToSection:n,color:"blue"}),C.jsx(If,{text:"Skills & Stack",icon:C.jsx(a8,{}),sectionId:"skills-stack",scrollToSection:n,color:"blue"}),C.jsx(If,{text:"Experience",icon:C.jsx(WL,{}),sectionId:"experience",scrollToSection:n,color:"blue"}),C.jsx(If,{text:"Contact Me",icon:C.jsx(GL,{}),sectionId:"contact",scrollToSection:n,color:"blue"})]})]})]})})})})},PH=({item:n,openModal:t,accentColor:e,onVideoHover:i,onMouseLeave:s,isVideoPlaying:r,isScalingUp:o})=>{const a=n.videoUrl||n.demoVideoUrl,l=r&&a;return C.jsxs(bt.div,{onClick:()=>t({type:"portfolioItem",item:n}),onMouseEnter:()=>i(n.id),onMouseLeave:s,className:"glare-container group flex-shrink-0 w-full snap-center bg-slate-900 rounded-lg shadow-lg hover:-translate-y-1 transition-all duration-300 cursor-pointer overflow-hidden border border-slate-800 hover:border-red-500/50",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4},children:[C.jsx("div",{className:"relative overflow-hidden w-full h-40 bg-black",children:l?C.jsx("div",{className:"w-full h-full object-cover rounded-lg overflow-hidden",children:C.jsx("iframe",{src:`${a}?autoplay=1&mute=1&loop=1&controls=0&modestbranding=1&rel=0`,title:n.title,frameBorder:"0",allow:"autoplay; fullscreen",className:`video-preview ${o?"video-preview-large":"video-preview-small"}`})}):C.jsx("img",{src:n.thumbnail,alt:n.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),C.jsxs("div",{className:"p-4",children:[C.jsx("h4",{className:"font-bold text-white text-lg",children:n.title}),C.jsx("p",{className:"text-sm text-slate-400 truncate mt-1",children:n.description}),C.jsx("span",{className:`${e} text-sm font-semibold mt-4 block group-hover:translate-x-1 transition-transform duration-300`,children:"View Details "})]})]})},PM=({data:n,openModal:t,neonColor:e})=>{if(!n)return null;const i=n.portfolio.filter(B=>B.f==="true"),s=n.portfolio,[[r,o],a]=M.useState([0,0]),[l,u]=M.useState(null),[h,d]=M.useState(!1),[f,p]=M.useState(!1),g=B=>{if(i.length<=1)return;let F;r+B<0?F=i.length-1:r+B>=i.length?F=0:F=r+B,a([F,B])};M.useEffect(()=>{let B;return i.length>1&&!f&&(B=setTimeout(()=>{g(1)},5e3)),()=>clearTimeout(B)},[r,f,i.length,g]);const y=B=>{u(B),d(!1),setTimeout(()=>d(!0),200)},A=()=>{u(null),d(!1)},m={FaCube:C.jsx(dv,{}),FaRobot:C.jsx(w8,{}),FaClipboardList:C.jsx(u8,{})},v=`text-${e}-400`,w={cyan:"#00ffff",purple:"#cc00ff",blue:"#00aaff",red:"#ff1111"},S={textShadow:`0 0 5px #fff, 0 0 10px ${w[e]}, 0 0 15px ${w[e]}`},T={"--neon-red":w[e]};let P=n.title,_=n.intro;n.id==="ai-automation"?P="My AI and Full Stack Portfolio":n.id==="interactive-media"&&(P="My Legacy Portfolio",_="These projects showcase my past work in 3D animation, game development, web development, and interactive media.");const k=i[r],L=f&&((k==null?void 0:k.videoUrl)||(k==null?void 0:k.demoVideoUrl)),D=(k==null?void 0:k.videoUrl)||(k==null?void 0:k.demoVideoUrl),R=50,I={enter:B=>({x:B>0?"100%":"-100%",opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:B=>({zIndex:0,x:B<0?"100%":"-100%",opacity:0})};return C.jsx("section",{id:n.id,className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:T,children:C.jsxs("div",{className:"neon-border-content p-8 md:p-12 space-y-16 backdrop-blur-sm",children:[C.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:[C.jsxs("h2",{style:S,className:"text-4xl md:text-5xl font-bold text-center mb-2 flex items-center justify-center gap-4 text-white",children:[C.jsx("span",{className:v,children:m[n.icon]}),C.jsx(Ce,{as:"span",text:P,delay:100})]}),C.jsx("h3",{className:"text-xl text-center text-slate-400 mb-4",children:n.subtitle}),C.jsx("p",{className:"text-lg text-slate-300 text-center max-w-3xl mx-auto mb-8",children:_})]}),i.length>0&&C.jsxs("div",{children:[C.jsx(Ce,{text:"Featured Projects",className:"text-3xl font-semibold mb-8 text-slate-100 text-center block",delay:100}),C.jsxs("div",{className:"relative w-full max-w-4xl mx-auto h-[600px] md:h-[500px] overflow-hidden",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[C.jsx(Js,{initial:!1,custom:o,children:k&&C.jsx(bt.div,{custom:o,variants:I,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragEnd:(B,{offset:F,velocity:V})=>{const O=F.x;Math.abs(O)>R&&g(O<0?1:-1)},className:"absolute inset-0 w-full h-full cursor-grab active:cursor-grabbing",children:C.jsxs("div",{className:"w-full h-full bg-slate-900 rounded-lg shadow-lg overflow-hidden border border-slate-800 grid grid-cols-1 md:grid-cols-2",onClick:()=>t({type:"portfolioItem",item:k}),children:[C.jsx("div",{className:"relative w-full h-64 md:h-full bg-black overflow-hidden pointer-events-none",children:L?C.jsx("iframe",{src:`${D}?autoplay=1&mute=1&loop=1&controls=0&modestbranding=1&rel=0`,title:k.title,frameBorder:"0",allow:"autoplay; fullscreen",className:"w-full h-full object-cover"}):C.jsx("img",{src:k.thumbnail,alt:k.title,className:"w-full h-full object-cover"})}),C.jsxs("div",{className:"p-6 md:p-8 flex flex-col justify-center pointer-events-none",children:[C.jsx("h3",{className:`font-bold text-2xl mb-2 ${v}`,children:k.title}),C.jsx("p",{className:"text-slate-300 mb-4 text-md",children:k.description}),C.jsxs("p",{className:"text-slate-300 mb-6 text-md flex-grow",children:[k.details.substring(0,150),"..."]}),C.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-6",children:[C.jsx(XL,{className:v}),k.tech.slice(0,5).map(B=>C.jsx("span",{className:"bg-slate-700 text-xs font-semibold px-2 py-1 rounded",children:B},B)),k.tech.length>5&&C.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["+",k.tech.length-5," more"]})]}),C.jsx("button",{style:{pointerEvents:"auto"},onClick:B=>{B.stopPropagation(),t({type:"portfolioItem",item:k})},className:`glare-container inline-flex items-center justify-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-${e}-500/30 hover:shadow-${e}-500/50`,children:" View Details "})]})]})},r)}),i.length>1&&C.jsxs(C.Fragment,{children:[C.jsxs("button",{onClick:()=>g(-1),className:"absolute top-1/2 -translate-y-1/2 left-0 -translate-x-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors","aria-label":"Previous Project",children:[" ",C.jsx(_C,{})," "]}),C.jsxs("button",{onClick:()=>g(1),className:"absolute top-1/2 -translate-y-1/2 right-0 translate-x-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors","aria-label":"Next Project",children:[" ",C.jsx(kC,{})," "]})]})]})]}),s.length>0&&C.jsxs("div",{children:[C.jsx(Ce,{text:"All Projects",className:"text-3xl font-semibold mt-16 mb-8 text-slate-100 text-center block",delay:100}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.map((B,F)=>C.jsx(PH,{item:B,openModal:t,accentColor:v,onVideoHover:y,onMouseLeave:A,isVideoPlaying:l===B.id,isScalingUp:h},`${B.id}-${F}`)),C.jsxs(bt.div,{className:"glare-container group flex-shrink-0 w-full snap-center bg-slate-900/80 rounded-lg shadow-lg hover:-translate-y-1 transition-all duration-300 cursor-pointer overflow-hidden border border-slate-800 hover:border-red-500/50 flex flex-col items-center justify-center p-6 text-center space-y-4 min-h-[260px]",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4,delay:.1},children:[C.jsx("h4",{className:"font-bold text-white text-lg",children:"See more projects on"}),C.jsxs("div",{className:"flex gap-4",children:[C.jsx("a",{href:"https://www.linkedin.com/in/muzahirabbas14/details/projects/",target:"_blank",rel:"noopener noreferrer","aria-label":"LinkedIn Projects",className:"h-14 w-14 flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 hover:border-red-500/50 rounded-full transition-all duration-300",children:C.jsx("div",{className:`text-white group-hover:text-${e}-400 transition-colors duration-300`,children:C.jsx(PC,{size:24})})}),C.jsx("a",{href:"https://github.com/muzahirabbas",target:"_blank",rel:"noopener noreferrer","aria-label":"GitHub Projects",className:"h-14 w-14 flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 hover:border-red-500/50 rounded-full transition-all duration-300",children:C.jsx("div",{className:`text-white group-hover:text-${e}-400 transition-colors duration-300`,children:C.jsx(TC,{size:24})})})]})]})]})]})]})})})})},_H=({data:n,openModal:t})=>{if(!n)return null;const e={textShadow:"0 0 5px #fff, 0 0 10px #00aaff, 0 0 15px #00aaff"},i={"--neon-red":"#00aaff"};return C.jsx("section",{id:"experience",className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:i,children:C.jsxs("div",{className:"neon-border-content p-8 md:p-12 backdrop-blur-sm",children:[C.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:[C.jsxs("h2",{style:e,className:"text-4xl font-bold text-center mb-4 flex items-center justify-center gap-3 text-white",children:[C.jsx("span",{className:"text-white",children:C.jsx(WL,{})}),C.jsx(Ce,{as:"span",text:n.title,delay:100})]}),C.jsx("p",{className:"text-lg text-slate-400 text-center max-w-3xl mx-auto mb-16",children:n.intro})]}),C.jsxs("div",{className:"relative max-w-3xl mx-auto",children:[C.jsx("div",{className:"absolute left-4 top-2 h-full w-1 bg-slate-800 rounded-full md:left-1/2 md:-translate-x-1/2",style:{boxShadow:"0 0 10px #00aaff"}}),n.timeline.map((s,r)=>C.jsxs(bt.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:r*.1},className:"relative mb-12 pl-12 md:pl-0",children:[C.jsx("div",{className:"z-10 absolute left-4 top-2 md:left-1/2 -translate-x-1/2 flex items-center justify-center w-8 h-8 bg-blue-500 rounded-full ring-4 ring-black shadow-md shadow-blue-500/50",children:C.jsx(c8,{className:"text-white",size:16})}),C.jsxs("div",{className:`glare-container bg-slate-900/80 p-4 rounded-lg shadow-lg border border-slate-800 hover:border-blue-500/50 transition-all duration-300 cursor-pointer backdrop-blur-sm md:w-5/12 ${r%2===0?"md:ml-auto md:pl-8":"md:mr-auto md:pr-8 md:text-right"}`,onClick:()=>t({type:"experience",item:s}),children:[C.jsx("p",{className:"text-sm font-semibold text-blue-400 mb-1",children:s.year}),C.jsx("h4",{className:"text-lg font-bold text-white",children:s.role}),C.jsx("p",{className:"text-sm text-slate-400 mb-2",children:s.company}),C.jsx("p",{className:"text-sm text-slate-300",children:s.achievement})]})]},s.id))]})]})})})})},kH=({data:n})=>{if(!n||n.length===0)return null;const t=[...n,...n,...n],e=M.useRef(null),i=M.useRef(null),s=M.useRef(null),[r,o]=M.useState(!1),[a,l]=M.useState(!1),u=M.useRef(0),h=()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null),i.current&&(clearTimeout(i.current),i.current=null)},d=()=>{h();const m=e.current;if(!m)return;u.current=m.scrollWidth/3;const v=()=>{m.scrollLeft+=.5,m.scrollLeft>=u.current&&(m.scrollLeft=m.scrollLeft-u.current),s.current=requestAnimationFrame(v)};s.current=requestAnimationFrame(v)};M.useEffect(()=>{const m=e.current,v=setTimeout(()=>{m&&(u.current=m.scrollWidth/3,d())},150);return()=>{clearTimeout(v),h()}},[]),M.useEffect(()=>{const m=e.current;if(!m)return;const v=()=>{setTimeout(()=>{if(!m)return;const S=m.scrollWidth>m.clientWidth;o(S&&m.scrollLeft>10),l(S&&m.scrollWidth-m.scrollLeft>m.clientWidth+10)},50)};v(),m.addEventListener("scroll",v),window.addEventListener("resize",v);const w=new ResizeObserver(v);return w.observe(m),()=>{m.removeEventListener("scroll",v),window.removeEventListener("resize",v),w.unobserve(m)}},[n]);const f=m=>{h();const v=e.current;if(!v)return;const w=v.clientWidth*.8;v.scrollTo({left:v.scrollLeft+(m==="right"?w:-w),behavior:"smooth"}),i.current=setTimeout(d,2e3)},p=()=>{h()},g=()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(d,2e3)},y={color:"#fff",textShadow:"0 0 5px #fff, 0 0 10px #00aaff, 0 0 15px #00aaff"},A={"--neon-red":"#00aaff"};return C.jsx("section",{id:"testimonials",className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:A,children:C.jsxs("div",{className:"neon-border-content p-8 backdrop-blur-sm",children:[C.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[C.jsxs("h2",{style:y,className:"text-4xl font-bold text-center mb-4 flex items-center justify-center gap-3 text-white",children:[C.jsx("span",{className:"text-white",children:C.jsx(h8,{})}),C.jsx(Ce,{as:"span",text:"Recommendations",delay:100})]}),C.jsx("p",{className:"text-lg text-slate-400 text-center max-w-3xl mx-auto mb-16",children:"What my colleagues and clients say about my work."})]}),C.jsxs("div",{className:"w-full relative",onMouseDown:p,onTouchStart:p,onMouseEnter:p,onMouseUp:g,onTouchEnd:g,onTouchCancel:g,onMouseLeave:g,children:[C.jsx("div",{className:"absolute top-0 left-0 w-24 h-full bg-gradient-to-r from-black/80 to-transparent z-20 pointer-events-none"}),C.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-gradient-to-l from-black/80 to-transparent z-20 pointer-events-none"}),C.jsx(Js,{children:r&&C.jsxs(bt.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>f("left"),onMouseDown:m=>m.stopPropagation(),onTouchStart:m=>m.stopPropagation(),onMouseEnter:m=>m.stopPropagation(),className:"absolute top-1/2 -translate-y-1/2 left-0 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-30 hover:bg-black/80 transition-colors","aria-label":"Scroll left",children:[" ",C.jsx(_C,{})," "]})}),C.jsx("div",{ref:e,className:"flex overflow-x-auto custom-scrollbar cursor-grab active:cursor-grabbing",children:t.map((m,v)=>C.jsx("div",{className:"flex-shrink-0 w-[90vw] md:w-[450px] mx-4 select-none",children:C.jsxs("div",{className:"relative pt-16 pb-6 h-full",children:[C.jsx("img",{src:m.avatar,alt:m.name,className:"w-24 h-24 rounded-full mx-auto absolute top-0 left-1/2 -translate-x-1/2 border-4 border-slate-800 ring-2 ring-blue-500 z-10"}),C.jsxs("div",{className:"glare-container bg-slate-900/80 p-8 rounded-2xl shadow-lg flex flex-col text-center h-full border border-slate-800 backdrop-blur-sm",children:[C.jsxs("p",{className:"text-slate-300 italic text-lg mt-4 mb-6 flex-grow",children:[C.jsx("span",{className:"text-4xl text-blue-500/50 leading-none mr-2",children:""}),m.text,C.jsx("span",{className:"text-4xl text-blue-500/50 leading-none ml-2",children:""})]}),C.jsxs("div",{className:"mt-auto",children:[C.jsx("h4",{className:"font-bold text-white text-lg",children:m.name}),C.jsx("p",{className:"text-sm text-slate-400",children:m.role})]})]})]})},`${m.id}-${v}`))}),C.jsx(Js,{children:a&&C.jsxs(bt.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>f("right"),onMouseDown:m=>m.stopPropagation(),onTouchStart:m=>m.stopPropagation(),onMouseEnter:m=>m.stopPropagation(),className:"absolute top-1/2 -translate-y-1/2 right-0 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-30 hover:bg-black/80 transition-colors","aria-label":"Scroll right",children:[" ",C.jsx(kC,{})," "]})})]})]})})})})},MH=({data:n})=>{if(!n)return null;const[t,e]=M.useState(""),i=[{icon:C.jsx(GL,{}),title:"Email",value:n.email,href:`mailto:${n.email}`},{icon:C.jsx(v8,{}),title:"Phone",value:n.phone,href:`tel:${n.phone.replace(/\s/g,"")}`},{icon:C.jsx(TC,{}),title:"GitHub",value:"View Profile",href:n.socials.github,target:"_blank"},{icon:C.jsx(PC,{}),title:"LinkedIn",value:"View Profile",href:n.socials.linkedin,target:"_blank"},{icon:C.jsx(r8,{}),title:"Discord",value:"Join Community",href:n.socials.discord,target:"_blank"},{icon:C.jsx(UL,{}),title:"Instagram",value:"View Profile",href:n.socials.instagram,target:"_blank"}],s=async a=>{a.preventDefault(),e("Sending...");const l={name:a.target.name.value,email:a.target.email.value,message:a.target.message.value};try{const u=await fetch("https://portfolio-contact-worker.abbasmuzahir92.workers.dev",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(u.ok)e("Thank you for your message!"),a.target.reset();else{const h=await u.json();e(`Error: ${h.message||"Something went wrong."}`)}}catch{e("Error: Could not connect. Please try again later.")}},r={color:"#fff",textShadow:"0 0 5px #fff, 0 0 10px #00aaff, 0 0 15px #00aaff"},o={"--neon-red":"#00aaff"};return C.jsx("section",{id:"contact",className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:o,children:C.jsxs("div",{className:"neon-border-content p-8 md:p-12 backdrop-blur-sm",children:[C.jsxs(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:[C.jsxs("h2",{style:r,className:"text-4xl font-bold text-center mb-4 flex items-center justify-center gap-3 text-white",children:[C.jsx("span",{className:"text-white",children:C.jsx(y8,{})}),C.jsx(Ce,{as:"span",text:"Get In Touch",delay:100})]}),C.jsx("p",{className:"text-lg text-slate-400 text-center max-w-3xl mx-auto mb-12",children:"Have a project, a question, or just want to connect? Heres how you can reach me."})]}),C.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[C.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:i.map((a,l)=>C.jsxs(bt.a,{href:a.href,target:a.target,rel:"noopener noreferrer",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:l*.1},className:`glare-container bg-slate-900/80 p-6 rounded-lg shadow-lg hover:shadow-blue-500/20 hover:-translate-y-1 transition-all flex 
flex-col items-center text-center border border-slate-800 hover:border-blue-500/50`,children:[C.jsx("div",{className:"text-3xl text-blue-400 mb-3 transition-all duration-300",style:{filter:"drop-shadow(0 0 4px #00aaff)"},children:a.icon}),C.jsx("h3",{className:"font-bold text-lg text-white",children:a.title}),C.jsx("p",{className:"text-sm text-slate-400 break-all",children:a.value})]},a.title))}),C.jsx(bt.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:C.jsxs("div",{className:"bg-slate-900/80 p-8 rounded-lg shadow-lg h-full border border-slate-800",children:[C.jsx("h3",{className:"text-2xl font-bold mb-6 text-white",children:"Send a Direct Message"}),C.jsxs("form",{onSubmit:s,className:"space-y-4",children:[C.jsx("input",{name:"name",type:"text",placeholder:"Your Name",required:!0,className:`w-full bg-slate-800 text-white border-slate-700 rounded-md py-2 px-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none 
transition-all`}),C.jsx("input",{name:"email",type:"email",placeholder:"Your Email",required:!0,className:"w-full bg-slate-800 text-white border-slate-700 rounded-md py-2 px-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-all"}),C.jsx("textarea",{name:"message",placeholder:"Your Message",rows:"5",required:!0,className:"w-full bg-slate-800 text-white border-slate-700 rounded-md py-2 px-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none transition-all"}),C.jsx("button",{type:"submit",className:"glare-container w-full bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50",disabled:t==="Sending...",children:t==="Sending..."?"Sending...":"Send Message"}),t&&C.jsx("p",{className:`text-center mt-4 ${t.includes("Error")?"text-red-400":"text-slate-300"}`,children:t})]})]})})]})]})})})})},LH=({data:n})=>{if(!n)return null;const t=[{href:n.socials.github,label:"GitHub",icon:C.jsx(TC,{size:24})},{href:n.socials.linkedin,label:"LinkedIn",icon:C.jsx(PC,{size:24})},{href:n.socials.instagram,label:"Instagram",icon:C.jsx(UL,{size:24})}];return C.jsx("footer",{className:"py-12 text-center bg-transparent text-slate-400",children:C.jsxs("div",{className:"container mx-auto px-4",children:[C.jsxs("p",{className:"mb-8 text-slate-300",style:{textShadow:"0 0 8px rgba(255, 255, 255, 0.3)"},children:["Made by ",n.name,"  AI Automation and Full-Stack Dev Portfolio"]}),C.jsx("div",{className:"flex justify-center items-center space-x-4 mb-8",children:t.map(e=>C.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,className:"glare-container group h-14 w-14 flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 hover:border-blue-500/50 rounded-full transition-all duration-300",children:C.jsx("div",{className:"text-white group-hover:text-blue-400 transition-colors duration-300",children:e.icon})},e.label))}),C.jsxs("p",{className:"text-xs",children:[" ",new Date().getFullYear()," All Rights Reserved."]})]})})};function _M({items:n,onItemClick:t}){const e=M.useRef(null),i=M.useRef(null),s=M.useRef(null),[r,o]=M.useState(!1),[a,l]=M.useState(!1),u=[...n,...n],h=M.useRef(0),d=()=>{s.current&&(cancelAnimationFrame(s.current),s.current=null),i.current&&(clearTimeout(i.current),i.current=null)},f=()=>{d();const A=e.current;if(!A)return;h.current=A.scrollWidth/2;const m=()=>{A.scrollLeft+=.5,A.scrollLeft>=h.current&&(A.scrollLeft=A.scrollLeft-h.current),s.current=requestAnimationFrame(m)};s.current=requestAnimationFrame(m)};M.useEffect(()=>{const A=e.current,m=setTimeout(()=>{A&&(h.current=A.scrollWidth/2,f())},150);return()=>{clearTimeout(m),d()}},[]),M.useEffect(()=>{const A=e.current;if(!A)return;const m=()=>{setTimeout(()=>{if(!A)return;const w=A.scrollWidth>A.clientWidth;o(w&&A.scrollLeft>10),l(w&&A.scrollWidth-A.scrollLeft>A.clientWidth+10)},50)};m(),A.addEventListener("scroll",m),window.addEventListener("resize",m);const v=new ResizeObserver(m);return v.observe(A),()=>{A.removeEventListener("scroll",m),window.removeEventListener("resize",m),v.unobserve(A)}},[n]);const p=A=>{d();const m=e.current;if(!m)return;const v=m.clientWidth*.8;m.scrollTo({left:m.scrollLeft+(A==="right"?v:-v),behavior:"smooth"}),i.current=setTimeout(f,2e3)},g=()=>{d()},y=()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(f,2e3)};return C.jsxs("div",{className:"w-full relative",onMouseDown:g,onTouchStart:g,onMouseEnter:g,onMouseUp:y,onTouchEnd:y,onTouchCancel:y,onMouseLeave:y,children:[C.jsx("div",{className:"absolute top-0 left-0 w-24 h-full bg-gradient-to-r from-black to-transparent z-10 pointer-events-none"}),C.jsx("div",{className:"absolute top-0 right-0 w-24 h-full bg-gradient-to-l from-black to-transparent z-10 pointer-events-none"}),C.jsx(Js,{children:r&&C.jsxs(bt.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>p("left"),onMouseDown:A=>A.stopPropagation(),onTouchStart:A=>A.stopPropagation(),onMouseEnter:A=>A.stopPropagation(),className:"absolute top-1/2 -translate-y-1/2 left-0 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors","aria-label":"Scroll left",children:[" ",C.jsx(_C,{})," "]})}),C.jsx(Js,{children:a&&C.jsxs(bt.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>p("right"),onMouseDown:A=>A.stopPropagation(),onTouchStart:A=>A.stopPropagation(),onMouseEnter:A=>A.stopPropagation(),className:"absolute top-1/2 -translate-y-1/2 right-0 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors","aria-label":"Scroll right",children:[" ",C.jsx(kC,{})," "]})}),C.jsx("div",{ref:e,className:"flex gap-12 overflow-x-auto custom-scrollbar cursor-grab active:cursor-grabbing py-4",children:u.map((A,m)=>C.jsxs("div",{className:"flex-shrink-0 w-48 sm:w-64 h-80 bg-white/5 backdrop-blur-sm rounded-lg shadow-lg flex flex-col items-center justify-center border border-white/10 hover:border-white/40 transition-colors duration-300 p-4 glare-container select-none",onClick:()=>t(A),children:[C.jsx("div",{className:"w-full h-3/4 relative pointer-events-none",children:C.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-contain"})}),C.jsx("div",{className:"w-full h-1/4 text-center flex items-center justify-center pt-2",children:C.jsx("h4",{className:"font-semibold text-white text-sm leading-tight pointer-events-none",children:A.name})})]},`${A.id}-${m}`))})]})}const lu=(n,t)=>{const e=new Set;return n.filter(i=>{const s=i[t];return e.has(s)?!1:e.add(s)})},RH=({id:n,blades:t,openModal:e})=>{if(!t)return null;const{aiSkills:i,aiTech:s,aiCerts:r,legacySkills:o,legacyTech:a,legacyCerts:l}=M.useMemo(()=>{const v=t.find(F=>F.id==="ai-automation"),w=t.find(F=>F.id==="project-management"),S=t.find(F=>F.id==="interactive-media"),T=[...(v==null?void 0:v.skills)||[],...(w==null?void 0:w.skills)||[]],P=[...(v==null?void 0:v.technologies)||[],...(w==null?void 0:w.technologies)||[]],_=[...(v==null?void 0:v.certifications)||[],...(w==null?void 0:w.certifications)||[]],k=lu(T,"name").sort((F,V)=>V.level-F.level),L=lu(P,"name").map(F=>({src:F.logo,alt:F.name,title:F.name})),D=lu(_,"id"),R=lu((S==null?void 0:S.skills)||[],"name").sort((F,V)=>V.level-F.level),I=lu((S==null?void 0:S.technologies)||[],"name").map(F=>({src:F.logo,alt:F.name,title:F.name})),B=lu((S==null?void 0:S.certifications)||[],"id");return{aiSkills:k,aiTech:L,aiCerts:D,legacySkills:R,legacyTech:I,legacyCerts:B}},[t]),u="blue",h={blue:"#00aaff",purple:"#cc00ff",cyan:"#00ffff"},d={textShadow:`0 0 5px #fff, 0 0 10px ${h[u]}, 0 0 15px ${h[u]}`},f={"--neon-red":h[u]},p={color:h.purple,textShadow:`0 0 8px ${h.purple}`},g={color:h.cyan,textShadow:`0 0 8px ${h.cyan}`},y=(v,w)=>{e({type:"certification",item:v,color:w})},A=({skills:v})=>C.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:v.map(w=>C.jsx(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:.1},className:"glare-container bg-slate-800/80 text-white font-medium py-2 px-4 rounded-lg shadow-md border border-slate-700/50",children:w.name},w.name))}),m=({tech:v})=>{const w=h.blue;return C.jsx("div",{className:"flex flex-wrap justify-center items-center gap-x-10 gap-y-8 max-w-5xl mx-auto",children:v.map(S=>C.jsx(bt.div,{title:S.title,initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.3},className:"group",children:C.jsx("img",{src:S.src,alt:S.alt,className:`h-10 sm:h-12 w-auto object-contain transition-all duration-300 grayscale
                         group-hover:grayscale-0
                         group-hover:scale-110
                         group-hover:brightness-125
                         group-hover:drop-shadow-[0_0_25px_${w}]`,loading:"lazy"})},S.alt))})};return C.jsx("section",{id:n,className:"py-20 bg-transparent border-b-2 border-black overflow-hidden",children:C.jsx("div",{className:"container mx-auto px-4",children:C.jsx("div",{className:"neon-border-container",style:f,children:C.jsxs("div",{className:"neon-border-content p-8 md:p-12 space-y-16 backdrop-blur-sm",children:[C.jsx(bt.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:C.jsxs("h2",{style:d,className:"text-4xl md:text-5xl font-bold text-center mb-4 flex items-center justify-center gap-4 text-white",children:[C.jsx("span",{className:`text-${u}-400`,children:C.jsx(m8,{})}),C.jsx(Ce,{as:"span",text:"Skills, Stack & Certifications",delay:100})]})}),C.jsxs("div",{className:"space-y-10",children:[C.jsx(Ce,{text:"Core Skills",className:"text-3xl font-semibold mb-8 text-slate-100 text-center block",delay:100}),i.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:p,children:"AI, Automation and Full Stack"}),C.jsx(A,{skills:i})]}),o.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:g,children:"Interactive Media 3D and Game Dev (Legacy)"}),C.jsx(A,{skills:o})]})]}),C.jsxs("div",{className:"space-y-10",children:[C.jsx(Ce,{text:"Tools & Technologies",className:"text-3xl font-semibold mb-8 text-slate-100 text-center block",delay:100}),s.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:p,children:"AI, Automation and Full Stack"}),C.jsx(m,{tech:s})]}),a.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:g,children:"Interactive Media 3D and Game Dev (Legacy)"}),C.jsx(m,{tech:a})]})]}),C.jsxs("div",{className:"space-y-10",children:[C.jsx(Ce,{text:"Certifications",className:"text-3xl font-semibold mb-12 text-slate-100 text-center block",delay:100}),r.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:p,children:"AI, Automation and Full Stack"}),C.jsx(_M,{items:r,onItemClick:v=>y(v,"purple")})]}),l.length>0&&C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-semibold mb-6 text-center",style:g,children:"Interactive Media 3D and Game Dev (Legacy)"}),C.jsx(_M,{items:l,onItemClick:v=>y(v,"cyan")})]})]})]})})})})},DH="modulepreload",FH=function(n){return"/"+n},kM={},IH=function(t,e,i){if(!e||e.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=FH(r),r in kM)return;kM[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":DH,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},xn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sS=[.001,0,0,.001,0,0],mb=1.35,li={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ks={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},rm="pdfjs_internal_editor_",et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},X5={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ve={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Lp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ae={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},uu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e1={ERRORS:0,WARNINGS:1,INFOS:5},hf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},N1={moveTo:0,lineTo:1,curveTo:2,closePath:3},Y5={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n2=e1.WARNINGS;function NH(n){Number.isInteger(n)&&(n2=n)}function OH(){return n2}function i2(n){n2>=e1.INFOS&&console.info(`Info: ${n}`)}function nt(n){n2>=e1.WARNINGS&&console.warn(`Warning: ${n}`)}function Mt(n){throw new Error(n)}function ht(n,t){n||Mt(t)}function BH(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function LT(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=UH(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return BH(i)?i:null}function RT(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&LT(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function rt(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const iu=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class MM extends iu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class gb extends iu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Tv extends iu{constructor(t){super(t,"InvalidPDFException")}}class om extends iu{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class jH extends iu{constructor(t){super(t,"FormatError")}}class ro extends iu{constructor(t){super(t,"AbortException")}}function K5(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Mt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function n1(n){typeof n!="string"&&Mt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function VH(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function $H(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function zH(){try{return new Function(""),!0}catch{return!1}}class Be{static get isLittleEndian(){return rt(this,"isLittleEndian",$H())}static get isEvalSupported(){return rt(this,"isEvalSupported",zH())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return rt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return rt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const yb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var th,uy,fm,rS;class X{static makeHexColor(t,e,i){return`#${yb[t]}${yb[e]}${yb[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const s=t[i],r=t[i+1];t[i]=s*e[0]+r*e[2]+e[4],t[i+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],r=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[i+h],f=t[i+h+1];t[i+h]=d*s+f*o+l,t[i+h+1]=d*r+f*a+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,i){const s=e[0],r=e[1],o=e[2],a=e[3],l=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let g=s*h+l,y=g,A=s*f+l,m=A,v=a*d+u,w=v,S=a*p+u,T=S;if(r!==0||o!==0){const P=r*h,_=r*f,k=o*d,L=o*p;g+=k,m+=k,A+=L,y+=L,v+=P,T+=P,S+=_,w+=_}i[0]=Math.min(i[0],g,A,y,m),i[1]=Math.min(i[1],v,S,w,T),i[2]=Math.max(i[2],g,A,y,m),i[3]=Math.max(i[3],v,S,w,T)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],r=t[2],o=t[3],a=i**2+s**2,l=i*r+s*o,u=r**2+o**2,h=(a+u)/2,d=Math.sqrt(h**2-(a*u-l**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,r){r[0]=Math.min(r[0],t,i),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,i),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,i,s,r,o,a,l,u){u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,l),E(this,fm,rS).call(this,t,i,r,a,e,s,o,l,3*(-t+3*(i-r)+a),6*(t-2*i+r),3*(i-t),u),E(this,fm,rS).call(this,t,i,r,a,e,s,o,l,3*(-e+3*(s-o)+l),6*(e-2*s+o),3*(s-e),u)}}th=new WeakSet,uy=function(t,e,i,s,r,o,a,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,g=d*(d*(d*t+3*u*e)+3*f*i)+p*s,y=d*(d*(d*r+3*u*o)+3*f*a)+p*l;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],y),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],y)},fm=new WeakSet,rS=function(t,e,i,s,r,o,a,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&E(this,th,uy).call(this,t,e,i,s,r,o,a,l,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const g=Math.sqrt(p),y=2*u;E(this,th,uy).call(this,t,e,i,s,r,o,a,l,(-h+g)/y,f),E(this,th,uy).call(this,t,e,i,s,r,o,a,l,(-h-g)/y,f)},x(X,th),x(X,fm);function UH(n){return decodeURIComponent(escape(n))}let vb=null,LM=null;function q5(n){return vb||(vb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,LM=new Map([["","t"]])),n.replaceAll(vb,(t,e,i)=>e?e.normalize("NFKC"):LM.get(i))}function DT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),K5(n)}const FT="pdfjs_internal_id_";function HH(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...r]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const o=r.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function cn(n,t,e){return Math.min(Math.max(n,t),e)}function Q5(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(K5(n))}function WH(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):n1(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});class am{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(am.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class IT{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{s.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}a&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&am.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,g,y]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const A=p.children[++h.at(-1)[1]];if(A===null)continue;const{name:m}=A;if(m==="#text"){const w=document.createTextNode(A.value);u.push(w),y.append(w);continue}const v=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,m):document.createElement(m);if(y.append(v),A.attributes&&this.setAttributes({html:v,element:A,storage:e,intent:r,linkService:i}),((f=A.children)==null?void 0:f.length)>0)h.push([A,-1,v]);else if(A.value){const w=document.createTextNode(A.value);a&&am.shouldBuildText(m)&&u.push(w),v.append(w)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const nr="http://www.w3.org/2000/svg",rl=class rl{};z(rl,"CSS",96),z(rl,"PDF",72),z(rl,"PDF_TO_CSS_UNITS",rl.CSS/rl.PDF);let oo=rl;async function xf(n,t="text"){if(Gf(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class i1{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let g,y,A,m;h===0?(g=Math.abs(u-t[1])*i+r,y=Math.abs(l-t[0])*i+o,A=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(g=Math.abs(l-t[0])*i+r,y=Math.abs(u-t[1])*i+o,A=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,p*i,g-h*i*l-f*i*u,y-d*i*l-p*i*u],this.width=A,this.height=m}get rawDims(){const t=this.viewBox;return rt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new i1({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const i=[t,e];return X.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];X.applyTransform(e,this.transform);const i=[t[2],t[3]];return X.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return X.applyInverseTransform(i,this.transform),i}}class s2 extends iu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function s1(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function r2(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Z5(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function J5(n,t="document.pdf"){if(typeof n!="string")return t;if(s1(n))return nt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const s=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const a=Array.from(i.searchParams.values()).reverse();for(const u of a)if(r.test(u))return s(u);const l=Array.from(i.searchParams.keys()).reverse();for(const u of l)if(r.test(u))return s(u)}if(i.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return s(l[0])}return t}class RM{constructor(){z(this,"started",Object.create(null));z(this,"times",[])}time(t){t in this.started&&nt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||nt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Gf(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function mi(n){n.preventDefault()}function Yt(n){n.preventDefault(),n.stopPropagation()}function GH(n){console.log("Deprecated API usage: "+n)}var pm;class lm{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;c(this,pm)||b(this,pm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,pm).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,s,r,o,a,l))}}pm=new WeakMap,x(lm,pm,void 0);function tF(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new i1({viewBox:r,userUnit:1,scale:t,rotation:e})}function bf(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(nt(`Not a valid color format: "${n}"`),[0,0,0])}function XH(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,bf(i))}t.remove()}function Gt(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function xs(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function Va(n,t,e=!1,i=!0){if(t instanceof i1){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,a=Be.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class ys{constructor(){const{pixelRatio:t}=ys;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,r=-1){let o=1/0,a=1/0,l=1/0;i=ys.capPixels(i,r),i>0&&(o=Math.sqrt(i/(t*e))),s!==-1&&(a=s/t,l=s/e);const u=Math.min(o,a,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Pv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class YH{static get isDarkMode(){var t;return rt(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class eF{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),rt(this,"commentForegroundColor",bf(i))}}function nF(n,t,e,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return n=Math.round(n*i+s),t=Math.round(t*i+s),e=Math.round(e*i+s),[n,t,e]}function DM(n,t){const e=n[0]/255,i=n[1]/255,s=n[2]/255,r=Math.max(e,i,s),o=Math.min(e,i,s),a=(r+o)/2;if(r===o)t[0]=t[1]=0;else{const l=r-o;switch(t[1]=a<.5?l/(r+o):l/(2-r-o),r){case e:t[0]=((i-s)/l+(i<s?6:0))*60;break;case i:t[0]=((s-e)/l+2)*60;break;case s:t[0]=((e-i)/l+4)*60;break}}t[2]=a}function oS(n,t){const e=n[0],i=n[1],s=n[2],r=(1-Math.abs(2*s-1))*i,o=r*(1-Math.abs(e/60%2-1)),a=s-r/2;switch(Math.floor(e/60)){case 0:t[0]=r+a,t[1]=o+a,t[2]=a;break;case 1:t[0]=o+a,t[1]=r+a,t[2]=a;break;case 2:t[0]=a,t[1]=r+a,t[2]=o+a;break;case 3:t[0]=a,t[1]=o+a,t[2]=r+a;break;case 4:t[0]=o+a,t[1]=a,t[2]=r+a;break;case 5:case 6:t[0]=r+a,t[1]=a,t[2]=o+a;break}}function FM(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function IM(n,t,e){oS(n,e),e.map(FM);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];oS(t,e),e.map(FM);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const NM=new Map;function iF(n,t){const e=n[0]+n[1]*256+n[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=NM.get(e);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);DM(n,o);const a=s.subarray(6,9);DM(t,a);const l=a[2]<.5,u=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),IM(o,a,r)<u){let h,d;l?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const p=o[2]=(h+d)/2;l===IM(o,a,r)<u?h=p:d=p}o[2]=l?d:h}return oS(o,r),i=X.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),NM.set(e,i),i}function NT({html:n,dir:t,className:e},i){const s=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=t||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const u=o[a];r.append(document.createTextNode(u)),a<l-1&&r.append(document.createElement("br"))}s.append(r)}else IT.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),i.append(s)}var xo,bo,Ci,Ti,mm,Ao,eh,nh,gm,Bv,sF,jv,rF,Vv,oF,So,hu,pl,Xf;const or=class or{constructor(t){x(this,jv);x(this,Vv);x(this,So);x(this,pl);x(this,xo,null);x(this,bo,null);x(this,Ci,void 0);x(this,Ti,null);x(this,mm,null);x(this,Ao,null);x(this,eh,null);x(this,nh,null);b(this,Ci,t),c(or,gm)||b(or,gm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,xo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Ci)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",mi,{signal:e}),t.addEventListener("pointerdown",E(or,Bv,sF),{signal:e}));const i=b(this,Ti,document.createElement("div"));i.className="buttons",t.append(i);const s=c(this,Ci).toolbarPosition;if(s){const{style:r}=t,o=c(this,Ci)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return c(this,xo)}hide(){var t;c(this,xo).classList.add("hidden"),(t=c(this,bo))==null||t.hideDropdown()}show(){var t,e;c(this,xo).classList.remove("hidden"),(t=c(this,mm))==null||t.shown(),(e=c(this,Ao))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=c(this,Ci),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",c(or,gm)[t]),E(this,So,hu).call(this,i)&&i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),c(this,Ti).append(i)}async addAltText(t){const e=await t.render();E(this,So,hu).call(this,e),c(this,Ti).append(e,c(this,pl,Xf)),b(this,mm,t)}addComment(t,e=null){if(c(this,Ao))return;const i=t.renderForToolbar();if(!i)return;E(this,So,hu).call(this,i);const s=b(this,eh,c(this,pl,Xf));e?(c(this,Ti).insertBefore(i,e),c(this,Ti).insertBefore(s,e)):c(this,Ti).append(i,s),b(this,Ao,t),t.toolbar=this}addColorPicker(t){if(c(this,bo))return;b(this,bo,t);const e=t.renderButton();E(this,So,hu).call(this,e),c(this,Ti).append(e,c(this,pl,Xf))}async addEditSignatureButton(t){const e=b(this,nh,await t.renderEditButton(c(this,Ci)));E(this,So,hu).call(this,e),c(this,Ti).append(e,c(this,pl,Xf))}removeButton(t){var e,i;switch(t){case"comment":(e=c(this,Ao))==null||e.removeToolbarCommentButton(),b(this,Ao,null),(i=c(this,eh))==null||i.remove(),b(this,eh,null);break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const s=c(this,Ti).querySelector(i);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){c(this,nh)&&(c(this,nh).title=t)}remove(){var t;c(this,xo).remove(),(t=c(this,bo))==null||t.destroy(),b(this,bo,null)}};xo=new WeakMap,bo=new WeakMap,Ci=new WeakMap,Ti=new WeakMap,mm=new WeakMap,Ao=new WeakMap,eh=new WeakMap,nh=new WeakMap,gm=new WeakMap,Bv=new WeakSet,sF=function(t){t.stopPropagation()},jv=new WeakSet,rF=function(t){c(this,Ci)._focusEventsAllowed=!1,Yt(t)},Vv=new WeakSet,oF=function(t){c(this,Ci)._focusEventsAllowed=!0,Yt(t)},So=new WeakSet,hu=function(t){const e=c(this,Ci)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",E(this,jv,rF).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,Vv,oF).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",mi,{signal:e}),!0)},pl=new WeakSet,Xf=function(){const t=document.createElement("div");return t.className="divider",t},x(or,Bv),x(or,gm,null);let aS=or;var ym,ml,cr,$v,aF,zv,lF,vm,lS;class KH{constructor(t){x(this,$v);x(this,zv);x(this,vm);x(this,ym,null);x(this,ml,null);x(this,cr,void 0);b(this,cr,t)}show(t,e,i){const[s,r]=E(this,zv,lF).call(this,e,i),{style:o}=c(this,ml)||b(this,ml,E(this,$v,aF).call(this));t.append(c(this,ml)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,ml).remove()}}ym=new WeakMap,ml=new WeakMap,cr=new WeakMap,$v=new WeakSet,aF=function(){const t=b(this,ml,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=c(this,cr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",mi,{signal:e});const i=b(this,ym,document.createElement("div"));return i.className="buttons",t.append(i),c(this,cr).hasCommentManager()&&E(this,vm,lS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,cr).commentSelection("floating_button")}),E(this,vm,lS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,cr).highlightSelection("floating_button")}),t},zv=new WeakSet,lF=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const a=r.x+(e?r.width:0);if(o>i){s=a,i=o;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,i]},vm=new WeakSet,lS=function(t,e,i,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const a=c(this,cr)._signal;a instanceof AbortSignal&&!a.aborted&&(r.addEventListener("contextmenu",mi,{signal:a}),r.addEventListener("click",s,{signal:a})),c(this,ym).append(r)};function cF(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var Uv;class qH{constructor(){x(this,Uv,0)}get id(){return`${rm}${xe(this,Uv)._++}`}}Uv=new WeakMap;var ih,wm,en,sh,hy;const XT=class XT{constructor(){x(this,sh);x(this,ih,DT());x(this,wm,0);x(this,en,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return rt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return E(this,sh,hy).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return E(this,sh,hy).call(this,t,t)}async getFromBlob(t,e){const i=await e;return E(this,sh,hy).call(this,t,i)}async getFromId(t){c(this,en)||b(this,en,new Map);const e=c(this,en).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,en)||b(this,en,new Map);let i=c(this,en).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${c(this,ih)}_${xe(this,wm)._++}`,refCounter:1,isSvg:!1},c(this,en).set(t,i),c(this,en).set(i.id,i),i}getSvgUrl(t){const e=c(this,en).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;c(this,en)||b(this,en,new Map);const e=c(this,en).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,ih)}_`)}};ih=new WeakMap,wm=new WeakMap,en=new WeakMap,sh=new WeakSet,hy=async function(t,e){c(this,en)||b(this,en,new Map);let i=c(this,en).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,ih)}_${xe(this,wm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await xf(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=XT._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){nt(s),i=null}return c(this,en).set(t,i),i&&c(this,en).set(i.id,i),i};let cS=XT;var le,Eo,xm,Wt;class QH{constructor(t=128){x(this,le,[]);x(this,Eo,!1);x(this,xm,void 0);x(this,Wt,-1);b(this,xm,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&t(),c(this,Eo))return;const l={cmd:t,undo:e,post:i,type:r};if(c(this,Wt)===-1){c(this,le).length>0&&(c(this,le).length=0),b(this,Wt,0),c(this,le).push(l);return}if(o&&c(this,le)[c(this,Wt)].type===r){a&&(l.undo=c(this,le)[c(this,Wt)].undo),c(this,le)[c(this,Wt)]=l;return}const u=c(this,Wt)+1;u===c(this,xm)?c(this,le).splice(0,1):(b(this,Wt,u),u<c(this,le).length&&c(this,le).splice(u)),c(this,le).push(l)}undo(){if(c(this,Wt)===-1)return;b(this,Eo,!0);const{undo:t,post:e}=c(this,le)[c(this,Wt)];t(),e==null||e(),b(this,Eo,!1),b(this,Wt,c(this,Wt)-1)}redo(){if(c(this,Wt)<c(this,le).length-1){b(this,Wt,c(this,Wt)+1),b(this,Eo,!0);const{cmd:t,post:e}=c(this,le)[c(this,Wt)];t(),e==null||e(),b(this,Eo,!1)}}hasSomethingToUndo(){return c(this,Wt)!==-1}hasSomethingToRedo(){return c(this,Wt)<c(this,le).length-1}cleanType(t){if(c(this,Wt)!==-1){for(let e=c(this,Wt);e>=0;e--)if(c(this,le)[e].type!==t){c(this,le).splice(e+1,c(this,Wt)-e),b(this,Wt,e);return}c(this,le).length=0,b(this,Wt,-1)}}destroy(){b(this,le,null)}}le=new WeakMap,Eo=new WeakMap,xm=new WeakMap,Wt=new WeakMap;var Hv,uF;class r1{constructor(t){x(this,Hv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Be.platform;for(const[i,s,r={}]of t)for(const o of i){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(E(this,Hv,uF).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...o,e)(),r||Yt(e))}}Hv=new WeakSet,uF=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Wv=class Wv{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return XH(t),rt(this,"_colors",t)}convert(t){const e=bf(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return Wv._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?X.makeHexColor(...e):t}};z(Wv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let uS=Wv;var rh,Hn,oh,te,Ae,ah,Pi,lh,_i,nn,Co,To,ch,Po,Es,ki,gl,bm,Am,uh,Sm,Cs,_o,hh,ko,Ts,Gv,Mo,dh,Em,Lo,yl,fh,Ro,Cm,fe,wt,ur,Do,Fo,Tm,ph,Pm,Io,Ps,hr,_m,km,Mi,mh,dy,Mm,hS,Xv,hF,Yv,dF,vl,Yf,Kv,fF,qv,pF,Qv,mF,Lm,dS,Zv,gF,Rm,fS,Dm,pS,Jv,yF,$e,pn,Qi,ir,tw,vF,ew,wF,Fm,mS,nw,xF,wl,Kf,Im,gS;const Vu=class Vu{constructor(t,e,i,s,r,o,a,l,u,h,d,f,p,g,y,A){x(this,mh);x(this,Mm);x(this,Xv);x(this,Yv);x(this,vl);x(this,Kv);x(this,qv);x(this,Qv);x(this,Lm);x(this,Zv);x(this,Rm);x(this,Dm);x(this,Jv);x(this,$e);x(this,Qi);x(this,tw);x(this,ew);x(this,Fm);x(this,nw);x(this,wl);x(this,Im);x(this,rh,new AbortController);x(this,Hn,null);x(this,oh,null);x(this,te,new Map);x(this,Ae,new Map);x(this,ah,null);x(this,Pi,null);x(this,lh,null);x(this,_i,new QH);x(this,nn,null);x(this,Co,null);x(this,To,null);x(this,ch,0);x(this,Po,new Set);x(this,Es,null);x(this,ki,null);x(this,gl,new Set);z(this,"_editorUndoBar",null);x(this,bm,!1);x(this,Am,!1);x(this,uh,!1);x(this,Sm,null);x(this,Cs,null);x(this,_o,null);x(this,hh,null);x(this,ko,!1);x(this,Ts,null);x(this,Gv,new qH);x(this,Mo,!1);x(this,dh,!1);x(this,Em,!1);x(this,Lo,null);x(this,yl,null);x(this,fh,null);x(this,Ro,null);x(this,Cm,null);x(this,fe,et.NONE);x(this,wt,new Set);x(this,ur,null);x(this,Do,null);x(this,Fo,null);x(this,Tm,null);x(this,ph,null);x(this,Pm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Io,[0,0]);x(this,Ps,null);x(this,hr,null);x(this,_m,null);x(this,km,null);x(this,Mi,null);const m=this._signal=c(this,rh).signal;b(this,hr,t),b(this,_m,e),b(this,km,i),b(this,ah,s),b(this,nn,r),b(this,Do,o),b(this,ph,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:m}),window.addEventListener("pointerdown",()=>{b(this,dh,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{b(this,dh,!1)},{capture:!0,signal:m}),E(this,Kv,fF).call(this),E(this,Jv,yF).call(this),E(this,Lm,dS).call(this),b(this,Pi,l.annotationStorage),b(this,Sm,l.filterFactory),b(this,Fo,u),b(this,hh,h||null),b(this,bm,d),b(this,Am,f),b(this,uh,p),b(this,Cm,g||null),this.viewParameters={realScale:oo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=y||null,this._supportsPinchToZoom=A!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const t=Vu.prototype,e=o=>c(o,hr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return rt(this,"_keyboardManager",new r1([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,hr).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,hr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r,o,a,l,u;(t=c(this,Mi))==null||t.resolve(),b(this,Mi,null),(e=c(this,rh))==null||e.abort(),b(this,rh,null),this._signal=null;for(const h of c(this,Ae).values())h.destroy();c(this,Ae).clear(),c(this,te).clear(),c(this,gl).clear(),(i=c(this,Ro))==null||i.clear(),b(this,Hn,null),c(this,wt).clear(),c(this,_i).destroy(),(s=c(this,ah))==null||s.destroy(),(r=c(this,nn))==null||r.destroy(),(o=c(this,Do))==null||o.destroy(),(a=c(this,Ts))==null||a.hide(),b(this,Ts,null),(l=c(this,fh))==null||l.destroy(),b(this,fh,null),b(this,oh,null),c(this,Cs)&&(clearTimeout(c(this,Cs)),b(this,Cs,null)),c(this,Ps)&&(clearTimeout(c(this,Ps)),b(this,Ps,null)),(u=this._editorUndoBar)==null||u.destroy(),b(this,ph,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,Cm)}get useNewAltTextFlow(){return c(this,Am)}get useNewAltTextWhenAddingImage(){return c(this,uh)}get hcmFilter(){return rt(this,"hcmFilter",c(this,Fo)?c(this,Sm).addHCMFilter(c(this,Fo).foreground,c(this,Fo).background):"none")}get direction(){return rt(this,"direction",getComputedStyle(c(this,hr)).direction)}get _highlightColors(){return rt(this,"_highlightColors",c(this,hh)?new Map(c(this,hh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return rt(this,"highlightColors",null);const e=new Map,i=!!c(this,Fo);for(const[s,r]of t){const o=s.endsWith("_HCM");if(i&&o){e.set(s.replace("_HCM",""),r);continue}!i&&!o&&e.set(s,r)}return rt(this,"highlightColors",e)}get highlightColorNames(){return rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,To,t)}setMainHighlightColorPicker(t){b(this,fh,t)}editAltText(t,e=!1){var i;(i=c(this,ah))==null||i.editAltText(this,t,e)}hasCommentManager(){return!!c(this,nn)}editComment(t,e,i,s){var r;(r=c(this,nn))==null||r.showDialog(this,t,e,i,s)}selectComment(t,e){const i=c(this,Ae).get(t),s=i==null?void 0:i.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=c(this,nn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=c(this,nn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=c(this,nn))==null||e.removeComments([t.uid])}toggleComment(t,e,i=void 0){var s;(s=c(this,nn))==null||s.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){var i;return t&&((i=c(this,nn))==null?void 0:i.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=c(this,nn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(c(this,Ae).has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),s=r=>{r.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await i}getSignature(t){var e;(e=c(this,Do))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,Do)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,uh,e);break}}onPageChanging({pageNumber:t}){b(this,ch,t-1)}focusMainContainer(){c(this,hr).focus()}findParent(t,e){for(const i of c(this,Ae).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+a)return i}return null}disableUserSelect(t=!1){c(this,_m).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,gl).add(t)}removeShouldRescale(t){c(this,gl).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*oo.PDF_TO_CSS_UNITS;for(const i of c(this,gl))i.onScaleChanging();(e=c(this,To))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a}=i,l=i.toString(),h=E(this,mh,dy).call(this,i).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;i.empty();const f=E(this,Mm,hS).call(this,h),p=c(this,fe)===et.NONE,g=()=>{const y=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:a,text:l});p&&this.showAllEditors("highlight",!0,!0),e&&(y==null||y.editComment())};if(p){this.switchToMode(et.HIGHLIGHT,g);return}g()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!c(this,Pi))return null;const e=`${rm}${t}`,i=c(this,Pi).getRawValue(e);return i&&c(this,Pi).remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Pi)&&!c(this,Pi).has(t.id)&&c(this,Pi).setValue(t.id,t)}a11yAlert(t,e=null){const i=c(this,km);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,ko)&&(b(this,ko,!1),E(this,vl,Yf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,wt))if(e.div.contains(t)){b(this,yl,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,yl))return;const[t,e]=c(this,yl);b(this,yl,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,Lm,dS).call(this),E(this,Rm,fS).call(this)}removeEditListeners(){E(this,Zv,gF).call(this),E(this,Dm,pS).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of c(this,ki))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of c(this,ki))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=c(this,Hn))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of c(this,wt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of c(this,ki))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){nt(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const u=await s.deserialize(l);if(!u)return;r.push(u)}const o=()=>{for(const l of r)E(this,Fm,mS).call(this,l);E(this,Im,gS).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){nt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,fe)!==et.NONE&&!this.isEditorHandlingKeyboard&&Vu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,ko)&&(b(this,ko,!1),E(this,vl,Yf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(E(this,qv,pF).call(this),E(this,Rm,fS).call(this),E(this,$e,pn).call(this,{isEditing:c(this,fe)!==et.NONE,isEmpty:E(this,wl,Kf).call(this),hasSomethingToUndo:c(this,_i).hasSomethingToUndo(),hasSomethingToRedo:c(this,_i).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,Qv,mF).call(this),E(this,Dm,pS).call(this),E(this,$e,pn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,ki)){b(this,ki,t);for(const e of c(this,ki))E(this,Qi,ir).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,Gv).id}get currentLayer(){return c(this,Ae).get(c(this,ch))}getLayer(t){return c(this,Ae).get(t)}get currentPageIndex(){return c(this,ch)}addLayer(t){c(this,Ae).set(t.pageIndex,t),c(this,Mo)?t.enable():t.disable()}removeLayer(t){c(this,Ae).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,r=!1){var o,a,l,u,h,d;if(c(this,fe)!==t&&!(c(this,Mi)&&(await c(this,Mi).promise,!c(this,Mi)))){if(b(this,Mi,Promise.withResolvers()),(o=c(this,To))==null||o.commitOrRemove(),c(this,fe)===et.POPUP&&((a=c(this,nn))==null||a.hideSidebar()),(l=c(this,nn))==null||l.destroyPopup(),b(this,fe,t),t===et.NONE){this.setEditingState(!1),E(this,ew,wF).call(this);for(const f of c(this,te).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),c(this,Mi).resolve();return}for(const f of c(this,te).values())f.addStandaloneCommentButton();t===et.SIGNATURE&&await((h=c(this,Do))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await E(this,tw,vF).call(this),this.unselectAll();for(const f of c(this,Ae).values())f.updateMode(t);if(t===et.POPUP){c(this,oh)||b(this,oh,await c(this,ph).getAnnotationsByType(new Set(c(this,ki).map(g=>g._editorType))));const f=new Set,p=[];for(const g of c(this,te).values()){const{annotationElementId:y,hasComment:A,deleted:m}=g;y&&f.add(y),A&&!m&&p.push(g.getData())}for(const g of c(this,oh)){const{id:y,popupRef:A,contentsObj:m}=g;A&&(m!=null&&m.str)&&!f.has(y)&&!c(this,Po).has(y)&&p.push(g)}(d=c(this,nn))==null||d.showSidebar(p)}if(!e){i&&this.addNewEditorFromKeyboard(),c(this,Mi).resolve();return}for(const f of c(this,te).values())f.uid===e?(this.setSelected(f),r?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();c(this,Mi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,fe)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(c(this,ki)){switch(t){case ct.CREATE:this.currentLayer.addNewEditor(e);return;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Tm)||b(this,Tm,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of c(this,wt))i.updateParams(t,e);else for(const i of c(this,ki))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of c(this,te).values())o.editorType===t&&o.show(e);(((r=c(this,Tm))==null?void 0:r.get(ct.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,Qi,ir).call(this,[[ct.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,Em)!==t){b(this,Em,t);for(const e of c(this,Ae).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of c(this,te).values())e.pageIndex===t&&(yield e)}getEditor(t){return c(this,te).get(t)}addEditor(t){c(this,te).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(c(this,Cs)&&clearTimeout(c(this,Cs)),b(this,Cs,setTimeout(()=>{this.focusMainContainer(),b(this,Cs,null)},0))),c(this,te).delete(t.id),t.annotationElementId&&((e=c(this,Ro))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,Po).has(t.annotationElementId))&&((i=c(this,Pi))==null||i.remove(t.id))}addDeletedAnnotationElement(t){c(this,Po).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,Po).has(t)}removeDeletedAnnotationElement(t){c(this,Po).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,Hn)!==t&&(b(this,Hn,t),t&&E(this,Qi,ir).call(this,t.propertiesToUpdate))}updateUI(t){c(this,nw,xF)===t&&E(this,Qi,ir).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,Qi,ir).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,wt).has(t)){c(this,wt).delete(t),t.unselect(),E(this,$e,pn).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,wt).add(t),t.select(),E(this,Qi,ir).call(this,t.propertiesToUpdate),E(this,$e,pn).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=c(this,To))==null||e.commitOrRemove();for(const i of c(this,wt))i!==t&&i.unselect();c(this,wt).clear(),c(this,wt).add(t),t.select(),E(this,Qi,ir).call(this,t.propertiesToUpdate),E(this,$e,pn).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,wt).has(t)}get firstSelectedEditor(){return c(this,wt).values().next().value}unselect(t){t.unselect(),c(this,wt).delete(t),E(this,$e,pn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,wt).size!==0}get isEnterHandled(){return c(this,wt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,_i).undo(),E(this,$e,pn).call(this,{hasSomethingToUndo:c(this,_i).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,wl,Kf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,_i).redo(),E(this,$e,pn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,_i).hasSomethingToRedo(),isEmpty:E(this,wl,Kf).call(this)})}addCommands(t){c(this,_i).add(t),E(this,$e,pn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,wl,Kf).call(this)})}cleanUndoStack(t){c(this,_i).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,wt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const o of e)E(this,Fm,mS).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=c(this,Hn))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,Hn)||this.hasSelection}selectAll(){for(const t of c(this,wt))t.commit();E(this,Im,gS).call(this,c(this,te).values())}unselectAll(){var t;if(!(c(this,Hn)&&(c(this,Hn).commitOrRemove(),c(this,fe)!==et.NONE))&&!((t=c(this,To))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,wt))e.unselect();c(this,wt).clear(),E(this,$e,pn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,Io)[0]+=t,c(this,Io)[1]+=e;const[s,r]=c(this,Io),o=[...c(this,wt)],a=1e3;c(this,Ps)&&clearTimeout(c(this,Ps)),b(this,Ps,setTimeout(()=>{b(this,Ps,null),c(this,Io)[0]=c(this,Io)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,te).has(l.id)&&(l.translateInPage(s,r),l.translationDone())},undo:()=>{for(const l of o)c(this,te).has(l.id)&&(l.translateInPage(-s,-r),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Es,new Map);for(const t of c(this,wt))c(this,Es).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Es))return!1;this.disableUserSelect(!1);const t=c(this,Es);b(this,Es,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},a]of t)a.newX=s,a.newY=r,a.newPageIndex=o,e||(e=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const i=(s,r,o,a)=>{if(c(this,te).has(s.id)){const l=c(this,Ae).get(a);l?s._setParentAndPosition(l,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of t)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of t)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Es))for(const i of c(this,Es).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,wt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,Hn)===t}getActive(){return c(this,Hn)}getMode(){return c(this,fe)}isEditingMode(){return c(this,fe)!==et.NONE}get imageManager(){return rt(this,"imageManager",new cS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const l=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:g,height:y}of d.getClientRects())g===0||y===0||l.push(a(f,p,g,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,lh)||b(this,lh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,lh))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=c(this,lh))==null?void 0:s.get(t.data.id);if(!e)return;const i=c(this,Pi).getRawValue(e);i&&(c(this,fe)===et.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var r;const s=(r=c(this,Ro))==null?void 0:r.get(t);s&&(s.setCanvas(e,i),c(this,Ro).delete(t))}addMissingCanvas(t,e){(c(this,Ro)||b(this,Ro,new Map)).set(t,e)}};rh=new WeakMap,Hn=new WeakMap,oh=new WeakMap,te=new WeakMap,Ae=new WeakMap,ah=new WeakMap,Pi=new WeakMap,lh=new WeakMap,_i=new WeakMap,nn=new WeakMap,Co=new WeakMap,To=new WeakMap,ch=new WeakMap,Po=new WeakMap,Es=new WeakMap,ki=new WeakMap,gl=new WeakMap,bm=new WeakMap,Am=new WeakMap,uh=new WeakMap,Sm=new WeakMap,Cs=new WeakMap,_o=new WeakMap,hh=new WeakMap,ko=new WeakMap,Ts=new WeakMap,Gv=new WeakMap,Mo=new WeakMap,dh=new WeakMap,Em=new WeakMap,Lo=new WeakMap,yl=new WeakMap,fh=new WeakMap,Ro=new WeakMap,Cm=new WeakMap,fe=new WeakMap,wt=new WeakMap,ur=new WeakMap,Do=new WeakMap,Fo=new WeakMap,Tm=new WeakMap,ph=new WeakMap,Pm=new WeakMap,Io=new WeakMap,Ps=new WeakMap,hr=new WeakMap,_m=new WeakMap,km=new WeakMap,Mi=new WeakMap,mh=new WeakSet,dy=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Mm=new WeakSet,hS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of c(this,Ae).values())if(i.hasTextLayer(t))return i;return null},Xv=new WeakSet,hF=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,mh,dy).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(c(this,Ts)||b(this,Ts,new KH(this)),c(this,Ts).show(i,s,this.direction==="ltr"))},Yv=new WeakSet,dF=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){c(this,ur)&&((r=c(this,Ts))==null||r.hide(),b(this,ur,null),E(this,$e,pn).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,ur))return;const s=E(this,mh,dy).call(this,t).closest(".textLayer");if(!s){c(this,ur)&&((o=c(this,Ts))==null||o.hide(),b(this,ur,null),E(this,$e,pn).call(this,{hasSelectedText:!1}));return}if((a=c(this,Ts))==null||a.hide(),b(this,ur,e),E(this,$e,pn).call(this,{hasSelectedText:!0}),!(c(this,fe)!==et.HIGHLIGHT&&c(this,fe)!==et.NONE)&&(c(this,fe)===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,ko,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,fe)===et.HIGHLIGHT?E(this,Mm,hS).call(this,s):null;if(l==null||l.toggleDrawing(),c(this,dh)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&E(this,vl,Yf).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l==null||l.toggleDrawing(!0),E(this,vl,Yf).call(this,"main_toolbar")}},vl=new WeakSet,Yf=function(t=""){c(this,fe)===et.HIGHLIGHT?this.highlightSelection(t):c(this,bm)&&E(this,Xv,hF).call(this)},Kv=new WeakSet,fF=function(){document.addEventListener("selectionchange",E(this,Yv,dF).bind(this),{signal:this._signal})},qv=new WeakSet,pF=function(){if(c(this,_o))return;b(this,_o,new AbortController);const t=this.combinedSignal(c(this,_o));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Qv=new WeakSet,mF=function(){var t;(t=c(this,_o))==null||t.abort(),b(this,_o,null)},Lm=new WeakSet,dS=function(){if(c(this,Lo))return;b(this,Lo,new AbortController);const t=this.combinedSignal(c(this,Lo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},Zv=new WeakSet,gF=function(){var t;(t=c(this,Lo))==null||t.abort(),b(this,Lo,null)},Rm=new WeakSet,fS=function(){if(c(this,Co))return;b(this,Co,new AbortController);const t=this.combinedSignal(c(this,Co));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Dm=new WeakSet,pS=function(){var t;(t=c(this,Co))==null||t.abort(),b(this,Co,null)},Jv=new WeakSet,yF=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},$e=new WeakSet,pn=function(t){Object.entries(t).some(([i,s])=>c(this,Pm)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,Pm),t)}),c(this,fe)===et.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,Qi,ir).call(this,[[ct.HIGHLIGHT_FREE,!0]]))},Qi=new WeakSet,ir=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},tw=new WeakSet,vF=async function(){if(!c(this,Mo)){b(this,Mo,!0);const t=[];for(const e of c(this,Ae).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,te).values())e.enable()}},ew=new WeakSet,wF=function(){if(this.unselectAll(),c(this,Mo)){b(this,Mo,!1);for(const t of c(this,Ae).values())t.disable();for(const t of c(this,te).values())t.disable()}},Fm=new WeakSet,mS=function(t){const e=c(this,Ae).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},nw=new WeakSet,xF=function(){let t=null;for(t of c(this,wt));return t},wl=new WeakSet,Kf=function(){if(c(this,te).size===0)return!0;if(c(this,te).size===1)for(const t of c(this,te).values())return t.isEmpty();return!1},Im=new WeakSet,gS=function(t){for(const e of c(this,wt))e.unselect();c(this,wt).clear();for(const e of t)e.isEmpty()||(c(this,wt).add(e),e.select());E(this,$e,pn).call(this,{hasSelectedEditor:this.hasSelection})},z(Vu,"TRANSLATE_SMALL",1),z(Vu,"TRANSLATE_BIG",10);let $a=Vu;var _e,_s,Zi,gh,ks,Wn,yh,Ms,_n,dr,xl,Ls,No,bl,qf,vh,fy;const mn=class mn{constructor(t){x(this,bl);x(this,vh);x(this,_e,null);x(this,_s,!1);x(this,Zi,null);x(this,gh,null);x(this,ks,null);x(this,Wn,null);x(this,yh,!1);x(this,Ms,null);x(this,_n,null);x(this,dr,null);x(this,xl,null);x(this,Ls,!1);b(this,_n,t),b(this,Ls,t._uiManager.useNewAltTextFlow),c(mn,No)||b(mn,No,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){mn._l10n??(mn._l10n=t)}async render(){const t=b(this,Zi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,gh,document.createElement("span"));t.append(e),c(this,Ls)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(mn,No).missing),e.setAttribute("data-l10n-id",c(mn,No)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,_n)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),c(this,_n)._uiManager.editAltText(c(this,_n)),c(this,Ls)&&c(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,bl,qf)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,yh,!0),s(r))},{signal:i}),await E(this,vh,fy).call(this),t}finish(){c(this,Zi)&&(c(this,Zi).focus({focusVisible:c(this,yh)}),b(this,yh,!1))}isEmpty(){return c(this,Ls)?c(this,_e)===null:!c(this,_e)&&!c(this,_s)}hasData(){return c(this,Ls)?c(this,_e)!==null||!!c(this,dr):this.isEmpty()}get guessedText(){return c(this,dr)}async setGuessedText(t){c(this,_e)===null&&(b(this,dr,t),b(this,xl,await mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,vh,fy).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Ls)||c(this,_e)){(e=c(this,Ms))==null||e.remove(),b(this,Ms,null);return}if(!c(this,Ms)){const i=b(this,Ms,document.createElement("div"));i.className="noAltTextBadge",c(this,_n).div.append(i)}c(this,Ms).classList.toggle("hidden",!t)}serialize(t){let e=c(this,_e);return!t&&c(this,dr)===e&&(e=c(this,xl)),{altText:e,decorative:c(this,_s),guessedText:c(this,dr),textWithDisclaimer:c(this,xl)}}get data(){return{altText:c(this,_e),decorative:c(this,_s)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(b(this,dr,i),b(this,xl,s)),!(c(this,_e)===t&&c(this,_s)===e)&&(r||(b(this,_e,t),b(this,_s,e)),E(this,vh,fy).call(this))}toggle(t=!1){c(this,Zi)&&(!t&&c(this,Wn)&&(clearTimeout(c(this,Wn)),b(this,Wn,null)),c(this,Zi).disabled=!t)}shown(){c(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,bl,qf)}})}destroy(){var t,e;(t=c(this,Zi))==null||t.remove(),b(this,Zi,null),b(this,gh,null),b(this,ks,null),(e=c(this,Ms))==null||e.remove(),b(this,Ms,null)}};_e=new WeakMap,_s=new WeakMap,Zi=new WeakMap,gh=new WeakMap,ks=new WeakMap,Wn=new WeakMap,yh=new WeakMap,Ms=new WeakMap,_n=new WeakMap,dr=new WeakMap,xl=new WeakMap,Ls=new WeakMap,No=new WeakMap,bl=new WeakSet,qf=function(){return c(this,_e)&&"added"||c(this,_e)===null&&this.guessedText&&"review"||"missing"},vh=new WeakSet,fy=async function(){var s,r,o;const t=c(this,Zi);if(!t)return;if(c(this,Ls)){if(t.classList.toggle("done",!!c(this,_e)),t.setAttribute("data-l10n-id",c(mn,No)[c(this,bl,qf)]),(s=c(this,gh))==null||s.setAttribute("data-l10n-id",c(mn,No)[`${c(this,bl,qf)}-label`]),!c(this,_e)){(r=c(this,ks))==null||r.remove();return}}else{if(!c(this,_e)&&!c(this,_s)){t.classList.remove("done"),(o=c(this,ks))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,ks);if(!e){b(this,ks,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,_n).id}`;const a=100,l=c(this,_n)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Wn)),b(this,Wn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,Wn,setTimeout(()=>{b(this,Wn,null),c(this,ks).classList.add("show"),c(this,_n)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;c(this,Wn)&&(clearTimeout(c(this,Wn)),b(this,Wn,null)),(u=c(this,ks))==null||u.classList.remove("show")},{signal:l})}c(this,_s)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,_e)),e.parentNode||t.append(e);const i=c(this,_n).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},x(mn,No,null),z(mn,"_l10n",null);let _v=mn;var ze,Li,Al,Rt,Nm,Sl,Ji,El,Cl,Tl,Om,yS;class O1{constructor(t){x(this,Om);x(this,ze,null);x(this,Li,null);x(this,Al,!1);x(this,Rt,null);x(this,Nm,null);x(this,Sl,null);x(this,Ji,null);x(this,El,null);x(this,Cl,!1);x(this,Tl,null);b(this,Rt,t)}renderForToolbar(){const t=b(this,Li,document.createElement("button"));return t.className="comment",E(this,Om,yS).call(this,t,!1)}renderForStandalone(){const t=b(this,ze,document.createElement("button"));t.className="annotationCommentButton";const e=c(this,Rt).commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(c(this,Rt)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=c(this,Rt).commentButtonColor;s&&(i.backgroundColor=s)}return E(this,Om,yS).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=c(this,ze)??c(this,Li))==null||t.focus()},0)}onUpdatedColor(){if(!c(this,ze))return;const t=c(this,Rt).commentButtonColor;t&&(c(this,ze).style.backgroundColor=t),c(this,Rt)._uiManager.updatePopupColor(c(this,Rt))}get commentButtonWidth(){var t;return(((t=c(this,ze))==null?void 0:t.getBoundingClientRect().width)??0)/c(this,Rt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Tl))return c(this,Tl);if(!c(this,ze))return null;const{x:t,y:e,height:i}=c(this,ze).getBoundingClientRect(),{x:s,y:r,width:o,height:a}=c(this,Rt).parent.boundingClientRect;return[(t-s)/o,(e+i-r)/a]}set commentPopupPositionInLayer(t){b(this,Tl,t)}hasDefaultPopupPosition(){return c(this,Tl)===null}removeStandaloneCommentButton(){var t;(t=c(this,ze))==null||t.remove(),b(this,ze,null)}removeToolbarCommentButton(){var t;(t=c(this,Li))==null||t.remove(),b(this,Li,null)}setCommentButtonStates({selected:t,hasPopup:e}){c(this,ze)&&(c(this,ze).classList.toggle("selected",t),c(this,ze).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let i,s;if(e)[i,s]=e;else{[i,s]=c(this,Rt).commentButtonPosition;const{width:h,height:d,x:f,y:p}=c(this,Rt);i=f+i*h,s=p+s*d}const r=c(this,Rt).parent.boundingClientRect,{x:o,y:a,width:l,height:u}=r;c(this,Rt)._uiManager.editComment(c(this,Rt),o+i*l,a+s*u,{...t,parentDimensions:r})}finish(){c(this,Li)&&(c(this,Li).focus({focusVisible:c(this,Al)}),b(this,Al,!1))}isDeleted(){return c(this,Cl)||c(this,Ji)===""}isEmpty(){return c(this,Ji)===null}hasBeenEdited(){return this.isDeleted()||c(this,Ji)!==c(this,Nm)}serialize(){return this.data}get data(){return{text:c(this,Ji),richText:c(this,Sl),date:c(this,El),deleted:this.isDeleted()}}set data(t){if(t!==c(this,Ji)&&b(this,Sl,null),t===null){b(this,Ji,""),b(this,Cl,!0);return}b(this,Ji,t),b(this,El,new Date),b(this,Cl,!1)}setInitialText(t,e=null){b(this,Nm,t),this.data=t,b(this,El,null),b(this,Sl,e)}shown(){}destroy(){var t,e;(t=c(this,Li))==null||t.remove(),b(this,Li,null),(e=c(this,ze))==null||e.remove(),b(this,ze,null),b(this,Ji,""),b(this,Sl,null),b(this,El,null),b(this,Rt,null),b(this,Al,!1),b(this,Cl,!1)}}ze=new WeakMap,Li=new WeakMap,Al=new WeakMap,Rt=new WeakMap,Nm=new WeakMap,Sl=new WeakMap,Ji=new WeakMap,El=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Om=new WeakSet,yS=function(t,e){if(!c(this,Rt)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[c(this,Rt)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=c(this,Rt)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",mi,{signal:i}),e&&(t.addEventListener("focusin",r=>{c(this,Rt)._focusEventsAllowed=!1,Yt(r)},{capture:!0,signal:i}),t.addEventListener("focusout",r=>{c(this,Rt)._focusEventsAllowed=!0,Yt(r)},{capture:!0,signal:i})),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),t===c(this,Li)?this.edit():c(this,Rt).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,Al,!0),s(r))},{signal:i}),t.addEventListener("pointerenter",()=>{c(this,Rt).toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{c(this,Rt).toggleComment(!1,!1)},{signal:i}),t};var wh,Pl,Bm,jm,Vm,$m,zm,fr,_l,pr,kl,mr,iw,bF,sw,AF,rw,SF;const YT=class YT{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){x(this,iw);x(this,sw);x(this,rw);x(this,wh,void 0);x(this,Pl,!1);x(this,Bm,null);x(this,jm,void 0);x(this,Vm,void 0);x(this,$m,void 0);x(this,zm,void 0);x(this,fr,null);x(this,_l,void 0);x(this,pr,null);x(this,kl,void 0);x(this,mr,null);b(this,wh,t),b(this,Bm,i),b(this,jm,e),b(this,Vm,s),b(this,$m,r),b(this,zm,o),b(this,kl,new AbortController),b(this,_l,AbortSignal.any([a,c(this,kl).signal])),t.addEventListener("touchstart",E(this,iw,bF).bind(this),{passive:!1,signal:c(this,_l)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ys.pixelRatio}destroy(){var t,e;(t=c(this,kl))==null||t.abort(),b(this,kl,null),(e=c(this,fr))==null||e.abort(),b(this,fr,null)}};wh=new WeakMap,Pl=new WeakMap,Bm=new WeakMap,jm=new WeakMap,Vm=new WeakMap,$m=new WeakMap,zm=new WeakMap,fr=new WeakMap,_l=new WeakMap,pr=new WeakMap,kl=new WeakMap,mr=new WeakMap,iw=new WeakSet,bF=function(t){var s,r,o;if((s=c(this,jm))!=null&&s.call(this))return;if(t.touches.length===1){if(c(this,fr))return;const a=b(this,fr,new AbortController),l=AbortSignal.any([c(this,_l),a.signal]),u=c(this,wh),h={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=c(this,fr))==null||p.abort(),b(this,fr,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Yt(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!c(this,mr)){b(this,mr,new AbortController);const a=AbortSignal.any([c(this,_l),c(this,mr).signal]),l=c(this,wh),u={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",E(this,sw,AF).bind(this),u);const h=E(this,rw,SF).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",Yt,u),l.addEventListener("pointermove",Yt,u),l.addEventListener("pointercancel",Yt,u),l.addEventListener("pointerup",Yt,u),(r=c(this,Vm))==null||r.call(this)}if(Yt(t),t.touches.length!==2||(o=c(this,Bm))!=null&&o.call(this)){b(this,pr,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),b(this,pr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},sw=new WeakSet,AF=function(t){var S;if(!c(this,pr)||t.touches.length!==2)return;Yt(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:a}=i,l=c(this,pr),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=l,p=d-u,g=f-h,y=o-s,A=a-r,m=Math.hypot(y,A)||1,v=Math.hypot(p,g)||1;if(!c(this,Pl)&&Math.abs(v-m)<=YT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!c(this,Pl)){b(this,Pl,!0);return}const w=[(s+o)/2,(r+a)/2];(S=c(this,$m))==null||S.call(this,w,v,m)},rw=new WeakSet,SF=function(t){var e;t.touches.length>=2||(c(this,mr)&&(c(this,mr).abort(),b(this,mr,null),(e=c(this,zm))==null||e.call(this)),c(this,pr)&&(Yt(t),b(this,pr,null),b(this,Pl,!1)))};let cm=YT;var Ml,ts,Vt,Pt,gr,xh,Oo,Um,Ue,Ll,yr,Rs,Bo,Hm,Rl,Gn,Wm,Dl,vr,Ds,bh,Ah,Ri,Fl,Gm,ow,Xm,vS,Ym,wS,Sh,py,aw,EF,lw,CF,Km,xS,Eh,my,qm,bS,cw,TF,uw,PF,hw,_F,Qm,AS,dw,kF,Zm,SS,fw,MF,pw,LF,mw,RF,Jm,ES,Il,Qf;const it=class it{constructor(t){x(this,Xm);x(this,Sh);x(this,aw);x(this,lw);x(this,Km);x(this,Eh);x(this,qm);x(this,cw);x(this,uw);x(this,hw);x(this,Qm);x(this,dw);x(this,Zm);x(this,fw);x(this,pw);x(this,mw);x(this,Jm);x(this,Il);x(this,Ml,null);x(this,ts,null);x(this,Vt,null);x(this,Pt,null);x(this,gr,null);x(this,xh,!1);x(this,Oo,null);x(this,Um,"");x(this,Ue,null);x(this,Ll,null);x(this,yr,null);x(this,Rs,null);x(this,Bo,null);x(this,Hm,"");x(this,Rl,!1);x(this,Gn,null);x(this,Wm,!1);x(this,Dl,!1);x(this,vr,!1);x(this,Ds,null);x(this,bh,0);x(this,Ah,0);x(this,Ri,null);x(this,Fl,null);z(this,"isSelected",!1);z(this,"_isCopy",!1);z(this,"_editToolbar",null);z(this,"_initialOptions",Object.create(null));z(this,"_initialData",null);z(this,"_isVisible",!0);z(this,"_uiManager",null);z(this,"_focusEventsAllowed",!0);x(this,Gm,!1);x(this,ow,it._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=it.prototype._resizeWithKeyboard,e=$a.TRANSLATE_SMALL,i=$a.TRANSLATE_BIG;return rt(this,"_resizerKeyboardManager",new r1([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],it.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new ZH({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(it._l10n??(it._l10n=t),it._l10nResizer||(it._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),it._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);it._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Gm)}set _isDraggable(t){var e;b(this,Gm,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,ow)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(E(this,Il,Qf).call(this),(e=c(this,Rs))==null||e.remove(),b(this,Rs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,Rl)?b(this,Rl,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){E(this,Xm,vS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,Gn)||b(this,Gn,[this.x,this.y,this.width,this.height]),E(this,Xm,vS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,Gn)||b(this,Gn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,Gn)&&(c(this,Gn)[0]!==this.x||c(this,Gn)[1]!==this.y)}get _hasBeenResized(){return!!c(this,Gn)&&(c(this,Gn)[2]!==this.width||c(this,Gn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=it,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=i,l*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=cn(r,0,i-a),o=cn(o,0,s-l);break;case 90:r=cn(r,0,i-l),o=cn(o,a,s);break;case 180:r=cn(r,a,i),o=cn(o,l,s);break;case 270:r=cn(r,l,i),o=cn(o,0,s-a);break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return E(i=it,Ym,wS).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return E(i=it,Ym,wS).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Vt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Dl))return this._editToolbar;this._editToolbar=new aS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=c(this,Vt))==null||e.destroy()}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Vt)||(_v.initialize(it._l10n),b(this,Vt,new _v(this)),c(this,Ml)&&(c(this,Vt).data=c(this,Ml),b(this,Ml,null))),c(this,Vt)}get altTextData(){var t;return(t=c(this,Vt))==null?void 0:t.data}set altTextData(t){c(this,Vt)&&(c(this,Vt).data=t)}get guessedAltText(){var t;return(t=c(this,Vt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Vt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Vt))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Vt)&&!c(this,Vt).isEmpty()}hasAltTextData(){var t;return((t=c(this,Vt))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=c(this,Pt))==null||t.focusButton()}addCommentButton(){return c(this,Pt)||b(this,Pt,new O1(this))}addStandaloneCommentButton(){if(c(this,gr)){this._uiManager.isEditingMode()&&c(this,gr).classList.remove("hidden");return}this.hasComment&&(b(this,gr,c(this,Pt).renderForStandalone()),this.div.append(c(this,gr)))}removeStandaloneCommentButton(){c(this,Pt).removeStandaloneCommentButton(),b(this,gr,null)}hideStandaloneCommentButton(){var t;(t=c(this,gr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:s}}=c(this,Pt);return{text:e,richText:t,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){c(this,Pt)||b(this,Pt,new O1(this)),c(this,Pt).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(c(this,Pt)||b(this,Pt,new O1(this)),c(this,Pt).setInitialText(t,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=c(this,Pt))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=c(this,Pt))==null?void 0:t.isDeleted()}get hasComment(){return!!c(this,Pt)&&!c(this,Pt).isEmpty()&&!c(this,Pt).isDeleted()}async editComment(t){c(this,Pt)||b(this,Pt,new O1(this)),c(this,Pt).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){c(this,Pt).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,a=o+r+1,l=s-100,u=a+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,u,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){c(this,Pt).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,xh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,Zm,SS).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),cF(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,Fl)||b(this,Fl,new cm({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,cw,TF).bind(this),onPinching:E(this,uw,PF).bind(this),onPinchEnd:E(this,hw,_F).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Be.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Rl,!0),this._isDraggable){E(this,dw,kF).call(this,t);return}E(this,Qm,AS).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Ds)&&clearTimeout(c(this,Ds)),b(this,Ds,setTimeout(()=>{var t;b(this,Ds,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,g=this.height*o;switch(i){case 0:return[d+u+a,o-f-h-g+l,d+u+p+a,o-f-h+l];case 90:return[d+h+a,o-f+u+l,d+h+g+a,o-f+u+p+l];case 180:return[d-u-p+a,o-f+h+l,d-u+a,o-f+h+g+l];case 270:return[d-h-g+a,o-f-u-p+l,d-h+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,e-o,a,l];case 90:return[i,e-s,l,a];case 180:return[r,e-s,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&it._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=c(this,Pt))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:s,deleted:r,richText:o},uid:a,pageIndex:l,creationDate:u,modificationDate:h}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:u,modificationDate:i||h,popupRef:!r,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,Dl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,Dl,!1),!0):!1}isInEditMode(){return c(this,Dl)}shouldGetKeyboardEvents(){return c(this,vr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){E(this,Zm,SS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,b(s,Ml,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[a,l,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=a/r,s.y=l/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,Bo))==null||t.abort(),b(this,Bo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Ds)&&(clearTimeout(c(this,Ds)),b(this,Ds,null)),E(this,Il,Qf).call(this),this.removeEditToolbar(),c(this,Ri)){for(const i of c(this,Ri).values())clearTimeout(i);b(this,Ri,null)}this.parent=null,(e=c(this,Fl))==null||e.destroy(),b(this,Fl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,aw,EF).call(this),c(this,Ue).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,s,r,o]=this.getPDFRect();return[it._round(i+(r-i)*t),it._round(s+(o-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Pt).commentPopupPositionInLayer}set commentPopupPosition(t){c(this,Pt).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return c(this,Pt).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Pt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){c(this,Pt).setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,yr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Ue).children;if(!c(this,ts)){b(this,ts,Array.from(e));const o=E(this,fw,MF).bind(this),a=E(this,pw,LF).bind(this),l=this._uiManager._signal;for(const u of c(this,ts)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",E(this,mw,RF).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",it._l10nResizer[h])}}const i=c(this,ts)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,ts).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)c(this,Ue).append(c(this,Ue).firstChild);else if(r>s)for(let a=0;a<r-s;a++)c(this,Ue).firstChild.before(c(this,Ue).lastChild);let o=0;for(const a of e){const u=c(this,ts)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",it._l10nResizer[u])}}E(this,Jm,ES).call(this,0),b(this,vr,!0),c(this,Ue).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,vr)&&E(this,qm,bS).call(this,c(this,Hm),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,Il,Qf).call(this),this.div.focus()}select(){var t,e,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=c(this,Vt))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,i,s,r;this.isSelected&&(this.isSelected=!1,(t=c(this,Ue))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=c(this,Vt))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Wm)}set isEditing(t){b(this,Wm,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,Ri)||b(this,Ri,new Map);const{action:i}=t;let s=c(this,Ri).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),c(this,Ri).delete(i),c(this,Ri).size===0&&b(this,Ri,null)},it._telemetryTimeout),c(this,Ri).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,xh,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,xh,!0)}updateFakeAnnotationElement(t){if(!c(this,Rs)&&!this.deleted){b(this,Rs,t.addFakeAnnotation(this));return}if(this.deleted){c(this,Rs).remove(),b(this,Rs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Rs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ml=new WeakMap,ts=new WeakMap,Vt=new WeakMap,Pt=new WeakMap,gr=new WeakMap,xh=new WeakMap,Oo=new WeakMap,Um=new WeakMap,Ue=new WeakMap,Ll=new WeakMap,yr=new WeakMap,Rs=new WeakMap,Bo=new WeakMap,Hm=new WeakMap,Rl=new WeakMap,Gn=new WeakMap,Wm=new WeakMap,Dl=new WeakMap,vr=new WeakMap,Ds=new WeakMap,bh=new WeakMap,Ah=new WeakMap,Ri=new WeakMap,Fl=new WeakMap,Gm=new WeakMap,ow=new WeakMap,Xm=new WeakSet,vS=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ym=new WeakSet,wS=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Sh=new WeakSet,py=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},aw=new WeakSet,EF=function(){if(c(this,Ue))return;b(this,Ue,document.createElement("div")),c(this,Ue).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");c(this,Ue).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",E(this,lw,CF).bind(this,i),{signal:e}),s.addEventListener("contextmenu",mi,{signal:e}),s.tabIndex=-1}this.div.prepend(c(this,Ue))},lw=new WeakSet,CF=function(t,e){var h;e.preventDefault();const{isMac:i}=Be.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=c(this,Vt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,b(this,Ll,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,qm,bS).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Yt,{passive:!1,signal:o}),window.addEventListener("contextmenu",mi,{signal:o}),b(this,yr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=c(this,Vt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,E(this,Eh,my).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Km=new WeakSet,xS=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Eh=new WeakSet,my=function(){if(!c(this,yr))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=c(this,yr);b(this,yr,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===i&&l===s||this.addCommands({cmd:E(this,Km,xS).bind(this,r,o,a,l),undo:E(this,Km,xS).bind(this,t,e,i,s),mustExec:!0})},qm=new WeakSet,bS=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,u=it.MIN_SIZE/i,h=it.MIN_SIZE/s,d=E(this,Sh,py).call(this,this.rotation),f=(O,j)=>[d[0]*O+d[2]*j,d[1]*O+d[3]*j],p=E(this,Sh,py).call(this,360-this.rotation),g=(O,j)=>[p[0]*O+p[2]*j,p[1]*O+p[3]*j];let y,A,m=!1,v=!1;switch(t){case"topLeft":m=!0,y=(O,j)=>[0,0],A=(O,j)=>[O,j];break;case"topMiddle":y=(O,j)=>[O/2,0],A=(O,j)=>[O/2,j];break;case"topRight":m=!0,y=(O,j)=>[O,0],A=(O,j)=>[0,j];break;case"middleRight":v=!0,y=(O,j)=>[O,j/2],A=(O,j)=>[0,j/2];break;case"bottomRight":m=!0,y=(O,j)=>[O,j],A=(O,j)=>[0,0];break;case"bottomMiddle":y=(O,j)=>[O/2,j],A=(O,j)=>[O/2,0];break;case"bottomLeft":m=!0,y=(O,j)=>[0,j],A=(O,j)=>[O,0];break;case"middleLeft":v=!0,y=(O,j)=>[0,j/2],A=(O,j)=>[O,j/2];break}const w=y(a,l),S=A(a,l);let T=f(...S);const P=it._round(r+T[0]),_=it._round(o+T[1]);let k=1,L=1,D,R;if(e.fromKeyboard)({deltaX:D,deltaY:R}=e);else{const{screenX:O,screenY:j}=e,[N,$]=c(this,Ll);[D,R]=this.screenToPageTranslation(O-N,j-$),c(this,Ll)[0]=O,c(this,Ll)[1]=j}if([D,R]=g(D/i,R/s),m){const O=Math.hypot(a,l);k=L=Math.max(Math.min(Math.hypot(S[0]-w[0]-D,S[1]-w[1]-R)/O,1/a,1/l),u/a,h/l)}else v?k=cn(Math.abs(S[0]-w[0]-D),u,1)/a:L=cn(Math.abs(S[1]-w[1]-R),h,1)/l;const I=it._round(a*k),B=it._round(l*L);T=f(...A(I,B));const F=P-T[0],V=_-T[1];c(this,Gn)||b(this,Gn,[this.x,this.y,this.width,this.height]),this.width=I,this.height=B,this.x=F,this.y=V,this.setDims(),this.fixAndSetPosition(),this._onResizing()},cw=new WeakSet,TF=function(){var t;b(this,yr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Vt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},uw=new WeakSet,PF=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=E(this,Sh,py).call(this,this.rotation),a=(P,_)=>[o[0]*P+o[2]*_,o[1]*P+o[3]*_],[l,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,g=it.MIN_SIZE/l,y=it.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),g/f,y/p);const A=it._round(f*r),m=it._round(p*r);if(A===f&&m===p)return;c(this,Gn)||b(this,Gn,[h,d,f,p]);const v=a(f/2,p/2),w=it._round(h+v[0]),S=it._round(d+v[1]),T=a(A/2,m/2);this.x=w-T[0],this.y=S-T[1],this.width=A,this.height=m,this.setDims(),this.fixAndSetPosition(),this._onResizing()},hw=new WeakSet,_F=function(){var t;(t=c(this,Vt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,Eh,my).call(this)},Qm=new WeakSet,AS=function(t){const{isMac:e}=Be.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},dw=new WeakSet,kF=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},a=u=>{s.abort(),b(this,Oo,null),b(this,Rl,!1),this._uiManager.endDragSession()||E(this,Qm,AS).call(this,u),i&&this._onStopDragging()};e&&(b(this,bh,t.clientX),b(this,Ah,t.clientY),b(this,Oo,t.pointerId),b(this,Um,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==c(this,Oo)){Yt(u);return}const[p,g]=this.screenToPageTranslation(h-c(this,bh),d-c(this,Ah));b(this,bh,h),b(this,Ah,d),this._uiManager.dragSelectedEditors(p,g)},o),window.addEventListener("touchmove",Yt,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,Um)&&(c(this,Fl)||u.isPrimary)&&a(u),Yt(u)},o));const l=u=>{if(!c(this,Oo)||c(this,Oo)===u.pointerId){a(u);return}Yt(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},Zm=new WeakSet,SS=function(){if(c(this,Bo)||!this.div)return;b(this,Bo,new AbortController);const t=this._uiManager.combinedSignal(c(this,Bo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},fw=new WeakSet,MF=function(t){it._resizerKeyboardManager.exec(this,t)},pw=new WeakSet,LF=function(t){var e;c(this,vr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Ue)&&E(this,Il,Qf).call(this)},mw=new WeakSet,RF=function(t){b(this,Hm,c(this,vr)?t:"")},Jm=new WeakSet,ES=function(t){if(c(this,ts))for(const e of c(this,ts))e.tabIndex=t},Il=new WeakSet,Qf=function(){b(this,vr,!1),E(this,Jm,ES).call(this,-1),E(this,Eh,my).call(this)},x(it,Ym),z(it,"_l10n",null),z(it,"_l10nResizer",null),z(it,"_borderLineWidth",-1),z(it,"_colorManager",new uS),z(it,"_zIndex",1),z(it,"_telemetryTimeout",1e3);let Ft=it;class ZH extends Ft{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const OM=3285377520,bi=4294901760,bs=65535;class DF{constructor(t){this.h1=t?t&4294967295:OM,this.h2=t?t&4294967295:OM}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let y=0,A=t.length;y<A;y++){const m=t.charCodeAt(y);m<=255?e[i++]=m:(e[i++]=m>>>8,e[i++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let a=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&bs,g=f&bs;for(let y=0;y<s;y++)y&1?(a=o[y],a=a*d&bi|a*p&bs,a=a<<15|a>>>17,a=a*f&bi|a*g&bs,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[y],l=l*d&bi|l*p&bs,l=l<<15|l>>>17,l=l*f&bi|l*g&bs,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=e[s*4+2]<<16;case 2:a^=e[s*4+1]<<8;case 1:a^=e[s*4],a=a*d&bi|a*p&bs,a=a<<15|a>>>17,a=a*f&bi|a*g&bs,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&bi|t*36045&bs,e=e*4283543511&bi|((e<<16|t>>>16)*2950163797&bi)>>>16,t^=e>>>1,t=t*444984403&bi|t*60499&bs,e=e*3301882366&bi|((e<<16|t>>>16)*3120437893&bi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const CS=Object.freeze({map:null,hash:"",transfer:void 0});var Nl,Ol,wr,He,gw,FF;class OT{constructor(){x(this,gw);x(this,Nl,!1);x(this,Ol,null);x(this,wr,null);x(this,He,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=c(this,He).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return c(this,He).get(t)}remove(t){const e=c(this,He).get(t);if(e!==void 0&&(e instanceof Ft&&c(this,wr).delete(e.annotationElementId),c(this,He).delete(t),c(this,He).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of c(this,He).values())if(i instanceof Ft)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=c(this,He).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,c(this,He).set(t,e);s&&E(this,gw,FF).call(this),e instanceof Ft&&((c(this,wr)||b(this,wr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return c(this,He).has(t)}get size(){return c(this,He).size}resetModified(){c(this,Nl)&&(b(this,Nl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new IF(this)}get serializable(){if(c(this,He).size===0)return CS;const t=new Map,e=new DF,i=[],s=Object.create(null);let r=!1;for(const[o,a]of c(this,He)){const l=a instanceof Ft?a.serialize(!1,s):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:CS}get editorStats(){let t=null;const e=new Map;let i=0,s=0;for(const r of c(this,He).values()){if(!(r instanceof Ft)){r.popup&&(r.popup.deleted?s+=1:i+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(i+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:a}=o;e.has(a)||e.set(a,Object.getPrototypeOf(r).constructor),t||(t=Object.create(null));const l=t[a]||(t[a]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=l.get(u);d||(d=new Map,l.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((s>0||i>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:i}),!t)return null;for(const[r,o]of e)t[r]=o.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){b(this,Ol,null)}updateEditor(t,e){var s;const i=(s=c(this,wr))==null?void 0:s.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=c(this,wr))==null?void 0:e.get(t))||null}get modifiedIds(){if(c(this,Ol))return c(this,Ol);const t=[];if(c(this,wr))for(const e of c(this,wr).values())e.serialize()&&t.push(e.annotationElementId);return b(this,Ol,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,He).entries()}}Nl=new WeakMap,Ol=new WeakMap,wr=new WeakMap,He=new WeakMap,gw=new WeakSet,FF=function(){c(this,Nl)||(b(this,Nl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var tg;class IF extends OT{constructor(e){super();x(this,tg,void 0);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);b(this,tg,{map:o,hash:s,transfer:r})}get print(){Mt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,tg)}get modifiedIds(){return rt(this,"modifiedIds",{ids:new Set,hash:""})}}tg=new WeakMap;var Ch;class JH{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){x(this,Ch,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,Ch).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||c(this,Ch).has(t.loadedName))){if(ht(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,a=new FontFace(s,r,o);this.addNativeFontFace(a);try{await a.load(),c(this,Ch).add(s),i==null||i(t)}catch{nt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw nt(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return rt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return rt(this,"isSyncFontLoadingSupported",xn||Be.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ht(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return rt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(S,T){return S.charCodeAt(T)<<24|S.charCodeAt(T+1)<<16|S.charCodeAt(T+2)<<8|S.charCodeAt(T+3)&255}function s(S,T,P,_){const k=S.substring(0,T),L=S.substring(T+P);return k+_+L}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(S,T){if(++u>30){nt("Load test font never loaded."),T();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(h.bind(null,S,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const g=16,y=1482184792;let A=i(f,g);for(r=0,o=d.length-3;r<o;r+=4)A=A-y+i(d,r)|0;r<d.length&&(A=A-y+i(d+"XXX",r)|0),f=s(f,g,4,VH(A));const m=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(v);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const S of[t.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=S,w.append(T)}this._document.body.append(w),h(d,()=>{w.remove(),e.complete()})}}Ch=new WeakMap;var St;class tW{constructor(t,e=null,i,s){x(this,St,void 0);this.compiledGlyphs=Object.create(null),b(this,St,t),this._inspectFont=e,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Q5(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){nt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}get black(){return c(this,St).black}get bold(){return c(this,St).bold}get disableFontFace(){return c(this,St).disableFontFace??!1}get fontExtraProperties(){return c(this,St).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,St).isInvalidPDFjsFont}get isType3Font(){return c(this,St).isType3Font}get italic(){return c(this,St).italic}get missingFile(){return c(this,St).missingFile}get remeasure(){return c(this,St).remeasure}get vertical(){return c(this,St).vertical}get ascent(){return c(this,St).ascent}get defaultWidth(){return c(this,St).defaultWidth}get descent(){return c(this,St).descent}get bbox(){return c(this,St).bbox}get fontMatrix(){return c(this,St).fontMatrix}get fallbackName(){return c(this,St).fallbackName}get loadedName(){return c(this,St).loadedName}get mimetype(){return c(this,St).mimetype}get name(){return c(this,St).name}get data(){return c(this,St).data}clearData(){c(this,St).clearData()}get cssFontInfo(){return c(this,St).cssFontInfo}get systemFontInfo(){return c(this,St).systemFontInfo}get defaultVMetrics(){return c(this,St).defaultVMetrics}}St=new WeakMap;function eW(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(xn)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function nW(n){if(xn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return n1(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function B1(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const TS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,iW=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",NF=HH.bind(null,TS,iW);var xr,yw;class sW{constructor(){x(this,xr,new Map);x(this,yw,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};c(this,yw).then(()=>{for(const[s]of c(this,xr))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){nt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}c(this,xr).set(e,s)}removeEventListener(t,e){const i=c(this,xr).get(e);i==null||i(),c(this,xr).delete(e)}terminate(){for(const[,t]of c(this,xr))t==null||t();c(this,xr).clear()}}xr=new WeakMap,yw=new WeakMap;const j1={DATA:1,ERROR:2},de={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function BM(){}function Tn(n){if(n instanceof ro||n instanceof Tv||n instanceof MM||n instanceof om||n instanceof gb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new ro(n.message);case"InvalidPDFException":return new Tv(n.message);case"PasswordException":return new MM(n.message,n.code);case"ResponseException":return new om(n.message,n.status,n.missing);case"UnknownErrorException":return new gb(n.message,n.details)}return new gb(n.message,n.toString())}var Th,vw,OF,ww,BF,xw,jF,Ph,gy;class Zf{constructor(t,e,i){x(this,vw);x(this,ww);x(this,xw);x(this,Ph);x(this,Th,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,vw,OF).bind(this),{signal:c(this,Th).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:de.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ht(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:de.CANCEL,streamId:r,reason:Tn(u)}),h.promise}},i)}destroy(){var t;(t=c(this,Th))==null||t.abort(),b(this,Th,null)}}Th=new WeakMap,vw=new WeakSet,OF=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,xw,jF).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===j1.DATA)s.resolve(t.data);else if(t.callback===j1.ERROR)s.reject(Tn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:j1.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:j1.ERROR,callbackId:t.callbackId,reason:Tn(o)})});return}if(t.streamId){E(this,ww,BF).call(this,t);return}e(t.data)},ww=new WeakSet,BF=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:de.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:de.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){ht(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:de.ERROR,streamId:e,reason:Tn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:de.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:de.START_COMPLETE,streamId:e,reason:Tn(u)})})},xw=new WeakSet,jF=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case de.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Tn(t.reason));break;case de.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Tn(t.reason));break;case de.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:de.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||BM).then(function(){r.postMessage({sourceName:i,targetName:s,stream:de.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:de.PULL_COMPLETE,streamId:e,reason:Tn(u)})});break;case de.ENQUEUE:if(ht(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case de.CLOSE:if(ht(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,Ph,gy).call(this,o,e);break;case de.ERROR:ht(o,"error should have stream controller"),o.controller.error(Tn(t.reason)),E(this,Ph,gy).call(this,o,e);break;case de.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Tn(t.reason)),E(this,Ph,gy).call(this,o,e);break;case de.CANCEL:if(!a)break;const l=Tn(t.reason);Promise.try(a.onCancel||BM,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:de.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:de.CANCEL_COMPLETE,streamId:e,reason:Tn(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ph=new WeakSet,gy=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var eg;class VF{constructor({enableHWA:t=!1}){x(this,eg,!1);b(this,eg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,eg)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Mt("Abstract method `_createCanvas` called.")}}eg=new WeakMap;class rW extends VF{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class $F{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Mt("Abstract method `_fetch` called.")}}class jM extends $F{async _fetch(t){const e=await xf(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):n1(e)}}class zF{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var Bl,_h,br,Ar,sn,jl,Vl,ke,tn,$l,Jf,jo,du,kh,yy,Vo,fu,bw,UF,ng,PS,$o,pu,zl,tp,Ul,ep,ig,_S,Hl,np;class oW extends zF{constructor({docId:e,ownerDocument:i=globalThis.document}){super();x(this,ke);x(this,$l);x(this,jo);x(this,kh);x(this,Vo);x(this,bw);x(this,ng);x(this,$o);x(this,zl);x(this,Ul);x(this,ig);x(this,Hl);x(this,Bl,void 0);x(this,_h,void 0);x(this,br,void 0);x(this,Ar,void 0);x(this,sn,void 0);x(this,jl,void 0);x(this,Vl,0);b(this,Ar,e),b(this,sn,i)}addFilter(e){if(!e)return"none";let i=c(this,ke,tn).get(e);if(i)return i;const[s,r,o]=E(this,kh,yy).call(this,e),a=e.length===1?s:`${s}${r}${o}`;if(i=c(this,ke,tn).get(a),i)return c(this,ke,tn).set(e,i),i;const l=`g_${c(this,Ar)}_transfer_map_${xe(this,Vl)._++}`,u=E(this,Vo,fu).call(this,l);c(this,ke,tn).set(e,u),c(this,ke,tn).set(a,u);const h=E(this,$o,pu).call(this,l);return E(this,Ul,ep).call(this,s,r,o,h),u}addHCMFilter(e,i){var g;const s=`${e}-${i}`,r="base";let o=c(this,$l,Jf).get(r);if((o==null?void 0:o.key)===s||(o?((g=o.filter)==null||g.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},c(this,$l,Jf).set(r,o)),!e||!i))return o.url;const a=E(this,Hl,np).call(this,e);e=X.makeHexColor(...a);const l=E(this,Hl,np).call(this,i);if(i=X.makeHexColor(...l),c(this,jo,du).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let y=0;y<=255;y++){const A=y/255;u[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,Ar)}_hcm_filter`,f=o.filter=E(this,$o,pu).call(this,d);E(this,Ul,ep).call(this,h,h,h,f),E(this,ng,PS).call(this,f);const p=(y,A)=>{const m=a[y]/255,v=l[y]/255,w=new Array(A+1);for(let S=0;S<=A;S++)w[S]=m+S/A*(v-m);return w.join(",")};return E(this,Ul,ep).call(this,p(0,5),p(1,5),p(2,5),f),o.url=E(this,Vo,fu).call(this,d),o.url}addAlphaFilter(e){let i=c(this,ke,tn).get(e);if(i)return i;const[s]=E(this,kh,yy).call(this,[e]),r=`alpha_${s}`;if(i=c(this,ke,tn).get(r),i)return c(this,ke,tn).set(e,i),i;const o=`g_${c(this,Ar)}_alpha_map_${xe(this,Vl)._++}`,a=E(this,Vo,fu).call(this,o);c(this,ke,tn).set(e,a),c(this,ke,tn).set(r,a);const l=E(this,$o,pu).call(this,o);return E(this,ig,_S).call(this,s,l),a}addLuminosityFilter(e){let i=c(this,ke,tn).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=E(this,kh,yy).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=c(this,ke,tn).get(r),i)return c(this,ke,tn).set(e,i),i;const o=`g_${c(this,Ar)}_luminosity_map_${xe(this,Vl)._++}`,a=E(this,Vo,fu).call(this,o);c(this,ke,tn).set(e,a),c(this,ke,tn).set(r,a);const l=E(this,$o,pu).call(this,o);return E(this,bw,UF).call(this,l),e&&E(this,ig,_S).call(this,s,l),a}addHighlightHCMFilter(e,i,s,r,o){var v;const a=`${i}-${s}-${r}-${o}`;let l=c(this,$l,Jf).get(e);if((l==null?void 0:l.key)===a||(l?((v=l.filter)==null||v.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,$l,Jf).set(e,l)),!i||!s))return l.url;const[u,h]=[i,s].map(E(this,Hl,np).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[r,o].map(E(this,Hl,np).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),c(this,jo,du).style.color="";const y=(w,S,T)=>{const P=new Array(256),_=(f-d)/T,k=w/255,L=(S-w)/(255*T);let D=0;for(let R=0;R<=T;R++){const I=Math.round(d+R*_),B=k+R*L;for(let F=D;F<=I;F++)P[F]=B;D=I+1}for(let R=D;R<256;R++)P[R]=P[D-1];return P.join(",")},A=`g_${c(this,Ar)}_hcm_${e}_filter`,m=l.filter=E(this,$o,pu).call(this,A);return E(this,ng,PS).call(this,m),E(this,Ul,ep).call(this,y(p[0],g[0],5),y(p[1],g[1],5),y(p[2],g[2],5),m),l.url=E(this,Vo,fu).call(this,A),l.url}destroy(e=!1){var i,s,r,o;e&&((i=c(this,jl))!=null&&i.size)||((s=c(this,br))==null||s.parentNode.parentNode.remove(),b(this,br,null),(r=c(this,_h))==null||r.clear(),b(this,_h,null),(o=c(this,jl))==null||o.clear(),b(this,jl,null),b(this,Vl,0))}}Bl=new WeakMap,_h=new WeakMap,br=new WeakMap,Ar=new WeakMap,sn=new WeakMap,jl=new WeakMap,Vl=new WeakMap,ke=new WeakSet,tn=function(){return c(this,_h)||b(this,_h,new Map)},$l=new WeakSet,Jf=function(){return c(this,jl)||b(this,jl,new Map)},jo=new WeakSet,du=function(){if(!c(this,br)){const e=c(this,sn).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=c(this,sn).createElementNS(nr,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,br,c(this,sn).createElementNS(nr,"defs")),e.append(s),s.append(c(this,br)),c(this,sn).body.append(e)}return c(this,br)},kh=new WeakSet,yy=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=e,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=s[u]/255,l[u]=r[u]/255;return[o.join(","),a.join(","),l.join(",")]},Vo=new WeakSet,fu=function(e){if(c(this,Bl)===void 0){b(this,Bl,"");const i=c(this,sn).URL;i!==c(this,sn).baseURI&&(s1(i)?nt('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Bl,RT(i,"")))}return`url(${c(this,Bl)}#${e})`},bw=new WeakSet,UF=function(e){const i=c(this,sn).createElementNS(nr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},ng=new WeakSet,PS=function(e){const i=c(this,sn).createElementNS(nr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},$o=new WeakSet,pu=function(e){const i=c(this,sn).createElementNS(nr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),c(this,jo,du).append(i),i},zl=new WeakSet,tp=function(e,i,s){const r=c(this,sn).createElementNS(nr,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Ul=new WeakSet,ep=function(e,i,s,r){const o=c(this,sn).createElementNS(nr,"feComponentTransfer");r.append(o),E(this,zl,tp).call(this,o,"feFuncR",e),E(this,zl,tp).call(this,o,"feFuncG",i),E(this,zl,tp).call(this,o,"feFuncB",s)},ig=new WeakSet,_S=function(e,i){const s=c(this,sn).createElementNS(nr,"feComponentTransfer");i.append(s),E(this,zl,tp).call(this,s,"feFuncA",e)},Hl=new WeakSet,np=function(e){return c(this,jo,du).style.color=e,bf(getComputedStyle(c(this,jo,du)).getPropertyValue("color"))};class HF{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Mt("Abstract method `_fetch` called.")}}class VM extends HF{async _fetch(t){const e=await xf(t,"arraybuffer");return new Uint8Array(e)}}class WF{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Mt("Abstract method `_fetch` called.")}}class $M extends WF{async _fetch(t){const e=await xf(t,"arraybuffer");return new Uint8Array(e)}}xn&&nt("Please use the `legacy` build in Node.js environments.");async function BT(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class aW extends zF{}class lW extends VF{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class cW extends $F{async _fetch(t){return BT(t)}}class uW extends HF{async _fetch(t){return BT(t)}}class hW extends WF{async _fetch(t){return BT(t)}}const cu="__forcedDependency",{floor:zM,ceil:UM}=Math;function V1(n,t,e,i,s,r){n[t*4+0]=Math.min(n[t*4+0],e),n[t*4+1]=Math.min(n[t*4+1],i),n[t*4+2]=Math.max(n[t*4+2],s),n[t*4+3]=Math.max(n[t*4+3],r)}const kS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Mh,zo;class dW{constructor(t,e){x(this,Mh,void 0);x(this,zo,void 0);b(this,Mh,t),b(this,zo,e)}get length(){return c(this,Mh).length}isEmpty(t){return c(this,Mh)[t]===kS}minX(t){return c(this,zo)[t*4+0]/256}minY(t){return c(this,zo)[t*4+1]/256}maxX(t){return(c(this,zo)[t*4+2]+1)/256}maxY(t){return(c(this,zo)[t*4+3]+1)/256}}Mh=new WeakMap,zo=new WeakMap;const $1=(n,t)=>{if(!n)return;let e=n.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},n.set(t,e)),e};var kn,Mn,Wl,es,Gl,Sr,xt,Et,Er,Ln,sg,Lh,Xl,Yl,Cr,rn,Fs,rg,MS;class fW{constructor(t,e,i=!1){x(this,rg);x(this,kn,{__proto__:null});x(this,Mn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[cu]:[]});x(this,Wl,new Map);x(this,es,[]);x(this,Gl,[]);x(this,Sr,[[1,0,0,1,0,0]]);x(this,xt,[-1/0,-1/0,1/0,1/0]);x(this,Et,new Float64Array([1/0,1/0,-1/0,-1/0]));x(this,Er,-1);x(this,Ln,new Set);x(this,sg,new Map);x(this,Lh,new Map);x(this,Xl,void 0);x(this,Yl,void 0);x(this,Cr,void 0);x(this,rn,void 0);x(this,Fs,void 0);b(this,Xl,t.width),b(this,Yl,t.height),E(this,rg,MS).call(this,e),i&&b(this,Fs,new Map)}growOperationsCount(t){t>=c(this,rn).length&&E(this,rg,MS).call(this,t,c(this,rn))}save(t){return b(this,kn,{__proto__:c(this,kn)}),b(this,Mn,{__proto__:c(this,Mn),transform:{__proto__:c(this,Mn).transform},moveText:{__proto__:c(this,Mn).moveText},sameLineText:{__proto__:c(this,Mn).sameLineText},[cu]:{__proto__:c(this,Mn)[cu]}}),b(this,xt,{__proto__:c(this,xt)}),c(this,es).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(c(this,kn));if(e===null)return this;b(this,kn,e),b(this,Mn,Object.getPrototypeOf(c(this,Mn))),b(this,xt,Object.getPrototypeOf(c(this,xt)));const i=c(this,es).pop();return i!==void 0&&((s=$1(c(this,Fs),t))==null||s.dependencies.add(i),c(this,rn)[t]=c(this,rn)[i]),this}recordOpenMarker(t){return c(this,es).push(t),this}getOpenMarker(){return c(this,es).length===0?null:c(this,es).at(-1)}recordCloseMarker(t){var i;const e=c(this,es).pop();return e!==void 0&&((i=$1(c(this,Fs),t))==null||i.dependencies.add(e),c(this,rn)[t]=c(this,rn)[e]),this}beginMarkedContent(t){return c(this,Gl).push(t),this}endMarkedContent(t){var i;const e=c(this,Gl).pop();return e!==void 0&&((i=$1(c(this,Fs),t))==null||i.dependencies.add(e),c(this,rn)[t]=c(this,rn)[e]),this}pushBaseTransform(t){return c(this,Sr).push(X.multiplyByDOMMatrix(c(this,Sr).at(-1),t.getTransform())),this}popBaseTransform(){return c(this,Sr).length>1&&c(this,Sr).pop(),this}recordSimpleData(t,e){return c(this,kn)[t]=e,this}recordIncrementalData(t,e){return c(this,Mn)[t].push(e),this}resetIncrementalData(t,e){return c(this,Mn)[t].length=0,this}recordNamedData(t,e){return c(this,Wl).set(t,e),this}recordSimpleDataFromNamed(t,e,i){c(this,kn)[t]=c(this,Wl).get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(cu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in c(this,kn)&&this.recordFutureForcedDependency(e,c(this,kn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of c(this,Ln))this.recordFutureForcedDependency(cu,t);return this}resetBBox(t){return c(this,Er)!==t&&(b(this,Er,t),c(this,Et)[0]=1/0,c(this,Et)[1]=1/0,c(this,Et)[2]=-1/0,c(this,Et)[3]=-1/0),this}recordClipBox(t,e,i,s,r,o){const a=X.multiplyByDOMMatrix(c(this,Sr).at(-1),e.getTransform()),l=[1/0,1/0,-1/0,-1/0];X.axialAlignedBoundingBox([i,r,s,o],a,l);const u=X.intersect(c(this,xt),l);return u?(c(this,xt)[0]=u[0],c(this,xt)[1]=u[1],c(this,xt)[2]=u[2],c(this,xt)[3]=u[3]):(c(this,xt)[0]=c(this,xt)[1]=1/0,c(this,xt)[2]=c(this,xt)[3]=-1/0),this}recordBBox(t,e,i,s,r,o){const a=c(this,xt);if(a[0]===1/0)return this;const l=X.multiplyByDOMMatrix(c(this,Sr).at(-1),e.getTransform());if(a[0]===-1/0)return X.axialAlignedBoundingBox([i,r,s,o],l,c(this,Et)),this;const u=[1/0,1/0,-1/0,-1/0];return X.axialAlignedBoundingBox([i,r,s,o],l,u),c(this,Et)[0]=Math.min(c(this,Et)[0],Math.max(u[0],a[0])),c(this,Et)[1]=Math.min(c(this,Et)[1],Math.max(u[1],a[1])),c(this,Et)[2]=Math.max(c(this,Et)[2],Math.min(u[2],a[2])),c(this,Et)[3]=Math.max(c(this,Et)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(t,e,i,s=1,r=0,o=0,a){const l=i.bbox;let u,h;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&c(this,Lh).get(i),u!==!1&&(h=[0,0,0,0],X.axialAlignedBoundingBox(l,i.fontMatrix,h),(s!==1||r!==0||o!==0)&&X.scaleMinMax([s,0,0,-s,r,o],h),u)))return this.recordBBox(t,e,h[0],h[2],h[1],h[3]);if(!a)return this.recordFullPageBBox(t);const d=a();return l&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,c(this,Lh).set(i,u),u)?this.recordBBox(t,e,h[0],h[2],h[1],h[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return c(this,Et)[0]=Math.max(0,c(this,xt)[0]),c(this,Et)[1]=Math.max(0,c(this,xt)[1]),c(this,Et)[2]=Math.min(c(this,Xl),c(this,xt)[2]),c(this,Et)[3]=Math.min(c(this,Yl),c(this,xt)[3]),this}getSimpleIndex(t){return c(this,kn)[t]}recordDependencies(t,e){const i=c(this,Ln),s=c(this,kn),r=c(this,Mn);for(const o of e)o in c(this,kn)?i.add(s[o]):o in r&&r[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return c(this,Wl).has(e)&&c(this,Ln).add(c(this,Wl).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[cu]),c(this,Fs)){const i=$1(c(this,Fs),t),{dependencies:s}=i;c(this,Ln).forEach(s.add,s),c(this,es).forEach(s.add,s),c(this,Gl).forEach(s.add,s),s.delete(t),i.isRenderingOperation=!0}if(c(this,Er)===t){const i=zM(c(this,Et)[0]*256/c(this,Xl)),s=zM(c(this,Et)[1]*256/c(this,Yl)),r=UM(c(this,Et)[2]*256/c(this,Xl)),o=UM(c(this,Et)[3]*256/c(this,Yl));V1(c(this,Cr),t,i,s,r,o);for(const a of c(this,Ln))a!==t&&V1(c(this,Cr),a,i,s,r,o);for(const a of c(this,es))a!==t&&V1(c(this,Cr),a,i,s,r,o);for(const a of c(this,Gl))a!==t&&V1(c(this,Cr),a,i,s,r,o);e||(c(this,Ln).clear(),b(this,Er,-1))}return this}recordShowTextOperation(t,e=!1){const i=Array.from(c(this,Ln));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return c(this,Er)===t&&(b(this,Er,-1),c(this,xt)[0]=Math.max(c(this,xt)[0],c(this,Et)[0]),c(this,xt)[1]=Math.max(c(this,xt)[1],c(this,Et)[1]),c(this,xt)[2]=Math.min(c(this,xt)[2],c(this,Et)[2]),c(this,xt)[3]=Math.min(c(this,xt)[3],c(this,Et)[3]),e||c(this,Ln).clear()),this}_takePendingDependencies(){const t=c(this,Ln);return b(this,Ln,new Set),t}_extractOperation(t){const e=c(this,sg).get(t);return c(this,sg).delete(t),e}_pushPendingDependencies(t){for(const e of t)c(this,Ln).add(e)}take(){return c(this,Lh).clear(),new dW(c(this,rn),c(this,Cr))}takeDebugMetadata(){return c(this,Fs)}}kn=new WeakMap,Mn=new WeakMap,Wl=new WeakMap,es=new WeakMap,Gl=new WeakMap,Sr=new WeakMap,xt=new WeakMap,Et=new WeakMap,Er=new WeakMap,Ln=new WeakMap,sg=new WeakMap,Lh=new WeakMap,Xl=new WeakMap,Yl=new WeakMap,Cr=new WeakMap,rn=new WeakMap,Fs=new WeakMap,rg=new WeakSet,MS=function(t,e){const i=new ArrayBuffer(t*4);b(this,Cr,new Uint8ClampedArray(i)),b(this,rn,new Uint32Array(i)),e&&e.length>0?(c(this,rn).set(e),c(this,rn).fill(kS,e.length)):c(this,rn).fill(kS)};var _t,ee,ns,Rh,Dh;const KT=class KT{constructor(t,e,i){x(this,_t,void 0);x(this,ee,void 0);x(this,ns,void 0);x(this,Rh,0);x(this,Dh,0);if(t instanceof KT&&c(t,ns)===!!i)return t;b(this,_t,t),b(this,ee,e),b(this,ns,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(t){return xe(this,Dh)._++,c(this,_t).save(c(this,ee)),this}restore(t){return c(this,Dh)>0&&(c(this,_t).restore(c(this,ee)),xe(this,Dh)._--),this}recordOpenMarker(t){return xe(this,Rh)._++,this}getOpenMarker(){return c(this,Rh)>0?c(this,ee):c(this,_t).getOpenMarker()}recordCloseMarker(t){return xe(this,Rh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return c(this,_t).pushBaseTransform(t),this}popBaseTransform(){return c(this,_t).popBaseTransform(),this}recordSimpleData(t,e){return c(this,_t).recordSimpleData(t,c(this,ee)),this}recordIncrementalData(t,e){return c(this,_t).recordIncrementalData(t,c(this,ee)),this}resetIncrementalData(t,e){return c(this,_t).resetIncrementalData(t,c(this,ee)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return c(this,_t).recordSimpleDataFromNamed(t,e,c(this,ee)),this}recordFutureForcedDependency(t,e){return c(this,_t).recordFutureForcedDependency(t,c(this,ee)),this}inheritSimpleDataAsFutureForcedDependencies(t){return c(this,_t).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,_t).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return c(this,ns)||c(this,_t).resetBBox(c(this,ee)),this}recordClipBox(t,e,i,s,r,o){return c(this,ns)||c(this,_t).recordClipBox(c(this,ee),e,i,s,r,o),this}recordBBox(t,e,i,s,r,o){return c(this,ns)||c(this,_t).recordBBox(c(this,ee),e,i,s,r,o),this}recordCharacterBBox(t,e,i,s,r,o,a){return c(this,ns)||c(this,_t).recordCharacterBBox(c(this,ee),e,i,s,r,o,a),this}recordFullPageBBox(t){return c(this,ns)||c(this,_t).recordFullPageBBox(c(this,ee)),this}getSimpleIndex(t){return c(this,_t).getSimpleIndex(t)}recordDependencies(t,e){return c(this,_t).recordDependencies(c(this,ee),e),this}recordNamedDependency(t,e){return c(this,_t).recordNamedDependency(c(this,ee),e),this}recordOperation(t){return c(this,_t).recordOperation(c(this,ee),!0),this}recordShowTextOperation(t){return c(this,_t).recordShowTextOperation(c(this,ee),!0),this}bboxToClipBoxDropOperation(t){return c(this,ns)||c(this,_t).bboxToClipBoxDropOperation(c(this,ee),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};_t=new WeakMap,ee=new WeakMap,ns=new WeakMap,Rh=new WeakMap,Dh=new WeakMap;let kv=KT;const Ai={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ke={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function LS(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class jT{isModifyingCurrentTransform(){return!1}getPattern(){Mt("Abstract method `getPattern` called.")}}class pW extends jT{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Ke.STROKE||s===Ke.FILL){const o=e.current.getClippedPathBoundingBox(s,Gt(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=X.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),LS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else LS(t,this._bbox),r=this._createGradient(t);return r}}function wb(n,t,e,i,s,r,o,a){const l=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),l[i+1]>l[s+1]&&(f=i,i=s,s=f,f=o,o=a,a=f),l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,y=(l[i]+t.offsetX)*t.scaleX,A=(l[i+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,v=(l[s+1]+t.offsetY)*t.scaleY;if(g>=v)return;const w=u[r],S=u[r+1],T=u[r+2],P=u[o],_=u[o+1],k=u[o+2],L=u[a],D=u[a+1],R=u[a+2],I=Math.round(g),B=Math.round(v);let F,V,O,j,N,$,H,W;for(let G=I;G<=B;G++){if(G<A){const lt=G<g?0:(g-G)/(g-A);F=p-(p-y)*lt,V=w-(w-P)*lt,O=S-(S-_)*lt,j=T-(T-k)*lt}else{let lt;G>v?lt=1:A===v?lt=0:lt=(A-G)/(A-v),F=y-(y-m)*lt,V=P-(P-L)*lt,O=_-(_-D)*lt,j=k-(k-R)*lt}let Z;G<g?Z=0:G>v?Z=1:Z=(g-G)/(g-v),N=p-(p-m)*Z,$=w-(w-L)*Z,H=S-(S-D)*Z,W=T-(T-R)*Z;const dt=Math.round(Math.min(F,N)),vt=Math.round(Math.max(F,N));let ut=d*G+dt*4;for(let lt=dt;lt<=vt;lt++)Z=(F-lt)/(F-N),Z<0?Z=0:Z>1&&(Z=1),h[ut++]=V-(V-$)*Z|0,h[ut++]=O-(O-H)*Z|0,h[ut++]=j-(j-W)*Z|0,h[ut++]=255}}function mW(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(r=0;r<l;r++){let h=r*a;for(let d=0;d<u;d++,h++)wb(n,e,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),wb(n,e,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)wb(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class gW extends jT{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,g=h/f,y={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/g},A=d+2*2,m=f+2*2,v=i.getCanvas("mesh",A,m),w=v.context,S=w.createImageData(d,f);if(e){const P=S.data;for(let _=0,k=P.length;_<k;_+=4)P[_]=e[0],P[_+1]=e[1],P[_+2]=e[2],P[_+3]=255}for(const P of this._figures)mW(S,P,y);return w.putImageData(S,2,2),{canvas:v.canvas,offsetX:a-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){LS(t,this._bbox);const r=new Float32Array(2);if(s===Ke.SHADING)X.singularValueDecompose2dScale(Gt(t),r);else if(this.matrix){X.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;X.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=l}else X.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Ke.SHADING?null:this._background,e.cachedCanvases);return s!==Ke.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class yW extends jT{getPattern(){return"hotpink"}}function vW(n){switch(n[0]){case"RadialAxial":return new pW(n);case"Mesh":return new gW(n);case"Dummy":return new yW}throw new Error(`Unknown IR type: ${n[0]}`)}const HM={COLORED:1,UNCOLORED:2},Aw=class Aw{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t,e){var $,H;const{bbox:i,operatorList:s,paintType:r,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),i2("TilingType: "+o);const d=i[0],f=i[1],p=i[2],g=i[3],y=p-d,A=g-f,m=new Float32Array(2);X.singularValueDecompose2dScale(this.matrix,m);const[v,w]=m;X.singularValueDecompose2dScale(this.baseTransform,m);const S=v*m[0],T=w*m[1];let P=y,_=A,k=!1,L=!1;const D=Math.ceil(u*S),R=Math.ceil(h*T),I=Math.ceil(y*S),B=Math.ceil(A*T);D>=I?P=u:k=!0,R>=B?_=h:L=!0;const F=this.getSizeAndScale(P,this.ctx.canvas.width,S),V=this.getSizeAndScale(_,this.ctx.canvas.height,T),O=t.cachedCanvases.getCanvas("pattern",F.size,V.size),j=O.context,N=l.createCanvasGraphics(j,e);if(N.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(N,r,a),j.translate(-F.scale*d,-V.scale*f),N.transform(0,F.scale,0,0,V.scale,0,0),j.save(),($=N.dependencyTracker)==null||$.save(),this.clipBbox(N,d,f,p,g),N.baseTransform=Gt(N.ctx),N.executeOperatorList(s),N.endDrawing(),(H=N.dependencyTracker)==null||H.restore(),j.restore(),k||L){const W=O.canvas;k&&(P=u),L&&(_=h);const G=this.getSizeAndScale(P,this.ctx.canvas.width,S),Z=this.getSizeAndScale(_,this.ctx.canvas.height,T),dt=G.size,vt=Z.size,ut=t.cachedCanvases.getCanvas("pattern-workaround",dt,vt),lt=ut.context,vi=k?Math.floor(y/u):0,je=L?Math.floor(A/h):0;for(let gt=0;gt<=vi;gt++)for(let oe=0;oe<=je;oe++)lt.drawImage(W,dt*gt,vt*oe,dt,vt,0,0,dt,vt);return{canvas:ut.canvas,scaleX:G.scale,scaleY:Z.scale,offsetX:d,offsetY:f}}return{canvas:O.canvas,scaleX:F.scale,scaleY:V.scale,offsetX:d,offsetY:f}}getSizeAndScale(t,e,i){const s=Math.max(Aw.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,a=r-i;t.ctx.rect(e,i,o,a),X.axialAlignedBoundingBox([e,i,s,r],Gt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case HM.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=a;break;case HM.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new jH(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s,r){let o=i;s!==Ke.SHADING&&(o=X.transform(o,e.baseTransform),this.matrix&&(o=X.transform(o,this.matrix)));const a=this.createPatternCanvas(e,r);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=t.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};z(Aw,"MAX_PATTERN_SIZE",3e3);let RS=Aw;function wW({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Be.isLittleEndian?4278190080:255,[l,u]=o?[r,a]:[a,r],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let g=0;g<s;g++){for(const A=t+h;t<A;t++){const m=t<f?n[t]:255;e[p++]=m&128?u:l,e[p++]=m&64?u:l,e[p++]=m&32?u:l,e[p++]=m&16?u:l,e[p++]=m&8?u:l,e[p++]=m&4?u:l,e[p++]=m&2?u:l,e[p++]=m&1?u:l}if(d===0)continue;const y=t<f?n[t++]:255;for(let A=0;A<d;A++)e[p++]=y&1<<7-A?u:l}return{srcPos:t,destPos:p}}const WM=16,GM=100,xW=15,XM=10,In=16,xb=new DOMMatrix,ui=new Float32Array(2),ju=new Float32Array([1/0,1/0,-1/0,-1/0]);function bW(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,r,o,a){t.transform(e,i,s,r,o,a),this.__originalTransform(e,i,s,r,o,a)},n.setTransform=function(e,i,s,r,o,a){t.setTransform(e,i,s,r,o,a),this.__originalSetTransform(e,i,s,r,o,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,a){t.bezierCurveTo(e,i,s,r,o,a),this.__originalBezierCurveTo(e,i,s,r,o,a)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class AW{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function z1(n,t,e,i,s,r,o,a,l,u){const[h,d,f,p,g,y]=Gt(n);if(d===0&&f===0){const v=o*h+g,w=Math.round(v),S=a*p+y,T=Math.round(S),P=(o+l)*h+g,_=Math.abs(Math.round(P)-w)||1,k=(a+u)*p+y,L=Math.abs(Math.round(k)-T)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),w,T),n.drawImage(t,e,i,s,r,0,0,_,L),n.setTransform(h,d,f,p,g,y),[_,L]}if(h===0&&p===0){const v=a*f+g,w=Math.round(v),S=o*d+y,T=Math.round(S),P=(a+u)*f+g,_=Math.abs(Math.round(P)-w)||1,k=(o+l)*d+y,L=Math.abs(Math.round(k)-T)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,w,T),n.drawImage(t,e,i,s,r,0,0,L,_),n.setTransform(h,d,f,p,g,y),[L,_]}n.drawImage(t,e,i,s,r,o,a,l,u);const A=Math.hypot(h,d),m=Math.hypot(f,p);return[A*l,m*u]}class YM{constructor(t,e,i){z(this,"alphaIsShape",!1);z(this,"fontSize",0);z(this,"fontSizeScale",1);z(this,"textMatrix",null);z(this,"textMatrixScale",1);z(this,"fontMatrix",sS);z(this,"leading",0);z(this,"x",0);z(this,"y",0);z(this,"lineX",0);z(this,"lineY",0);z(this,"charSpacing",0);z(this,"wordSpacing",0);z(this,"textHScale",1);z(this,"textRenderingMode",Ve.FILL);z(this,"textRise",0);z(this,"fillColor","#000000");z(this,"strokeColor","#000000");z(this,"patternFill",!1);z(this,"patternStroke",!1);z(this,"fillAlpha",1);z(this,"strokeAlpha",1);z(this,"lineWidth",1);z(this,"activeSMask",null);z(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ju.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ke.FILL,e=null){const i=this.minMax.slice();if(t===Ke.STROKE){e||Mt("Stroke bounding box must include transform."),X.singularValueDecompose2dScale(e,ui);const s=ui[0]*this.lineWidth/2,r=ui[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=X.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ju,0)}getClippedPathBoundingBox(t=Ke.FILL,e=null){return X.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function KM(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%In,r=(e-s)/In,o=s===0?r:r+1,a=n.createImageData(i,In);let l=0,u;const h=t.data,d=a.data;let f,p,g,y;if(t.kind===Lp.GRAYSCALE_1BPP){const A=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),v=m.length,w=i+7>>3,S=4294967295,T=Be.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<r?In:s,u=0,p=0;p<g;p++){const P=A-l;let _=0;const k=P>w?i:P*8-7,L=k&-8;let D=0,R=0;for(;_<L;_+=8)R=h[l++],m[u++]=R&128?S:T,m[u++]=R&64?S:T,m[u++]=R&32?S:T,m[u++]=R&16?S:T,m[u++]=R&8?S:T,m[u++]=R&4?S:T,m[u++]=R&2?S:T,m[u++]=R&1?S:T;for(;_<k;_++)D===0&&(R=h[l++],D=128),m[u++]=R&D?S:T,D>>=1}for(;u<v;)m[u++]=0;n.putImageData(a,0,f*In)}}else if(t.kind===Lp.RGBA_32BPP){for(p=0,y=i*In*4,f=0;f<r;f++)d.set(h.subarray(l,l+y)),l+=y,n.putImageData(a,0,p),p+=In;f<o&&(y=i*s*4,d.set(h.subarray(l,l+y)),n.putImageData(a,0,p))}else if(t.kind===Lp.RGB_24BPP)for(g=In,y=i*g,f=0;f<o;f++){for(f>=r&&(g=s,y=i*g),u=0,p=y;p--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(a,0,f*In)}else throw new Error(`bad image kind: ${t.kind}`)}function qM(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%In,r=(e-s)/In,o=s===0?r:r+1,a=n.createImageData(i,In);let l=0;const u=t.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?In:s;({srcPos:l}=wW({src:u,srcPos:l,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*In)}}function Nf(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function U1(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function QM(n,t){if(t)return!0;X.singularValueDecompose2dScale(n,ui);const e=Math.fround(ys.pixelRatio*oo.PDF_TO_CSS_UNITS);return ui[0]<=e&&ui[1]<=e}const SW=["butt","round","square"],EW=["miter","round","bevel"],CW={},ZM={};var og,DS,ag,FS,lg,IS;const qT=class qT{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,u,h){x(this,og);x(this,ag);x(this,lg);this.ctx=t,this.current=new YM(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new AW(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(t,e,i=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),U1(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(t,e,i,s,r){var m;const o=t.argsArray,a=t.fnArray;let l=e||0;const u=o.length;if(u===l)return l;const h=u-l>XM&&typeof i=="function",d=h?Date.now()+xW:0;let f=0;const p=this.commonObjs,g=this.objs;let y,A;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,i),l;if(!r||r(l))if(y=a[l],A=o[l]??null,y!==hf.dependency)A===null?this[y](l):this[y](l,...A);else for(const v of A){(m=this.dependencyTracker)==null||m.recordNamedData(v,l);const w=v.startsWith("g_")?p:g;if(!w.has(v))return w.get(v,i),l}if(l++,l===u)return l;if(h&&++f>XM){if(Date.now()>d)return i(),l;f=0}}}endDrawing(){E(this,og,DS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,ag,FS).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=s,u="prescale1",h,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,p=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,a,l,0,0,f,p),t=h.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t,e){var D,R;const i=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,a=this.current.patternFill,l=Gt(i);let u,h,d,f;if((e.bitmap||e.data)&&e.count>1){const I=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),o]),u=this._cachedBitmapsMap.get(I),u||(u=new Map,this._cachedBitmapsMap.set(I,u));const B=u.get(h);if(B&&!a){const F=Math.round(Math.min(l[0],l[2])+l[4]),V=Math.round(Math.min(l[1],l[3])+l[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(t,Ai.transformAndFill),{canvas:B,offsetX:F,offsetY:V}}d=B}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),qM(f.context,e));let p=X.transform(l,[1/s,0,0,-1/r,0,0]);p=X.transform(p,[1,0,0,1,0,-r]);const g=ju.slice();X.axialAlignedBoundingBox([0,0,s,r],p,g);const[y,A,m,v]=g,w=Math.round(m-y)||1,S=Math.round(v-A)||1,T=this.cachedCanvases.getCanvas("fillCanvas",w,S),P=T.context,_=y,k=A;P.translate(-_,-k),P.transform(...p),d||(d=this._scaleImage(f.canvas,xs(P)),d=d.img,u&&a&&u.set(h,d)),P.imageSmoothingEnabled=QM(Gt(P),e.interpolate),z1(P,d,0,0,d.width,d.height,0,0,s,r),P.globalCompositeOperation="source-in";const L=X.transform(xs(P),[1,0,0,1,-_,-k]);return P.fillStyle=a?o.getPattern(i,this,L,Ke.FILL,t):o,P.fillRect(0,0,s,r),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,T.canvas)),(R=this.dependencyTracker)==null||R.recordDependencies(t,Ai.transformAndFill),{canvas:T.canvas,offsetX:Math.round(_),offsetY:Math.round(k)}}setLineWidth(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",t),this.ctx.lineCap=SW[e]}setLineJoin(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",t),this.ctx.lineJoin=EW[e]}setMiterLimit(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var i,s,r,o,a;for(const[l,u]of e)switch(l){case"LW":this.setLineWidth(t,u);break;case"LC":this.setLineCap(t,u);break;case"LJ":this.setLineJoin(t,u);break;case"ML":this.setMiterLimit(t,u);break;case"D":this.setDash(t,u[0],u[1]);break;case"RI":this.setRenderingIntent(t,u);break;case"FL":this.setFlatness(t,u);break;case"Font":this.setFont(t,u[0],u[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Nf(this.suspendedCtx,o),bW(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,a,l,u,h,d){let f=t.canvas,p=l-h,g=u-d;if(o)if(p<0||g<0||p+i>f.width||g+s>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,s),m=A.context;m.drawImage(f,-p,-g),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,i,s),m.globalCompositeOperation="source-over",f=A.canvas,p=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,g,i,s),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,g,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const y=new Path2D;y.rect(l,u,i,s),e.clip(y),e.globalCompositeOperation="destination-in",e.drawImage(f,p,g,i,s,l,u,i,s),e.restore()}save(t){var i;this.inSMaskMode&&Nf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(i=this.dependencyTracker)==null||i.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,r,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",t),this.ctx.transform(e,i,s,r,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,s){let[r]=i;if(!s){r||(r=i[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===hf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=i[0]=new Path2D;for(let a=0,l=r.length;a<l;)switch(r[a++]){case N1.moveTo:o.moveTo(r[a++],r[a++]);break;case N1.lineTo:o.lineTo(r[a++],r[a++]);break;case N1.curveTo:o.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);break;case N1.closePath:o.closePath();break;default:nt(`Unrecognized drawing path operator: ${r[a-1]}`);break}r=o}X.axialAlignedBoundingBox(s,Gt(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const a=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,xs(s),Ke.STROKE,t),a){const l=new Path2D;l.addPath(e,s.getTransform().invertSelf().multiplySelf(a)),e=l}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,Ai.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ke.STROKE,Gt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){var u,h,d;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(t),s.save(),s.fillStyle=r.getPattern(s,this,xs(s),Ke.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(h=this.dependencyTracker)==null||h.recordDependencies(t,Ai.fill),a&&(s.restore(),(d=this.dependencyTracker)==null||d.restore(t)),i&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var i;this.ctx.fill(e),(i=this.dependencyTracker)==null||i.recordDependencies(t,Ai.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=CW}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=ZM}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:u,path:h}of e)h&&s.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(a,l).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||sS,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&nt("Invalid font matrix for font "+e),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",a=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const u=s.italic?"italic":"normal";let h=i;i<WM?h=WM:i>GM&&(h=GM),this.current.fontSizeScale=i/h,this.ctx.font=`${u} ${l} ${h}px ${a}`}setTextRenderingMode(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,i,s,r,o){var m,v,w,S;const a=this.ctx,l=this.current,u=l.font,h=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,f=h&Ve.FILL_STROKE_MASK,p=!!(h&Ve.ADD_TO_PATH_FLAG),g=l.patternFill&&!u.missingFile,y=l.patternStroke&&!u.missingFile;let A;if((u.disableFontFace||p||g||y)&&!u.missingFile&&(A=u.getPathGenerator(this.commonObjs,e)),A&&(u.disableFontFace||g||y)){a.save(),a.translate(i,s),a.scale(d,-d),(m=this.dependencyTracker)==null||m.recordCharacterBBox(t,a,u);let T;if(f===Ve.FILL||f===Ve.FILL_STROKE)if(r){T=a.getTransform(),a.setTransform(...r);const P=E(this,lg,IS).call(this,A,T,r);a.fill(P)}else a.fill(A);if(f===Ve.STROKE||f===Ve.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:P,b:_,c:k,d:L}=T,D=X.inverseTransform(o),R=X.transform([P,_,k,L,0,0],D);X.singularValueDecompose2dScale(R,ui),a.lineWidth*=Math.max(ui[0],ui[1])/d,a.stroke(E(this,lg,IS).call(this,A,T,o))}else a.lineWidth/=d,a.stroke(A);a.restore()}else(f===Ve.FILL||f===Ve.FILL_STROKE)&&(a.fillText(e,i,s),(v=this.dependencyTracker)==null||v.recordCharacterBBox(t,a,u,d,i,s,()=>a.measureText(e))),(f===Ve.STROKE||f===Ve.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(t,a,u,d,i,s,()=>a.measureText(e)).recordDependencies(t,Ai.stroke)),a.strokeText(e,i,s));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Gt(a),x:i,y:s,fontSize:d,path:A}),(S=this.dependencyTracker)==null||S.recordCharacterBBox(t,a,u,d,i,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return rt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){var k,L,D,R;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ai.showText).resetBBox(t),this.current.textRenderingMode&Ve.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(t,e),(k=this.dependencyTracker)==null||k.recordShowTextOperation(t);return}const r=i.fontSize;if(r===0){(L=this.dependencyTracker)==null||L.recordOperation(t);return}const o=this.ctx,a=i.fontSizeScale,l=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,d=i.textHScale*h,f=e.length,p=s.vertical,g=p?1:-1,y=s.defaultVMetrics,A=r*i.fontMatrix[0],m=i.textRenderingMode===Ve.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),h>0?o.scale(d,-1):o.scale(d,1);let v,w;if(i.patternFill){o.save();const I=i.fillColor.getPattern(o,this,xs(o),Ke.FILL,t);v=Gt(o),o.restore(),o.fillStyle=I}if(i.patternStroke){o.save();const I=i.strokeColor.getPattern(o,this,xs(o),Ke.STROKE,t);w=Gt(o),o.restore(),o.strokeStyle=I}let S=i.lineWidth;const T=i.textMatrixScale;if(T===0||S===0){const I=i.textRenderingMode&Ve.FILL_STROKE_MASK;(I===Ve.STROKE||I===Ve.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=T;if(a!==1&&(o.scale(a,a),S/=a),o.lineWidth=S,s.isInvalidPDFjsFont){const I=[];let B=0;for(const V of e)I.push(V.unicode),B+=V.width;const F=I.join("");if(o.fillText(F,0,0),this.dependencyTracker!==null){const V=o.measureText(F);this.dependencyTracker.recordBBox(t,this.ctx,-V.actualBoundingBoxLeft,V.actualBoundingBoxRight,-V.actualBoundingBoxAscent,V.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=B*A*d,o.restore(),this.compose();return}let P=0,_;for(_=0;_<f;++_){const I=e[_];if(typeof I=="number"){P+=g*I*r/1e3;continue}let B=!1;const F=(I.isSpace?u:0)+l,V=I.fontChar,O=I.accent;let j,N,$=I.width;if(p){const G=I.vmetric||y,Z=-(I.vmetric?G[1]:$*.5)*A,dt=G[2]*A;$=G?-G[0]:$,j=Z/a,N=(P+dt)/a}else j=P/a,N=0;let H;if(s.remeasure&&$>0){H=o.measureText(V);const G=H.width*1e3/r*a;if($<G&&this.isFontSubpixelAAEnabled){const Z=$/G;B=!0,o.save(),o.scale(Z,1),j/=Z}else $!==G&&(j+=($-G)/2e3*r/a)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(m&&!O)o.fillText(V,j,N),(D=this.dependencyTracker)==null||D.recordCharacterBBox(t,o,H?{bbox:null}:s,r/a,j,N,()=>H??o.measureText(V));else if(this.paintChar(t,V,j,N,v,w),O){const G=j+r*O.offset.x/a,Z=N-r*O.offset.y/a;this.paintChar(t,O.fontChar,G,Z,v,w)}}const W=p?$*A-F*h:$*A+F*h;P+=W,B&&o.restore()}p?i.y-=P:i.x+=P*d,o.restore(),this.compose(),(R=this.dependencyTracker)==null||R.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,s=this.current,r=s.font,o=s.fontSize,a=s.fontDirection,l=r.vertical?1:-1,u=s.charSpacing,h=s.wordSpacing,d=s.textHScale*a,f=s.fontMatrix||sS,p=e.length,g=s.textRenderingMode===Ve.INVISIBLE;let y,A,m,v;if(g||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(d,a);const w=this.dependencyTracker;for(this.dependencyTracker=w?new kv(w,t):null,y=0;y<p;++y){if(A=e[y],typeof A=="number"){v=l*A*o/1e3,this.ctx.translate(v,0),s.x+=v*d;continue}const S=(A.isSpace?h:0)+u,T=r.charProcOperatorList[A.operatorListId];T?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(T),this.restore()):nt(`Type3 character "${A.operatorListId}" is not available.`);const P=[A.width,0];X.applyTransform(P,f),m=P[0]*o+S,i.translate(m,0),s.x+=m*d}i.restore(),w&&(this.dependencyTracker=w)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,s,r,o,a){var u;const l=new Path2D;l.rect(s,r,o-s,a-r),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(t,this.ctx,s,o,r,a).recordClipBox(t,this.ctx,s,o,r,a),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const s=this.baseTransform||Gt(this.ctx),r={createCanvasGraphics:(o,a)=>new qT(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new kv(this.dependencyTracker,a,!0):null)};i=new RS(e,this.ctx,r,s)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=vW(this.getObject(t,e)),this.cachedPatterns.set(e,s)),i&&(s.matrix=i),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const i=this.ctx;this.save(t);const s=this._getPattern(t,e);i.fillStyle=s.getPattern(i,this,xs(i),Ke.SHADING,t);const r=xs(i);if(r){const{width:a,height:l}=i.canvas,u=ju.slice();X.axialAlignedBoundingBox([0,0,a,l],r,u);const[h,d,f,p]=u;this.ctx.fillRect(h,d,f-h,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ai.transform).recordDependencies(t,Ai.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Mt("Should not call beginInlineImage")}beginImageData(){Mt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Gt(this.ctx),i)){X.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,o,a,l]=i,u=new Path2D;u.rect(r,o,a-r,l-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,a,o,l),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var w;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||i2("TODO: Support non-isolated groups."),e.knockout&&nt("Knockout groups not supported.");const s=Gt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ju.slice();X.axialAlignedBoundingBox(e.bbox,Gt(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=X.intersect(r,o)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-a,1),h=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),p=f.context;p.translate(-a,-l),p.transform(...s);let g=new Path2D;const[y,A,m,v]=e.bbox;if(g.rect(y,A,m-y,v-A),e.matrix){const S=new Path2D;S.addPath(g,new DOMMatrix(e.matrix)),g=S}p.clip(g),e.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(a,l),i.save()),Nf(i,p),this.ctx=p,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Gt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const a=ju.slice();X.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(t,e,i,s,r,o){if(E(this,og,DS).call(this),U1(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const a=i[2]-i[0],l=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=a,i[3]=l,X.singularValueDecompose2dScale(Gt(this.ctx),ui);const{viewportScale:u}=this,h=Math.ceil(a*this.outputScaleX*u),d=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(ui[0],0,0,-ui[1],0,l*ui[1]),U1(this.ctx)}else{U1(this.ctx),this.endPath(t);const u=new Path2D;u.rect(i[0],i[1],a,l),this.ctx.clip(u)}}this.current=new YM(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),E(this,ag,FS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var a;if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const s=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,s=0,r=0,o,a){var d,f,p;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const l=this.ctx;l.save();const u=Gt(l);l.transform(i,s,r,o,0,0);const h=this._createMaskCanvas(t,e);l.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let g=0,y=a.length;g<y;g+=2){const A=X.transform(u,[i,s,r,o,a[g],a[g+1]]);l.drawImage(h.canvas,A[4],A[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,A[4],A[4]+h.canvas.width,A[5],A[5]+h.canvas.height)}l.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,a,l;if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,Ai.transformAndFill);for(const u of e){const{data:h,width:d,height:f,transform:p}=u,g=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=g.context;y.save();const A=this.getObject(t,h,u);qM(y,A),y.globalCompositeOperation="source-in",y.fillStyle=r?s.getPattern(y,this,xs(i),Ke.FILL,t):s,y.fillRect(0,0,d,f),y.restore(),i.save(),i.transform(...p),i.scale(1,-1),z1(i,g.canvas,0,0,d,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){nt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,s,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){nt("Dependent image isn't ready yet");return}const a=o.width,l=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[i,0,0,s,r[h],r[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(t,o,u)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var u;if(!this.contentVisible)return;const i=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/s);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,s).context;KM(d,e),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,xs(r));r.imageSmoothingEnabled=QM(Gt(r),e.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(t).recordBBox(t,r,0,i,-s,0).recordDependencies(t,Ai.imageXObject).recordOperation(t),z1(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,i,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){var o,a,l;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const u=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;KM(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const u of i)s.save(),s.transform(...u.transform),s.scale(1,-1),z1(s,r,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(t,s,0,1,-1,0),s.restore();(l=this.dependencyTracker)==null||l.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ai.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){var o,a;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===ZM?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(a=this.dependencyTracker)==null||a.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Gt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const l=Math.abs(e),u=Math.abs(r);if(l===u)if(t===0)o=a=1/l;else{const h=l*t;o=a=h<1?1/h:1}else if(t===0)o=1/l,a=1/u;else{const h=l*t,d=u*t;o=h<1?1/h:1,a=d<1?1/d:1}}else{const l=Math.abs(e*r-i*s),u=Math.hypot(e,i),h=Math.hypot(s,r);if(t===0)o=h/l,a=u/l;else{const d=t*l;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(t);return}const a=i.getLineDash();e&&i.save(),i.scale(r,o),xb.a=1/r,xb.d=1/o;const l=new Path2D;if(l.addPath(t,xb),a.length>0){const u=Math.max(r,o);i.setLineDash(a.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(l),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};og=new WeakSet,DS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ag=new WeakSet,FS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},lg=new WeakSet,IS=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let Qu=qT;for(const n in hf)Qu.prototype[n]!==void 0&&(Qu.prototype[hf[n]]=Qu.prototype[n]);var Fh,Ih,cg,Nh,vy;const $u=class $u{constructor(t){x(this,Nh);x(this,Fh,void 0);x(this,Ih,void 0);x(this,cg,void 0);b(this,Fh,t),b(this,Ih,new DataView(c(this,Fh))),b(this,cg,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const u of $u.strings){const h=e.encode(t[u]);i[u]=h,s+=4+h.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),a=new DataView(r);let l=0;for(const u of $u.strings){const h=i[u],d=h.length;a.setUint32(l,d),o.set(h,l+4),l+=4+d}return ht(l===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return E(this,Nh,vy).call(this,0)}get fontWeight(){return E(this,Nh,vy).call(this,1)}get italicAngle(){return E(this,Nh,vy).call(this,2)}};Fh=new WeakMap,Ih=new WeakMap,cg=new WeakMap,Nh=new WeakSet,vy=function(t){ht(t<$u.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=c(this,Ih).getUint32(e)+4;const i=c(this,Ih).getUint32(e);return c(this,cg).decode(new Uint8Array(c(this,Fh),e+4,i))},z($u,"strings",["fontFamily","fontWeight","italicAngle"]);let Mv=$u;var Uo,Is,Kl,ql,ip;const zu=class zu{constructor(t){x(this,ql);x(this,Uo,void 0);x(this,Is,void 0);x(this,Kl,void 0);b(this,Uo,t),b(this,Is,new DataView(c(this,Uo))),b(this,Kl,new TextDecoder)}static write(t){const e=new TextEncoder,i={};let s=0;for(const f of zu.strings){const p=e.encode(t[f]);i[f]=p,s+=4+p.length}s+=4;let r,o,a=1+s;t.style&&(r=e.encode(t.style.style),o=e.encode(t.style.weight),a+=4+r.length+4+o.length);const l=new ArrayBuffer(a),u=new Uint8Array(l),h=new DataView(l);let d=0;h.setUint8(d++,t.guessFallback?1:0),h.setUint32(d,0),d+=4,s=0;for(const f of zu.strings){const p=i[f],g=p.length;s+=4+g,h.setUint32(d,g),u.set(p,d+4),d+=4+g}return h.setUint32(d-s-4,s),t.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),ht(d<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(d)}get guessFallback(){return c(this,Is).getUint8(0)!==0}get css(){return E(this,ql,ip).call(this,0)}get loadedName(){return E(this,ql,ip).call(this,1)}get baseFontName(){return E(this,ql,ip).call(this,2)}get src(){return E(this,ql,ip).call(this,3)}get style(){let t=1;t+=4+c(this,Is).getUint32(t);const e=c(this,Is).getUint32(t),i=c(this,Kl).decode(new Uint8Array(c(this,Uo),t+4,e));t+=4+e;const s=c(this,Is).getUint32(t),r=c(this,Kl).decode(new Uint8Array(c(this,Uo),t+4,s));return{style:i,weight:r}}};Uo=new WeakMap,Is=new WeakMap,Kl=new WeakMap,ql=new WeakSet,ip=function(t){ht(t<zu.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=c(this,Is).getUint32(e)+4;const i=c(this,Is).getUint32(e);return c(this,Kl).decode(new Uint8Array(c(this,Uo),e+4,i))},z(zu,"strings",["css","loadedName","baseFontName","src"]);let Lv=zu;var Oh,Bh,jh,Vh,Xn,Ns,ug,Ct,Yn,Xi,$h,wy,Ql,sp;const st=class st{constructor({data:t,extra:e}){x(this,Yn);x(this,$h);x(this,Ql);x(this,Ns,void 0);x(this,ug,void 0);x(this,Ct,void 0);b(this,Ns,t),b(this,ug,new TextDecoder),b(this,Ct,new DataView(c(this,Ns))),e&&Object.assign(this,e)}get black(){return E(this,Yn,Xi).call(this,0)}get bold(){return E(this,Yn,Xi).call(this,1)}get disableFontFace(){return E(this,Yn,Xi).call(this,2)}get fontExtraProperties(){return E(this,Yn,Xi).call(this,3)}get isInvalidPDFjsFont(){return E(this,Yn,Xi).call(this,4)}get isType3Font(){return E(this,Yn,Xi).call(this,5)}get italic(){return E(this,Yn,Xi).call(this,6)}get missingFile(){return E(this,Yn,Xi).call(this,7)}get remeasure(){return E(this,Yn,Xi).call(this,8)}get vertical(){return E(this,Yn,Xi).call(this,9)}get ascent(){return E(this,$h,wy).call(this,0)}get defaultWidth(){return E(this,$h,wy).call(this,1)}get descent(){return E(this,$h,wy).call(this,2)}get bbox(){let t=c(st,Bh);if(c(this,Ct).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<4;s++)i.push(c(this,Ct).getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=c(st,jh);if(c(this,Ct).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<6;s++)i.push(c(this,Ct).getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=c(st,Vh);if(c(this,Ct).getUint8(t)===0)return;t+=1;const i=[];for(let s=0;s<3;s++)i.push(c(this,Ct).getInt16(t,!0)),t+=2;return i}get fallbackName(){return E(this,Ql,sp).call(this,0)}get loadedName(){return E(this,Ql,sp).call(this,1)}get mimetype(){return E(this,Ql,sp).call(this,2)}get name(){return E(this,Ql,sp).call(this,3)}get data(){let t=c(st,Xn);const e=c(this,Ct).getUint32(t);t+=4+e;const i=c(this,Ct).getUint32(t);t+=4+i;const s=c(this,Ct).getUint32(t);t+=4+s;const r=c(this,Ct).getUint32(t);if(r!==0)return new Uint8Array(c(this,Ns),t+4,r)}clearData(){let t=c(st,Xn);const e=c(this,Ct).getUint32(t);t+=4+e;const i=c(this,Ct).getUint32(t);t+=4+i;const s=c(this,Ct).getUint32(t);t+=4+s;const r=c(this,Ct).getUint32(t);new Uint8Array(c(this,Ns),t+4,r).fill(0),c(this,Ct).setUint32(t,0)}get cssFontInfo(){let t=c(st,Xn);const e=c(this,Ct).getUint32(t);t+=4+e;const i=c(this,Ct).getUint32(t);t+=4+i;const s=c(this,Ct).getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(c(this,Ns),t+4,s)),new Mv(r.buffer)}get systemFontInfo(){let t=c(st,Xn);const e=c(this,Ct).getUint32(t);t+=4+e;const i=c(this,Ct).getUint32(t);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(c(this,Ns),t+4,i)),new Lv(s.buffer)}static write(t){const e=t.systemFontInfo?Lv.write(t.systemFontInfo):null,i=t.cssFontInfo?Mv.write(t.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const y of st.strings)r[y]=s.encode(t[y]),o+=4+r[y].length;const a=c(st,Xn)+4+o+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),l=new ArrayBuffer(a),u=new Uint8Array(l),h=new DataView(l);let d=0;const f=st.bools.length;let p=0,g=0;for(let y=0;y<f;y++){const A=t[st.bools[y]];p|=(A===void 0?0:A?2:1)<<g,g+=2,(g===8||y===f-1)&&(h.setUint8(d++,p),p=0,g=0)}ht(d===c(st,Oh),"FontInfo.write: Boolean properties offset mismatch");for(const y of st.numbers)h.setFloat64(d,t[y]),d+=8;if(ht(d===c(st,Bh),"FontInfo.write: Number properties offset mismatch"),t.bbox){h.setUint8(d++,4);for(const y of t.bbox)h.setInt16(d,y,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(ht(d===c(st,jh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){h.setUint8(d++,6);for(const y of t.fontMatrix)h.setFloat64(d,y,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(ht(d===c(st,Vh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){h.setUint8(d++,1);for(const y of t.defaultVMetrics)h.setInt16(d,y,!0),d+=2}else h.setUint8(d++,0),d+=3*2;ht(d===c(st,Xn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(c(st,Xn),0),d+=4;for(const y of st.strings){const A=r[y],m=A.length;h.setUint32(d,m),u.set(A,d+4),d+=4+m}if(h.setUint32(c(st,Xn),d-c(st,Xn)-4),!e)h.setUint32(d,0),d+=4;else{const y=e.byteLength;h.setUint32(d,y),ht(d+4+y<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(e),d+4),d+=4+y}if(!i)h.setUint32(d,0),d+=4;else{const y=i.byteLength;h.setUint32(d,y),ht(d+4+y<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),d+4),d+=4+y}return t.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,t.data.length),u.set(t.data,d+4),d+=4+t.data.length),ht(d<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(d)}};Oh=new WeakMap,Bh=new WeakMap,jh=new WeakMap,Vh=new WeakMap,Xn=new WeakMap,Ns=new WeakMap,ug=new WeakMap,Ct=new WeakMap,Yn=new WeakSet,Xi=function(t){ht(t<st.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,s=c(this,Ct).getUint8(e)>>i&3;return s===0?void 0:s===2},$h=new WeakSet,wy=function(t){return ht(t<st.numbers.length,"Invalid number index"),c(this,Ct).getFloat64(c(st,Oh)+t*8)},Ql=new WeakSet,sp=function(t){ht(t<st.strings.length,"Invalid string index");let e=c(st,Xn)+4;for(let r=0;r<t;r++)e+=c(this,Ct).getUint32(e)+4;const i=c(this,Ct).getUint32(e),s=new Uint8Array(i);return s.set(new Uint8Array(c(this,Ns),e+4,i)),c(this,ug).decode(s)},z(st,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),z(st,"numbers",["ascent","defaultWidth","descent"]),z(st,"strings",["fallbackName","loadedName","mimetype","name"]),x(st,Oh,Math.ceil(st.bools.length*2/8)),x(st,Bh,c(st,Oh)+st.numbers.length*8),x(st,jh,c(st,Bh)+1+2*4),x(st,Vh,c(st,jh)+1+8*6),x(st,Xn,c(st,Vh)+1+2*3);let NS=st;var hg,dg;class ji{static get workerPort(){return c(this,hg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,hg,t)}static get workerSrc(){return c(this,dg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,dg,t)}}hg=new WeakMap,dg=new WeakMap,x(ji,hg,null),x(ji,dg,"");var zh,fg;class TW{constructor({parsedData:t,rawData:e}){x(this,zh,void 0);x(this,fg,void 0);b(this,zh,t),b(this,fg,e)}getRaw(){return c(this,fg)}get(t){return c(this,zh).get(t)??null}[Symbol.iterator](){return c(this,zh).entries()}}zh=new WeakMap,fg=new WeakMap;const mu=Symbol("INTERNAL");var pg,mg,gg,Uh;class PW{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){x(this,pg,!1);x(this,mg,!1);x(this,gg,!1);x(this,Uh,!0);b(this,pg,!!(t&li.DISPLAY)),b(this,mg,!!(t&li.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(c(this,gg))return c(this,Uh);if(!c(this,Uh))return!1;const{print:t,view:e}=this.usage;return c(this,pg)?(e==null?void 0:e.viewState)!=="OFF":c(this,mg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==mu&&Mt("Internal method `_setVisible` called."),b(this,gg,i),b(this,Uh,e)}}pg=new WeakMap,mg=new WeakMap,gg=new WeakMap,Uh=new WeakMap;var Ho,Tt,Hh,Wh,yg,OS;class _W{constructor(t,e=li.DISPLAY){x(this,yg);x(this,Ho,null);x(this,Tt,new Map);x(this,Hh,null);x(this,Wh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Wh,t.order);for(const i of t.groups)c(this,Tt).set(i.id,new PW(e,i));if(t.baseState==="OFF")for(const i of c(this,Tt).values())i._setVisible(mu,!1);for(const i of t.on)c(this,Tt).get(i)._setVisible(mu,!0);for(const i of t.off)c(this,Tt).get(i)._setVisible(mu,!1);b(this,Hh,this.getHash())}}isVisible(t){if(c(this,Tt).size===0)return!0;if(!t)return i2("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,Tt).has(t.id)?c(this,Tt).get(t.id).visible:(nt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,yg,OS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,Tt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(c(this,Tt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,Tt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!c(this,Tt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,Tt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(!c(this,Tt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,Tt).has(e))return nt(`Optional content group not found: ${e}`),!0;if(c(this,Tt).get(e).visible)return!1}return!0}return nt(`Unknown optional content policy ${t.policy}.`),!0}return nt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=c(this,Tt).get(t);if(!s){nt(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==t&&((r=c(this,Tt).get(a))==null||r._setVisible(mu,!1,!0));s._setVisible(mu,!!e,!0),b(this,Ho,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=c(this,Tt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}b(this,Ho,null)}get hasInitialVisibility(){return c(this,Hh)===null||this.getHash()===c(this,Hh)}getOrder(){return c(this,Tt).size?c(this,Wh)?c(this,Wh).slice():[...c(this,Tt).keys()]:null}getGroup(t){return c(this,Tt).get(t)||null}getHash(){if(c(this,Ho)!==null)return c(this,Ho);const t=new DF;for(const[e,i]of c(this,Tt))t.update(`${e}:${i.visible}`);return b(this,Ho,t.hexdigest())}[Symbol.iterator](){return c(this,Tt).entries()}}Ho=new WeakMap,Tt=new WeakMap,Hh=new WeakMap,Wh=new WeakMap,yg=new WeakSet,OS=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=E(this,yg,OS).call(this,r);else if(c(this,Tt).has(r))o=c(this,Tt).get(r).visible;else return nt(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class kW{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ht(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});ht(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ht(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new MW(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new LW(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class MW{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=r2(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class LW{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function RW(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=a(e);return h=unescape(h),h=l(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=a(e);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=n1(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,y,A,m]=f;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[A,m]}const g=[];for(let y=0;y<d.length&&y in d;++y){let[A,m]=d[y];m=a(m),A&&(m=unescape(m),y===0&&(m=l(m))),g.push(m)}return g.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return s(f,g)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,A){return String.fromCharCode(parseInt(A,16))}),s(f,g);try{g=atob(g)}catch{}return s(f,g)})}return""}function GF(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function o2(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function XF({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function YF(n){const t=n.get("Content-Disposition");if(t){let e=RW(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(r2(e))return e}return null}function o1(n,t){return new om(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function KF(n){return n===200||n===206}function qF(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function QF(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(nt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class DW{constructor(t){z(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=GF(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ht(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new FW(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new IW(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class FW{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,qF(i,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=o2(r.url),!KF(r.status))throw o1(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=XF({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=YF(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ro("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:QF(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class IW{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const o=s.url;fetch(o,qF(r,this._withCredentials,this._abortController)).then(a=>{const l=o2(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!KF(a.status))throw o1(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:QF(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bb=200,Ab=206;function NW(n){const t=n.response;return typeof t!="string"?t:n1(t).buffer}class OW{constructor({url:t,httpHeaders:e,withCredentials:i}){z(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=GF(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Ab):s.expectedStatus=bb,e.responseType="arraybuffer",ht(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||bb;if(!(r===bb&&i.expectedStatus===Ab)&&r!==i.expectedStatus){i.onError(s.status);return}const a=NW(s);if(r===Ab){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:a}):(nt('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class BW{constructor(t){this._source=t,this._manager=new OW(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ht(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new jW(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new VW(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class jW{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=o2(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=XF({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=YF(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=o1(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class VW{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=o2((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=o1(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $W=/^[a-z][a-z0-9\-+.]+:/i;function zW(n){if($W.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class UW{constructor(t){this.source=t,this.url=zW(t.url),ht(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ht(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new HW(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new WW(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class HW{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=o1(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ro("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class WW{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Of=Symbol("INITIAL_DATA");var Kn,vg,BS;class ZF{constructor(){x(this,vg);x(this,Kn,Object.create(null))}get(t,e=null){if(e){const s=E(this,vg,BS).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=c(this,Kn)[t];if(!i||i.data===Of)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=c(this,Kn)[t];return!!e&&e.data!==Of}delete(t){const e=c(this,Kn)[t];return!e||e.data===Of?!1:(delete c(this,Kn)[t],!0)}resolve(t,e=null){const i=E(this,vg,BS).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in c(this,Kn)){const{data:i}=c(this,Kn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}b(this,Kn,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Kn)){const{data:e}=c(this,Kn)[t];e!==Of&&(yield[t,e])}}}Kn=new WeakMap,vg=new WeakSet,BS=function(t){var e;return(e=c(this,Kn))[t]||(e[t]={...Promise.withResolvers(),data:Of})};const GW=1e5,JM=30;var T3,Wo,Rn,wg,xg,Zl,Tr,bg,Ag,Jl,Gh,Xh,Go,Yh,Sg,Kh,tc,Eg,Cg,zt,qh,ec,Tg,Xo,Qh,Sw,JF,Ew,tI,Pg,jS,Zh,xy,_g,VS,Cw,eI,Tw,nI;let um=(zt=class{constructor({textContentSource:t,container:e,viewport:i}){x(this,Sw);x(this,Ew);x(this,Pg);x(this,Wo,Promise.withResolvers());x(this,Rn,null);x(this,wg,!1);x(this,xg,!!((T3=globalThis.FontInspector)!=null&&T3.enabled));x(this,Zl,null);x(this,Tr,null);x(this,bg,0);x(this,Ag,0);x(this,Jl,null);x(this,Gh,null);x(this,Xh,0);x(this,Go,0);x(this,Yh,Object.create(null));x(this,Sg,[]);x(this,Kh,null);x(this,tc,[]);x(this,Eg,new WeakMap);x(this,Cg,null);var l;if(t instanceof ReadableStream)b(this,Kh,t);else if(typeof t=="object")b(this,Kh,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Rn,b(this,Gh,e)),b(this,Go,i.scale*ys.pixelRatio),b(this,Xh,i.rotation),b(this,Tr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;b(this,Cg,[1,0,0,-1,-o,a+r]),b(this,Ag,s),b(this,bg,r),E(l=zt,Cw,eI).call(l),Va(e,i),c(this,Wo).promise.finally(()=>{c(zt,Qh).delete(this),b(this,Tr,null),b(this,Yh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Be.platform;return rt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Jl).read().then(({value:e,done:i})=>{if(i){c(this,Wo).resolve();return}c(this,Zl)??b(this,Zl,e.lang),Object.assign(c(this,Yh),e.styles),E(this,Sw,JF).call(this,e.items),t()},c(this,Wo).reject)};return b(this,Jl,c(this,Kh).getReader()),c(zt,Qh).add(this),t(),c(this,Wo).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*ys.pixelRatio,s=t.rotation;if(s!==c(this,Xh)&&(e==null||e(),b(this,Xh,s),Va(c(this,Gh),{rotation:s})),i!==c(this,Go)){e==null||e(),b(this,Go,i);const o={div:null,properties:null,ctx:E(r=zt,Zh,xy).call(r,c(this,Zl))};for(const a of c(this,tc))o.properties=c(this,Eg).get(a),o.div=a,E(this,Pg,jS).call(this,o)}}cancel(){var e;const t=new ro("TextLayer task cancelled.");(e=c(this,Jl))==null||e.cancel(t).catch(()=>{}),b(this,Jl,null),c(this,Wo).reject(t)}get textDivs(){return c(this,tc)}get textContentItemsStr(){return c(this,Sg)}static cleanup(){if(!(c(this,Qh).size>0)){c(this,qh).clear();for(const{canvas:t}of c(this,ec).values())t.remove();c(this,ec).clear()}}},Wo=new WeakMap,Rn=new WeakMap,wg=new WeakMap,xg=new WeakMap,Zl=new WeakMap,Tr=new WeakMap,bg=new WeakMap,Ag=new WeakMap,Jl=new WeakMap,Gh=new WeakMap,Xh=new WeakMap,Go=new WeakMap,Yh=new WeakMap,Sg=new WeakMap,Kh=new WeakMap,tc=new WeakMap,Eg=new WeakMap,Cg=new WeakMap,qh=new WeakMap,ec=new WeakMap,Tg=new WeakMap,Xo=new WeakMap,Qh=new WeakMap,Sw=new WeakSet,JF=function(t){var s,r;if(c(this,wg))return;(r=c(this,Tr)).ctx??(r.ctx=E(s=zt,Zh,xy).call(s,c(this,Zl)));const e=c(this,tc),i=c(this,Sg);for(const o of t){if(e.length>GW){nt("Ignoring additional textDivs for performance reasons."),b(this,wg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,Rn);b(this,Rn,document.createElement("span")),c(this,Rn).classList.add("markedContent"),o.id&&c(this,Rn).setAttribute("id",`${o.id}`),a.append(c(this,Rn))}else o.type==="endMarkedContent"&&b(this,Rn,c(this,Rn).parentNode);continue}i.push(o.str),E(this,Ew,tI).call(this,o)}},Ew=new WeakSet,tI=function(t){var y;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,tc).push(e);const s=X.transform(c(this,Cg),t.transform);let r=Math.atan2(s[1],s[0]);const o=c(this,Yh)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=c(this,xg)&&o.fontSubstitution||o.fontFamily;a=zt.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),u=l*E(y=zt,Tw,nI).call(y,a,o,c(this,Zl));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;c(this,Rn)===c(this,Gh)?(p.left=`${(100*h/c(this,Ag)).toFixed(2)}%`,p.top=`${(100*d/c(this,bg)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c(zt,Xo)*l).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,xg)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);A!==m&&Math.max(A,m)/Math.min(A,m)>1.5&&(g=!0)}if(g&&(i.canvasWidth=o.vertical?t.height:t.width),c(this,Eg).set(e,i),c(this,Tr).div=e,c(this,Tr).properties=i,E(this,Pg,jS).call(this,c(this,Tr)),i.hasText&&c(this,Rn).append(e),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),c(this,Rn).append(A)}},Pg=new WeakSet,jS=function(t){var a;const{div:e,properties:i,ctx:s}=t,{style:r}=e;let o="";if(c(zt,Xo)>1&&(o=`scale(${1/c(zt,Xo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:h}=i;E(a=zt,_g,VS).call(a,s,h*c(this,Go),l);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*c(this,Go)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Zh=new WeakSet,xy=function(t=null){let e=c(this,ec).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,ec).set(t,e),c(this,Tg).set(e,{size:0,family:""})}return e},_g=new WeakSet,VS=function(t,e,i){const s=c(this,Tg).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},Cw=new WeakSet,eI=function(){if(c(this,Xo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,Xo,t.getBoundingClientRect().height),t.remove()},Tw=new WeakSet,nI=function(t,e,i){const s=c(this,qh).get(t);if(s)return s;const r=E(this,Zh,xy).call(this,i);r.canvas.width=r.canvas.height=JM,E(this,_g,VS).call(this,r,JM,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return a?u=a/(a+l):(Be.platform.isFirefox&&nt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),c(this,qh).set(t,u),u},x(zt,Zh),x(zt,_g),x(zt,Cw),x(zt,Tw),x(zt,qh,new Map),x(zt,ec,new Map),x(zt,Tg,new WeakMap),x(zt,Xo,null),x(zt,Qh,new Set),zt);const XW=100;function VT(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new $S,{docId:e}=t,i=n.url?eW(n.url):null,s=n.data?nW(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof $T?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof df?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!s1(n.docBaseUrl)?n.docBaseUrl:null,p=B1(n.cMapUrl),g=n.cMapPacked!==!1,y=n.CMapReaderFactory||(xn?cW:jM),A=B1(n.iccUrl),m=B1(n.standardFontDataUrl),v=n.StandardFontDataFactory||(xn?uW:VM),w=B1(n.wasmUrl),S=n.WasmFactory||(xn?hW:$M),T=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,k=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!xn,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!xn&&(Be.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:xn,I=n.fontExtraProperties===!0,B=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,V=n.disableRange===!0,O=n.disableStream===!0,j=n.disableAutoFetch===!0,N=n.pdfBug===!0,$=n.CanvasFactory||(xn?lW:rW),H=n.FilterFactory||(xn?aW:oW),W=n.enableHWA===!0,G=n.useWasm!==!1,Z=l?l.length:n.length??NaN,dt=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!xn&&!R,vt=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(y===jM&&v===VM&&S===$M&&p&&m&&w&&Gf(p,document.baseURI)&&Gf(m,document.baseURI)&&Gf(w,document.baseURI)),ut=null;NH(d);const lt={canvasFactory:new $({ownerDocument:F,enableHWA:W}),filterFactory:new H({docId:e,ownerDocument:F}),cMapReaderFactory:vt?null:new y({baseUrl:p,isCompressed:g}),standardFontDataFactory:vt?null:new v({baseUrl:m}),wasmFactory:vt?null:new S({baseUrl:w})};h||(h=df.create({verbosity:d,port:ji.workerPort}),t._worker=h);const vi={docId:e,apiVersion:"5.4.296",data:s,password:a,disableAutoFetch:j,rangeChunkSize:u,length:Z,docBaseUrl:f,enableXfa:B,evaluatorOptions:{maxImageSize:P,disableFontFace:R,ignoreErrors:T,isEvalSupported:_,isOffscreenCanvasSupported:k,isImageDecoderSupported:L,canvasMaxAreaInBytes:D,fontExtraProperties:I,useSystemFonts:dt,useWasm:G,useWorkerFetch:vt,cMapUrl:p,iccUrl:A,standardFontDataUrl:m,wasmUrl:w}},je={ownerDocument:F,pdfBug:N,styleElement:ut,loadingParams:{disableAutoFetch:j,enableXfa:B}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const gt=h.messageHandler.sendWithPromise("GetDocRequest",vi,s?[s.buffer]:null);let oe;if(l)oe=new kW(l,{disableRange:V,disableStream:O});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const vs=Gf(i)?DW:xn?UW:BW;oe=new vs({url:i,length:Z,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:V,disableStream:O})}return gt.then(vs=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const yt=new Zf(e,vs,h.port),Bt=new qW(yt,t,oe,je,lt,W);t._transport=Bt,yt.send("Ready",null)})}).catch(t._capability.reject),t}var Pw;const _w=class _w{constructor(){z(this,"_capability",Promise.withResolvers());z(this,"_transport",null);z(this,"_worker",null);z(this,"docId",`d${xe(_w,Pw)._++}`);z(this,"destroyed",!1);z(this,"onPassword",null);z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Pw=new WeakMap,x(_w,Pw,0);let $S=_w;var nc,kg,Mg,Lg,Rg,P3;let $T=(P3=class{constructor(t,e,i=!1,s=null){x(this,nc,Promise.withResolvers());x(this,kg,[]);x(this,Mg,[]);x(this,Lg,[]);x(this,Rg,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){c(this,Rg).push(t)}addProgressListener(t){c(this,Lg).push(t)}addProgressiveReadListener(t){c(this,Mg).push(t)}addProgressiveDoneListener(t){c(this,kg).push(t)}onDataRange(t,e){for(const i of c(this,Rg))i(t,e)}onDataProgress(t,e){c(this,nc).promise.then(()=>{for(const i of c(this,Lg))i(t,e)})}onDataProgressiveRead(t){c(this,nc).promise.then(()=>{for(const e of c(this,Mg))e(t)})}onDataProgressiveDone(){c(this,nc).promise.then(()=>{for(const t of c(this,kg))t()})}transportReady(){c(this,nc).resolve()}requestDataRange(t,e){Mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},nc=new WeakMap,kg=new WeakMap,Mg=new WeakMap,Lg=new WeakMap,Rg=new WeakMap,P3);class YW{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Pr,ic,rp;class KW{constructor(t,e,i,s=!1){x(this,ic);x(this,Pr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new RM:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new ZF,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new i1({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:r=Ks.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:g=null}){var L,D,R;(L=this._stats)==null||L.time("Overall");const y=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:A,cacheKey:m}=y;b(this,Pr,!1),l||(l=this._transport.getOptionalContentConfig(A));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const w=!!(A&li.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(y));const S=!!(this._pdfBug&&((R=globalThis.StepperManager)!=null&&R.enabled)),T=!this.recordedBBoxes&&(p||S),P=I=>{var B,F;if(v.renderTasks.delete(_),T){const V=(B=_.gfx)==null?void 0:B.dependencyTracker.take();V&&(_.stepper&&_.stepper.setOperatorBBoxes(V,_.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=V))}w&&b(this,Pr,!0),E(this,ic,rp).call(this),I?(_.capability.reject(I),this._abortOperatorList({intentState:v,reason:I instanceof Error?I:new Error(I)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(F=globalThis.Stats)!=null&&F.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new zS({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:T?new fW(e,v.operatorList.length,S):null,viewport:i,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:g});(v.renderTasks||(v.renderTasks=new Set)).add(_);const k=_.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([I,B])=>{var F;if(this.destroyed){P();return}if((F=this._stats)==null||F.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:I,optionalContentConfig:B}),_.operatorListChanged()}).catch(P),k}getOperatorList({intent:t="display",annotationMode:e=Ks.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>am.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),b(this,Pr,!1),Promise.all(t)}cleanup(t=!1){b(this,Pr,!0);const e=E(this,ic,rp).call(this);return t&&e&&this._stats&&(this._stats=new RM),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,ic,rp).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,ic,rp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof s2){let s=XW;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new ro(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Pr=new WeakMap,ic=new WeakSet,rp=function(){if(!c(this,Pr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Pr,!1),!0};var Yo,is,_r,sc,kw,rc,oc,Jh,by,Mw,iI,Lw,sI,ac,op,td,Ay;const jt=class jt{constructor({name:t=null,port:e=null,verbosity:i=OH()}={}){x(this,Jh);x(this,Mw);x(this,Lw);x(this,ac);x(this,Yo,Promise.withResolvers());x(this,is,null);x(this,_r,null);x(this,sc,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(c(jt,oc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(jt,oc).set(e,this),E(this,Mw,iI).call(this,e)}else E(this,Lw,sI).call(this)}get promise(){return c(this,Yo).promise}get port(){return c(this,_r)}get messageHandler(){return c(this,is)}destroy(){var t,e;this.destroyed=!0,(t=c(this,sc))==null||t.terminate(),b(this,sc,null),c(jt,oc).delete(c(this,_r)),b(this,_r,null),(e=c(this,is))==null||e.destroy(),b(this,is,null)}static create(t){const e=c(this,oc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new jt(t)}static get workerSrc(){if(ji.workerSrc)return ji.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return rt(this,"_setupFakeWorkerGlobal",(async()=>c(this,td,Ay)?c(this,td,Ay):(await IH(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Yo=new WeakMap,is=new WeakMap,_r=new WeakMap,sc=new WeakMap,kw=new WeakMap,rc=new WeakMap,oc=new WeakMap,Jh=new WeakSet,by=function(){c(this,Yo).resolve(),c(this,is).send("configure",{verbosity:this.verbosity})},Mw=new WeakSet,iI=function(t){b(this,_r,t),b(this,is,new Zf("main","worker",t)),c(this,is).on("ready",()=>{}),E(this,Jh,by).call(this)},Lw=new WeakSet,sI=function(){if(c(jt,rc)||c(jt,td,Ay)){E(this,ac,op).call(this);return}let{workerSrc:t}=jt;try{jt._isSameOrigin(window.location,t)||(t=jt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Zf("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?c(this,Yo).reject(new Error("Worker was destroyed")):E(this,ac,op).call(this)},r=new AbortController;e.addEventListener("error",()=>{c(this,sc)||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}b(this,is,i),b(this,_r,e),b(this,sc,e),E(this,Jh,by).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{E(this,ac,op).call(this)}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{i2("The worker has been disabled.")}E(this,ac,op).call(this)},ac=new WeakSet,op=function(){c(jt,rc)||(nt("Setting up fake worker."),b(jt,rc,!0)),jt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,Yo).reject(new Error("Worker was destroyed"));return}const e=new sW;b(this,_r,e);const i=`fake${xe(jt,kw)._++}`,s=new Zf(i+"_worker",i,e);t.setup(s,e),b(this,is,new Zf(i,i+"_worker",e)),E(this,Jh,by).call(this)}).catch(t=>{c(this,Yo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},td=new WeakSet,Ay=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},x(jt,td),x(jt,kw,0),x(jt,rc,!1),x(jt,oc,new WeakMap),xn&&(b(jt,rc,!0),ji.workerSrc||(ji.workerSrc="./pdf.worker.mjs")),jt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},jt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},jt.fromPort=t=>{if(GH("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return jt.create(t)};let df=jt;var kr,Os,ed,nd,Mr,lc,ap;class qW{constructor(t,e,i,s,r,o){x(this,lc);x(this,kr,new Map);x(this,Os,new Map);x(this,ed,new Map);x(this,nd,new Map);x(this,Mr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new ZF,this.fontLoader=new JH({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return rt(this,"annotationStorage",new OT)}getRenderingIntent(t,e=Ks.ENABLE,i=null,s=!1,r=!1){let o=li.DISPLAY,a=CS;switch(t){case"any":o=li.ANY;break;case"display":break;case"print":o=li.PRINT;break;default:nt(`getRenderingIntent - invalid intent: ${t}`)}const l=o&li.PRINT&&i instanceof IF?i:this.annotationStorage;switch(e){case Ks.DISABLE:o+=li.ANNOTATIONS_DISABLE;break;case Ks.ENABLE:break;case Ks.ENABLE_FORMS:o+=li.ANNOTATIONS_FORMS;break;case Ks.ENABLE_STORAGE:o+=li.ANNOTATIONS_STORAGE,a=l.serializable;break;default:nt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=li.IS_EDITING),r&&(o+=li.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,Mr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of c(this,Os).values())t.push(s._destroy());c(this,Os).clear(),c(this,ed).clear(),c(this,nd).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,kr).clear(),this.filterFactory.destroy(),um.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new ro("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{ht(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}ht(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{ht(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}ht(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new YW(i,this))}),t.on("DocException",i=>{e._capability.reject(Tn(i))}),t.on("PasswordRequest",i=>{b(this,Mr,Promise.withResolvers());try{if(!e.onPassword)throw Tn(i);const s=r=>{r instanceof Error?c(this,Mr).reject(r):c(this,Mr).resolve({password:r})};e.onPassword(s,i.code)}catch(s){c(this,Mr).reject(s)}return c(this,Mr).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,Os).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const d=r.error;nt(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const a=new NS(r),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new tW(a,l,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=r;ht(h,"The imageRef must be defined.");for(const d of c(this,Os).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var l;if(this.destroyed)return;const a=c(this,Os).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&nt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=c(this,ed).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,nd).set(r.refStr,t);const o=new KW(e,r,this,this._params.pdfBug);return c(this,Os).set(e,o),o});return c(this,ed).set(e,s),s}getPageIndex(t){return TS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,lc,ap).call(this,"GetFieldObjects")}hasJSActions(){return E(this,lc,ap).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return E(this,lc,ap).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,lc,ap).call(this,"GetOptionalContentConfig").then(e=>new _W(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,kr).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new TW(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,kr).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,Os).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,kr).clear(),this.filterFactory.destroy(!0),um.cleanup()}}cachedPageNumber(t){if(!TS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,nd).get(e)??null}}kr=new WeakMap,Os=new WeakMap,ed=new WeakMap,nd=new WeakMap,Mr=new WeakMap,lc=new WeakSet,ap=function(t,e=null){const i=c(this,kr).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return c(this,kr).set(t,s),s};var Ko;class QW{constructor(t){x(this,Ko,null);z(this,"onContinue",null);z(this,"onError",null);b(this,Ko,t)}get promise(){return c(this,Ko).capability.promise}cancel(t=0){c(this,Ko).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,Ko).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,Ko);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ko=new WeakMap;var qo,cc;const ol=class ol{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:g=null}){x(this,qo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new QW(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=g}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,u;if(this.cancelled)return;if(this._canvas){if(c(ol,cc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(ol,cc).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Qu(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(t=null,e=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,qo)&&(window.cancelAnimationFrame(c(this,qo)),b(this,qo,null)),c(ol,cc).delete(this._canvas),t||(t=new s2(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,qo,window.requestAnimationFrame(()=>{b(this,qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(ol,cc).delete(this._canvas),this.callback())))}};qo=new WeakMap,cc=new WeakMap,x(ol,cc,new WeakSet);let zS=ol;const rI="5.4.296",oI="f56dc8601";var qn,uc,id,Se,Dg,sd,Lr,Fg,Qo,ss,Ig,Ng,US,Og,HS,Bg,WS,Rr,nl,Rw,aI,Bs,po;const Pn=class Pn{constructor({editor:t=null,uiManager:e=null}){x(this,Ng);x(this,Og);x(this,Bg);x(this,Rr);x(this,Rw);x(this,Bs);x(this,qn,null);x(this,uc,null);x(this,id,void 0);x(this,Se,null);x(this,Dg,!1);x(this,sd,!1);x(this,Lr,null);x(this,Fg,void 0);x(this,Qo,null);x(this,ss,null);var i,s;t?(b(this,sd,!1),b(this,Lr,t)):b(this,sd,!0),b(this,ss,(t==null?void 0:t._uiManager)||e),b(this,Fg,c(this,ss)._eventBus),b(this,id,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((s=c(this,ss))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(Pn,Ig)||b(Pn,Ig,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return rt(this,"_keyboardManager",new r1([[["Escape","mac+Escape"],Pn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Pn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Pn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Pn.prototype._moveToPrevious],[["Home","mac+Home"],Pn.prototype._moveToBeginning],[["End","mac+End"],Pn.prototype._moveToEnd]]))}renderButton(){const t=b(this,qn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",c(this,Lr)&&(t.ariaControls=`${c(this,Lr).id}_colorpicker_dropdown`);const e=c(this,ss)._signal;t.addEventListener("click",E(this,Rr,nl).bind(this),{signal:e}),t.addEventListener("keydown",E(this,Bg,WS).bind(this),{signal:e});const i=b(this,uc,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=c(this,id),t.append(i),t}renderMainDropdown(){const t=b(this,Se,E(this,Ng,US).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===c(this,qn)){E(this,Rr,nl).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,Og,HS).call(this,e,t)}_moveToNext(t){var e,i;if(!c(this,Bs,po)){E(this,Rr,nl).call(this,t);return}if(t.target===c(this,qn)){(e=c(this,Se).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=c(this,Se))==null?void 0:e.firstChild)||t.target===c(this,qn)){c(this,Bs,po)&&this._hideDropdownFromKeyboard();return}c(this,Bs,po)||E(this,Rr,nl).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!c(this,Bs,po)){E(this,Rr,nl).call(this,t);return}(e=c(this,Se).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,Bs,po)){E(this,Rr,nl).call(this,t);return}(e=c(this,Se).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,Se))==null||t.classList.add("hidden"),c(this,qn).ariaExpanded="false",(e=c(this,Qo))==null||e.abort(),b(this,Qo,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,sd)){if(!c(this,Bs,po)){(t=c(this,Lr))==null||t.unselect();return}this.hideDropdown(),c(this,qn).focus({preventScroll:!0,focusVisible:c(this,Dg)})}}updateColor(t){if(c(this,uc)&&(c(this,uc).style.backgroundColor=t),!c(this,Se))return;const e=c(this,ss).highlightColors.values();for(const i of c(this,Se).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=c(this,qn))==null||t.remove(),b(this,qn,null),b(this,uc,null),(e=c(this,Se))==null||e.remove(),b(this,Se,null)}};qn=new WeakMap,uc=new WeakMap,id=new WeakMap,Se=new WeakMap,Dg=new WeakMap,sd=new WeakMap,Lr=new WeakMap,Fg=new WeakMap,Qo=new WeakMap,ss=new WeakMap,Ig=new WeakMap,Ng=new WeakSet,US=function(){const t=document.createElement("div"),e=c(this,ss)._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Lr)&&(t.id=`${c(this,Lr).id}_colorpicker_dropdown`);for(const[i,s]of c(this,ss).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",c(Pn,Ig)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===c(this,id),r.addEventListener("click",E(this,Og,HS).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",E(this,Bg,WS).bind(this),{signal:e}),t},Og=new WeakSet,HS=function(t,e){e.stopPropagation(),c(this,Fg).dispatch("switchannotationeditorparams",{source:this,type:ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Bg=new WeakSet,WS=function(t){Pn._keyboardManager.exec(this,t)},Rr=new WeakSet,nl=function(t){if(c(this,Bs,po)){this.hideDropdown();return}if(b(this,Dg,t.detail===0),c(this,Qo)||(b(this,Qo,new AbortController),window.addEventListener("pointerdown",E(this,Rw,aI).bind(this),{signal:c(this,ss).combinedSignal(c(this,Qo))})),c(this,qn).ariaExpanded="true",c(this,Se)){c(this,Se).classList.remove("hidden");return}const e=b(this,Se,E(this,Ng,US).call(this));c(this,qn).append(e)},Rw=new WeakSet,aI=function(t){var e;(e=c(this,Se))!=null&&e.contains(t.target)||this.hideDropdown()},Bs=new WeakSet,po=function(){return c(this,Se)&&!c(this,Se).classList.contains("hidden")},x(Pn,Ig,null);let hm=Pn;var js,jg,rd,Vg;const al=class al{constructor(t){x(this,js,null);x(this,jg,null);x(this,rd,null);b(this,jg,t),b(this,rd,t._uiManager),c(al,Vg)||b(al,Vg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,js))return c(this,js);const{editorType:t,colorType:e,colorValue:i}=c(this,jg),s=b(this,js,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",c(al,Vg)[t]),s.addEventListener("input",()=>{c(this,rd).updateParams(e,s.value)},{signal:c(this,rd)._signal}),s}update(t){c(this,js)&&(c(this,js).value=t)}destroy(){var t;(t=c(this,js))==null||t.remove(),b(this,js,null)}hideDropdown(){}};js=new WeakMap,jg=new WeakMap,rd=new WeakMap,Vg=new WeakMap,x(al,Vg,null);let Rv=al;function t3(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Bf(n){return Math.max(0,Math.min(255,255*n))}class e3{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Bf(t),[t,t,t]}static G_HTML([t]){const e=t3(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Bf)}static RGB_HTML(t){return`#${t.map(t3).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[Bf(1-Math.min(1,t+s)),Bf(1-Math.min(1,i+s)),Bf(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class ZW{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Mt("Abstract method `_createSVG` called.")}}class dm extends ZW{_createSVG(t){return document.createElementNS(nr,t)}}const JW=9,Qc=new WeakSet,tG=new Date().getTimezoneOffset()*60*1e3;class n3{static create(t){switch(t.data.annotationType){case ae.LINK:return new zT(t);case ae.TEXT:return new nG(t);case ae.WIDGET:switch(t.data.fieldType){case"Tx":return new iG(t);case"Btn":return t.data.radioButton?new uI(t):t.data.checkBox?new rG(t):new oG(t);case"Ch":return new aG(t);case"Sig":return new sG(t)}return new su(t);case ae.POPUP:return new XS(t);case ae.FREETEXT:return new mI(t);case ae.LINE:return new cG(t);case ae.SQUARE:return new uG(t);case ae.CIRCLE:return new hG(t);case ae.POLYLINE:return new gI(t);case ae.CARET:return new fG(t);case ae.INK:return new UT(t);case ae.POLYGON:return new dG(t);case ae.HIGHLIGHT:return new yI(t);case ae.UNDERLINE:return new pG(t);case ae.SQUIGGLY:return new mG(t);case ae.STRIKEOUT:return new gG(t);case ae.STAMP:return new vI(t);case ae.FILEATTACHMENT:return new yG(t);default:return new Zt(t)}}}var hc,od,Di,$g,GS;const QT=class QT{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){x(this,$g);x(this,hc,null);x(this,od,!1);x(this,Di,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return QT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:t}=this,e=(i=this.annotationStorage)==null?void 0:i.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const t=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:s}=this.data;let r=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let l=0;l<e.length;l+=8)e[l+1]>o?(o=e[l+1],r=e[l+2]):e[l+1]===o&&(r=Math.max(r,e[l+2]));return[r,o]}if((i==null?void 0:i.length)>=1){for(const l of i)for(let u=0,h=l.length;u<h;u+=2)l[u+1]>o?(o=l[u+1],r=l[u]):l[u+1]===o&&(r=Math.max(r,l[u]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/i,t[1]=100*(t[1]-o)/s,t}get commentText(){var e,i,s;const{data:t}=this;return((i=(e=this.annotationStorage.getRawValue(`${rm}${t.id}`))==null?void 0:e.popup)==null?void 0:i.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${rm}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=c(this,Di))==null?void 0:t.popup)||this.popup)==null||e.remove(),b(this,Di,this.popup=null)}updateEdited(t){var r;if(!this.container)return;t.rect&&(c(this,hc)||b(this,hc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:i}=t;e&&E(this,$g,GS).call(this,e);let s=((r=c(this,Di))==null?void 0:r.popup)||this.popup;!s&&(i!=null&&i.text)&&(this._createPopup(i),s=c(this,Di).popup),s&&(s.updateEdited(t),i!=null&&i.deleted&&(s.remove(),b(this,Di,null),this.popup=null))}resetEdited(){var t;c(this,hc)&&(E(this,$g,GS).call(this,c(this,hc).rect),(t=c(this,Di))==null||t.popup.resetEdited(),b(this,hc,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof su)&&!(this instanceof zT)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof XS){const{rotation:y}=e;return!e.hasOwnCanvas&&y!==0&&this.setRotation(y,r),r}const{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const y=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(y>0||A>0){const v=`calc(${y}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=v}else if(this instanceof uI){const v=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=v}switch(e.borderStyle.style){case uu.SOLID:o.borderStyle="solid";break;case uu.DASHED:o.borderStyle="dashed";break;case uu.BEVELED:nt("Unimplemented border style: beveled");break;case uu.INSET:nt("Unimplemented border style: inset");break;case uu.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(b(this,od,!0),o.borderColor=X.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const u=X.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(o.width=`${100*a/h}%`,o.height=`${100*l/d}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/i}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],a=r.slice(1);s.target.style[i]=e3[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:e3[`${o}_rgb`](a)})};return rt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const a={detail:{[s]:r},target:t};o(a),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(y=>Math.fround(y));if(t.length===8){const[y,A,m,v]=t.subarray(2,6);if(s===y&&r===A&&e===m&&i===v)return}const{style:o}=this.container;let a;if(c(this,od)){const{borderColor:y,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=s-e,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let y=2,A=t.length;y<A;y+=8){const m=t[y],v=t[y+1],w=t[y+2],S=t[y+3],T=h.createElement("rect"),P=(w-e)/l,_=(r-v)/u,k=(m-w)/l,L=(v-S)/u;T.setAttribute("x",P),T.setAttribute("y",_),T.setAttribute("width",k),T.setAttribute("height",L),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${_}" width="${k}" height="${L}"/>`)}c(this,od)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate);const r=b(this,Di,new XS({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(c(this,Di)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Di)}render(){Mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!Qc.has(u)){nt(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&Qc.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};hc=new WeakMap,od=new WeakMap,Di=new WeakMap,$g=new WeakSet,GS=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let Zt=QT;class eG extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Dr,il,Dw,lI,Fw,cI;class zT extends Zt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});x(this,Dr);x(this,Dw);x(this,Fw);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(E(this,Dw,lI).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(E(this,Fw,cI).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i,s=""){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,Dr,il).call(this),s&&(e.title=s)}_bindNamedAction(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(e.title=s),E(this,Dr,il).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}i.overlaidText&&(e.title=i.overlaidText),e.onclick||(e.onclick=()=>!1),E(this,Dr,il).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),E(this,Dr,il).call(this),!this._fieldObjects){nt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=i,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:y}of g)f.add(y)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===a&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=f.defaultValue===f.exportValues;u.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=f.defaultValue||"";u.setValue(p,{value:y});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!Qc.has(g)){nt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Dr=new WeakSet,il=function(){this.container.setAttribute("data-internal-link","")},Dw=new WeakSet,lI=function(e,i,s="",r=null){e.href=this.linkService.getAnchorUrl(""),i.description?e.title=i.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},E(this,Dr,il).call(this)},Fw=new WeakSet,cI=function(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(e.title=s),E(this,Dr,il).call(this)};class nG extends Zt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class su extends Zt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Be.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var a;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,a;for(const[l,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":X.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||JW,r=t.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(mb*s))||1,d=u/h;o=Math.min(s,l(d/mb))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(u/mb))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=X.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class iG extends su{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Qc.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,g=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",A=>{const m=this.data.defaultFieldValue??"";i.value=h.userValue=m,h.formattedValue=null});let y=A=>{const{formattedValue:m}=h;m!=null&&(A.target.value=m),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var w;if(h.focused)return;const{target:v}=m;if(g&&(v.type=f,p&&(v.step=p)),h.userValue){const S=h.userValue;if(g)if(f==="time"){const T=new Date(S),P=[T.getHours(),T.getMinutes(),T.getSeconds()];v.value=P.map(_=>_.toString().padStart(2,"0")).join(":")}else v.value=new Date(S-tG).toISOString().split(f==="date"?"T":".",1)[0];else v.value=S}h.lastCommittedValue=v.value,h.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const v={value(w){h.userValue=w.detail.value??"",g||t.setValue(e,{value:h.userValue.toString()}),w.target.value=h.userValue},formattedValue(w){const{formattedValue:S}=w.detail;h.formattedValue=S,S!=null&&w.target!==document.activeElement&&(w.target.value=S);const T={formattedValue:S};g&&(T.value=S),t.setValue(e,T)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var _;const{charLimit:S}=w.detail,{target:T}=w;if(S===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",S);let P=h.userValue;!P||P.length<=S||(P=P.slice(0,S),T.value=h.userValue=P,t.setValue(e,{value:P}),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(v,m)}),i.addEventListener("keydown",m=>{var S;h.commitKey=1;let v=-1;if(m.key==="Escape"?v=0:m.key==="Enter"&&!this.data.multiLine?v=2:m.key==="Tab"&&(h.commitKey=3),v===-1)return;const{value:w}=m.target;h.lastCommittedValue!==w&&(h.lastCommittedValue=w,h.userValue=w,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:v,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const A=y;y=null,i.addEventListener("blur",m=>{var S,T;if(!h.focused||!m.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(h.focused=!1);const{target:v}=m;let{value:w}=v;if(g){if(w&&f==="time"){const P=w.split(":").map(_=>parseInt(_,10));w=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),v.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();v.type="text"}h.userValue=w,h.lastCommittedValue!==w&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),A(m)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",m=>{var L;h.lastCommittedValue=null;const{data:v,target:w}=m,{value:S,selectionStart:T,selectionEnd:P}=w;let _=T,k=P;switch(m.inputType){case"deleteWordBackward":{const D=S.substring(0,T).match(/\w*[^\w]*$/);D&&(_-=D[0].length);break}case"deleteWordForward":{const D=S.substring(T).match(/^[^\w]*\w*/);D&&(k+=D[0].length);break}case"deleteContentBackward":T===P&&(_-=1);break;case"deleteContentForward":T===P&&(k+=1);break}m.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:v||"",willCommit:!1,selStart:_,selEnd:k}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sG extends su{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class rG extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Qc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i)){const h=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class uI extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Qc.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class oG extends zT{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class aG extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Qc.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const y of s.options)y.selected=g.has(y.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,g=f.detail.remove;p[g].selected=!1,s.remove(g),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:g,exportValue:y}=f.detail.insert,A=s.children[p],m=document.createElement("option");m.textContent=g,m.value=y,A?A.before(m):s.append(m),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const g of p){const{displayValue:y,exportValue:A}=g,m=document.createElement("option");m.textContent=y,m.value=A,s.append(m)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var zg,YS;class XS extends Zt{constructor(e){const{data:i,elements:s,parent:r}=e,o=!!r._commentManager;super(e,{isRenderable:!o&&Zt._hasPopupData(i)});x(this,zg);if(this.elements=s,o&&Zt._hasPopupData(i)){const a=this.popup=E(this,zg,YS).call(this);for(const l of s)l.popup=a}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const i=this.popup=E(this,zg,YS).call(this),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${FT}${r}`).join(",")),this.container}}zg=new WeakSet,YS=function(){return new lG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Qn,Zo,Iw,Nw,ad,ld,ne,Vs,Jo,dc,cd,ud,$s,Zn,Fr,Ir,Me,Nr,ta,Ug,Or,hd,fc,ea,on,na,dd,Sy,Hg,KS,Wg,qS,Gg,QS,fd,Ey,Xg,ZS,Ow,hI,Bw,dI,jw,fI,Vw,pI,pd,Cy,md,Ty,Yg,JS;class lG{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:u,parentRect:h,open:d,commentManager:f=null}){x(this,dd);x(this,Hg);x(this,Wg);x(this,Gg);x(this,fd);x(this,Xg);x(this,Ow);x(this,Bw);x(this,jw);x(this,Vw);x(this,pd);x(this,md);x(this,Yg);x(this,Qn,null);x(this,Zo,E(this,jw,fI).bind(this));x(this,Iw,E(this,Yg,JS).bind(this));x(this,Nw,E(this,md,Ty).bind(this));x(this,ad,E(this,pd,Cy).bind(this));x(this,ld,null);x(this,ne,null);x(this,Vs,null);x(this,Jo,null);x(this,dc,null);x(this,cd,null);x(this,ud,null);x(this,$s,!1);x(this,Zn,null);x(this,Fr,null);x(this,Ir,null);x(this,Me,null);x(this,Nr,null);x(this,ta,null);x(this,Ug,null);x(this,Or,null);x(this,hd,null);x(this,fc,null);x(this,ea,!1);x(this,on,null);x(this,na,null);b(this,ne,t),b(this,hd,s),b(this,Vs,o),b(this,Or,a),b(this,cd,l),b(this,ld,e),b(this,Ug,u),b(this,ud,h),b(this,dc,i),b(this,Qn,f),b(this,on,i[0]),b(this,Jo,lm.toDateObject(r)),this.trigger=i.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(E(this,dd,Sy).call(this),c(this,ne).hidden=!0,d&&E(this,pd,Cy).call(this))}renderCommentButton(){if(c(this,Me)||(c(this,Nr)||E(this,Hg,KS).call(this),!c(this,Nr)))return;const{signal:t}=b(this,Fr,new AbortController),e=!!c(this,on).extraPopupElement,i=()=>{c(this,Qn).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{c(this,Qn).toggleCommentPopup(this,!1,!0,!e)},r=()=>{c(this,Qn).toggleCommentPopup(this,!1,!1)};if(e){b(this,Me,c(this,on).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,Zo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=b(this,Me,document.createElement("button"));o.className="annotationCommentButton";const a=c(this,on).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,Gg,QS).call(this),E(this,Wg,qS).call(this),o.addEventListener("keydown",c(this,Zo),{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",r,{signal:t}),a.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=c(this,on).commentData;return t?c(this,cd)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=c(this,Me))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}=c(this,on).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:s,modificationDate:r}}get elementBeforePopup(){return c(this,Me)}get comment(){return c(this,na)||b(this,na,c(this,on).commentText),c(this,na)}set comment(t){t!==this.comment&&(c(this,on).commentText=b(this,na,t))}get parentBoundingClientRect(){return c(this,on).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){c(this,Me)&&(c(this,Me).classList.toggle("selected",t),c(this,Me).ariaExpanded=e)}setSelectedCommentButton(t){c(this,Me).classList.toggle("selected",t)}get commentPopupPosition(){if(c(this,ta))return c(this,ta);const{x:t,y:e,height:i}=c(this,Me).getBoundingClientRect(),{x:s,y:r,width:o,height:a}=c(this,on).layer.getBoundingClientRect();return[(t-s)/o,(e+i-r)/a]}set commentPopupPosition(t){b(this,ta,t)}hasDefaultPopupPosition(){return c(this,ta)===null}get commentButtonPosition(){return c(this,Nr)}get commentButtonWidth(){return c(this,Me).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=c(this,ta)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:r,y:o,width:a,height:l}=s;c(this,Qn).showDialog(null,this,r+e*a,o+i*l,{...t,parentDimensions:s})}render(){var i,s;if(c(this,Zn))return;const t=b(this,Zn,document.createElement("div"));if(t.className="popup",c(this,ld)){const r=t.style.outlineColor=X.makeHexColor(...c(this,ld));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(i=c(this,hd))!=null&&i.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=c(this,hd)}if(t.append(e),c(this,Jo)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Jo).valueOf()})),r.dateTime=c(this,Jo).toISOString(),e.append(r)}NT({html:c(this,fd,Ey)||c(this,Vs).str,dir:(s=c(this,Vs))==null?void 0:s.dir,className:"popupContent"},t),c(this,ne).append(t)}updateEdited({rect:t,popup:e,deleted:i}){var s;if(c(this,Qn)){i?(this.remove(),b(this,na,null)):e&&(e.deleted?this.remove():(E(this,Gg,QS).call(this),b(this,na,e.text))),t&&(b(this,Nr,null),E(this,Hg,KS).call(this),E(this,Wg,qS).call(this));return}if(i||e!=null&&e.deleted){this.remove();return}E(this,dd,Sy).call(this),c(this,fc)||b(this,fc,{contentsObj:c(this,Vs),richText:c(this,Or)}),t&&b(this,Ir,null),e&&e.text&&(b(this,Or,E(this,Bw,dI).call(this,e.text)),b(this,Jo,lm.toDateObject(e.date)),b(this,Vs,null)),(s=c(this,Zn))==null||s.remove(),b(this,Zn,null)}resetEdited(){var t;c(this,fc)&&({contentsObj:xe(this,Vs)._,richText:xe(this,Or)._}=c(this,fc),b(this,fc,null),(t=c(this,Zn))==null||t.remove(),b(this,Zn,null),b(this,Ir,null))}remove(){var t,e,i;if((t=c(this,Fr))==null||t.abort(),b(this,Fr,null),(e=c(this,Zn))==null||e.remove(),b(this,Zn,null),b(this,ea,!1),b(this,$s,!1),(i=c(this,Me))==null||i.remove(),b(this,Me,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){b(this,ea,this.isVisible),c(this,ea)&&(c(this,ne).hidden=!0)}maybeShow(){c(this,Qn)||(E(this,dd,Sy).call(this),c(this,ea)&&(c(this,Zn)||E(this,md,Ty).call(this),b(this,ea,!1),c(this,ne).hidden=!1))}get isVisible(){return c(this,Qn)?!1:c(this,ne).hidden===!1}}Qn=new WeakMap,Zo=new WeakMap,Iw=new WeakMap,Nw=new WeakMap,ad=new WeakMap,ld=new WeakMap,ne=new WeakMap,Vs=new WeakMap,Jo=new WeakMap,dc=new WeakMap,cd=new WeakMap,ud=new WeakMap,$s=new WeakMap,Zn=new WeakMap,Fr=new WeakMap,Ir=new WeakMap,Me=new WeakMap,Nr=new WeakMap,ta=new WeakMap,Ug=new WeakMap,Or=new WeakMap,hd=new WeakMap,fc=new WeakMap,ea=new WeakMap,on=new WeakMap,na=new WeakMap,dd=new WeakSet,Sy=function(){var e;if(c(this,Fr))return;b(this,Fr,new AbortController);const{signal:t}=c(this,Fr);for(const i of this.trigger)i.addEventListener("click",c(this,ad),{signal:t}),i.addEventListener("pointerenter",c(this,Nw),{signal:t}),i.addEventListener("pointerleave",c(this,Iw),{signal:t}),i.classList.add("popupTriggerArea");for(const i of c(this,dc))(e=i.container)==null||e.addEventListener("keydown",c(this,Zo),{signal:t})},Hg=new WeakSet,KS=function(){const t=c(this,dc).find(e=>e.hasCommentButton);t&&b(this,Nr,t._normalizePoint(t.commentButtonPosition))},Wg=new WeakSet,qS=function(){if(c(this,on).extraPopupElement&&!c(this,on).editor)return;this.renderCommentButton();const[t,e]=c(this,Nr),{style:i}=c(this,Me);i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`},Gg=new WeakSet,QS=function(){c(this,on).extraPopupElement||(this.renderCommentButton(),c(this,Me).style.backgroundColor=this.commentButtonColor||"")},fd=new WeakSet,Ey=function(){const t=c(this,Or),e=c(this,Vs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,Or).html||null},Xg=new WeakSet,ZS=function(){var t,e,i;return((i=(e=(t=c(this,fd,Ey))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Ow=new WeakSet,hI=function(){var t,e,i;return((i=(e=(t=c(this,fd,Ey))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Bw=new WeakSet,dI=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:c(this,Ow,hI),fontSize:c(this,Xg,ZS)?`calc(${c(this,Xg,ZS)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},jw=new WeakSet,fI=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,$s))&&E(this,pd,Cy).call(this)},Vw=new WeakSet,pI=function(){if(c(this,Ir)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=c(this,cd);let o=!!c(this,ud),a=o?c(this,ud):c(this,Ug);for(const g of c(this,dc))if(!a||X.intersect(g.data.rect,a)!==null){a=g.data.rect,o=!0;break}const l=X.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=5,h=o?a[2]-a[0]+u:0,d=l[0]+h,f=l[1];b(this,Ir,[100*(d-s)/e,100*(f-r)/i]);const{style:p}=c(this,ne);p.left=`${c(this,Ir)[0]}%`,p.top=`${c(this,Ir)[1]}%`},pd=new WeakSet,Cy=function(){if(c(this,Qn)){c(this,Qn).toggleCommentPopup(this,!1);return}b(this,$s,!c(this,$s)),c(this,$s)?(E(this,md,Ty).call(this),c(this,ne).addEventListener("click",c(this,ad)),c(this,ne).addEventListener("keydown",c(this,Zo))):(E(this,Yg,JS).call(this),c(this,ne).removeEventListener("click",c(this,ad)),c(this,ne).removeEventListener("keydown",c(this,Zo)))},md=new WeakSet,Ty=function(){c(this,Zn)||this.render(),this.isVisible?c(this,$s)&&c(this,ne).classList.add("focused"):(E(this,Vw,pI).call(this),c(this,ne).hidden=!1,c(this,ne).style.zIndex=parseInt(c(this,ne).style.zIndex)+1e3)},Yg=new WeakSet,JS=function(){c(this,ne).classList.remove("focused"),!(c(this,$s)||!this.isVisible)&&(c(this,ne).hidden=!0,c(this,ne).style.zIndex=parseInt(c(this,ne).style.zIndex)-1e3)};class mI extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Kg;class cG extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Kg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=b(this,Kg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap;var qg;class uG extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,qg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=b(this,qg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap;var Qg;class hG extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Qg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=b(this,Qg,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qg=new WeakMap;var Zg;class gI extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,Zg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r},width:o,height:a}=this;if(!i)return this.container;const l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-e[0],g=e[3]-i[d+1];u.push(`${p},${g}`)}u=u.join(" ");const h=b(this,Zg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zg=new WeakMap;class dG extends gI{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class fG extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jg,pc,t0,tE;class UT extends Zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});x(this,t0);x(this,Jg,null);x(this,pc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?et.HIGHLIGHT:et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:u}=E(this,t0,tE).call(this,i,e),h=this.svgFactory.create(l,u,!0),d=b(this,Jg,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=s.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);c(this,pc).push(g),g.setAttribute("points",s[f].join(",")),d.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=c(this,Jg);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let a=0,l=c(this,pc).length;a<l;a++)c(this,pc)[a].setAttribute("points",s[a].join(","));if(r){const{transform:a,width:l,height:u}=E(this,t0,tE).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,pc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jg=new WeakMap,pc=new WeakMap,t0=new WeakSet,tE=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class yI extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=et.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class pG extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class mG extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class gG extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class vI extends Zt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var e0,n0,eE;class yG extends Zt{constructor(e){var s;super(e,{isRenderable:!0});x(this,n0);x(this,e0,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",E(this,n0,eE).bind(this)),b(this,e0,s);const{isMac:r}=Be.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&E(this,n0,eE).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return c(this,e0)}addHighlightArea(){this.container.classList.add("highlightArea")}}e0=new WeakMap,n0=new WeakSet,eE=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var gd,mc,yd,ia,i0,gc,s0,nE,r0,iE,o0;let HT=(o0=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a,commentManager:l,linkService:u,annotationStorage:h}){x(this,s0);x(this,r0);x(this,gd,null);x(this,mc,null);x(this,yd,null);x(this,ia,new Map);x(this,i0,null);x(this,gc,null);this.div=t,b(this,gd,e),b(this,mc,i),b(this,i0,a||null),b(this,gc,u||null),b(this,yd,h||new OT),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=l||null}hasEditableAnnotations(){return c(this,ia).size>0}async render(t){var o,a,l;const{annotations:e}=t,i=this.div;Va(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:c(this,gc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new dm,annotationStorage:c(this,yd),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===ae.POPUP;if(h){const p=s.get(u.id);if(!p)continue;r.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=n3.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const p=s.get(u.popupRef);p?p.push(d):s.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await E(this,s0,nE).call(this,f,u.id,r.elements),(a=(o=d.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),d._isEditable&&(c(this,ia).set(d.data.id,d),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(d))}E(this,r0,iE).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:c(this,gc),svgFactory:new dm,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=o0._defaultBorderStyle),e.data=i;const s=n3.create(e);if(!s.isRenderable)continue;const r=s.render();await E(this,s0,nE).call(this,r,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,Va(e,{rotation:t.rotation}),E(this,r0,iE).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ia).values())}getEditableAnnotation(t){return c(this,ia).get(t)}addFakeAnnotation(t){var a;const{div:e}=this,{id:i,rotation:s}=t,r=new eG({data:{id:i,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:c(this,gc),annotationStorage:c(this,yd)}),o=r.render();return e.append(o),(a=c(this,gd))==null||a.moveElementInDOM(e,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:uu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},gd=new WeakMap,mc=new WeakMap,yd=new WeakMap,ia=new WeakMap,i0=new WeakMap,gc=new WeakMap,s0=new WeakSet,nE=async function(t,e,i){var a,l;const s=t.firstChild||t,r=s.id=`${FT}${e}`,o=await((a=c(this,i0))==null?void 0:a.getAriaAttributes(r));if(o)for(const[u,h]of o)s.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),(l=c(this,gd))==null||l.moveElementInDOM(this.div,t,s,!1))},r0=new WeakSet,iE=function(){var e;if(!c(this,mc))return;const t=this.div;for(const[i,s]of c(this,mc)){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const a=c(this,ia).get(i);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,r.id,s),a._hasNoCanvas=!1):a.canvas=s)}c(this,mc).clear()},o0);const H1=/\r\n?|\n/g;var Jn,a0,yc,ti,$w,wI,zw,xI,Uw,bI,vd,Py,wd,_y,xd,ky,Hw,AI,l0,rE,Ww,SI;const Lt=class Lt extends Ft{constructor(e){super({...e,name:"freeTextEditor"});x(this,$w);x(this,zw);x(this,Uw);x(this,vd);x(this,xd);x(this,Hw);x(this,Ww);x(this,Jn,"");x(this,a0,`${this.id}-editor`);x(this,yc,null);x(this,ti,void 0);z(this,"_colorPicker",null);this.color=e.color||Lt._defaultColor||Ft._defaultLineColor,b(this,ti,e.fontSize||Lt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Lt.prototype,i=o=>o.isEmpty(),s=$a.TRANSLATE_SMALL,r=$a.TRANSLATE_BIG;return rt(this,"_keyboardManager",new r1([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){Ft.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ct.FREETEXT_SIZE:Lt._defaultFontSize=i;break;case ct.FREETEXT_COLOR:Lt._defaultColor=i;break}}updateParams(e,i){switch(e){case ct.FREETEXT_SIZE:E(this,$w,wI).call(this,i);break;case ct.FREETEXT_COLOR:E(this,zw,xI).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,Lt._defaultFontSize],[ct.FREETEXT_COLOR,Lt._defaultColor||Ft._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,c(this,ti)],[ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ct.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Lt._internalPadding*e,-(Lt._internalPadding+c(this,ti))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,yc,new AbortController);const e=this._uiManager.combinedSignal(c(this,yc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,a0)),this._isDraggable=!0,(e=c(this,yc))==null||e.abort(),b(this,yc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Jn),i=b(this,Jn,E(this,Uw,bI).call(this).trimEnd());if(e===i)return;const s=r=>{if(b(this,Jn,r),!r){this.remove();return}E(this,xd,ky).call(this),this._uiManager.rebuild(this),E(this,vd,Py).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),E(this,vd,Py).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Lt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,a0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,ti)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,y;switch(this.rotation){case 0:g=e+(a[0]-f)/h,y=i+this.height-(a[1]-p)/d;break;case 90:g=e+(a[0]-f)/h,y=i-(a[1]-p)/d,[l,u]=[u,-l];break;case 180:g=e-this.width+(a[0]-f)/h,y=i-(a[1]-p)/d,[l,u]=[-l,-u];break;case 270:g=e+(a[0]-f-this.height*d)/h,y=i+(a[1]-p-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(g*r,y*o,l,u)}else this._moveAfterPaste(e,i);E(this,xd,ky).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var g,y,A;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=E(g=Lt,l0,rE).call(g,i.getData("text")||"").replaceAll(H1,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const m=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(H1,"")),m!==this.editorDiv){let v=h;for(const w of this.editorDiv.childNodes){if(w===m){v=d;continue}v.push(E(y=Lt,wd,_y).call(y,w))}}h.push(l.nodeValue.slice(0,u).replaceAll(H1,""))}else if(l===this.editorDiv){let m=h,v=0;for(const w of this.editorDiv.childNodes)v++===u&&(m=d),m.push(E(A=Lt,wd,_y).call(A,w))}b(this,Jn,`${h.join(`
`)}${r}${d.join(`
`)}`),E(this,xd,ky).call(this);const f=new Range;let p=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const v=m.nodeValue.length;if(p<=v){f.setStart(m,p),f.setEnd(m,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Lt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,i,s){var a;let r=null;if(e instanceof mI){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:p,richText:g,contentsObj:y,creationDate:A,modificationDate:m},textContent:v,textPosition:w,parent:{page:{pageNumber:S}}}=e;if(!v||v.length===0)return null;r=e={annotationType:et.FREETEXT,color:Array.from(u),fontSize:l,value:v.join(`
`),position:w,pageIndex:S-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(y==null?void 0:y.str)||null,richText:g,creationDate:A,modificationDate:m}}const o=await super.deserialize(e,i,s);return b(o,ti,e.fontSize),o.color=X.makeHexColor(...e.color),b(o,Jn,E(a=Lt,l0,rE).call(a,e.value)),o._initialData=r,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Ft._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:i,fontSize:c(this,ti),value:E(this,Hw,AI).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!E(this,Ww,SI).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${c(this,ti)}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of c(this,Jn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,Jn)}}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Jn=new WeakMap,a0=new WeakMap,yc=new WeakMap,ti=new WeakMap,$w=new WeakSet,wI=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-c(this,ti))*this.parentScale),b(this,ti,r),E(this,vd,Py).call(this)},s=c(this,ti);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},zw=new WeakSet,xI=function(e){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Uw=new WeakSet,bI=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(E(s=Lt,wd,_y).call(s,r)),i=r);return e.join(`
`)},vd=new WeakSet,Py=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},wd=new WeakSet,_y=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(H1,"")},xd=new WeakSet,ky=function(){if(this.editorDiv.replaceChildren(),!!c(this,Jn))for(const e of c(this,Jn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},Hw=new WeakSet,AI=function(){return c(this,Jn).replaceAll(""," ")},l0=new WeakSet,rE=function(e){return e.replaceAll(" ","")},Ww=new WeakSet,SI=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==o},x(Lt,wd),x(Lt,l0),z(Lt,"_freeTextDefaultContent",""),z(Lt,"_internalPadding",0),z(Lt,"_defaultColor",null),z(Lt,"_defaultFontSize",10),z(Lt,"_type","freetext"),z(Lt,"_editorType",et.FREETEXT);let sE=Lt;class Y{toSVGPath(){Mt("Abstract method `toSVGPath` must be implemented.")}get box(){Mt("Abstract getter `box` must be implemented.")}serialize(t,e){Mt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*s,o[a+1]=i+t[a+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*s,o[a+1]=i+t[a]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}z(Y,"PRECISION",1e-4);var ei,rs,bd,Ad,zs,ot,vc,wc,c0,u0,Sd,Ed,sa,h0,Gw,Xw,xc,lp,Yw,EI,Kw,CI,qw,TI,Qw,PI,Zw,_I,Jw,kI;const ar=class ar{constructor({x:t,y:e},i,s,r,o,a=0){x(this,xc);x(this,Yw);x(this,Kw);x(this,qw);x(this,Qw);x(this,Zw);x(this,Jw);x(this,ei,void 0);x(this,rs,[]);x(this,bd,void 0);x(this,Ad,void 0);x(this,zs,[]);x(this,ot,new Float32Array(18));x(this,vc,void 0);x(this,wc,void 0);x(this,c0,void 0);x(this,u0,void 0);x(this,Sd,void 0);x(this,Ed,void 0);x(this,sa,[]);b(this,ei,i),b(this,Ed,r*s),b(this,Ad,o),c(this,ot).set([NaN,NaN,NaN,NaN,t,e],6),b(this,bd,a),b(this,u0,c(ar,h0)*s),b(this,c0,c(ar,Xw)*s),b(this,Sd,s),c(this,sa).push(t,e)}isEmpty(){return isNaN(c(this,ot)[8])}add({x:t,y:e}){var L;b(this,vc,t),b(this,wc,e);const[i,s,r,o]=c(this,ei);let[a,l,u,h]=c(this,ot).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<c(this,c0))return!1;const g=p-c(this,u0),y=g/p,A=y*d,m=y*f;let v=a,w=l;a=u,l=h,u+=A,h+=m,(L=c(this,sa))==null||L.push(t,e);const S=-m/g,T=A/g,P=S*c(this,Ed),_=T*c(this,Ed);return c(this,ot).set(c(this,ot).subarray(2,8),0),c(this,ot).set([u+P,h+_],4),c(this,ot).set(c(this,ot).subarray(14,18),12),c(this,ot).set([u-P,h-_],16),isNaN(c(this,ot)[6])?(c(this,zs).length===0&&(c(this,ot).set([a+P,l+_],2),c(this,zs).push(NaN,NaN,NaN,NaN,(a+P-i)/r,(l+_-s)/o),c(this,ot).set([a-P,l-_],14),c(this,rs).push(NaN,NaN,NaN,NaN,(a-P-i)/r,(l-_-s)/o)),c(this,ot).set([v,w,a,l,u,h],6),!this.isEmpty()):(c(this,ot).set([v,w,a,l,u,h],6),Math.abs(Math.atan2(w-l,v-a)-Math.atan2(m,A))<Math.PI/2?([a,l,u,h]=c(this,ot).subarray(2,6),c(this,zs).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/r,((l+h)/2-s)/o),[a,l,v,w]=c(this,ot).subarray(14,18),c(this,rs).push(NaN,NaN,NaN,NaN,((v+a)/2-i)/r,((w+l)/2-s)/o),!0):([v,w,a,l,u,h]=c(this,ot).subarray(0,6),c(this,zs).push(((v+5*a)/6-i)/r,((w+5*l)/6-s)/o,((5*a+u)/6-i)/r,((5*l+h)/6-s)/o,((a+u)/2-i)/r,((l+h)/2-s)/o),[u,h,a,l,v,w]=c(this,ot).subarray(12,18),c(this,rs).push(((v+5*a)/6-i)/r,((w+5*l)/6-s)/o,((5*a+u)/6-i)/r,((5*l+h)/6-s)/o,((a+u)/2-i)/r,((l+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,zs),e=c(this,rs);if(isNaN(c(this,ot)[6])&&!this.isEmpty())return E(this,Yw,EI).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);E(this,qw,TI).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return E(this,Kw,CI).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new MI(t,e,i,s,r,o)}getOutlines(){var d;const t=c(this,zs),e=c(this,rs),i=c(this,ot),[s,r,o,a]=c(this,ei),l=new Float32Array((((d=c(this,sa))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,sa)[f]-s)/o,l[f+1]=(c(this,sa)[f+1]-r)/a;if(l[l.length-2]=(c(this,vc)-s)/o,l[l.length-1]=(c(this,wc)-r)/a,isNaN(i[6])&&!this.isEmpty())return E(this,Qw,PI).call(this,l);const u=new Float32Array(c(this,zs).length+24+c(this,rs).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=E(this,Jw,kI).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return E(this,Zw,_I).call(this,u,h),this.newFreeDrawOutline(u,l,c(this,ei),c(this,Sd),c(this,bd),c(this,Ad))}};ei=new WeakMap,rs=new WeakMap,bd=new WeakMap,Ad=new WeakMap,zs=new WeakMap,ot=new WeakMap,vc=new WeakMap,wc=new WeakMap,c0=new WeakMap,u0=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,sa=new WeakMap,h0=new WeakMap,Gw=new WeakMap,Xw=new WeakMap,xc=new WeakSet,lp=function(){const t=c(this,ot).subarray(4,6),e=c(this,ot).subarray(16,18),[i,s,r,o]=c(this,ei);return[(c(this,vc)+(t[0]-e[0])/2-i)/r,(c(this,wc)+(t[1]-e[1])/2-s)/o,(c(this,vc)+(e[0]-t[0])/2-i)/r,(c(this,wc)+(e[1]-t[1])/2-s)/o]},Yw=new WeakSet,EI=function(){const[t,e,i,s]=c(this,ei),[r,o,a,l]=E(this,xc,lp).call(this);return`M${(c(this,ot)[2]-t)/i} ${(c(this,ot)[3]-e)/s} L${(c(this,ot)[4]-t)/i} ${(c(this,ot)[5]-e)/s} L${r} ${o} L${a} ${l} L${(c(this,ot)[16]-t)/i} ${(c(this,ot)[17]-e)/s} L${(c(this,ot)[14]-t)/i} ${(c(this,ot)[15]-e)/s} Z`},Kw=new WeakSet,CI=function(t){const e=c(this,rs);t.push(`L${e[4]} ${e[5]} Z`)},qw=new WeakSet,TI=function(t){const[e,i,s,r]=c(this,ei),o=c(this,ot).subarray(4,6),a=c(this,ot).subarray(16,18),[l,u,h,d]=E(this,xc,lp).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${l} ${u} L${h} ${d} L${(a[0]-e)/s} ${(a[1]-i)/r}`)},Qw=new WeakSet,PI=function(t){const e=c(this,ot),[i,s,r,o]=c(this,ei),[a,l,u,h]=E(this,xc,lp).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,c(this,ei),c(this,Sd),c(this,bd),c(this,Ad))},Zw=new WeakSet,_I=function(t,e){const i=c(this,rs);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},Jw=new WeakSet,kI=function(t,e){const i=c(this,ot).subarray(4,6),s=c(this,ot).subarray(16,18),[r,o,a,l]=c(this,ei),[u,h,d,f]=E(this,xc,lp).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l],e),e+=24},x(ar,h0,8),x(ar,Gw,2),x(ar,Xw,c(ar,h0)+c(ar,Gw));let Dv=ar;var Cd,bc,Br,d0,ni,f0,ce,tx,LI;class MI extends Y{constructor(e,i,s,r,o,a){super();x(this,tx);x(this,Cd,void 0);x(this,bc,new Float32Array(4));x(this,Br,void 0);x(this,d0,void 0);x(this,ni,void 0);x(this,f0,void 0);x(this,ce,void 0);b(this,ce,e),b(this,ni,i),b(this,Cd,s),b(this,f0,r),b(this,Br,o),b(this,d0,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,tx,LI).call(this,a);const[l,u,h,d]=c(this,bc);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-l)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-l)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${c(this,ce)[4]} ${c(this,ce)[5]}`];for(let i=6,s=c(this,ce).length;i<s;i+=6){if(isNaN(c(this,ce)[i])){e.push(`L${c(this,ce)[i+4]} ${c(this,ce)[i+5]}`);continue}e.push(`C${c(this,ce)[i]} ${c(this,ce)[i+1]} ${c(this,ce)[i+2]} ${c(this,ce)[i+3]} ${c(this,ce)[i+4]} ${c(this,ce)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const a=s-e,l=r-i;let u,h;switch(o){case 0:u=Y._rescale(c(this,ce),e,r,a,-l),h=Y._rescale(c(this,ni),e,r,a,-l);break;case 90:u=Y._rescaleAndSwap(c(this,ce),e,i,a,l),h=Y._rescaleAndSwap(c(this,ni),e,i,a,l);break;case 180:u=Y._rescale(c(this,ce),s,i,-a,l),h=Y._rescale(c(this,ni),s,i,-a,l);break;case 270:u=Y._rescaleAndSwap(c(this,ce),s,r,-a,-l),h=Y._rescaleAndSwap(c(this,ni),s,r,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,bc)}newOutliner(e,i,s,r,o,a=0){return new Dv(e,i,s,r,o,a)}getNewOutline(e,i){const[s,r,o,a]=c(this,bc),[l,u,h,d]=c(this,Cd),f=o*h,p=a*d,g=s*h+l,y=r*d+u,A=this.newOutliner({x:c(this,ni)[0]*f+g,y:c(this,ni)[1]*p+y},c(this,Cd),c(this,f0),e,c(this,d0),i??c(this,Br));for(let m=2;m<c(this,ni).length;m+=2)A.add({x:c(this,ni)[m]*f+g,y:c(this,ni)[m+1]*p+y});return A.getOutlines()}}Cd=new WeakMap,bc=new WeakMap,Br=new WeakMap,d0=new WeakMap,ni=new WeakMap,f0=new WeakMap,ce=new WeakMap,tx=new WeakSet,LI=function(e){const i=c(this,ce);let s=i[4],r=i[5];const o=[s,r,s,r];let a=s,l=r,u=s,h=r;const d=e?Math.max:Math.min,f=new Float32Array(4);for(let g=6,y=i.length;g<y;g+=6){const A=i[g+4],m=i[g+5];isNaN(i[g])?(X.pointBoundingBox(A,m,o),l>m?(a=A,l=m):l===m&&(a=d(a,A)),h<m?(u=A,h=m):h===m&&(u=d(u,A))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,X.bezierBoundingBox(s,r,...i.slice(g,g+6),f),X.rectBoundingBox(f[0],f[1],f[2],f[3],o),l>f[1]?(a=f[0],l=f[1]):l===f[1]&&(a=d(a,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),s=A,r=m}const p=c(this,bc);p[0]=o[0]-c(this,Br),p[1]=o[1]-c(this,Br),p[2]=o[2]-o[0]+2*c(this,Br),p[3]=o[3]-o[1]+2*c(this,Br),this.firstPoint=[a,l],this.lastPoint=[u,h]};var p0,m0,g0,ra,os,ex,RI,Td,My,nx,DI,ix,FI,y0,aE;class oE{constructor(t,e=0,i=0,s=!0){x(this,ex);x(this,Td);x(this,nx);x(this,ix);x(this,y0);x(this,p0,void 0);x(this,m0,void 0);x(this,g0,void 0);x(this,ra,[]);x(this,os,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:A,y:m,width:v,height:w}of t){const S=Math.floor((A-e)/a)*a,T=Math.ceil((A+v+e)/a)*a,P=Math.floor((m-e)/a)*a,_=Math.ceil((m+w+e)/a)*a,k=[S,P,_,!0],L=[T,P,_,!1];c(this,ra).push(k,L),X.rectBoundingBox(S,P,T,_,r)}const l=r[2]-r[0]+2*i,u=r[3]-r[1]+2*i,h=r[0]-i,d=r[1]-i;let f=s?-1/0:1/0,p=1/0;const g=c(this,ra).at(s?-1:-2),y=[g[0],g[2]];for(const A of c(this,ra)){const[m,v,w,S]=A;!S&&s?v<p?(p=v,f=m):v===p&&(f=Math.max(f,m)):S&&!s&&(v<p?(p=v,f=m):v===p&&(f=Math.min(f,m))),A[0]=(m-h)/l,A[1]=(v-d)/u,A[2]=(w-d)/u}b(this,p0,new Float32Array([h,d,l,u])),b(this,m0,[f,p]),b(this,g0,y)}getOutlines(){c(this,ra).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of c(this,ra))e[3]?(t.push(...E(this,y0,aE).call(this,e)),E(this,nx,DI).call(this,e)):(E(this,ix,FI).call(this,e),t.push(...E(this,y0,aE).call(this,e)));return E(this,ex,RI).call(this,t)}}p0=new WeakMap,m0=new WeakMap,g0=new WeakMap,ra=new WeakMap,os=new WeakMap,ex=new WeakSet,RI=function(t){const e=[],i=new Set;for(const o of t){const[a,l,u]=o;e.push([a,l,o],[a,u,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],u=e[o+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,l,u,h,d]=o;i.delete(o);let f=a,p=l;for(r=[a,u],s.push(r);;){let g;if(i.has(h))g=h;else if(i.has(d))g=d;else break;i.delete(g),[a,l,u,h,d]=g,f!==a&&(r.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}r.push(f,p)}return new vG(s,c(this,p0),c(this,m0),c(this,g0))},Td=new WeakSet,My=function(t){const e=c(this,os);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},nx=new WeakSet,DI=function([,t,e]){const i=E(this,Td,My).call(this,t);c(this,os).splice(i,0,[t,e])},ix=new WeakSet,FI=function([,t,e]){const i=E(this,Td,My).call(this,t);for(let s=i;s<c(this,os).length;s++){const[r,o]=c(this,os)[s];if(r!==t)break;if(r===t&&o===e){c(this,os).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=c(this,os)[s];if(r!==t)break;if(r===t&&o===e){c(this,os).splice(s,1);return}}},y0=new WeakSet,aE=function(t){const[e,i,s]=t,r=[[e,i,s]],o=E(this,Td,My).call(this,s);for(let a=0;a<o;a++){const[l,u]=c(this,os)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=l,p>u&&r.push([e,u,p])}}}return r};var v0,Pd;class vG extends Y{constructor(e,i,s,r){super();x(this,v0,void 0);x(this,Pd,void 0);b(this,Pd,e),b(this,v0,i),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const e=[];for(const i of c(this,Pd)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===s?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),s=a)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const a=[],l=s-e,u=r-i;for(const h of c(this,Pd)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*l,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return c(this,v0)}get classNamesForOutlining(){return["highlightOutline"]}}v0=new WeakMap,Pd=new WeakMap;class lE extends Dv{newFreeDrawOutline(t,e,i,s,r,o){return new wG(t,e,i,s,r,o)}}class wG extends MI{newOutliner(t,e,i,s,r,o=0){return new lE(t,e,i,s,r,o)}}var _d,w0,jr,Ac,x0,Dn,b0,A0,Sc,ii,si,We,kd,Md,an,Ld,Fi,S0,E0,cE,Rd,Ly,sx,II,rx,NI,ox,OI,C0,uE,Vr,sl,oa,gu,ax,BI,Dd,Ry,Fd,Dy,lx,jI,cx,VI,ux,$I,hx,zI,dx,UI;const ft=class ft extends Ft{constructor(e){super({...e,name:"highlightEditor"});x(this,E0);x(this,Rd);x(this,sx);x(this,rx);x(this,ox);x(this,C0);x(this,Vr);x(this,ax);x(this,Dd);x(this,Fd);x(this,lx);x(this,cx);x(this,dx);x(this,_d,null);x(this,w0,0);x(this,jr,void 0);x(this,Ac,null);x(this,x0,null);x(this,Dn,null);x(this,b0,null);x(this,A0,0);x(this,Sc,null);x(this,ii,null);x(this,si,null);x(this,We,!1);x(this,kd,null);x(this,Md,null);x(this,an,null);x(this,Ld,"");x(this,Fi,void 0);x(this,S0,"");this.color=e.color||ft._defaultColor,b(this,Fi,e.thickness||ft._defaultThickness),this.opacity=e.opacity||ft._defaultOpacity,b(this,jr,e.boxes||null),b(this,S0,e.methodOfCreation||""),b(this,Ld,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,We,!0),E(this,Rd,Ly).call(this,e),E(this,Vr,sl).call(this)):c(this,jr)&&(b(this,_d,e.anchorNode),b(this,w0,e.anchorOffset),b(this,b0,e.focusNode),b(this,A0,e.focusOffset),E(this,E0,cE).call(this),E(this,Vr,sl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=ft.prototype;return rt(this,"_keyboardManager",new r1([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,We)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,Fi),methodOfCreation:c(this,S0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;Ft.initialize(e,i),ft._defaultColor||(ft._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ct.HIGHLIGHT_COLOR:ft._defaultColor=i;break;case ct.HIGHLIGHT_THICKNESS:ft._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return c(this,Md)}get commentButtonPosition(){return c(this,kd)}updateParams(e,i){switch(e){case ct.HIGHLIGHT_COLOR:E(this,sx,II).call(this,i);break;case ct.HIGHLIGHT_THICKNESS:E(this,rx,NI).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,ft._defaultColor],[ct.HIGHLIGHT_THICKNESS,ft._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||ft._defaultColor],[ct.HIGHLIGHT_THICKNESS,c(this,Fi)||ft._defaultThickness],[ct.HIGHLIGHT_FREE,c(this,We)]]}onUpdatedColor(){var e,i;(e=this.parent)==null||e.drawLayer.updateProperties(c(this,si),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=c(this,x0))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,x0,new hm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Fd,Dy).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,E(this,Fd,Dy).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,C0,uE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Vr,sl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?E(this,C0,uE).call(this):e&&(E(this,Vr,sl).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,a;const{drawLayer:i}=this.parent;let s;c(this,We)?(e=(e-this.rotation+360)%360,s=E(r=ft,oa,gu).call(r,c(this,ii).box,e)):s=E(o=ft,oa,gu).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(c(this,si),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(c(this,an),{bbox:E(a=ft,oa,gu).call(a,c(this,Dn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,Ld)&&(e.setAttribute("aria-label",c(this,Ld)),e.setAttribute("role","mark")),c(this,We)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,ax,BI).bind(this),{signal:this._uiManager._signal});const i=b(this,Sc,document.createElement("div"));return e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,Ac),this.setDims(this.width,this.height),cF(this,c(this,Sc),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,an),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,an),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,Dd,Ry).call(this,!0);break;case 1:case 3:E(this,Dd,Ry).call(this,!1);break}}select(){var e;super.select(),c(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,an),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,an)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,an),{rootClass:{selected:!1}}),c(this,We)||E(this,Dd,Ry).call(this,!1))}get _mustFixPosition(){return!c(this,We)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,si),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,an),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:a,y:l,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=g=>{d.abort(),E(this,hx,zI).call(this,e,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",Yt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",mi,{signal:f}),s.addEventListener("pointermove",E(this,ux,$I).bind(this,e),{signal:f}),this._freeHighlight=new lE({x:r,y:o},[a,l,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var y,A,m,v;let r=null;if(e instanceof yI){const{data:{quadPoints:w,rect:S,rotation:T,id:P,color:_,opacity:k,popupRef:L,richText:D,contentsObj:R,creationDate:I,modificationDate:B},parent:{page:{pageNumber:F}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(_),opacity:k,quadPoints:w,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:L,richText:D,comment:(R==null?void 0:R.str)||null,creationDate:I,modificationDate:B}}else if(e instanceof UT){const{data:{inkLists:w,rect:S,rotation:T,id:P,color:_,borderStyle:{rawWidth:k},popupRef:L,richText:D,contentsObj:R,creationDate:I,modificationDate:B},parent:{page:{pageNumber:F}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(_),thickness:k,inkLists:w,boxes:null,pageIndex:F-1,rect:S.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:L,richText:D,comment:(R==null?void 0:R.str)||null,creationDate:I,modificationDate:B}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=X.makeHexColor(...o),h.opacity=u||1,l&&b(h,Fi,e.thickness),h._initialData=r,e.comment&&h.setCommentData(e);const[d,f]=h.pageDimensions,[p,g]=h.pageTranslation;if(a){const w=b(h,jr,[]);for(let S=0;S<a.length;S+=8)w.push({x:(a[S]-p)/d,y:1-(a[S+1]-g)/f,width:(a[S+2]-a[S])/d,height:(a[S+1]-a[S+5])/f});E(y=h,E0,cE).call(y),E(A=h,Vr,sl).call(A),h.rotate(h.rotation)}else if(l){b(h,We,!0);const w=l[0],S={x:w[0]-p,y:f-(w[1]-g)},T=new lE(S,[0,0,d,f],1,c(h,Fi)/2,!0,.001);for(let k=0,L=w.length;k<L;k+=2)S.x=w[k]-p,S.y=f-(w[k+1]-g),T.add(S);const{id:P,clipPathId:_}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);E(m=h,Rd,Ly).call(m,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:_}),E(v=h,Vr,sl).call(v),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=Ft._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:i,opacity:this.opacity,thickness:c(this,Fi),quadPoints:E(this,lx,jI).call(this),outlines:E(this,cx,VI).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!E(this,dx,UI).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};_d=new WeakMap,w0=new WeakMap,jr=new WeakMap,Ac=new WeakMap,x0=new WeakMap,Dn=new WeakMap,b0=new WeakMap,A0=new WeakMap,Sc=new WeakMap,ii=new WeakMap,si=new WeakMap,We=new WeakMap,kd=new WeakMap,Md=new WeakMap,an=new WeakMap,Ld=new WeakMap,Fi=new WeakMap,S0=new WeakMap,E0=new WeakSet,cE=function(){const e=new oE(c(this,jr),.001);b(this,ii,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ii).box;const i=new oE(c(this,jr),.0025,.001,this._uiManager.direction==="ltr");b(this,Dn,i.getOutlines());const{firstPoint:s}=c(this,ii);b(this,kd,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=c(this,Dn);b(this,Md,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Rd=new WeakSet,Ly=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var f,p;b(this,ii,e);const r=1.5;if(b(this,Dn,e.getNewOutline(c(this,Fi)/2+r,.0025)),i>=0)b(this,si,i),b(this,Ac,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,an,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Dn).box,path:{d:c(this,Dn).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,si),{bbox:E(f=ft,oa,gu).call(f,c(this,ii).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,an),{bbox:E(p=ft,oa,gu).call(p,c(this,Dn).box,g),path:{d:c(this,Dn).toSVGPath()}})}const[o,a,l,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[g,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/g,this.height=u*g/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[g,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/g,this.height=u*g/y;break}}const{firstPoint:h}=e;b(this,kd,[(h[0]-o)/l,(h[1]-a)/u]);const{lastPoint:d}=c(this,Dn);b(this,Md,[(d[0]-o)/l,(d[1]-a)/u])},sx=new WeakSet,II=function(e){const i=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,e,ft._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},rx=new WeakSet,NI=function(e){const i=c(this,Fi),s=r=>{b(this,Fi,r),E(this,ox,OI).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},ox=new WeakSet,OI=function(e){c(this,We)&&(E(this,Rd,Ly).call(this,{highlightOutlines:c(this,ii).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},C0=new WeakSet,uE=function(){c(this,si)===null||!this.parent||(this.parent.drawLayer.remove(c(this,si)),b(this,si,null),this.parent.drawLayer.remove(c(this,an)),b(this,an,null))},Vr=new WeakSet,sl=function(e=this.parent){c(this,si)===null&&({id:xe(this,si)._,clipPathId:xe(this,Ac)._}=e.drawLayer.draw({bbox:c(this,ii).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,We)},path:{d:c(this,ii).toSVGPath()}},!1,!0),b(this,an,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,We)},bbox:c(this,Dn).box,path:{d:c(this,Dn).toSVGPath()}},c(this,We))),c(this,Sc)&&(c(this,Sc).style.clipPath=c(this,Ac)))},oa=new WeakSet,gu=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},ax=new WeakSet,BI=function(e){ft._keyboardManager.exec(this,e)},Dd=new WeakSet,Ry=function(e){if(!c(this,_d))return;const i=window.getSelection();e?i.setPosition(c(this,_d),c(this,w0)):i.setPosition(c(this,b0),c(this,A0))},Fd=new WeakSet,Dy=function(){return c(this,We)?this.rotation:0},lx=new WeakSet,jI=function(){if(c(this,We))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=c(this,jr),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,g=(1-h)*i+r;a[l]=a[l+4]=p,a[l+1]=a[l+3]=g,a[l+2]=a[l+6]=p+d*e,a[l+5]=a[l+7]=g-f*i,l+=8}return a},cx=new WeakSet,VI=function(e){return c(this,ii).serialize(e,E(this,Fd,Dy).call(this))},ux=new WeakSet,$I=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},hx=new WeakSet,zI=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dx=new WeakSet,UI=function(e){const{color:i}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==i[r])},x(ft,oa),x(ft,ux),x(ft,hx),z(ft,"_defaultColor",null),z(ft,"_defaultOpacity",1),z(ft,"_defaultThickness",12),z(ft,"_type","highlight"),z(ft,"_editorType",et.HIGHLIGHT),z(ft,"_freeHighlightId",-1),z(ft,"_freeHighlight",null),z(ft,"_freeHighlightClipId","");let Fv=ft;var Ec;class HI{constructor(){x(this,Ec,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){c(this,Ec)[t]=e}toSVGProperties(){const t=c(this,Ec);return b(this,Ec,Object.create(null)),{root:t}}reset(){b(this,Ec,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Mt("Not implemented")}}Ec=new WeakMap;var ri,Id,Le,Cc,Tc,aa,la,ca,Pc,T0,hE,P0,dE,_0,fE,_c,cp,fx,WI,Nd,Fy,kc,up,ua,yu;const q=class q extends Ft{constructor(e){super(e);x(this,T0);x(this,P0);x(this,_0);x(this,_c);x(this,fx);x(this,Nd);x(this,kc);x(this,ua);x(this,ri,null);x(this,Id,void 0);z(this,"_colorPicker",null);z(this,"_drawId",null);b(this,Id,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(E(this,T0,hE).call(this,e),E(this,_c,cp).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){Mt("Not implemented")}static get typesMap(){Mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(c(q,Le).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],a=l=>{var h;r.updateProperty(i,l);const u=c(this,ri).updateProperty(i,l);u&&E(this,kc,up).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,ri).getPathResizingSVGProperties(E(this,Nd,Fy).call(this)),{bbox:E(this,ua,yu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,ri).getPathResizedSVGProperties(E(this,Nd,Fy).call(this)),{bbox:E(this,ua,yu).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:E(this,ua,yu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties(c(this,ri).getPathTranslatedSVGProperties(E(this,Nd,Fy).call(this),this.parentDimensions),{bbox:E(this,ua,yu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Id)&&(b(this,Id,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,_0,fE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,_c,cp).call(this),E(this,kc,up).call(this,c(this,ri).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,_0,fE).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,_c,cp).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,q._mergeSVGProperties({bbox:E(this,ua,yu).call(this)},c(this,ri).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,kc,up).call(this,c(this,ri).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,r,o){Mt("Not implemented")}static startDrawing(e,i,s,r){var A;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:h}=r;if(c(q,la)&&c(q,la)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),g=b(q,Cc,new AbortController),y=e.combinedSignal(g);if(c(q,aa)||b(q,aa,u),c(q,la)??b(q,la,h),window.addEventListener("pointerup",m=>{var v;c(q,aa)===m.pointerId?this._endDraw(m):(v=c(q,ca))==null||v.delete(m.pointerId)},{signal:y}),window.addEventListener("pointercancel",m=>{var v;c(q,aa)===m.pointerId?this._currentParent.endDrawingSession():(v=c(q,ca))==null||v.delete(m.pointerId)},{signal:y}),window.addEventListener("pointerdown",m=>{c(q,la)===m.pointerType&&((c(q,ca)||b(q,ca,new Set)).add(m.pointerId),c(q,Le).isCancellable()&&(c(q,Le).removeLastElement(),c(q,Le).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",mi,{signal:y}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:y}),o.addEventListener("touchmove",m=>{m.timeStamp===c(q,Pc)&&Yt(m)},{signal:y}),e.toggleDrawing(),(A=i._editorUndoBar)==null||A.hide(),c(q,Le)){e.drawLayer.updateProperties(this._currentDrawId,c(q,Le).startNew(a,l,f,p,d));return}i.updateUIForDefaultProperties(this),b(q,Le,this.createDrawerInstance(a,l,f,p,d)),b(q,Tc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(q,Tc).toSVGProperties(),c(q,Le).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(b(q,Pc,-1),!c(q,Le))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(c(q,aa)===r){if(((o=c(q,ca))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(q,Le).add(i,s)),b(q,Pc,e.timeStamp),Yt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(q,Le,null),b(q,Tc,null),b(q,la,null),b(q,Pc,NaN)),c(q,Cc)&&(c(q,Cc).abort(),b(q,Cc,null),b(q,aa,NaN),b(q,ca,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,c(q,Le).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=c(q,Le),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ct.DRAW_STEP),!c(q,Le).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(q,Le).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:c(q,Tc),mustBeCommitted:!e});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,a){Mt("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=i.viewport,u=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),E(d=h,T0,hE).call(d,{drawOutlines:u}),E(f=h,_c,cp).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return c(this,ri).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ri=new WeakMap,Id=new WeakMap,Le=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,aa=new WeakMap,la=new WeakMap,ca=new WeakMap,Pc=new WeakMap,T0=new WeakSet,hE=function({drawOutlines:e,drawId:i,drawingOptions:s}){b(this,ri,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=E(this,P0,dE).call(this,e,this.parent),E(this,kc,up).call(this,e.box)},P0=new WeakSet,dE=function(e,i){const{id:s}=i.drawLayer.draw(q._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},_0=new WeakSet,fE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},_c=new WeakSet,cp=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,P0,dE).call(this,c(this,ri),e)}},fx=new WeakSet,WI=function([e,i,s,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[i,1-e,s*(a/o),r*(o/a)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(a/o),r*(o/a)];default:return[e,i,s,r]}},Nd=new WeakSet,Fy=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-i,e,s*(o/a),r*(a/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/a),r*(a/o)];default:return[e,i,s,r]}},kc=new WeakSet,up=function(e){[this.x,this.y,this.width,this.height]=E(this,fx,WI).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ua=new WeakSet,yu=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(l/u),r*(u/l),s*(l/u)];case 5:return[1-i,e,s*(l/u),r*(u/l)];case 6:return[1-e-r*(u/l),1-i,r*(u/l),s*(l/u)];case 7:return[i-s*(l/u),1-e-r*(u/l),s*(l/u),r*(u/l)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/l),i,r*(u/l),s*(l/u)];case 13:return[1-i-s*(l/u),e-r*(u/l),s*(l/u),r*(u/l)];case 14:return[1-e,1-i-s*(l/u),r*(u/l),s*(l/u)];case 15:return[i,1-e,s*(l/u),r*(u/l)];default:return[e,i,s,r]}},z(q,"_currentDrawId",-1),z(q,"_currentParent",null),x(q,Le,null),x(q,Cc,null),x(q,Tc,null),x(q,aa,NaN),x(q,la,null),x(q,ca,null),x(q,Pc,NaN),z(q,"_INNER_MARGIN",3);let Iv=q;var Us,Re,De,Mc,Od,gn,Ge,Ii,Lc,Rc,Dc,Bd,Iy;class xG{constructor(t,e,i,s,r,o){x(this,Bd);x(this,Us,new Float64Array(6));x(this,Re,void 0);x(this,De,void 0);x(this,Mc,void 0);x(this,Od,void 0);x(this,gn,void 0);x(this,Ge,"");x(this,Ii,0);x(this,Lc,new a1);x(this,Rc,void 0);x(this,Dc,void 0);b(this,Rc,i),b(this,Dc,s),b(this,Mc,r),b(this,Od,o),[t,e]=E(this,Bd,Iy).call(this,t,e);const a=b(this,Re,[NaN,NaN,NaN,NaN,t,e]);b(this,gn,[t,e]),b(this,De,[{line:a,points:c(this,gn)}]),c(this,Us).set(a,0)}updateProperty(t,e){t==="stroke-width"&&b(this,Od,e)}isEmpty(){return!c(this,De)||c(this,De).length===0}isCancellable(){return c(this,gn).length<=10}add(t,e){[t,e]=E(this,Bd,Iy).call(this,t,e);const[i,s,r,o]=c(this,Us).subarray(2,6),a=t-r,l=e-o;return Math.hypot(c(this,Rc)*a,c(this,Dc)*l)<=2?null:(c(this,gn).push(t,e),isNaN(i)?(c(this,Us).set([r,o,t,e],2),c(this,Re).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Us)[0])&&c(this,Re).splice(6,6),c(this,Us).set([i,s,r,o,t,e],0),c(this,Re).push(...Y.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(c(this,gn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){b(this,Rc,i),b(this,Dc,s),b(this,Mc,r),[t,e]=E(this,Bd,Iy).call(this,t,e);const o=b(this,Re,[NaN,NaN,NaN,NaN,t,e]);b(this,gn,[t,e]);const a=c(this,De).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,De).push({line:o,points:c(this,gn)}),c(this,Us).set(o,0),b(this,Ii,0),this.toSVGPath(),null}getLastElement(){return c(this,De).at(-1)}setLastElement(t){return c(this,De)?(c(this,De).push(t),b(this,Re,t.line),b(this,gn,t.points),b(this,Ii,0),{path:{d:this.toSVGPath()}}):c(this,Lc).setLastElement(t)}removeLastElement(){if(!c(this,De))return c(this,Lc).removeLastElement();c(this,De).pop(),b(this,Ge,"");for(let t=0,e=c(this,De).length;t<e;t++){const{line:i,points:s}=c(this,De)[t];b(this,Re,i),b(this,gn,s),b(this,Ii,0),this.toSVGPath()}return{path:{d:c(this,Ge)}}}toSVGPath(){const t=Y.svgRound(c(this,Re)[4]),e=Y.svgRound(c(this,Re)[5]);if(c(this,gn).length===2)return b(this,Ge,`${c(this,Ge)} M ${t} ${e} Z`),c(this,Ge);if(c(this,gn).length<=6){const s=c(this,Ge).lastIndexOf("M");b(this,Ge,`${c(this,Ge).slice(0,s)} M ${t} ${e}`),b(this,Ii,6)}if(c(this,gn).length===4){const s=Y.svgRound(c(this,Re)[10]),r=Y.svgRound(c(this,Re)[11]);return b(this,Ge,`${c(this,Ge)} L ${s} ${r}`),b(this,Ii,12),c(this,Ge)}const i=[];c(this,Ii)===0&&(i.push(`M ${t} ${e}`),b(this,Ii,6));for(let s=c(this,Ii),r=c(this,Re).length;s<r;s+=6){const[o,a,l,u,h,d]=c(this,Re).slice(s,s+6).map(Y.svgRound);i.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}return b(this,Ge,c(this,Ge)+i.join(" ")),b(this,Ii,c(this,Re).length),c(this,Ge)}getOutlines(t,e,i,s){const r=c(this,De).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,Lc).build(c(this,De),t,e,i,c(this,Mc),c(this,Od),s),b(this,Us,null),b(this,Re,null),b(this,De,null),b(this,Ge,null),c(this,Lc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Us=new WeakMap,Re=new WeakMap,De=new WeakMap,Mc=new WeakMap,Od=new WeakMap,gn=new WeakMap,Ge=new WeakMap,Ii=new WeakMap,Lc=new WeakMap,Rc=new WeakMap,Dc=new WeakMap,Bd=new WeakSet,Iy=function(t,e){return Y._normalizePoint(t,e,c(this,Rc),c(this,Dc),c(this,Mc))};var yn,k0,M0,oi,Hs,Ws,jd,Vd,Fc,as,sr,px,GI,mx,XI,gx,YI;class a1 extends Y{constructor(){super(...arguments);x(this,as);x(this,px);x(this,mx);x(this,gx);x(this,yn,void 0);x(this,k0,0);x(this,M0,void 0);x(this,oi,void 0);x(this,Hs,void 0);x(this,Ws,void 0);x(this,jd,void 0);x(this,Vd,void 0);x(this,Fc,void 0)}build(e,i,s,r,o,a,l){b(this,Hs,i),b(this,Ws,s),b(this,jd,r),b(this,Vd,o),b(this,Fc,a),b(this,M0,l??0),b(this,oi,e),E(this,mx,XI).call(this)}get thickness(){return c(this,Fc)}setLastElement(e){return c(this,oi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,oi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of c(this,oi)){if(e.push(`M${Y.svgRound(i[4])} ${Y.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${Y.svgRound(i[10])} ${Y.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,a,l,u,h,d]=i.subarray(s,s+6).map(Y.svgRound);e.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,r],o){const a=[],l=[],[u,h,d,f]=E(this,px,GI).call(this);let p,g,y,A,m,v,w,S,T;switch(c(this,Vd)){case 0:T=Y._rescale,p=e,g=i+r,y=s,A=-r,m=e+u*s,v=i+(1-h-f)*r,w=e+(u+d)*s,S=i+(1-h)*r;break;case 90:T=Y._rescaleAndSwap,p=e,g=i,y=s,A=r,m=e+h*s,v=i+u*r,w=e+(h+f)*s,S=i+(u+d)*r;break;case 180:T=Y._rescale,p=e+s,g=i,y=-s,A=r,m=e+(1-u-d)*s,v=i+h*r,w=e+(1-u)*s,S=i+(h+f)*r;break;case 270:T=Y._rescaleAndSwap,p=e+s,g=i+r,y=-s,A=-r,m=e+(1-h-f)*s,v=i+(1-u-d)*r,w=e+(1-h)*s,S=i+(1-u)*r;break}for(const{line:P,points:_}of c(this,oi))a.push(T(P,p,g,y,A,o?new Array(P.length):null)),l.push(T(_,p,g,y,A,o?new Array(_.length):null));return{lines:a,points:l,rect:[m,v,w,S]}}static deserialize(e,i,s,r,o,{paths:{lines:a,points:l},rotation:u,thickness:h}){const d=[];let f,p,g,y,A;switch(u){case 0:A=Y._rescale,f=-e/s,p=i/r+1,g=1/s,y=-1/r;break;case 90:A=Y._rescaleAndSwap,f=-i/r,p=-e/s,g=1/r,y=1/s;break;case 180:A=Y._rescale,f=e/s+1,p=-i/r,g=-1/s,y=1/r;break;case 270:A=Y._rescaleAndSwap,f=i/r+1,p=e/s+1,g=-1/r,y=-1/s;break}if(!a){a=[];for(const v of l){const w=v.length;if(w===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(w===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const S=new Float32Array(3*(w-2));a.push(S);let[T,P,_,k]=v.subarray(0,4);S.set([NaN,NaN,NaN,NaN,T,P],0);for(let L=4;L<w;L+=2){const D=v[L],R=v[L+1];S.set(Y.createBezierPoints(T,P,_,k,D,R),(L-2)*3),[T,P,_,k]=[_,k,D,R]}}}for(let v=0,w=a.length;v<w;v++)d.push({line:A(a[v].map(S=>S??NaN),f,p,g,y),points:A(l[v].map(S=>S??NaN),f,p,g,y)});const m=new this.prototype.constructor;return m.build(d,s,r,1,u,h,o),m}get box(){return c(this,yn)}updateProperty(e,i){return e==="stroke-width"?E(this,gx,YI).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=E(this,as,sr).call(this);b(this,Hs,e),b(this,Ws,i),b(this,jd,s);const[a,l]=E(this,as,sr).call(this),u=a-r,h=l-o,d=c(this,yn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return b(this,k0,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,yn).map(Y.svgRound).join(" ")}get defaultProperties(){const[e,i]=c(this,yn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=c(this,yn);let s=0,r=0,o=0,a=0,l=0,u=0;switch(c(this,k0)){case 90:r=i/e,o=-e/i,l=e;break;case 180:s=-1,a=-1,l=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${a} ${Y.svgRound(l)} ${Y.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,a]=E(this,as,sr).call(this),[l,u,h,d]=c(this,yn);if(Math.abs(h-o)<=Y.PRECISION||Math.abs(d-a)<=Y.PRECISION){const A=e+s/2-(l+h/2),m=i+r/2-(u+d/2);return{path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(i)}`,transform:`${this.rotationTransform} translate(${A} ${m})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*a)/(d-2*a),g=h/s,y=d/r;return{path:{"transform-origin":`${Y.svgRound(l)} ${Y.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${y}) translate(${Y.svgRound(o)} ${Y.svgRound(a)}) scale(${f} ${p}) translate(${Y.svgRound(-o)} ${Y.svgRound(-a)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,a]=E(this,as,sr).call(this),l=c(this,yn),[u,h,d,f]=l;if(l[0]=e,l[1]=i,l[2]=s,l[3]=r,Math.abs(d-o)<=Y.PRECISION||Math.abs(f-a)<=Y.PRECISION){const m=e+s/2-(u+d/2),v=i+r/2-(h+f/2);for(const{line:w,points:S}of c(this,oi))Y._translate(w,m,v,w),Y._translate(S,m,v,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),g=(r-2*a)/(f-2*a),y=-p*(u+o)+e+o,A=-g*(h+a)+i+a;if(p!==1||g!==1||y!==0||A!==0)for(const{line:m,points:v}of c(this,oi))Y._rescale(m,y,A,p,g,m),Y._rescale(v,y,A,p,g,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,a=c(this,yn),l=e-a[0],u=i-a[1];if(c(this,Hs)===r&&c(this,Ws)===o)for(const{line:h,points:d}of c(this,oi))Y._translate(h,l,u,h),Y._translate(d,l,u,d);else{const h=c(this,Hs)/r,d=c(this,Ws)/o;b(this,Hs,r),b(this,Ws,o);for(const{line:f,points:p}of c(this,oi))Y._rescale(f,l,u,h,d,f),Y._rescale(p,l,u,h,d,p);a[2]*=h,a[3]*=d}return a[0]=e,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Y.svgRound(e)} ${Y.svgRound(i)}`}}}get defaultSVGProperties(){const e=c(this,yn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Y.svgRound(e[0])} ${Y.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}yn=new WeakMap,k0=new WeakMap,M0=new WeakMap,oi=new WeakMap,Hs=new WeakMap,Ws=new WeakMap,jd=new WeakMap,Vd=new WeakMap,Fc=new WeakMap,as=new WeakSet,sr=function(e=c(this,Fc)){const i=c(this,M0)+e/2*c(this,jd);return c(this,Vd)%180===0?[i/c(this,Hs),i/c(this,Ws)]:[i/c(this,Ws),i/c(this,Hs)]},px=new WeakSet,GI=function(){const[e,i,s,r]=c(this,yn),[o,a]=E(this,as,sr).call(this,0);return[e+o,i+a,s-2*o,r-2*a]},mx=new WeakSet,XI=function(){const e=b(this,yn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,oi)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6)X.pointBoundingBox(r[l],r[l+1],e);continue}let o=r[4],a=r[5];for(let l=6,u=r.length;l<u;l+=6){const[h,d,f,p,g,y]=r.subarray(l,l+6);X.bezierBoundingBox(o,a,h,d,f,p,g,y,e),o=g,a=y}}const[i,s]=E(this,as,sr).call(this);e[0]=cn(e[0]-i,0,1),e[1]=cn(e[1]-s,0,1),e[2]=cn(e[2]+i,0,1),e[3]=cn(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},gx=new WeakSet,YI=function(e){const[i,s]=E(this,as,sr).call(this);b(this,Fc,e);const[r,o]=E(this,as,sr).call(this),[a,l]=[r-i,o-s],u=c(this,yn);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};class a2 extends HI{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ft._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new a2(this._viewParameters);return t.updateAll(this),t}}var yx,KI;const Uu=class Uu extends Iv{constructor(e){super({...e,name:"inkEditor"});x(this,yx);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){Ft.initialize(e,i),this._defaultDrawingOptions=new a2(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return rt(this,"typesMap",new Map([[ct.INK_THICKNESS,"stroke-width"],[ct.INK_COLOR,"stroke"],[ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new xG(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,a){return a1.deserialize(e,i,s,r,o,a)}static async deserialize(e,i,s){let r=null;if(e instanceof UT){const{data:{inkLists:a,rect:l,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g,richText:y,contentsObj:A,creationDate:m,modificationDate:v},parent:{page:{pageNumber:w}}}=e;r=e={annotationType:et.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:w-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:g,richText:y,comment:(A==null?void 0:A.str)||null,creationDate:m,modificationDate:v}}const o=await super.deserialize(e,i,s);return o._initialData=r,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Rv(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=Uu.getDefaultDrawingOptions({stroke:X.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(e),{color:Ft._colorManager.convert(r),opacity:o,thickness:a,paths:{lines:i,points:s}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!E(this,yx,KI).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};yx=new WeakSet,KI=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==i[l])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},z(Uu,"_type","ink"),z(Uu,"_editorType",et.INK),z(Uu,"_defaultDrawingOptions",null);let pE=Uu;class mE extends a1{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const W1=8,jf=3;var Ic,L0,gE,ls,vx,qI,wx,QI,R0,yE,$d,Ny,xx,ZI,bx,JI,Ax,t6,D0,vE,F0,wE,Sx,e6;class me{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},r,o,a,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:g,actualBoundingBoxAscent:y,actualBoundingBoxDescent:A,fontBoundingBoxAscent:m,fontBoundingBoxDescent:v,width:w}=h.measureText(t),S=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(g)||0,w)*S),P=Math.ceil(Math.max(Math.abs(y)+Math.abs(A)||d,Math.abs(m)+Math.abs(v)||d)*S);u=new OffscreenCanvas(T,P),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,T,P),h.fillStyle="black",h.fillText(t,T*(S-1)/2,P*(3-S)/2);const _=E(this,D0,vE).call(this,h.getImageData(0,0,T,P).data),k=E(this,Ax,t6).call(this,_),L=E(this,F0,wE).call(this,k),D=E(this,R0,yE).call(this,_,T,P,L);return this.processDrawnLines({lines:{curves:D,width:T,height:P},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,r){const[o,a,l]=E(this,Sx,e6).call(this,t),[u,h]=E(this,bx,JI).call(this,o,a,l,Math.hypot(a,l)*c(this,Ic).sigmaSFactor,c(this,Ic).sigmaR,c(this,Ic).kernelSize),d=E(this,F0,wE).call(this,h),f=E(this,R0,yE).call(this,u,a,l,d);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:a}){s%180!==0&&([e,i]=[i,e]);const{curves:l,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,i/h),g=p/e,y=p/i,A=[];for(const{points:v}of l){const w=o?E(this,xx,ZI).call(this,v):v;if(!w)continue;A.push(w);const S=w.length,T=new Float32Array(S),P=new Float32Array(3*(S===2?2:S-2));if(f.push({line:P,points:T}),S===2){T[0]=w[0]*g,T[1]=w[1]*y,P.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[_,k,L,D]=w;_*=g,k*=y,L*=g,D*=y,T.set([_,k,L,D],0),P.set([NaN,NaN,NaN,NaN,_,k],0);for(let R=4;R<S;R+=2){const I=T[R]=w[R]*g,B=T[R+1]=w[R+1]*y;P.set(Y.createBezierPoints(_,k,L,D,I,B),(R-2)*3),[_,k,L,D]=[L,D,I,B]}}if(f.length===0)return null;const m=a?new mE:new a1;return m.build(f,e,i,1,s,a?0:d,r),{outline:m,newCurves:A,areContours:a,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:r}){let o=1/0,a=-1/0,l=0;for(const w of t){l+=w.length;for(let S=2,T=w.length;S<T;S++){const P=w[S]-w[S-2];o=Math.min(o,P),a=Math.max(a,P)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=W1+jf*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(i??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const w of t)f[p++]=w.length-2,f[p++]=w[0],f[p++]=w[1];const g=new CompressionStream("deflate-raw"),y=g.writable.getWriter();await y.ready,y.write(f);const A=u.prototype.constructor;for(const w of t){const S=new A(w.length-2);for(let T=2,P=w.length;T<P;T++)S[T-2]=w[T]-w[T-2];y.write(S)}y.close();const m=await new Response(g.readable).arrayBuffer(),v=new Uint8Array(m);return Q5(v)}static async decompressSignature(t){try{const e=WH(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const w of i)o||(o=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),o.set(w,a),a+=w.length;const l=new Uint32Array(o.buffer,0,o.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],d=l[3],f=l[4]===0,p=l[5],g=l[6],y=l[7],A=[],m=(W1+jf*g)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(y){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,m);break}a=0;for(let w=0;w<g;w++){const S=l[jf*w+W1],T=new Float32Array(S+2);A.push(T);for(let P=0;P<jf-1;P++)T[P]=l[jf*w+W1+P+1];for(let P=0;P<S;P++)T[P+2]=T[P]+v[a++]}return{areContours:f,thickness:p,outlines:A,width:h,height:d}}catch(e){return nt(`decompressSignature: ${e}`),null}}}Ic=new WeakMap,L0=new WeakSet,gE=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},ls=new WeakMap,vx=new WeakSet,qI=function(t,e,i,s,r,o,a){const l=E(this,L0,gE).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(-u+l-a+16)%8,d=c(this,ls)[2*h],f=c(this,ls)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},wx=new WeakSet,QI=function(t,e,i,s,r,o,a){const l=E(this,L0,gE).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(u+l+a+16)%8,d=c(this,ls)[2*h],f=c(this,ls)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},R0=new WeakSet,yE=function(t,e,i,s){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*i-1-h]=0;let a=1,l;const u=[];for(let h=1;h<i-1;h++){l=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let g=h,y=d;if(p===1&&o[f-1]===0)a+=1,y-=1;else if(p>=1&&o[f+1]===0)a+=1,y+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const A=[d,h],m=y===d+1,v={isHole:m,points:A,id:a,parent:0};u.push(v);let w;for(const R of u)if(R.id===l){w=R;break}w?w.isHole?v.parent=m?w.parent:l:v.parent=m?l:w.parent:v.parent=m?l:0;const S=E(this,vx,qI).call(this,o,e,h,d,g,y,0);if(S===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let T=c(this,ls)[2*S],P=c(this,ls)[2*S+1];const _=h+T,k=d+P;g=_,y=k;let L=h,D=d;for(;;){const R=E(this,wx,QI).call(this,o,e,L,D,g,y,1);T=c(this,ls)[2*R],P=c(this,ls)[2*R+1];const I=L+T,B=D+P;A.push(B,I);const F=L*e+D;if(o[F+1]===0?o[F]=-a:o[F]===1&&(o[F]=a),I===h&&B===d&&L===_&&D===k){o[f]!==1&&(l=Math.abs(o[f]));break}else g=L,y=D,L=I,D=B}}}return u},$d=new WeakSet,Ny=function(t,e,i,s){if(i-e<=4){for(let _=e;_<i-2;_+=2)s.push(t[_],t[_+1]);return}const r=t[e],o=t[e+1],a=t[i-4]-r,l=t[i-3]-o,u=Math.hypot(a,l),h=a/u,d=l/u,f=h*o-d*r,p=l/a,g=1/u,y=Math.atan(p),A=Math.cos(y),m=Math.sin(y),v=g*(Math.abs(A)+Math.abs(m)),w=g*(1-v+v**2),S=Math.max(Math.atan(Math.abs(m+A)*w),Math.atan(Math.abs(m-A)*w));let T=0,P=e;for(let _=e+2;_<i-2;_+=2){const k=Math.abs(f-h*t[_+1]+d*t[_]);k>T&&(P=_,T=k)}T>(u*S)**2?(E(this,$d,Ny).call(this,t,e,P+2,s),E(this,$d,Ny).call(this,t,P,i,s)):s.push(r,o)},xx=new WeakSet,ZI=function(t){const e=[],i=t.length;return E(this,$d,Ny).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},bx=new WeakSet,JI=function(t,e,i,s,r,o){const a=new Float32Array(o**2),l=-2*s**2,u=o>>1;for(let y=0;y<o;y++){const A=(y-u)**2;for(let m=0;m<o;m++)a[y*o+m]=Math.exp((A+(m-u)**2)/l)}const h=new Float32Array(256),d=-2*r**2;for(let y=0;y<256;y++)h[y]=Math.exp(y**2/d);const f=t.length,p=new Uint8Array(f),g=new Uint32Array(256);for(let y=0;y<i;y++)for(let A=0;A<e;A++){const m=y*e+A,v=t[m];let w=0,S=0;for(let P=0;P<o;P++){const _=y+P-u;if(!(_<0||_>=i))for(let k=0;k<o;k++){const L=A+k-u;if(L<0||L>=e)continue;const D=t[_*e+L],R=a[P*o+k]*h[Math.abs(D-v)];w+=D*R,S+=R}}const T=p[m]=Math.round(w/S);g[T]++}return[p,g]},Ax=new WeakSet,t6=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},D0=new WeakSet,vE=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let a=0,l=i.length;a<l;a++){const u=i[a]=t[a<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let a=0,l=i.length;a<l;a++)i[a]=(i[a]-r)*o;return i},F0=new WeakSet,wE=function(t){let e,i=-1/0,s=-1/0;const r=t.findIndex(l=>l!==0);let o=r,a=r;for(e=r;e<256;e++){const l=t[e];l>i&&(e-o>s&&(s=e-o,a=e-1),i=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},Sx=new WeakSet,e6=function(t){const e=t,{width:i,height:s}=t,{maxDim:r}=c(this,Ic);let o=i,a=s;if(i>r||s>r){let f=i,p=s,g=Math.log2(Math.max(i,s)/r);const y=Math.floor(g);g=g===y?y-1:y;for(let m=0;m<g;m++){o=Math.ceil(f/2),a=Math.ceil(p/2);const v=new OffscreenCanvas(o,a);v.getContext("2d").drawImage(t,0,0,f,p,0,0,o,a),f=o,p=a,t!==e&&t.close(),t=v.transferToImageBitmap()}const A=Math.min(r/o,r/a);o=Math.round(o*A),a=Math.round(a*A)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,a);const h=u.getImageData(0,0,o,a).data;return[E(this,D0,vE).call(this,h),o,a]},x(me,L0),x(me,vx),x(me,wx),x(me,R0),x(me,$d),x(me,xx),x(me,bx),x(me,Ax),x(me,D0),x(me,F0),x(me,Sx),x(me,Ic,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(me,ls,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class WT extends HI{constructor(){super(),super.updateProperties({fill:Ft._defaultLineColor,"stroke-width":0})}clone(){const t=new WT;return t.updateAll(this),t}}class GT extends a2{constructor(t){super(t),super.updateProperties({stroke:Ft._defaultLineColor,"stroke-width":1})}clone(){const t=new GT(this._viewParameters);return t.updateAll(this),t}}var ha,Gs,da,Nc;const Un=class Un extends Iv{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});x(this,ha,!1);x(this,Gs,null);x(this,da,null);x(this,Nc,null);this._willKeepAspectRatio=!0,b(this,da,e.signatureData||null),b(this,Gs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){Ft.initialize(e,i),this._defaultDrawingOptions=new WT,this._defaultDrawnSignatureOptions=new GT(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,Gs)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(c(this,da)){const{lines:r,mustSmooth:o,areContours:a,description:l,uuid:u,heightInPage:h}=c(this,da),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,g=me.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:Un._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(g,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,Gs)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){b(this,Nc,e),this.addEditToolbar()}getUuid(){return c(this,Nc)}get description(){return c(this,Gs)}set description(e){b(this,Gs,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:r,height:o}=c(this,da),a=Math.max(r,o),l=me.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,s,r){const{x:o,y:a}=this,{outline:l}=b(this,da,e);b(this,ha,l instanceof mE),this.description=s;let u;c(this,ha)?u=Un.getDefaultDrawingOptions():(u=Un._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,h]=this.pageDimensions;let d=i/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return me.process(e,i,s,r,Un._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return me.extractContoursFromText(e,i,s,r,o,Un._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return me.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Un._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=Un.getDefaultDrawingOptions():(this._drawingOptions=Un._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:c(this,ha),color:[0,0,0],thickness:c(this,ha)?0:r});return this.addComment(o),e?(o.paths={lines:i,points:s},o.uuid=c(this,Nc),o.isCopy=!0):o.lines=i,c(this,Gs)&&(o.accessibilityData={type:"Figure",alt:c(this,Gs)}),o}static deserializeDraw(e,i,s,r,o,a){return a.areContours?mE.deserialize(e,i,s,r,o,a):a1.deserialize(e,i,s,r,o,a)}static async deserialize(e,i,s){var o;const r=await super.deserialize(e,i,s);return b(r,ha,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",b(r,Nc,e.uuid),r}};ha=new WeakMap,Gs=new WeakMap,da=new WeakMap,Nc=new WeakMap,z(Un,"_type","signature"),z(Un,"_editorType",et.SIGNATURE),z(Un,"_defaultDrawingOptions",null);let xE=Un;var $t,Fe,fa,$r,pa,zd,zr,Oc,Xs,ai,Ud,Bc,hp,jc,dp,Hd,Oy,Wd,By,Gd,jy,I0,AE,Xd,Vy,Ex,n6;class bE extends Ft{constructor(e){super({...e,name:"stampEditor"});x(this,Bc);x(this,jc);x(this,Hd);x(this,Wd);x(this,Gd);x(this,I0);x(this,Xd);x(this,Ex);x(this,$t,null);x(this,Fe,null);x(this,fa,null);x(this,$r,null);x(this,pa,null);x(this,zd,"");x(this,zr,null);x(this,Oc,!1);x(this,Xs,null);x(this,ai,!1);x(this,Ud,!1);b(this,$r,e.bitmapUrl),b(this,pa,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){Ft.initialize(e,i)}static isHandlingMimeForPasting(e){return Pv.includes(e)}static paste(e,i){i.pasteEditor({mode:et.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;c(this,Fe)&&(b(this,$t,null),this._uiManager.imageManager.deleteId(c(this,Fe)),(e=c(this,zr))==null||e.remove(),b(this,zr,null),c(this,Xs)&&(clearTimeout(c(this,Xs)),b(this,Xs,null))),super.remove()}rebuild(){if(!this.parent){c(this,Fe)&&E(this,Hd,Oy).call(this);return}super.rebuild(),this.div!==null&&(c(this,Fe)&&c(this,zr)===null&&E(this,Hd,Oy).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,fa)||c(this,$t)||c(this,$r)||c(this,pa)||c(this,Fe)||c(this,Oc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Oc)||(c(this,$t)?E(this,Wd,By).call(this):E(this,Hd,Oy).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(b(this,Fe,s),r&&b(this,$t,r),b(this,Oc,!1),E(this,Wd,By).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,Xs)!==null&&clearTimeout(c(this,Xs)),b(this,Xs,setTimeout(()=>{b(this,Xs,null),E(this,I0,AE).call(this)},200))}copyCanvas(e,i,s=!1){e||(e=224);const{width:r,height:o}=c(this,$t),a=new ys;let l=c(this,$t),u=r,h=o,d=null;if(i){if(r>i||o>i){const _=Math.min(i/r,i/o);u=Math.floor(r*_),h=Math.floor(o*_)}d=document.createElement("canvas");const p=d.width=Math.ceil(u*a.sx),g=d.height=Math.ceil(h*a.sy);c(this,ai)||(l=E(this,Gd,jy).call(this,p,g));const y=d.getContext("2d");y.filter=this._uiManager.hcmFilter;let A="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":YH.isDarkMode&&(A="#8f8f9d",m="#42414d");const v=15,w=v*a.sx,S=v*a.sy,T=new OffscreenCanvas(w*2,S*2),P=T.getContext("2d");P.fillStyle=A,P.fillRect(0,0,w*2,S*2),P.fillStyle=m,P.fillRect(0,0,w,S),P.fillRect(w,S,w,S),y.fillStyle=y.createPattern(T,"repeat"),y.fillRect(0,0,p,g),y.drawImage(l,0,0,l.width,l.height,0,0,p,g)}let f=null;if(s){let p,g;if(a.symmetric&&l.width<e&&l.height<e)p=l.width,g=l.height;else if(l=c(this,$t),r>e||o>e){const m=Math.min(e/r,e/o);p=Math.floor(r*m),g=Math.floor(o*m),c(this,ai)||(l=E(this,Gd,jy).call(this,p,g))}const A=new OffscreenCanvas(p,g).getContext("2d",{willReadFrequently:!0});A.drawImage(l,0,0,l.width,l.height,0,0,p,g),f={width:p,height:g,data:A.getImageData(0,0,p,g).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,s){var A;let r=null,o=!1;if(e instanceof vI){const{data:{rect:m,rotation:v,id:w,structParent:S,popupRef:T,richText:P,contentsObj:_,creationDate:k,modificationDate:L},container:D,parent:{page:{pageNumber:R}},canvas:I}=e;let B,F;I?(delete e.canvas,{id:B,bitmap:F}=s.imageManager.getFromCanvas(D.id,I),I.remove()):(o=!0,e._hasNoCanvas=!0);const V=((A=await i._structTree.getAriaAttributes(`${FT}${w}`))==null?void 0:A.get("aria-label"))||"";r=e={annotationType:et.STAMP,bitmapId:B,bitmap:F,pageIndex:R-1,rect:m.slice(0),rotation:v,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:V},isSvg:!1,structParent:S,popupRef:T,richText:P,comment:(_==null?void 0:_.str)||null,creationDate:k,modificationDate:L}}const a=await super.deserialize(e,i,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,a),b(a,Oc,!0)):d&&s.imageManager.isValidId(d)?(b(a,Fe,d),u&&b(a,$t,u)):b(a,$r,h),b(a,ai,f);const[g,y]=a.pageDimensions;return a.width=(l[2]-l[0])/g,a.height=(l[3]-l[1])/y,p&&(a.altTextData=p),a._initialData=r,e.comment&&a.setCommentData(e),b(a,Ud,!!r),a}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:c(this,Fe),isSvg:c(this,ai)});if(this.addComment(s),e)return s.bitmapUrl=E(this,Xd,Vy).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=E(this,Ex,n6).call(this,s);return l.isSame?null:(l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||(i.stamps=new Map);const a=c(this,ai)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(c(this,Fe)))i.stamps.set(c(this,Fe),{area:a,serialized:s}),s.bitmap=E(this,Xd,Vy).call(this,!1);else if(c(this,ai)){const l=i.stamps.get(c(this,Fe));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,Xd,Vy).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}$t=new WeakMap,Fe=new WeakMap,fa=new WeakMap,$r=new WeakMap,pa=new WeakMap,zd=new WeakMap,zr=new WeakMap,Oc=new WeakMap,Xs=new WeakMap,ai=new WeakMap,Ud=new WeakMap,Bc=new WeakSet,hp=function(e,i=!1){if(!e){this.remove();return}b(this,$t,e.bitmap),i||(b(this,Fe,e.id),b(this,ai,e.isSvg)),e.file&&b(this,zd,e.file.name),E(this,Wd,By).call(this)},jc=new WeakSet,dp=function(){if(b(this,fa,null),this._uiManager.enableWaiting(!1),!!c(this,zr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,$t)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,$t)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Hd=new WeakSet,Oy=function(){if(c(this,Fe)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Fe)).then(s=>E(this,Bc,hp).call(this,s,!0)).finally(()=>E(this,jc,dp).call(this));return}if(c(this,$r)){const s=c(this,$r);b(this,$r,null),this._uiManager.enableWaiting(!0),b(this,fa,this._uiManager.imageManager.getFromUrl(s).then(r=>E(this,Bc,hp).call(this,r)).finally(()=>E(this,jc,dp).call(this)));return}if(c(this,pa)){const s=c(this,pa);b(this,pa,null),this._uiManager.enableWaiting(!0),b(this,fa,this._uiManager.imageManager.getFromFile(s).then(r=>E(this,Bc,hp).call(this,r)).finally(()=>E(this,jc,dp).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Pv.join(",");const i=this._uiManager._signal;b(this,fa,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Bc,hp).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>E(this,jc,dp).call(this))),e.click()},Wd=new WeakSet,By=function(){var u;const{div:e}=this;let{width:i,height:s}=c(this,$t);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const h=Math.min(a*r/i,a*o/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const l=b(this,zr,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=i/r,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,I0,AE).call(this),c(this,Ud)||(this.parent.addUndoableEditor(this),b(this,Ud,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,zd)&&this.div.setAttribute("aria-description",c(this,zd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Gd=new WeakSet,jy=function(e,i){const{width:s,height:r}=c(this,$t);let o=s,a=r,l=c(this,$t);for(;o>2*e||a>2*i;){const u=o,h=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,h,0,0,o,a),l=d.transferToImageBitmap()}return l},I0=new WeakSet,AE=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new ys,a=Math.ceil(s*e*o.sx),l=Math.ceil(r*i*o.sy),u=c(this,zr);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const h=c(this,ai)?c(this,$t):E(this,Gd,jy).call(this,a,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,l)},Xd=new WeakSet,Vy=function(e){if(e){if(c(this,ai)){const r=this._uiManager.imageManager.getSvgUrl(c(this,Fe));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,$t),i.getContext("2d").drawImage(c(this,$t),0,0),i.toDataURL()}if(c(this,ai)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*oo.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*oo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(c(this,$t),0,0,c(this,$t).width,c(this,$t).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(c(this,$t))},Ex=new WeakSet,n6=function(e){var a;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},z(bE,"_type","stamp"),z(bE,"_editorType",et.STAMP);var Vc,Yd,ma,ga,Ur,Fn,ya,Kd,qd,cs,Hr,Ie,Wr,va,Qd,Q,wa,N0,SE,Cx,i6,Ni,As,O0,EE,B0,CE,Zd,$y;const Ki=class Ki{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:h}){x(this,N0);x(this,Cx);x(this,Ni);x(this,O0);x(this,B0);x(this,Zd);x(this,Vc,void 0);x(this,Yd,!1);x(this,ma,null);x(this,ga,null);x(this,Ur,null);x(this,Fn,new Map);x(this,ya,!1);x(this,Kd,!1);x(this,qd,!1);x(this,cs,null);x(this,Hr,null);x(this,Ie,null);x(this,Wr,null);x(this,va,null);x(this,Qd,-1);x(this,Q,void 0);const d=[...c(Ki,wa).values()];if(!Ki._initialized){Ki._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),b(this,Q,t),this.pageIndex=e,this.div=i,b(this,Vc,r),b(this,ma,o),this.viewport=u,b(this,Ie,l),this.drawLayer=a,this._structTree=s,c(this,Q).addLayer(this)}get isEmpty(){return c(this,Fn).size===0}get isInvisible(){return this.isEmpty&&c(this,Q).getMode()===et.NONE}updateToolbar(t){c(this,Q).updateToolbar(t)}updateMode(t=c(this,Q).getMode()){switch(E(this,Zd,$y).call(this),t){case et.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case et.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===et.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of c(Ki,wa).values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,Ie))==null?void 0:e.div)}setEditingState(t){c(this,Q).setEditingState(t)}addCommands(t){c(this,Q).addCommands(t)}cleanUndoStack(t){c(this,Q).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,ma))==null||e.div.classList.toggle("disabled",!t)}async enable(){var i;b(this,qd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=c(this,va))==null||i.abort(),b(this,va,null);const t=new Set;for(const s of c(this,N0,SE))s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,Q).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=c(this,ma);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),c(this,Q).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}b(this,qd,!1),c(this,Q)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(b(this,Kd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,Ie)&&!c(this,va)){b(this,va,new AbortController);const s=c(this,Q).combinedSignal(c(this,va));c(this,Ie).div.addEventListener("pointerdown",r=>{const{clientX:a,clientY:l,timeStamp:u}=r,h=c(this,Qd);if(u-h>500){b(this,Qd,u);return}b(this,Qd,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(a,l);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const g=new RegExp(`^${rm}[0-9]+$`);for(const A of f)if(g.test(A.id)){p=A.id;break}if(!p)return;const y=c(this,Fn).get(p);(y==null?void 0:y.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),y.dblclick(r))},{signal:s,capture:!0})}const t=c(this,ma);if(t){const s=new Map,r=new Map;for(const a of c(this,N0,SE)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(t);continue}if(a.serialize()!==null){s.set(a.annotationElementId,a);continue}else r.set(a.annotationElementId,a);(i=this.getEditableAnnotation(a.annotationElementId))==null||i.show(),a.remove()}const o=t.getEditableAnnotations();for(const a of o){const{id:l}=a.data;if(c(this,Q).isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let u=r.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=s.get(l),u&&(c(this,Q).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}E(this,Zd,$y).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of c(Ki,wa).values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,Kd,!1)}getEditableAnnotation(t){var e;return((e=c(this,ma))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,Q).getActive()!==t&&c(this,Q).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,Ie))!=null&&t.div&&!c(this,Wr)){b(this,Wr,new AbortController);const e=c(this,Q).combinedSignal(c(this,Wr));c(this,Ie).div.addEventListener("pointerdown",E(this,Cx,i6).bind(this),{signal:e}),c(this,Ie).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,Ie))!=null&&t.div&&c(this,Wr)&&(c(this,Wr).abort(),b(this,Wr,null),c(this,Ie).div.classList.remove("highlighting"))}enableClick(){if(c(this,ga))return;b(this,ga,new AbortController);const t=c(this,Q).combinedSignal(c(this,ga));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,ga))==null||t.abort(),b(this,ga,null)}attach(t){c(this,Fn).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,Q).isDeletedAnnotationElement(e)&&c(this,Q).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,Fn).delete(t.id),(e=c(this,Vc))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Kd)&&t.annotationElementId&&c(this,Q).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,Q).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,Q).addDeletedAnnotationElement(t.annotationElementId),Ft.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,Q).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,qd)),c(this,Q).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,Ur)&&(t._focusEventsAllowed=!1,b(this,Ur,setTimeout(()=>{b(this,Ur,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,Q)._signal}),e.focus())},0))),t._structTreeParentId=(i=c(this,Vc))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of c(this,Fn).values())if(e.uid===t)return e;return null}getNextId(){return c(this,Q).getId()}combinedSignal(t){return c(this,Q).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Ni,As))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,Q).updateMode(t.mode);const{offsetX:i,offsetY:s}=E(this,B0,CE).call(this),r=this.getNextId(),o=E(this,O0,EE).call(this,{parent:this,id:r,x:i,y:s,uiManager:c(this,Q),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=c(Ki,wa).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,Q)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=E(this,O0,EE).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:c(this,Q),isCentered:e,...i});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(E(this,B0,CE).call(this),!0,t)}setSelected(t){c(this,Q).setSelected(t)}toggleSelected(t){c(this,Q).toggleSelected(t)}unselect(t){c(this,Q).unselect(t)}pointerup(t){var s;const{isMac:e}=Be.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,ya)||(b(this,ya,!1),(s=c(this,Ni,As))!=null&&s.isDrawer&&c(this,Ni,As).supportMultipleDrawings))return;if(!c(this,Yd)){b(this,Yd,!0);return}const i=c(this,Q).getMode();if(i===et.STAMP||i===et.SIGNATURE){c(this,Q).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(c(this,Q).getMode()===et.HIGHLIGHT&&this.enableTextSelection(),c(this,ya)){b(this,ya,!1);return}const{isMac:e}=Be.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,ya,!0),(s=c(this,Ni,As))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=c(this,Q).getActive();b(this,Yd,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,cs)){c(this,Ni,As).startDrawing(this,c(this,Q),!1,t);return}c(this,Q).setCurrentDrawingSession(this),b(this,cs,new AbortController);const e=c(this,Q).combinedSignal(c(this,cs));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(b(this,Hr,null),this.commitOrRemove())},{signal:e}),c(this,Ni,As).startDrawing(this,c(this,Q),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,Hr,e);return}c(this,Hr)&&setTimeout(()=>{var e;(e=c(this,Hr))==null||e.focus(),b(this,Hr,null)},0)}endDrawingSession(t=!1){return c(this,cs)?(c(this,Q).setCurrentDrawingSession(null),c(this,cs).abort(),b(this,cs,null),b(this,Hr,null),c(this,Ni,As).endDrawing(t)):null}findNewParent(t,e,i){const s=c(this,Q).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return c(this,cs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,cs)&&c(this,Ni,As).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,Q).getActive())==null?void 0:t.parent)===this&&(c(this,Q).commitOrRemove(),c(this,Q).setActiveEditor(null)),c(this,Ur)&&(clearTimeout(c(this,Ur)),b(this,Ur,null));for(const i of c(this,Fn).values())(e=c(this,Vc))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,Fn).clear(),c(this,Q).removeLayer(this)}render({viewport:t}){this.viewport=t,Va(this.div,t);for(const e of c(this,Q).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,Q).commitOrRemove(),E(this,Zd,$y).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Va(this.div,{rotation:i}),e!==i)for(const s of c(this,Fn).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,Q).viewParameters.realScale}};Vc=new WeakMap,Yd=new WeakMap,ma=new WeakMap,ga=new WeakMap,Ur=new WeakMap,Fn=new WeakMap,ya=new WeakMap,Kd=new WeakMap,qd=new WeakMap,cs=new WeakMap,Hr=new WeakMap,Ie=new WeakMap,Wr=new WeakMap,va=new WeakMap,Qd=new WeakMap,Q=new WeakMap,wa=new WeakMap,N0=new WeakSet,SE=function(){return c(this,Fn).size!==0?c(this,Fn).values():c(this,Q).getEditors(this.pageIndex)},Cx=new WeakSet,i6=function(t){c(this,Q).unselectAll();const{target:e}=t;if(e===c(this,Ie).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,Ie).div.contains(e)){const{isMac:i}=Be.platform;if(t.button!==0||t.ctrlKey&&i)return;c(this,Q).showAllEditors("highlight",!0,!0),c(this,Ie).div.classList.add("free"),this.toggleDrawing(),Fv.startHighlighting(this,c(this,Q).direction==="ltr",{target:c(this,Ie).div,x:t.x,y:t.y}),c(this,Ie).div.addEventListener("pointerup",()=>{c(this,Ie).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,Q)._signal}),t.preventDefault()}},Ni=new WeakSet,As=function(){return c(Ki,wa).get(c(this,Q).getMode())},O0=new WeakSet,EE=function(t){const e=c(this,Ni,As);return e?new e.prototype.constructor(t):null},B0=new WeakSet,CE=function(){const{x:t,y:e,width:i,height:s}=this.boundingClientRect,r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),u=(r+a)/2-t,h=(o+l)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Zd=new WeakSet,$y=function(){for(const t of c(this,Fn).values())t.isEmpty()&&t.remove()},z(Ki,"_initialized",!1),x(Ki,wa,new Map([sE,pE,bE,Fv,xE].map(t=>[t._editorType,t])));let Nv=Ki;var us,vn,$c,j0,Tx,s6,V0,TE,Px,r6,$0,PE;const be=class be{constructor({pageIndex:t}){x(this,V0);x(this,Px);x(this,$0);x(this,us,null);x(this,vn,new Map);x(this,$c,new Map);this.pageIndex=t}setParent(t){if(!c(this,us)){b(this,us,t);return}if(c(this,us)!==t){if(c(this,vn).size>0)for(const e of c(this,vn).values())e.remove(),t.append(e);b(this,us,t)}}static get _svgFactory(){return rt(this,"_svgFactory",new dm)}draw(t,e=!1,i=!1){const s=xe(be,j0)._++,r=E(this,V0,TE).call(this),o=be._svgFactory.createElement("defs");r.append(o);const a=be._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,$c).set(s,a);const u=i?E(this,Px,r6).call(this,o,l):null,h=be._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(r,t),c(this,vn).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=xe(be,j0)._++,s=E(this,V0,TE).call(this),r=be._svgFactory.createElement("defs");s.append(r);const o=be._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=be._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=be._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=be._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=be._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),c(this,vn).set(i,s),i}finalizeDraw(t,e){c(this,$c).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,a=typeof t=="number"?c(this,vn).get(t):t;if(a){if(i&&E(this,$0,PE).call(this,a,i),s&&E(l=be,Tx,s6).call(l,a,s),r){const{classList:u}=a;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;E(this,$0,PE).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=c(this,vn).get(t);i&&(c(e,us).append(i),c(this,vn).delete(t),c(e,vn).set(t,i))}remove(t){c(this,$c).delete(t),c(this,us)!==null&&(c(this,vn).get(t).remove(),c(this,vn).delete(t))}destroy(){b(this,us,null);for(const t of c(this,vn).values())t.remove();c(this,vn).clear(),c(this,$c).clear()}};us=new WeakMap,vn=new WeakMap,$c=new WeakMap,j0=new WeakMap,Tx=new WeakSet,s6=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},V0=new WeakSet,TE=function(){const t=be._svgFactory.create(1,1,!0);return c(this,us).append(t),t.setAttribute("aria-hidden",!0),t},Px=new WeakSet,r6=function(t,e){const i=be._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=be._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},$0=new WeakSet,PE=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},x(be,Tx),x(be,j0,0);let Ov=be;globalThis._pdfjsTestingUtils={HighlightOutliner:oE};globalThis.pdfjsLib={AbortException:ro,AnnotationEditorLayer:Nv,AnnotationEditorParamsType:ct,AnnotationEditorType:et,AnnotationEditorUIManager:$a,AnnotationLayer:HT,AnnotationMode:Ks,AnnotationType:ae,applyOpacity:nF,build:oI,ColorPicker:hm,createValidAbsoluteUrl:LT,CSSConstants:eF,DOMSVGFactory:dm,DrawLayer:Ov,FeatureTest:Be,fetchData:xf,findContrastColor:iF,getDocument:VT,getFilenameFromUrl:Z5,getPdfFilenameFromUrl:J5,getRGB:bf,getUuid:DT,getXfaPageViewport:tF,GlobalWorkerOptions:ji,ImageKind:Lp,InvalidPDFException:Tv,isDataScheme:s1,isPdfFile:r2,isValidExplicitDest:NF,MathClamp:cn,noContextMenu:mi,normalizeUnicode:q5,OPS:hf,OutputScale:ys,PasswordResponses:Y5,PDFDataRangeTransport:$T,PDFDateString:lm,PDFWorker:df,PermissionFlag:X5,PixelsPerInch:oo,RenderingCancelledException:s2,renderRichText:NT,ResponseException:om,setLayerDimensions:Va,shadow:rt,SignatureExtractor:me,stopEvent:Yt,SupportedImageMimeTypes:Pv,TextLayer:um,TouchManager:cm,updateUrlHash:RT,Util:X,VerbosityLevel:e1,version:rI,XfaLayer:IT};const bG=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ro,AnnotationEditorLayer:Nv,AnnotationEditorParamsType:ct,AnnotationEditorType:et,AnnotationEditorUIManager:$a,AnnotationLayer:HT,AnnotationMode:Ks,AnnotationType:ae,CSSConstants:eF,ColorPicker:hm,DOMSVGFactory:dm,DrawLayer:Ov,FeatureTest:Be,GlobalWorkerOptions:ji,ImageKind:Lp,InvalidPDFException:Tv,MathClamp:cn,OPS:hf,OutputScale:ys,PDFDataRangeTransport:$T,PDFDateString:lm,PDFWorker:df,PasswordResponses:Y5,PermissionFlag:X5,PixelsPerInch:oo,RenderingCancelledException:s2,ResponseException:om,SignatureExtractor:me,SupportedImageMimeTypes:Pv,TextLayer:um,TouchManager:cm,Util:X,VerbosityLevel:e1,XfaLayer:IT,applyOpacity:nF,build:oI,createValidAbsoluteUrl:LT,fetchData:xf,findContrastColor:iF,getDocument:VT,getFilenameFromUrl:Z5,getPdfFilenameFromUrl:J5,getRGB:bf,getUuid:DT,getXfaPageViewport:tF,isDataScheme:s1,isPdfFile:r2,isValidExplicitDest:NF,noContextMenu:mi,normalizeUnicode:q5,renderRichText:NT,setLayerDimensions:Va,shadow:rt,stopEvent:Yt,updateUrlHash:RT,version:rI},Symbol.toStringTag,{value:"Module"}));function o6(n){var t,e,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(t=0;t<s;t++)n[t]&&(e=o6(n[t]))&&(i&&(i+=" "),i+=e)}else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function l2(){for(var n,t,e=0,i="",s=arguments.length;e<s;e++)(n=arguments[e])&&(t=o6(n))&&(i&&(i+=" "),i+=t);return i}var i3=Object.prototype.hasOwnProperty;function s3(n,t,e){for(e of n.keys())if(Zu(e,t))return e}function Zu(n,t){var e,i,s;if(n===t)return!0;if(n&&t&&(e=n.constructor)===t.constructor){if(e===Date)return n.getTime()===t.getTime();if(e===RegExp)return n.toString()===t.toString();if(e===Array){if((i=n.length)===t.length)for(;i--&&Zu(n[i],t[i]););return i===-1}if(e===Set){if(n.size!==t.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=s3(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(n.size!==t.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=s3(t,s),!s)||!Zu(i[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)n=new Uint8Array(n),t=new Uint8Array(t);else if(e===DataView){if((i=n.byteLength)===t.byteLength)for(;i--&&n.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===t.byteLength)for(;i--&&n[i]===t[i];);return i===-1}if(!e||typeof n=="object"){i=0;for(e in n)if(i3.call(n,e)&&++i&&!i3.call(t,e)||!(e in t)||!Zu(n[e],t[e]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}function l1(n){let t=!1;return{promise:new Promise((i,s)=>{n.then(r=>!t&&i(r)).catch(r=>!t&&s(r))}),cancel(){t=!0}}}const AG=["onCopy","onCut","onPaste"],SG=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],EG=["onFocus","onBlur"],CG=["onInput","onInvalid","onReset","onSubmit"],TG=["onLoad","onError"],PG=["onKeyDown","onKeyPress","onKeyUp"],_G=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],kG=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],MG=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],LG=["onSelect"],RG=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],DG=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],FG=["onScroll"],IG=["onWheel"],NG=["onAnimationStart","onAnimationEnd","onAnimationIteration"],OG=["onTransitionEnd"],BG=["onToggle"],jG=["onChange"],VG=[...AG,...SG,...EG,...CG,...TG,...PG,..._G,...kG,...MG,...LG,...RG,...DG,...FG,...IG,...NG,...OG,...jG,...BG];function a6(n,t){const e={};for(const i of VG){const s=n[i];s&&(t?e[i]=r=>s(r,t(i)):e[i]=s)}return e}var $G=!0,Sb="Invariant failed";function kt(n,t){if(!n){if($G)throw new Error(Sb);var e=typeof t=="function"?t():t,i=e?"".concat(Sb,": ").concat(e):Sb;throw new Error(i)}}var zG=function(){},UG=zG;const hn=_3(UG),HG=M.createContext(null),l6=HG,WG="noopener noreferrer nofollow";class GG{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return kt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){kt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||WG,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{kt(this.pdfDocument,"PDF document not loaded."),kt(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{kt(Array.isArray(e),`"${e}" is not a valid destination array.`);const i=e[0];new Promise(s=>{kt(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{kt(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):kt(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const r=s+1;kt(this.pdfViewer,"PDF viewer is not initialized."),kt(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}goToPage(t){const e=t-1;kt(this.pdfViewer,"PDF viewer is not initialized."),kt(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Ju({children:n,type:t}){return C.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:n})}const XG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},r3=XG;function YG(n,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function ff(){return M.useReducer(YG,{value:void 0,error:void 0})}const c2=typeof window<"u",c6=c2&&window.location.protocol==="file:";function KG(n){return typeof n<"u"}function Ka(n){return KG(n)&&n!==null}function qG(n){return typeof n=="string"}function QG(n){return n instanceof ArrayBuffer}function ZG(n){return kt(c2,"isBlob can only be used in a browser environment"),n instanceof Blob}function _E(n){return qG(n)&&/^data:/.test(n)}function o3(n){kt(_E(n),"Invalid data URI.");const[t="",e=""]=n.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function JG(){return c2&&window.devicePixelRatio||1}const u6="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function a3(){hn(!c6,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${u6}`)}function tX(){hn(!c6,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${u6}`)}function Zc(n){n!=null&&n.cancel&&n.cancel()}function kE(n,t){return Object.defineProperty(n,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function eX(n){return n.name==="RenderingCancelledException"}function nX(n){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:iX}=bG,sX=(n,t)=>{switch(t){case r3.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");n(e);break}case r3.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");n(e);break}}};function l3(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const rX=M.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:r,file:o,inputRef:a,imageResourcesPath:l,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:p,onLoadSuccess:g,onPassword:y=sX,onSourceError:A,onSourceSuccess:m,options:v,renderMode:w,rotate:S,scale:T,...P},_){const[k,L]=ff(),{value:D,error:R}=k,[I,B]=ff(),{value:F,error:V}=I,O=M.useRef(new GG),j=M.useRef([]),N=M.useRef(void 0),$=M.useRef(void 0);o&&o!==N.current&&l3(o)&&(hn(!Zu(o,N.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),N.current=o),v&&v!==$.current&&(hn(!Zu(v,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=v);const H=M.useRef({scrollPageIntoView:yt=>{const{dest:Bt,pageNumber:we,pageIndex:Pe=we-1}=yt;if(d){d({dest:Bt,pageIndex:Pe,pageNumber:we});return}const ru=j.current[Pe];if(ru){ru.scrollIntoView();return}hn(!1,`An internal link leading to page ${we} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});M.useImperativeHandle(_,()=>({linkService:O,pages:j,viewer:H}),[]);function W(){m&&m()}function G(){R&&(hn(!1,R.toString()),A&&A(R))}function Z(){L({type:"RESET"})}M.useEffect(Z,[o,L]);const dt=M.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return _E(o)?{data:o3(o)}:(a3(),{url:o});if(o instanceof iX)return{range:o};if(QG(o))return{data:o};if(c2&&ZG(o))return{data:await nX(o)};if(kt(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),kt(l3(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(_E(o.url)){const{url:yt,...Bt}=o;return{data:o3(yt),...Bt}}a3()}return o},[o]);M.useEffect(()=>{const yt=l1(dt());return yt.promise.then(Bt=>{L({type:"RESOLVE",value:Bt})}).catch(Bt=>{L({type:"REJECT",error:Bt})}),()=>{Zc(yt)}},[dt,L]),M.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){G();return}W()}},[D]);function vt(){F&&(g&&g(F),j.current=new Array(F.numPages),O.current.setDocument(F))}function ut(){V&&(hn(!1,V.toString()),f&&f(V))}M.useEffect(function(){B({type:"RESET"})},[B,D]),M.useEffect(function(){if(!D)return;const Bt=v?{...D,...v}:D,we=VT(Bt);p&&(we.onProgress=p),y&&(we.onPassword=y);const Pe=we,ru=Pe.promise.then(Af=>{B({type:"RESOLVE",value:Af})}).catch(Af=>{Pe.destroyed||B({type:"REJECT",error:Af})});return()=>{ru.finally(()=>Pe.destroy())}},[v,B,D]),M.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){ut();return}vt()}},[F]),M.useEffect(function(){O.current.setViewer(H.current),O.current.setExternalLinkRel(s),O.current.setExternalLinkTarget(r)},[s,r]);const lt=M.useCallback((yt,Bt)=>{j.current[yt]=Bt},[]),vi=M.useCallback(yt=>{delete j.current[yt]},[]),je=M.useMemo(()=>({imageResourcesPath:l,linkService:O.current,onItemClick:d,pdf:F,registerPage:lt,renderMode:w,rotate:S,scale:T,unregisterPage:vi}),[l,d,F,lt,w,S,T,vi]),gt=M.useMemo(()=>a6(P,()=>F),[P,F]);function oe(){function yt(we){return!!(we!=null&&we.pdf)}if(!yt(je))throw new Error("pdf is undefined");const Bt=typeof t=="function"?t(je):t;return C.jsx(l6.Provider,{value:je,children:Bt})}function vs(){return o?F==null?C.jsx(Ju,{type:"loading",children:typeof u=="function"?u():u}):F===!1?C.jsx(Ju,{type:"error",children:typeof i=="function"?i():i}):oe():C.jsx(Ju,{type:"no-data",children:typeof h=="function"?h():h})}return C.jsx("div",{className:l2("react-pdf__Document",e),ref:a,...gt,children:vs()})}),oX=rX;function h6(){return M.useContext(l6)}function d6(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=n.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(r){for(var o=0,a=e;o<a.length;o++){var l=a[o];typeof l=="function"?l(r):l&&(l.current=r)}}}const aX=M.createContext(null),f6=aX;function u2(){return M.useContext(f6)}function lX(){const n=h6(),t=u2();kt(t,"Unable to find Page context.");const e={...n,...t},{imageResourcesPath:i,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:u,pdf:h,renderForms:d,rotate:f,scale:p=1}=e;kt(h,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),kt(u,"Attempted to load page annotations, but no page was specified."),kt(s,"Attempted to load page annotations, but no linkService was specified.");const[g,y]=ff(),{value:A,error:m}=g,v=M.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function w(){A&&o&&o(A)}function S(){m&&(hn(!1,m.toString()),r&&r(m))}M.useEffect(function(){y({type:"RESET"})},[y,u]),M.useEffect(function(){if(!u)return;const L=l1(u.getAnnotations()),D=L;return L.promise.then(R=>{y({type:"RESOLVE",value:R})}).catch(R=>{y({type:"REJECT",error:R})}),()=>{Zc(D)}},[y,u]),M.useEffect(()=>{if(A!==void 0){if(A===!1){S();return}w()}},[A]);function T(){l&&l()}function P(k){hn(!1,`${k}`),a&&a(k)}const _=M.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return M.useEffect(function(){if(!h||!u||!s||!A)return;const{current:L}=v;if(!L)return;const D=_.clone({dontFlip:!0}),R={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:L,l10n:null,linkService:s,page:u,structTreeLayer:null,viewport:D},I={annotations:A,annotationStorage:h.annotationStorage,div:L,imageResourcesPath:i,linkService:s,page:u,renderForms:d,viewport:D};L.innerHTML="";try{new HT(R).render(I),T()}catch(B){P(B)}return()=>{}},[A,i,s,u,h,d,_]),C.jsx("div",{className:l2("react-pdf__Page__annotations","annotationLayer"),ref:v})}const p6={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},cX=/^H(\d+)$/;function uX(n){return n in p6}function h2(n){return"children"in n}function m6(n){return h2(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function hX(n){const t={};if(h2(n)){const{role:e}=n,i=e.match(cX);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(uX(e)){const s=p6[e];s&&(t.role=s)}}return t}function g6(n){const t={};if(h2(n)){if(n.alt!==void 0&&(t["aria-label"]=n.alt),n.lang!==void 0&&(t.lang=n.lang),m6(n)){const[e]=n.children;if(e){const i=g6(e);return{...t,...i}}}}else"id"in n&&(t["aria-owns"]=n.id);return t}function dX(n){return n?{...hX(n),...g6(n)}:null}function y6({className:n,node:t}){const e=M.useMemo(()=>dX(t),[t]),i=M.useMemo(()=>!h2(t)||m6(t)?null:t.children.map((s,r)=>C.jsx(y6,{node:s},r)),[t]);return C.jsx("span",{className:n,...e,children:i})}function fX(){const n=u2();kt(n,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=n,[i,s]=ff(),{value:r,error:o}=i,{customTextRenderer:a,page:l}=n;function u(){r&&e&&e(r)}function h(){o&&(hn(!1,o.toString()),t&&t(o))}return M.useEffect(function(){s({type:"RESET"})},[s,l]),M.useEffect(function(){if(a||!l)return;const f=l1(l.getStructTree()),p=f;return f.promise.then(g=>{s({type:"RESOLVE",value:g})}).catch(g=>{s({type:"REJECT",error:g})}),()=>Zc(p)},[a,l,s]),M.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?C.jsx(y6,{className:"react-pdf__Page__structTree structTree",node:r}):null}const c3=Ks;function pX(n){const t=u2();kt(t,"Unable to find Page context.");const e={...t,...n},{_className:i,canvasBackground:s,devicePixelRatio:r=JG(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=e,{canvasRef:p}=n;kt(l,"Attempted to render page canvas, but no page was specified.");const g=M.useRef(null);function y(){l&&a&&a(kE(l,f))}function A(S){eX(S)||(hn(!1,S.toString()),o&&o(S))}const m=M.useMemo(()=>l.getViewport({scale:f*r,rotation:d}),[r,l,d,f]),v=M.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);M.useEffect(function(){if(!l)return;l.cleanup();const{current:T}=g;if(!T)return;T.width=m.width,T.height=m.height,T.style.width=`${Math.floor(v.width)}px`,T.style.height=`${Math.floor(v.height)}px`,T.style.visibility="hidden";const P={annotationMode:u?c3.ENABLE_FORMS:c3.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:m};s&&(P.background=s);const _=l.render(P),k=_;return _.promise.then(()=>{T.style.visibility="",y()}).catch(A),()=>Zc(k)},[s,l,u,m,v]);const w=M.useCallback(()=>{const{current:S}=g;S&&(S.width=0,S.height=0)},[]);return M.useEffect(()=>w,[w]),C.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:d6(p,g),style:{display:"block",userSelect:"none"},children:h?C.jsx(fX,{}):null})}function mX(n){return"str"in n}function gX(){const n=u2();kt(n,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:a,pageNumber:l,rotate:u,scale:h}=n;kt(o,"Attempted to load page text content, but no page was specified.");const[d,f]=ff(),{value:p,error:g}=d,y=M.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){p&&i&&i(p)}function m(){g&&(hn(!1,g.toString()),e&&e(g))}M.useEffect(function(){f({type:"RESET"})},[o,f]),M.useEffect(function(){if(!o)return;const k=l1(o.getTextContent()),L=k;return k.promise.then(D=>{f({type:"RESOLVE",value:D})}).catch(D=>{f({type:"REJECT",error:D})}),()=>Zc(L)},[o,f]),M.useEffect(()=>{if(p!==void 0){if(p===!1){m();return}A()}},[p]);const v=M.useCallback(()=>{r&&r()},[r]),w=M.useCallback(_=>{hn(!1,_.toString()),s&&s(_)},[s]);function S(){const _=y.current;_&&_.classList.add("selecting")}function T(){const _=y.current;_&&_.classList.remove("selecting")}const P=M.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return M.useLayoutEffect(function(){if(!o||!p)return;const{current:k}=y;if(!k)return;k.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),D={container:k,textContentSource:L,viewport:P},R=new um(D),I=R;return R.render().then(()=>{const B=document.createElement("div");B.className="endOfContent",k.append(B);const F=k.querySelectorAll('[role="presentation"]');if(t){let V=0;p.items.forEach((O,j)=>{if(!mX(O))return;const N=F[V];if(!N)return;const $=t({pageIndex:a,pageNumber:l,itemIndex:j,...O});N.innerHTML=$,V+=O.str&&O.hasEOL?2:1})}v()}).catch(w),()=>Zc(I)},[t,w,v,o,a,l,p,P]),C.jsx("div",{className:l2("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:S,ref:y})}const u3=1;function yX(n){const e={...h6(),...n},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:a,className:l,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",height:p,inputRef:g,loading:y="Loading page",noData:A="No page specified.",onGetAnnotationsError:m,onGetAnnotationsSuccess:v,onGetStructTreeError:w,onGetStructTreeSuccess:S,onGetTextError:T,onGetTextSuccess:P,onLoadError:_,onLoadSuccess:k,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:D,onRenderError:R,onRenderSuccess:I,onRenderTextLayerError:B,onRenderTextLayerSuccess:F,pageIndex:V,pageNumber:O,pdf:j,registerPage:N,renderAnnotationLayer:$=!0,renderForms:H=!1,renderMode:W="canvas",renderTextLayer:G=!0,rotate:Z,scale:dt=u3,unregisterPage:vt,width:ut,...lt}=e,[vi,je]=ff(),{value:gt,error:oe}=vi,vs=M.useRef(null);kt(j,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const yt=Ka(O)?O-1:V??null,Bt=O??(Ka(V)?V+1:null),we=Z??(gt?gt.rotate:null),Pe=M.useMemo(()=>{if(!gt)return null;let lo=1;const ou=dt??u3;if(ut||p){const co=gt.getViewport({scale:1,rotation:we});ut?lo=ut/co.width:p&&(lo=p/co.height)}return ou*lo},[p,gt,we,dt,ut]);M.useEffect(function(){return()=>{Ka(yt)&&s&&vt&&vt(yt)}},[s,j,yt,vt]);function ru(){if(k){if(!gt||!Pe)return;k(kE(gt,Pe))}if(s&&N){if(!Ka(yt)||!vs.current)return;N(yt,vs.current)}}function Af(){oe&&(hn(!1,oe.toString()),_&&_(oe))}M.useEffect(function(){je({type:"RESET"})},[je,j,yt]),M.useEffect(function(){if(!j||!Bt)return;const ou=l1(j.getPage(Bt)),co=ou;return ou.promise.then(f2=>{je({type:"RESOLVE",value:f2})}).catch(f2=>{je({type:"REJECT",error:f2})}),()=>Zc(co)},[je,j,Bt]),M.useEffect(()=>{if(gt!==void 0){if(gt===!1){Af();return}ru()}},[gt,Pe]);const d2=M.useMemo(()=>Ka(yt)&&Bt&&Ka(we)&&Ka(Pe)?{_className:i,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,onGetAnnotationsError:m,onGetAnnotationsSuccess:v,onGetStructTreeError:w,onGetStructTreeSuccess:S,onGetTextError:T,onGetTextSuccess:P,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:D,onRenderError:R,onRenderSuccess:I,onRenderTextLayerError:B,onRenderTextLayerSuccess:F,page:gt,pageIndex:yt,pageNumber:Bt,renderForms:H,renderTextLayer:G,rotate:we,scale:Pe}:null,[i,r,h,d,m,v,w,S,T,P,L,D,R,I,B,F,gt,yt,Bt,H,G,we,Pe]),S6=M.useMemo(()=>a6(lt,()=>gt&&(Pe?kE(gt,Pe):void 0)),[lt,gt,Pe]),c1=`${yt}@${Pe}/${we}`;function E6(){switch(W){case"custom":return kt(u,'renderMode was set to "custom", but no customRenderer was passed.'),C.jsx(u,{},`${c1}_custom`);case"none":return null;case"canvas":default:return C.jsx(pX,{canvasRef:o},`${c1}_canvas`)}}function C6(){return G?C.jsx(gX,{},`${c1}_text`):null}function T6(){return $?C.jsx(lX,{},`${c1}_annotations`):null}function P6(){function lo(co){return!!(co!=null&&co.page)}if(!lo(d2))throw new Error("page is undefined");const ou=typeof a=="function"?a(d2):a;return C.jsxs(f6.Provider,{value:d2,children:[E6(),C6(),T6(),ou]})}function _6(){return Bt?j===null||gt===void 0||gt===null?C.jsx(Ju,{type:"loading",children:typeof y=="function"?y():y}):j===!1||gt===!1?C.jsx(Ju,{type:"error",children:typeof f=="function"?f():f}):P6():C.jsx(Ju,{type:"no-data",children:typeof A=="function"?A():A})}return C.jsx("div",{className:l2(i,l),"data-page-number":Bt,ref:d6(g,vs),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Pe}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...S6,children:_6()})}tX();ji.workerSrc="pdf.worker.mjs";ji.workerSrc="/assets/pdf.worker.js";const vX=({data:n,onClose:t,setIsInFullscreen:e})=>{if(!n)return null;const i=Zx("(max-width: 768px)"),[s,r]=M.useState(!1),[o,a]=M.useState({x:0,y:0}),l=M.useRef(null),u=M.useRef(null),h=M.useRef(null),[d,f]=M.useState(!1),[p,g]=M.useState(null),[y,A]=M.useState(1),[m,v]=M.useState(null);M.useEffect(()=>{if((n==null?void 0:n.type)!=="cv")return;const V=new ResizeObserver(N=>{for(let $ of N){const H=$.contentRect.width;v(H>0?H:null)}}),O=h.current;let j;return O&&(V.observe(O),j=setTimeout(()=>{if(h.current){const N=h.current.getBoundingClientRect().width;v(N>0?N:null)}},50)),()=>{clearTimeout(j),O&&V.unobserve(O)}},[(n==null?void 0:n.type)==="cv"]);function w({numPages:V}){g(V),A(1)}function S(V){A(O=>Math.max(1,Math.min(O+V,p)))}const T=M.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen(),window.history.state&&window.history.state.modalOpen?window.history.back():t()},[t]);M.useEffect(()=>{const V=()=>{t()},O=j=>{j.key==="Escape"&&T()};return n&&(window.history.pushState({modalOpen:!0},""),window.addEventListener("popstate",V),window.addEventListener("keydown",O),g(null),A(1),r(!1),a({x:0,y:0}),v(null)),()=>{window.removeEventListener("popstate",V),window.removeEventListener("keydown",O)}},[n,t,T]),M.useEffect(()=>{const V=()=>{const O=!!document.fullscreenElement;e(O),f(O);const j=u.current;O?j==null||j.classList.add("fullscreen-active"):j==null||j.classList.remove("fullscreen-active")};return document.addEventListener("fullscreenchange",V),()=>{document.removeEventListener("fullscreenchange",V)}},[e]);const P=V=>{V.stopPropagation(),r(O=>!O),s&&a({x:0,y:0})},_=V=>{if(!s||!V.currentTarget)return;const{left:O,top:j,width:N,height:$}=V.currentTarget.getBoundingClientRect(),H=V.clientX-O,W=V.clientY-j,G=(H/N-.5)*-100,Z=(W/$-.5)*-100;a({x:G,y:Z})},k=V=>{if(!s||!V.touches[0]||!V.currentTarget)return;const{left:O,top:j,width:N,height:$}=V.currentTarget.getBoundingClientRect(),H=V.touches[0].clientX-O,W=V.touches[0].clientY-j,G=(H/N-.5)*-100,Z=(W/$-.5)*-100;a({x:G,y:Z})},L=V=>V.preventDefault(),D=V=>{V.stopPropagation();const O=u.current;O&&(document.fullscreenElement?document.exitFullscreen():O.requestFullscreen().catch(j=>alert(`Error: ${j.message}`)))},R={cyan:"#00ffff",purple:"#cc00ff",blue:"#00aaff",red:"#ff1111"},I=n.color||"blue",B=R[I],F=()=>{switch(n.type){case"portfolioItem":return C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"mb-4 overflow-hidden rounded-lg bg-black/20",children:C.jsx("img",{src:n.item.thumbnail,alt:n.item.title,className:"w-full h-auto object-cover rounded-lg"})}),n.item.videoUrl&&C.jsxs(C.Fragment,{children:[C.jsx("h3",{className:"font-bold text-lg text-slate-300 mt-6 mb-2",children:"Project Video"}),C.jsx("div",{className:"aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg",children:C.jsx("iframe",{src:n.item.videoUrl,title:n.item.title,frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0,className:"w-full h-full bg-black"})})]}),n.item.demoVideoUrl&&C.jsxs(C.Fragment,{children:[C.jsx("h3",{className:"font-bold text-lg text-slate-300 mt-6 mb-2",children:"Demo Video"}),C.jsx("div",{className:"aspect-w-16 aspect-h-9 mb-4 overflow-hidden rounded-lg",children:C.jsx("iframe",{src:n.item.demoVideoUrl,title:"Demo Video",frameBorder:"0",allow:"autoplay; fullscreen",allowFullScreen:!0,className:"w-full h-full bg-black"})})]}),C.jsx("p",{className:"text-slate-300 mt-6 mb-4",children:n.item.details}),C.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[C.jsx(XL,{className:`text-${I}-400`}),n.item.tech.map(V=>C.jsx("span",{className:"bg-slate-700 text-xs font-semibold px-2 py-1 rounded",children:V},V))]}),n.item.projectLink&&C.jsx("div",{className:"text-center mt-8",children:C.jsxs("a",{href:n.item.projectLink,target:"_blank",rel:"noopener noreferrer",className:`glare-container inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-${I}-500/30 hover:shadow-${I}-500/50`,children:[C.jsx(p8,{})," Go to Project Page"]})}),n.item.nda==="1"&&C.jsxs("div",{className:"mt-8 p-4 bg-slate-800/50 border border-slate-700 rounded-lg text-sm text-slate-400 italic flex items-start gap-3",children:[C.jsx(g8,{className:"text-yellow-500 mt-1 flex-shrink-0"}),C.jsx("span",{children:"Note: This project's demos are protected by a Non-Disclosure Agreement (NDA) and cannot be shown publicly. To request a private demonstration, please feel free to reach out via the contact section."})]})]});case"experience":return C.jsxs(C.Fragment,{children:[C.jsxs("p",{className:"font-bold text-lg text-slate-400",children:[n.item.year," - ",n.item.company]}),C.jsx("p",{className:"text-slate-300 mt-4",children:n.item.details})]});case"cv":return C.jsxs(C.Fragment,{children:[C.jsxs("div",{ref:u,className:"relative group bg-black rounded-lg w-full flex items-center justify-center",style:d?{height:"100vh",width:"100vw"}:{},children:[C.jsx("div",{ref:h,className:"w-full h-full flex items-center justify-center",onClick:P,onMouseMove:s?_:void 0,onTouchMove:s?k:void 0,style:{cursor:s?"grab":"zoom-in",overflow:"hidden",touchAction:"none"},children:C.jsx("div",{style:{transform:`scale(${s?1.5:1}) translate(${o.x}px, ${o.y}px)`,transition:"transform 0.2s ease-out",maxWidth:"100%",maxHeight:"100%",display:"flex",justifyContent:"center",alignItems:"center"},className:"w-full h-full",children:C.jsx(oX,{file:n.item.link,onLoadSuccess:w,loading:C.jsx("div",{className:"text-white p-4 h-96 flex items-center justify-center",children:"Loading CV..."}),error:C.jsx("div",{className:"text-red-400 p-4 h-96 flex items-center justify-center",children:"Failed to load CV."}),children:C.jsx(yX,{pageNumber:y,width:i&&m?m:void 0,renderTextLayer:!i})})})}),p&&!s&&C.jsxs("p",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-black/50 backdrop-blur-sm text-xs font-semibold text-slate-300 px-3 py-1 rounded-full z-20",children:["Page ",y," of ",p]}),C.jsx(Js,{children:!s&&y>1&&C.jsxs(bt.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},onClick:V=>{V.stopPropagation(),S(-1)},className:"absolute top-1/2 -translate-y-1/2 left-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Previous Page",children:[" ",C.jsx(l_,{})," "]})}),C.jsx(Js,{children:!s&&y<p&&C.jsxs(bt.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},onClick:V=>{V.stopPropagation(),S(1)},className:"absolute top-1/2 -translate-y-1/2 right-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white flex items-center justify-center z-20 hover:bg-black/80 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Next Page",children:[" ",C.jsx(o8,{})," "]})}),C.jsx("button",{onClick:D,className:"absolute bottom-4 right-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white z-20 flex items-center justify-center hover:bg-black/80 transition-colors",children:d?C.jsx(d8,{}):C.jsx(f8,{})}),C.jsx("button",{onClick:P,className:"absolute bottom-4 left-4 h-12 w-12 bg-black/50 backdrop-blur-sm rounded-full text-white z-20 flex items-center justify-center hover:bg-black/80 transition-colors",children:s?C.jsx(x8,{}):C.jsx(b8,{})})]}),C.jsx("div",{className:"text-center mt-8",children:C.jsxs("a",{href:n.item.link,download:!0,className:`glare-container inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg shadow-${I}-500/30 hover:shadow-${I}-500/50`,children:[" ",C.jsx(AA,{})," Download "]})})]});case"certification":return C.jsxs("div",{className:"text-center",children:[C.jsx("div",{ref:l,className:"relative mx-auto mb-4 bg-black/20 p-2 rounded-md transition-all duration-300",onClick:P,onMouseMove:s?_:void 0,onTouchMove:s?k:void 0,onDragStart:L,style:{overflow:"hidden",userSelect:"none",WebkitUserSelect:"none",touchAction:"none",cursor:s?"grab":"zoom-in",width:"100%",maxWidth:s?"100%":"30rem",height:s?"auto":"20rem"},children:C.jsx("img",{src:n.item.image,alt:n.item.name,className:"w-full h-full object-contain",style:{transform:`scale(${s?1.5:1}) translate(${o.x}px, ${o.y}px)`,transition:"transform 0.2s ease-out"}})}),C.jsxs("p",{className:`font-bold text-lg text-${I}-400 flex items-center justify-center gap-2`,children:[C.jsx(l8,{})," ",n.item.issuer]}),C.jsx("p",{className:"text-slate-300 mt-4",children:n.item.details})]});default:return C.jsx("p",{children:"No details available."})}};return C.jsx(Js,{children:n&&C.jsx(bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T,className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4 backdrop-blur-sm",style:{overflowY:"hidden"},children:C.jsx("div",{className:"neon-border-container",style:{"--neon-red":B},children:C.jsxs(bt.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:V=>V.stopPropagation(),className:`neon-border-content p-6 w-full ${n.type==="cv"?"max-w-4xl":"max-w-2xl"} max-h-[90vh] overflow-y-auto relative custom-scrollbar backdrop-blur-sm`,children:[C.jsx("button",{onClick:T,className:`absolute top-4 left-4 text-${I}-500 hover:text-white transition-colors z-30`,children:C.jsx(l_,{size:20})}),C.jsx("button",{onClick:T,className:`absolute top-4 right-4 text-${I}-500 hover:text-white transition-colors z-30`,children:C.jsx(MC,{size:20})}),C.jsx("h2",{className:`text-2xl font-bold text-center text-${I}-500 mb-4 px-12`,style:{textShadow:`0 0 5px #fff, 0 0 10px ${B}, 0 0 15px ${B}`},children:n.item.title||n.item.name||n.item.role}),F()]})})})})};function Rp(n){let t=n[0],e=n[1],i=n[2];return Math.sqrt(t*t+e*e+i*i)}function ME(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function wX(n,t,e,i){return n[0]=t,n[1]=e,n[2]=i,n}function h3(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function d3(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function xX(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}function bX(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n}function Eb(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function AX(n,t){let e=t[0]-n[0],i=t[1]-n[1],s=t[2]-n[2];return Math.sqrt(e*e+i*i+s*s)}function SX(n,t){let e=t[0]-n[0],i=t[1]-n[1],s=t[2]-n[2];return e*e+i*i+s*s}function f3(n){let t=n[0],e=n[1],i=n[2];return t*t+e*e+i*i}function EX(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function CX(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function LE(n,t){let e=t[0],i=t[1],s=t[2],r=e*e+i*i+s*s;return r>0&&(r=1/Math.sqrt(r)),n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n}function v6(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function p3(n,t,e){let i=t[0],s=t[1],r=t[2],o=e[0],a=e[1],l=e[2];return n[0]=s*l-r*a,n[1]=r*o-i*l,n[2]=i*a-s*o,n}function TX(n,t,e,i){let s=t[0],r=t[1],o=t[2];return n[0]=s+i*(e[0]-s),n[1]=r+i*(e[1]-r),n[2]=o+i*(e[2]-o),n}function PX(n,t,e,i,s){const r=Math.exp(-i*s);let o=t[0],a=t[1],l=t[2];return n[0]=e[0]+(o-e[0])*r,n[1]=e[1]+(a-e[1])*r,n[2]=e[2]+(l-e[2])*r,n}function _X(n,t,e){let i=t[0],s=t[1],r=t[2],o=e[3]*i+e[7]*s+e[11]*r+e[15];return o=o||1,n[0]=(e[0]*i+e[4]*s+e[8]*r+e[12])/o,n[1]=(e[1]*i+e[5]*s+e[9]*r+e[13])/o,n[2]=(e[2]*i+e[6]*s+e[10]*r+e[14])/o,n}function kX(n,t,e){let i=t[0],s=t[1],r=t[2],o=e[3]*i+e[7]*s+e[11]*r+e[15];return o=o||1,n[0]=(e[0]*i+e[4]*s+e[8]*r)/o,n[1]=(e[1]*i+e[5]*s+e[9]*r)/o,n[2]=(e[2]*i+e[6]*s+e[10]*r)/o,n}function MX(n,t,e){let i=t[0],s=t[1],r=t[2];return n[0]=i*e[0]+s*e[3]+r*e[6],n[1]=i*e[1]+s*e[4]+r*e[7],n[2]=i*e[2]+s*e[5]+r*e[8],n}function LX(n,t,e){let i=t[0],s=t[1],r=t[2],o=e[0],a=e[1],l=e[2],u=e[3],h=a*r-l*s,d=l*i-o*r,f=o*s-a*i,p=a*f-l*d,g=l*h-o*f,y=o*d-a*h,A=u*2;return h*=A,d*=A,f*=A,p*=2,g*=2,y*=2,n[0]=i+h+p,n[1]=s+d+g,n[2]=r+f+y,n}const RX=function(){const n=[0,0,0],t=[0,0,0];return function(e,i){ME(n,e),ME(t,i),LE(n,n),LE(t,t);let s=v6(n,t);return s>1?0:s<-1?Math.PI:Math.acos(s)}}();function DX(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}class ye extends Array{constructor(t=0,e=t,i=t){return super(t,e,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this[0]=t}set y(t){this[1]=t}set z(t){this[2]=t}set(t,e=t,i=t){return t.length?this.copy(t):(wX(this,t,e,i),this)}copy(t){return ME(this,t),this}add(t,e){return e?h3(this,t,e):h3(this,this,t),this}sub(t,e){return e?d3(this,t,e):d3(this,this,t),this}multiply(t){return t.length?xX(this,this,t):Eb(this,this,t),this}divide(t){return t.length?bX(this,this,t):Eb(this,this,1/t),this}inverse(t=this){return CX(this,t),this}len(){return Rp(this)}distance(t){return t?AX(this,t):Rp(this)}squaredLen(){return f3(this)}squaredDistance(t){return t?SX(this,t):f3(this)}negate(t=this){return EX(this,t),this}cross(t,e){return e?p3(this,t,e):p3(this,this,t),this}scale(t){return Eb(this,this,t),this}normalize(){return LE(this,this),this}dot(t){return v6(this,t)}equals(t){return DX(this,t)}applyMatrix3(t){return MX(this,this,t),this}applyMatrix4(t){return _X(this,this,t),this}scaleRotateMatrix4(t){return kX(this,this,t),this}applyQuaternion(t){return LX(this,this,t),this}angle(t){return RX(this,t)}lerp(t,e){return TX(this,this,t,e),this}smoothLerp(t,e,i){return PX(this,this,t,e,i),this}clone(){return new ye(this[0],this[1],this[2])}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}transformDirection(t){const e=this[0],i=this[1],s=this[2];return this[0]=t[0]*e+t[4]*i+t[8]*s,this[1]=t[1]*e+t[5]*i+t[9]*s,this[2]=t[2]*e+t[6]*i+t[10]*s,this.normalize()}}const m3=new ye;let FX=1,IX=1,g3=!1;class NX{constructor(t,e={}){t.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=t,this.attributes=e,this.id=FX++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in e)this.addAttribute(i,e[i])}addAttribute(t,e){if(this.attributes[t]=e,e.id=IX++,e.size=e.size||1,e.type=e.type||(e.data.constructor===Float32Array?this.gl.FLOAT:e.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),e.target=t==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,e.normalized=e.normalized||!1,e.stride=e.stride||0,e.offset=e.offset||0,e.count=e.count||(e.stride?e.data.byteLength/e.stride:e.data.length/e.size),e.divisor=e.instanced||0,e.needsUpdate=!1,e.usage=e.usage||this.gl.STATIC_DRAW,e.buffer||this.updateAttribute(e),e.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==e.count*e.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,e.count*e.divisor);this.instancedCount=e.count*e.divisor}else t==="index"?this.drawRange.count=e.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,e.count))}updateAttribute(t){const e=!t.buffer;e&&(t.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==t.buffer&&(this.gl.bindBuffer(t.target,t.buffer),this.glState.boundBuffer=t.buffer),e?this.gl.bufferData(t.target,t.data,t.usage):this.gl.bufferSubData(t.target,0,t.data),t.needsUpdate=!1}setIndex(t){this.addAttribute("index",t)}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}setInstancedCount(t){this.instancedCount=t}createVAO(t){this.VAOs[t.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.bindAttributes(t)}bindAttributes(t){t.attributeLocations.forEach((e,{name:i,type:s})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const r=this.attributes[i];this.gl.bindBuffer(r.target,r.buffer),this.glState.boundBuffer=r.buffer;let o=1;s===35674&&(o=2),s===35675&&(o=3),s===35676&&(o=4);const a=r.size/o,l=o===1?0:o*o*4,u=o===1?0:o*4;for(let h=0;h<o;h++)this.gl.vertexAttribPointer(e+h,a,r.type,r.normalized,r.stride+l,r.offset+h*u),this.gl.enableVertexAttribArray(e+h),this.gl.renderer.vertexAttribDivisor(e+h,r.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:t,mode:e=this.gl.TRIANGLES}){var s;this.gl.renderer.currentGeometry!==`${this.id}_${t.attributeOrder}`&&(this.VAOs[t.attributeOrder]||this.createVAO(t),this.gl.renderer.bindVertexArray(this.VAOs[t.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${t.attributeOrder}`),t.attributeLocations.forEach((r,{name:o})=>{const a=this.attributes[o];a.needsUpdate&&this.updateAttribute(a)});let i=2;((s=this.attributes.index)==null?void 0:s.type)===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(e,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(e,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(e,this.drawRange.start,this.drawRange.count)}getPosition(){const t=this.attributes.position;if(t.data)return t;if(!g3)return console.warn("No position buffer data found to compute bounds"),g3=!0}computeBoundingBox(t){t||(t=this.getPosition());const e=t.data,i=t.size;this.bounds||(this.bounds={min:new ye,max:new ye,center:new ye,scale:new ye,radius:1/0});const s=this.bounds.min,r=this.bounds.max,o=this.bounds.center,a=this.bounds.scale;s.set(1/0),r.set(-1/0);for(let l=0,u=e.length;l<u;l+=i){const h=e[l],d=e[l+1],f=e[l+2];s.x=Math.min(h,s.x),s.y=Math.min(d,s.y),s.z=Math.min(f,s.z),r.x=Math.max(h,r.x),r.y=Math.max(d,r.y),r.z=Math.max(f,r.z)}a.sub(r,s),o.add(s,r).divide(2)}computeBoundingSphere(t){t||(t=this.getPosition());const e=t.data,i=t.size;this.bounds||this.computeBoundingBox(t);let s=0;for(let r=0,o=e.length;r<o;r+=i)m3.fromArray(e,r),s=Math.max(s,this.bounds.center.squaredDistance(m3));this.bounds.radius=Math.sqrt(s)}remove(){for(let t in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[t]),delete this.VAOs[t];for(let t in this.attributes)this.gl.deleteBuffer(this.attributes[t].buffer),delete this.attributes[t]}}let OX=1;const y3={};class BX{constructor(t,{vertex:e,fragment:i,uniforms:s={},transparent:r=!1,cullFace:o=t.BACK,frontFace:a=t.CCW,depthTest:l=!0,depthWrite:u=!0,depthFunc:h=t.LEQUAL}={}){t.canvas||console.error("gl not passed as first argument to Program"),this.gl=t,this.uniforms=s,this.id=OX++,e||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=o,this.frontFace=a,this.depthTest=l,this.depthWrite=u,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=t.createShader(t.VERTEX_SHADER),this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:e,fragment:i})}setShaders({vertex:t,fragment:e}){if(t&&(this.gl.shaderSource(this.vertexShader,t),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${v3(t)}`)),e&&(this.gl.shaderSource(this.fragmentShader,e),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${v3(e)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<i;o++){let a=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(a,this.gl.getUniformLocation(this.program,a.name));const l=a.name.match(/(\w+)/g);a.uniformName=l[0],a.nameComponents=l.slice(1)}this.attributeLocations=new Map;const s=[],r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const a=this.gl.getActiveAttrib(this.program,o),l=this.gl.getAttribLocation(this.program,a.name);l!==-1&&(s[l]=a.name,this.attributeLocations.set(a,l))}this.attributeOrder=s.join("")}setBlendFunc(t,e,i,s){this.blendFunc.src=t,this.blendFunc.dst=e,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=s,t&&(this.transparent=!0)}setBlendEquation(t,e){this.blendEquation.modeRGB=t,this.blendEquation.modeAlpha=e}setStencilFunc(t,e,i){this.stencilRef=e,this.stencilFunc.func=t,this.stencilFunc.ref=e,this.stencilFunc.mask=i}setStencilOp(t,e,i){this.stencilOp.stencilFail=t,this.stencilOp.depthFail=e,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:t=!1}={}){let e=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((s,r)=>{let o=this.uniforms[r.uniformName];for(const a of r.nameComponents){if(!o)break;if(a in o)o=o[a];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return w3(`Active uniform ${r.name} has not been supplied`);if(o&&o.value===void 0)return w3(`${r.name} uniform is missing a value parameter`);if(o.value.texture)return e=e+1,o.value.update(e),Cb(this.gl,r.type,s,e);if(o.value.length&&o.value[0].texture){const a=[];return o.value.forEach(l=>{e=e+1,l.update(e),a.push(e)}),Cb(this.gl,r.type,s,a)}Cb(this.gl,r.type,s,o.value)}),this.applyState(),t&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Cb(n,t,e,i){i=i.length?jX(i):i;const s=n.renderer.state.uniformLocations.get(e);if(i.length)if(s===void 0||s.length!==i.length)n.renderer.state.uniformLocations.set(e,i.slice(0));else{if(VX(s,i))return;s.set?s.set(i):$X(s,i),n.renderer.state.uniformLocations.set(e,s)}else{if(s===i)return;n.renderer.state.uniformLocations.set(e,i)}switch(t){case 5126:return i.length?n.uniform1fv(e,i):n.uniform1f(e,i);case 35664:return n.uniform2fv(e,i);case 35665:return n.uniform3fv(e,i);case 35666:return n.uniform4fv(e,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?n.uniform1iv(e,i):n.uniform1i(e,i);case 35671:case 35667:return n.uniform2iv(e,i);case 35672:case 35668:return n.uniform3iv(e,i);case 35673:case 35669:return n.uniform4iv(e,i);case 35674:return n.uniformMatrix2fv(e,!1,i);case 35675:return n.uniformMatrix3fv(e,!1,i);case 35676:return n.uniformMatrix4fv(e,!1,i)}}function v3(n){let t=n.split(`
`);for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join(`
`)}function jX(n){const t=n.length,e=n[0].length;if(e===void 0)return n;const i=t*e;let s=y3[i];s||(y3[i]=s=new Float32Array(i));for(let r=0;r<t;r++)s.set(n[r],r*e);return s}function VX(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function $X(n,t){for(let e=0,i=n.length;e<i;e++)n[e]=t[e]}let Tb=0;function w3(n){Tb>100||(console.warn(n),Tb++,Tb>100&&console.warn("More than 100 program warnings - stopping logs."))}const Pb=new ye;let zX=1;class UX{constructor({canvas:t=document.createElement("canvas"),width:e=300,height:i=150,dpr:s=1,alpha:r=!1,depth:o=!0,stencil:a=!1,antialias:l=!1,premultipliedAlpha:u=!1,preserveDrawingBuffer:h=!1,powerPreference:d="default",autoClear:f=!0,webgl:p=2}={}){const g={alpha:r,depth:o,stencil:a,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:d};this.dpr=s,this.alpha=r,this.color=!0,this.depth=o,this.stencil=a,this.premultipliedAlpha=u,this.autoClear=f,this.id=zX++,p===2&&(this.gl=t.getContext("webgl2",g)),this.isWebgl2=!!this.gl,this.gl||(this.gl=t.getContext("webgl",g)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(e,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(t,e){this.width=t,this.height=e,this.gl.canvas.width=t*this.dpr,this.gl.canvas.height=e*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:t+"px",height:e+"px"})}setViewport(t,e,i=0,s=0){this.state.viewport.width===t&&this.state.viewport.height===e||(this.state.viewport.width=t,this.state.viewport.height=e,this.state.viewport.x=i,this.state.viewport.y=s,this.gl.viewport(i,s,t,e))}setScissor(t,e,i=0,s=0){this.gl.scissor(i,s,t,e)}enable(t){this.state[t]!==!0&&(this.gl.enable(t),this.state[t]=!0)}disable(t){this.state[t]!==!1&&(this.gl.disable(t),this.state[t]=!1)}setBlendFunc(t,e,i,s){this.state.blendFunc.src===t&&this.state.blendFunc.dst===e&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===s||(this.state.blendFunc.src=t,this.state.blendFunc.dst=e,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=s,i!==void 0?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e))}setBlendEquation(t,e){t=t||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===t&&this.state.blendEquation.modeAlpha===e)&&(this.state.blendEquation.modeRGB=t,this.state.blendEquation.modeAlpha=e,e!==void 0?this.gl.blendEquationSeparate(t,e):this.gl.blendEquation(t))}setCullFace(t){this.state.cullFace!==t&&(this.state.cullFace=t,this.gl.cullFace(t))}setFrontFace(t){this.state.frontFace!==t&&(this.state.frontFace=t,this.gl.frontFace(t))}setDepthMask(t){this.state.depthMask!==t&&(this.state.depthMask=t,this.gl.depthMask(t))}setDepthFunc(t){this.state.depthFunc!==t&&(this.state.depthFunc=t,this.gl.depthFunc(t))}setStencilMask(t){this.state.stencilMask!==t&&(this.state.stencilMask=t,this.gl.stencilMask(t))}setStencilFunc(t,e,i){this.state.stencilFunc===t&&this.state.stencilRef===e&&this.state.stencilFuncMask===i||(this.state.stencilFunc=t||this.gl.ALWAYS,this.state.stencilRef=e||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(t||this.gl.ALWAYS,e||0,i||0))}setStencilOp(t,e,i){this.state.stencilFail===t&&this.state.stencilDepthFail===e&&this.state.stencilDepthPass===i||(this.state.stencilFail=t,this.state.stencilDepthFail=e,this.state.stencilDepthPass=i,this.gl.stencilOp(t,e,i))}activeTexture(t){this.state.activeTextureUnit!==t&&(this.state.activeTextureUnit=t,this.gl.activeTexture(this.gl.TEXTURE0+t))}bindFramebuffer({target:t=this.gl.FRAMEBUFFER,buffer:e=null}={}){this.state.framebuffer!==e&&(this.state.framebuffer=e,this.gl.bindFramebuffer(t,e))}getExtension(t,e,i){return e&&this.gl[e]?this.gl[e].bind(this.gl):(this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t)),e?this.extensions[t]?this.extensions[t][i].bind(this.extensions[t]):null:this.extensions[t])}sortOpaque(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:t.zDepth!==e.zDepth?t.zDepth-e.zDepth:e.id-t.id}sortTransparent(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.zDepth!==e.zDepth?e.zDepth-t.zDepth:e.id-t.id}sortUI(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program.id!==e.program.id?t.program.id-e.program.id:e.id-t.id}getRenderList({scene:t,camera:e,frustumCull:i,sort:s}){let r=[];if(e&&i&&e.updateFrustum(),t.traverse(o=>{if(!o.visible)return!0;o.draw&&(i&&o.frustumCulled&&e&&!e.frustumIntersectsMesh(o)||r.push(o))}),s){const o=[],a=[],l=[];r.forEach(u=>{u.program.transparent?u.program.depthTest?a.push(u):l.push(u):o.push(u),u.zDepth=0,!(u.renderOrder!==0||!u.program.depthTest||!e)&&(u.worldMatrix.getTranslation(Pb),Pb.applyMatrix4(e.projectionViewMatrix),u.zDepth=Pb.z)}),o.sort(this.sortOpaque),a.sort(this.sortTransparent),l.sort(this.sortUI),r=o.concat(a,l)}return r}render({scene:t,camera:e,target:i=null,update:s=!0,sort:r=!0,frustumCull:o=!0,clear:a}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(a||this.autoClear&&a!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),s&&t.updateMatrixWorld(),e&&e.updateMatrixWorld(),this.getRenderList({scene:t,camera:e,frustumCull:o,sort:r}).forEach(u=>{u.draw({camera:e})})}}function HX(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function WX(n,t,e,i,s){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n}function GX(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=e*e+i*i+s*s+r*r;return o>0&&(o=1/Math.sqrt(o)),n[0]=e*o,n[1]=i*o,n[2]=s*o,n[3]=r*o,n}function XX(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function YX(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function KX(n,t,e){e=e*.5;let i=Math.sin(e);return n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n[3]=Math.cos(e),n}function x3(n,t,e){let i=t[0],s=t[1],r=t[2],o=t[3],a=e[0],l=e[1],u=e[2],h=e[3];return n[0]=i*h+o*a+s*u-r*l,n[1]=s*h+o*l+r*a-i*u,n[2]=r*h+o*u+i*l-s*a,n[3]=o*h-i*a-s*l-r*u,n}function qX(n,t,e){e*=.5;let i=t[0],s=t[1],r=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);return n[0]=i*l+o*a,n[1]=s*l+r*a,n[2]=r*l-s*a,n[3]=o*l-i*a,n}function QX(n,t,e){e*=.5;let i=t[0],s=t[1],r=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);return n[0]=i*l-r*a,n[1]=s*l+o*a,n[2]=r*l+i*a,n[3]=o*l-s*a,n}function ZX(n,t,e){e*=.5;let i=t[0],s=t[1],r=t[2],o=t[3],a=Math.sin(e),l=Math.cos(e);return n[0]=i*l+s*a,n[1]=s*l-i*a,n[2]=r*l+o*a,n[3]=o*l-r*a,n}function JX(n,t,e,i){let s=t[0],r=t[1],o=t[2],a=t[3],l=e[0],u=e[1],h=e[2],d=e[3],f,p,g,y,A;return p=s*l+r*u+o*h+a*d,p<0&&(p=-p,l=-l,u=-u,h=-h,d=-d),1-p>1e-6?(f=Math.acos(p),g=Math.sin(f),y=Math.sin((1-i)*f)/g,A=Math.sin(i*f)/g):(y=1-i,A=i),n[0]=y*s+A*l,n[1]=y*r+A*u,n[2]=y*o+A*h,n[3]=y*a+A*d,n}function tY(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=e*e+i*i+s*s+r*r,a=o?1/o:0;return n[0]=-e*a,n[1]=-i*a,n[2]=-s*a,n[3]=r*a,n}function eY(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function nY(n,t){let e=t[0]+t[4]+t[8],i;if(e>0)i=Math.sqrt(e+1),n[3]=.5*i,i=.5/i,n[0]=(t[5]-t[7])*i,n[1]=(t[6]-t[2])*i,n[2]=(t[1]-t[3])*i;else{let s=0;t[4]>t[0]&&(s=1),t[8]>t[s*3+s]&&(s=2);let r=(s+1)%3,o=(s+2)%3;i=Math.sqrt(t[s*3+s]-t[r*3+r]-t[o*3+o]+1),n[s]=.5*i,i=.5/i,n[3]=(t[r*3+o]-t[o*3+r])*i,n[r]=(t[r*3+s]+t[s*3+r])*i,n[o]=(t[o*3+s]+t[s*3+o])*i}return n}function iY(n,t,e="YXZ"){let i=Math.sin(t[0]*.5),s=Math.cos(t[0]*.5),r=Math.sin(t[1]*.5),o=Math.cos(t[1]*.5),a=Math.sin(t[2]*.5),l=Math.cos(t[2]*.5);return e==="XYZ"?(n[0]=i*o*l+s*r*a,n[1]=s*r*l-i*o*a,n[2]=s*o*a+i*r*l,n[3]=s*o*l-i*r*a):e==="YXZ"?(n[0]=i*o*l+s*r*a,n[1]=s*r*l-i*o*a,n[2]=s*o*a-i*r*l,n[3]=s*o*l+i*r*a):e==="ZXY"?(n[0]=i*o*l-s*r*a,n[1]=s*r*l+i*o*a,n[2]=s*o*a+i*r*l,n[3]=s*o*l-i*r*a):e==="ZYX"?(n[0]=i*o*l-s*r*a,n[1]=s*r*l+i*o*a,n[2]=s*o*a-i*r*l,n[3]=s*o*l+i*r*a):e==="YZX"?(n[0]=i*o*l+s*r*a,n[1]=s*r*l+i*o*a,n[2]=s*o*a-i*r*l,n[3]=s*o*l-i*r*a):e==="XZY"&&(n[0]=i*o*l-s*r*a,n[1]=s*r*l-i*o*a,n[2]=s*o*a+i*r*l,n[3]=s*o*l+i*r*a),n}const sY=HX,rY=WX,oY=XX,aY=GX;class lY extends Array{constructor(t=0,e=0,i=0,s=1){super(t,e,i,s),this.onChange=()=>{},this._target=this;const r=["0","1","2","3"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&r.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set w(t){this._target[3]=t,this.onChange()}identity(){return YX(this._target),this.onChange(),this}set(t,e,i,s){return t.length?this.copy(t):(rY(this._target,t,e,i,s),this.onChange(),this)}rotateX(t){return qX(this._target,this._target,t),this.onChange(),this}rotateY(t){return QX(this._target,this._target,t),this.onChange(),this}rotateZ(t){return ZX(this._target,this._target,t),this.onChange(),this}inverse(t=this._target){return tY(this._target,t),this.onChange(),this}conjugate(t=this._target){return eY(this._target,t),this.onChange(),this}copy(t){return sY(this._target,t),this.onChange(),this}normalize(t=this._target){return aY(this._target,t),this.onChange(),this}multiply(t,e){return e?x3(this._target,t,e):x3(this._target,this._target,t),this.onChange(),this}dot(t){return oY(this._target,t)}fromMatrix3(t){return nY(this._target,t),this.onChange(),this}fromEuler(t,e){return iY(this._target,t,t.order),e||this.onChange(),this}fromAxisAngle(t,e){return KX(this._target,t,e),this.onChange(),this}slerp(t,e){return JX(this._target,this._target,t,e),this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this._target[3]=t[e+3],this.onChange(),this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}}const cY=1e-6;function uY(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function hY(n,t,e,i,s,r,o,a,l,u,h,d,f,p,g,y,A){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n[6]=a,n[7]=l,n[8]=u,n[9]=h,n[10]=d,n[11]=f,n[12]=p,n[13]=g,n[14]=y,n[15]=A,n}function dY(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function fY(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],y=t[13],A=t[14],m=t[15],v=e*a-i*o,w=e*l-s*o,S=e*u-r*o,T=i*l-s*a,P=i*u-r*a,_=s*u-r*l,k=h*y-d*g,L=h*A-f*g,D=h*m-p*g,R=d*A-f*y,I=d*m-p*y,B=f*m-p*A,F=v*B-w*I+S*R+T*D-P*L+_*k;return F?(F=1/F,n[0]=(a*B-l*I+u*R)*F,n[1]=(s*I-i*B-r*R)*F,n[2]=(y*_-A*P+m*T)*F,n[3]=(f*P-d*_-p*T)*F,n[4]=(l*D-o*B-u*L)*F,n[5]=(e*B-s*D+r*L)*F,n[6]=(A*S-g*_-m*w)*F,n[7]=(h*_-f*S+p*w)*F,n[8]=(o*I-a*D+u*k)*F,n[9]=(i*D-e*I-r*k)*F,n[10]=(g*P-y*S+m*v)*F,n[11]=(d*S-h*P-p*v)*F,n[12]=(a*L-o*R-l*k)*F,n[13]=(e*R-i*L+s*k)*F,n[14]=(y*w-g*T-A*v)*F,n[15]=(h*T-d*w+f*v)*F,n):null}function w6(n){let t=n[0],e=n[1],i=n[2],s=n[3],r=n[4],o=n[5],a=n[6],l=n[7],u=n[8],h=n[9],d=n[10],f=n[11],p=n[12],g=n[13],y=n[14],A=n[15],m=t*o-e*r,v=t*a-i*r,w=t*l-s*r,S=e*a-i*o,T=e*l-s*o,P=i*l-s*a,_=u*g-h*p,k=u*y-d*p,L=u*A-f*p,D=h*y-d*g,R=h*A-f*g,I=d*A-f*y;return m*I-v*R+w*D+S*L-T*k+P*_}function b3(n,t,e){let i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=t[9],p=t[10],g=t[11],y=t[12],A=t[13],m=t[14],v=t[15],w=e[0],S=e[1],T=e[2],P=e[3];return n[0]=w*i+S*a+T*d+P*y,n[1]=w*s+S*l+T*f+P*A,n[2]=w*r+S*u+T*p+P*m,n[3]=w*o+S*h+T*g+P*v,w=e[4],S=e[5],T=e[6],P=e[7],n[4]=w*i+S*a+T*d+P*y,n[5]=w*s+S*l+T*f+P*A,n[6]=w*r+S*u+T*p+P*m,n[7]=w*o+S*h+T*g+P*v,w=e[8],S=e[9],T=e[10],P=e[11],n[8]=w*i+S*a+T*d+P*y,n[9]=w*s+S*l+T*f+P*A,n[10]=w*r+S*u+T*p+P*m,n[11]=w*o+S*h+T*g+P*v,w=e[12],S=e[13],T=e[14],P=e[15],n[12]=w*i+S*a+T*d+P*y,n[13]=w*s+S*l+T*f+P*A,n[14]=w*r+S*u+T*p+P*m,n[15]=w*o+S*h+T*g+P*v,n}function pY(n,t,e){let i=e[0],s=e[1],r=e[2],o,a,l,u,h,d,f,p,g,y,A,m;return t===n?(n[12]=t[0]*i+t[4]*s+t[8]*r+t[12],n[13]=t[1]*i+t[5]*s+t[9]*r+t[13],n[14]=t[2]*i+t[6]*s+t[10]*r+t[14],n[15]=t[3]*i+t[7]*s+t[11]*r+t[15]):(o=t[0],a=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=t[8],y=t[9],A=t[10],m=t[11],n[0]=o,n[1]=a,n[2]=l,n[3]=u,n[4]=h,n[5]=d,n[6]=f,n[7]=p,n[8]=g,n[9]=y,n[10]=A,n[11]=m,n[12]=o*i+h*s+g*r+t[12],n[13]=a*i+d*s+y*r+t[13],n[14]=l*i+f*s+A*r+t[14],n[15]=u*i+p*s+m*r+t[15]),n}function mY(n,t,e){let i=e[0],s=e[1],r=e[2];return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i,n[4]=t[4]*s,n[5]=t[5]*s,n[6]=t[6]*s,n[7]=t[7]*s,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function gY(n,t,e,i){let s=i[0],r=i[1],o=i[2],a=Math.hypot(s,r,o),l,u,h,d,f,p,g,y,A,m,v,w,S,T,P,_,k,L,D,R,I,B,F,V;return Math.abs(a)<cY?null:(a=1/a,s*=a,r*=a,o*=a,l=Math.sin(e),u=Math.cos(e),h=1-u,d=t[0],f=t[1],p=t[2],g=t[3],y=t[4],A=t[5],m=t[6],v=t[7],w=t[8],S=t[9],T=t[10],P=t[11],_=s*s*h+u,k=r*s*h+o*l,L=o*s*h-r*l,D=s*r*h-o*l,R=r*r*h+u,I=o*r*h+s*l,B=s*o*h+r*l,F=r*o*h-s*l,V=o*o*h+u,n[0]=d*_+y*k+w*L,n[1]=f*_+A*k+S*L,n[2]=p*_+m*k+T*L,n[3]=g*_+v*k+P*L,n[4]=d*D+y*R+w*I,n[5]=f*D+A*R+S*I,n[6]=p*D+m*R+T*I,n[7]=g*D+v*R+P*I,n[8]=d*B+y*F+w*V,n[9]=f*B+A*F+S*V,n[10]=p*B+m*F+T*V,n[11]=g*B+v*F+P*V,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function yY(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function x6(n,t){let e=t[0],i=t[1],s=t[2],r=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return n[0]=Math.hypot(e,i,s),n[1]=Math.hypot(r,o,a),n[2]=Math.hypot(l,u,h),n}function vY(n){let t=n[0],e=n[1],i=n[2],s=n[4],r=n[5],o=n[6],a=n[8],l=n[9],u=n[10];const h=t*t+e*e+i*i,d=s*s+r*r+o*o,f=a*a+l*l+u*u;return Math.sqrt(Math.max(h,d,f))}const b6=function(){const n=[1,1,1];return function(t,e){let i=n;x6(i,e);let s=1/i[0],r=1/i[1],o=1/i[2],a=e[0]*s,l=e[1]*r,u=e[2]*o,h=e[4]*s,d=e[5]*r,f=e[6]*o,p=e[8]*s,g=e[9]*r,y=e[10]*o,A=a+d+y,m=0;return A>0?(m=Math.sqrt(A+1)*2,t[3]=.25*m,t[0]=(f-g)/m,t[1]=(p-u)/m,t[2]=(l-h)/m):a>d&&a>y?(m=Math.sqrt(1+a-d-y)*2,t[3]=(f-g)/m,t[0]=.25*m,t[1]=(l+h)/m,t[2]=(p+u)/m):d>y?(m=Math.sqrt(1+d-a-y)*2,t[3]=(p-u)/m,t[0]=(l+h)/m,t[1]=.25*m,t[2]=(f+g)/m):(m=Math.sqrt(1+y-a-d)*2,t[3]=(l-h)/m,t[0]=(p+u)/m,t[1]=(f+g)/m,t[2]=.25*m),t}}();function wY(n,t,e,i){let s=Rp([n[0],n[1],n[2]]);const r=Rp([n[4],n[5],n[6]]),o=Rp([n[8],n[9],n[10]]);w6(n)<0&&(s=-s),e[0]=n[12],e[1]=n[13],e[2]=n[14];const l=n.slice(),u=1/s,h=1/r,d=1/o;l[0]*=u,l[1]*=u,l[2]*=u,l[4]*=h,l[5]*=h,l[6]*=h,l[8]*=d,l[9]*=d,l[10]*=d,b6(t,l),i[0]=s,i[1]=r,i[2]=o}function xY(n,t,e,i){const s=n,r=t[0],o=t[1],a=t[2],l=t[3],u=r+r,h=o+o,d=a+a,f=r*u,p=r*h,g=r*d,y=o*h,A=o*d,m=a*d,v=l*u,w=l*h,S=l*d,T=i[0],P=i[1],_=i[2];return s[0]=(1-(y+m))*T,s[1]=(p+S)*T,s[2]=(g-w)*T,s[3]=0,s[4]=(p-S)*P,s[5]=(1-(f+m))*P,s[6]=(A+v)*P,s[7]=0,s[8]=(g+w)*_,s[9]=(A-v)*_,s[10]=(1-(f+y))*_,s[11]=0,s[12]=e[0],s[13]=e[1],s[14]=e[2],s[15]=1,s}function bY(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=e+e,a=i+i,l=s+s,u=e*o,h=i*o,d=i*a,f=s*o,p=s*a,g=s*l,y=r*o,A=r*a,m=r*l;return n[0]=1-d-g,n[1]=h+m,n[2]=f-A,n[3]=0,n[4]=h-m,n[5]=1-u-g,n[6]=p+y,n[7]=0,n[8]=f+A,n[9]=p-y,n[10]=1-u-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function AY(n,t,e,i,s){let r=1/Math.tan(t/2),o=1/(i-s);return n[0]=r/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(s+i)*o,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*s*i*o,n[15]=0,n}function SY(n,t,e,i,s,r,o){let a=1/(t-e),l=1/(i-s),u=1/(r-o);return n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(t+e)*a,n[13]=(s+i)*l,n[14]=(o+r)*u,n[15]=1,n}function EY(n,t,e,i){let s=t[0],r=t[1],o=t[2],a=i[0],l=i[1],u=i[2],h=s-e[0],d=r-e[1],f=o-e[2],p=h*h+d*d+f*f;p===0?f=1:(p=1/Math.sqrt(p),h*=p,d*=p,f*=p);let g=l*f-u*d,y=u*h-a*f,A=a*d-l*h;return p=g*g+y*y+A*A,p===0&&(u?a+=1e-6:l?u+=1e-6:l+=1e-6,g=l*f-u*d,y=u*h-a*f,A=a*d-l*h,p=g*g+y*y+A*A),p=1/Math.sqrt(p),g*=p,y*=p,A*=p,n[0]=g,n[1]=y,n[2]=A,n[3]=0,n[4]=d*A-f*y,n[5]=f*g-h*A,n[6]=h*y-d*g,n[7]=0,n[8]=h,n[9]=d,n[10]=f,n[11]=0,n[12]=s,n[13]=r,n[14]=o,n[15]=1,n}function A3(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n}function S3(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n}function CY(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n}class Da extends Array{constructor(t=1,e=0,i=0,s=0,r=0,o=1,a=0,l=0,u=0,h=0,d=1,f=0,p=0,g=0,y=0,A=1){return super(t,e,i,s,r,o,a,l,u,h,d,f,p,g,y,A),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(t){this[12]=t}set y(t){this[13]=t}set z(t){this[14]=t}set w(t){this[15]=t}set(t,e,i,s,r,o,a,l,u,h,d,f,p,g,y,A){return t.length?this.copy(t):(hY(this,t,e,i,s,r,o,a,l,u,h,d,f,p,g,y,A),this)}translate(t,e=this){return pY(this,e,t),this}rotate(t,e,i=this){return gY(this,i,t,e),this}scale(t,e=this){return mY(this,e,typeof t=="number"?[t,t,t]:t),this}add(t,e){return e?A3(this,t,e):A3(this,this,t),this}sub(t,e){return e?S3(this,t,e):S3(this,this,t),this}multiply(t,e){return t.length?e?b3(this,t,e):b3(this,this,t):CY(this,this,t),this}identity(){return dY(this),this}copy(t){return uY(this,t),this}fromPerspective({fov:t,aspect:e,near:i,far:s}={}){return AY(this,t,e,i,s),this}fromOrthogonal({left:t,right:e,bottom:i,top:s,near:r,far:o}){return SY(this,t,e,i,s,r,o),this}fromQuaternion(t){return bY(this,t),this}setPosition(t){return this.x=t[0],this.y=t[1],this.z=t[2],this}inverse(t=this){return fY(this,t),this}compose(t,e,i){return xY(this,t,e,i),this}decompose(t,e,i){return wY(this,t,e,i),this}getRotation(t){return b6(t,this),this}getTranslation(t){return yY(t,this),this}getScaling(t){return x6(t,this),this}getMaxScaleOnAxis(){return vY(this)}lookAt(t,e,i){return EY(this,t,e,i),this}determinant(){return w6(this)}fromArray(t,e=0){return this[0]=t[e],this[1]=t[e+1],this[2]=t[e+2],this[3]=t[e+3],this[4]=t[e+4],this[5]=t[e+5],this[6]=t[e+6],this[7]=t[e+7],this[8]=t[e+8],this[9]=t[e+9],this[10]=t[e+10],this[11]=t[e+11],this[12]=t[e+12],this[13]=t[e+13],this[14]=t[e+14],this[15]=t[e+15],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t[e+4]=this[4],t[e+5]=this[5],t[e+6]=this[6],t[e+7]=this[7],t[e+8]=this[8],t[e+9]=this[9],t[e+10]=this[10],t[e+11]=this[11],t[e+12]=this[12],t[e+13]=this[13],t[e+14]=this[14],t[e+15]=this[15],t}}function TY(n,t,e="YXZ"){return e==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),Math.abs(t[8])<.99999?(n[0]=Math.atan2(-t[9],t[10]),n[2]=Math.atan2(-t[4],t[0])):(n[0]=Math.atan2(t[6],t[5]),n[2]=0)):e==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),Math.abs(t[9])<.99999?(n[1]=Math.atan2(t[8],t[10]),n[2]=Math.atan2(t[1],t[5])):(n[1]=Math.atan2(-t[2],t[0]),n[2]=0)):e==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),Math.abs(t[6])<.99999?(n[1]=Math.atan2(-t[2],t[10]),n[2]=Math.atan2(-t[4],t[5])):(n[1]=0,n[2]=Math.atan2(t[1],t[0]))):e==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),Math.abs(t[2])<.99999?(n[0]=Math.atan2(t[6],t[10]),n[2]=Math.atan2(t[1],t[0])):(n[0]=0,n[2]=Math.atan2(-t[4],t[5]))):e==="YZX"?(n[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),Math.abs(t[1])<.99999?(n[0]=Math.atan2(-t[9],t[5]),n[1]=Math.atan2(-t[2],t[0])):(n[0]=0,n[1]=Math.atan2(t[8],t[10]))):e==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),Math.abs(t[4])<.99999?(n[0]=Math.atan2(t[6],t[5]),n[1]=Math.atan2(t[8],t[0])):(n[0]=Math.atan2(-t[9],t[10]),n[1]=0)),n}const E3=new Da;class PY extends Array{constructor(t=0,e=t,i=t,s="YXZ"){super(t,e,i),this.order=s,this.onChange=()=>{},this._target=this;const r=["0","1","2"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&r.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(t){this._target[0]=t,this.onChange()}set y(t){this._target[1]=t,this.onChange()}set z(t){this._target[2]=t,this.onChange()}set(t,e=t,i=t){return t.length?this.copy(t):(this._target[0]=t,this._target[1]=e,this._target[2]=i,this.onChange(),this)}copy(t){return this._target[0]=t[0],this._target[1]=t[1],this._target[2]=t[2],this.onChange(),this}reorder(t){return this._target.order=t,this.onChange(),this}fromRotationMatrix(t,e=this.order){return TY(this._target,t,e),this.onChange(),this}fromQuaternion(t,e=this.order,i){return E3.fromQuaternion(t),this._target.fromRotationMatrix(E3,e),i||this.onChange(),this}fromArray(t,e=0){return this._target[0]=t[e],this._target[1]=t[e+1],this._target[2]=t[e+2],this}toArray(t=[],e=0){return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}}class A6{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Da,this.worldMatrix=new Da,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new ye,this.quaternion=new lY,this.scale=new ye(1),this.rotation=new PY,this.up=new ye(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(t,e=!0){this.parent&&t!==this.parent&&this.parent.removeChild(this,!1),this.parent=t,e&&t&&t.addChild(this,!1)}addChild(t,e=!0){~this.children.indexOf(t)||this.children.push(t),e&&t.setParent(this,!1)}removeChild(t,e=!0){~this.children.indexOf(t)&&this.children.splice(this.children.indexOf(t),1),e&&t.setParent(null,!1)}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||t)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,t=!0);for(let e=0,i=this.children.length;e<i;e++)this.children[e].updateMatrixWorld(t)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(t){if(!t(this))for(let e=0,i=this.children.length;e<i;e++)this.children[e].traverse(t)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(t,e=!1){e?this.matrix.lookAt(this.position,t,this.up):this.matrix.lookAt(t,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const _Y=new Da,kY=new ye,MY=new ye;class LY extends A6{constructor(t,{near:e=.1,far:i=100,fov:s=45,aspect:r=1,left:o,right:a,bottom:l,top:u,zoom:h=1}={}){super(),Object.assign(this,{near:e,far:i,fov:s,aspect:r,left:o,right:a,bottom:l,top:u,zoom:h}),this.projectionMatrix=new Da,this.viewMatrix=new Da,this.projectionViewMatrix=new Da,this.worldPosition=new ye,this.type=o||a?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:t=this.near,far:e=this.far,fov:i=this.fov,aspect:s=this.aspect}={}){return Object.assign(this,{near:t,far:e,fov:i,aspect:s}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:s,near:t,far:e}),this.type="perspective",this}orthographic({near:t=this.near,far:e=this.far,left:i=this.left||-1,right:s=this.right||1,bottom:r=this.bottom||-1,top:o=this.top||1,zoom:a=this.zoom}={}){return Object.assign(this,{near:t,far:e,left:i,right:s,bottom:r,top:o,zoom:a}),i/=a,s/=a,r/=a,o/=a,this.projectionMatrix.fromOrthogonal({left:i,right:s,bottom:r,top:o,near:t,far:e}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(t){return super.lookAt(t,!0),this}project(t){return t.applyMatrix4(this.viewMatrix),t.applyMatrix4(this.projectionMatrix),this}unproject(t){return t.applyMatrix4(_Y.inverse(this.projectionMatrix)),t.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new ye,new ye,new ye,new ye,new ye,new ye]);const t=this.projectionViewMatrix;this.frustum[0].set(t[3]-t[0],t[7]-t[4],t[11]-t[8]).constant=t[15]-t[12],this.frustum[1].set(t[3]+t[0],t[7]+t[4],t[11]+t[8]).constant=t[15]+t[12],this.frustum[2].set(t[3]+t[1],t[7]+t[5],t[11]+t[9]).constant=t[15]+t[13],this.frustum[3].set(t[3]-t[1],t[7]-t[5],t[11]-t[9]).constant=t[15]-t[13],this.frustum[4].set(t[3]-t[2],t[7]-t[6],t[11]-t[10]).constant=t[15]-t[14],this.frustum[5].set(t[3]+t[2],t[7]+t[6],t[11]+t[10]).constant=t[15]+t[14];for(let e=0;e<6;e++){const i=1/this.frustum[e].distance();this.frustum[e].multiply(i),this.frustum[e].constant*=i}}frustumIntersectsMesh(t,e=t.worldMatrix){if(!t.geometry.attributes.position||((!t.geometry.bounds||t.geometry.bounds.radius===1/0)&&t.geometry.computeBoundingSphere(),!t.geometry.bounds))return!0;const i=kY;i.copy(t.geometry.bounds.center),i.applyMatrix4(e);const s=t.geometry.bounds.radius*e.getMaxScaleOnAxis();return this.frustumIntersectsSphere(i,s)}frustumIntersectsSphere(t,e){const i=MY;for(let s=0;s<6;s++){const r=this.frustum[s];if(i.copy(r).dot(t)+r.constant<-e)return!1}return!0}}function RY(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function DY(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=e+e,a=i+i,l=s+s,u=e*o,h=i*o,d=i*a,f=s*o,p=s*a,g=s*l,y=r*o,A=r*a,m=r*l;return n[0]=1-d-g,n[3]=h-m,n[6]=f+A,n[1]=h+m,n[4]=1-u-g,n[7]=p-y,n[2]=f-A,n[5]=p+y,n[8]=1-u-d,n}function FY(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function IY(n,t,e,i,s,r,o,a,l,u){return n[0]=t,n[1]=e,n[2]=i,n[3]=s,n[4]=r,n[5]=o,n[6]=a,n[7]=l,n[8]=u,n}function NY(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function OY(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=h*o-a*u,f=-h*r+a*l,p=u*r-o*l,g=e*d+i*f+s*p;return g?(g=1/g,n[0]=d*g,n[1]=(-h*i+s*u)*g,n[2]=(a*i-s*o)*g,n[3]=f*g,n[4]=(h*e-s*l)*g,n[5]=(-a*e+s*r)*g,n[6]=p*g,n[7]=(-u*e+i*l)*g,n[8]=(o*e-i*r)*g,n):null}function C3(n,t,e){let i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=e[0],p=e[1],g=e[2],y=e[3],A=e[4],m=e[5],v=e[6],w=e[7],S=e[8];return n[0]=f*i+p*o+g*u,n[1]=f*s+p*a+g*h,n[2]=f*r+p*l+g*d,n[3]=y*i+A*o+m*u,n[4]=y*s+A*a+m*h,n[5]=y*r+A*l+m*d,n[6]=v*i+w*o+S*u,n[7]=v*s+w*a+S*h,n[8]=v*r+w*l+S*d,n}function BY(n,t,e){let i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=e[0],p=e[1];return n[0]=i,n[1]=s,n[2]=r,n[3]=o,n[4]=a,n[5]=l,n[6]=f*i+p*o+u,n[7]=f*s+p*a+h,n[8]=f*r+p*l+d,n}function jY(n,t,e){let i=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=Math.sin(e),p=Math.cos(e);return n[0]=p*i+f*o,n[1]=p*s+f*a,n[2]=p*r+f*l,n[3]=p*o-f*i,n[4]=p*a-f*s,n[5]=p*l-f*r,n[6]=u,n[7]=h,n[8]=d,n}function VY(n,t,e){let i=e[0],s=e[1];return n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n[3]=s*t[3],n[4]=s*t[4],n[5]=s*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function $Y(n,t){let e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],y=t[13],A=t[14],m=t[15],v=e*a-i*o,w=e*l-s*o,S=e*u-r*o,T=i*l-s*a,P=i*u-r*a,_=s*u-r*l,k=h*y-d*g,L=h*A-f*g,D=h*m-p*g,R=d*A-f*y,I=d*m-p*y,B=f*m-p*A,F=v*B-w*I+S*R+T*D-P*L+_*k;return F?(F=1/F,n[0]=(a*B-l*I+u*R)*F,n[1]=(l*D-o*B-u*L)*F,n[2]=(o*I-a*D+u*k)*F,n[3]=(s*I-i*B-r*R)*F,n[4]=(e*B-s*D+r*L)*F,n[5]=(i*D-e*I-r*k)*F,n[6]=(y*_-A*P+m*T)*F,n[7]=(A*S-g*_-m*w)*F,n[8]=(g*P-y*S+m*v)*F,n):null}class zY extends Array{constructor(t=1,e=0,i=0,s=0,r=1,o=0,a=0,l=0,u=1){return super(t,e,i,s,r,o,a,l,u),this}set(t,e,i,s,r,o,a,l,u){return t.length?this.copy(t):(IY(this,t,e,i,s,r,o,a,l,u),this)}translate(t,e=this){return BY(this,e,t),this}rotate(t,e=this){return jY(this,e,t),this}scale(t,e=this){return VY(this,e,t),this}multiply(t,e){return e?C3(this,t,e):C3(this,this,t),this}identity(){return NY(this),this}copy(t){return FY(this,t),this}fromMatrix4(t){return RY(this,t),this}fromQuaternion(t){return DY(this,t),this}fromBasis(t,e,i){return this.set(t[0],t[1],t[2],e[0],e[1],e[2],i[0],i[1],i[2]),this}inverse(t=this){return OY(this,t),this}getNormalMatrix(t){return $Y(this,t),this}}let UY=0;class HY extends A6{constructor(t,{geometry:e,program:i,mode:s=t.TRIANGLES,frustumCulled:r=!0,renderOrder:o=0}={}){super(),t.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=t,this.id=UY++,this.geometry=e,this.program=i,this.mode=s,this.frustumCulled=r,this.renderOrder=o,this.modelViewMatrix=new Da,this.normalMatrix=new zY,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(t){return this.beforeRenderCallbacks.push(t),this}onAfterRender(t){return this.afterRenderCallbacks.push(t),this}draw({camera:t}={}){t&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=t.projectionMatrix,this.program.uniforms.cameraPosition.value=t.worldPosition,this.program.uniforms.viewMatrix.value=t.viewMatrix,this.modelViewMatrix.multiply(t.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:t}));let e=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:e}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:t}))}}const WY=["#ffffff","#ffffff","#ffffff"],GY=n=>{n=n.replace(/^#/,""),n.length===3&&(n=n.split("").map(r=>r+r).join(""));const t=parseInt(n,16),e=(t>>16&255)/255,i=(t>>8&255)/255,s=(t&255)/255;return[e,i,s]},XY=`
  attribute vec3 position;
  attribute vec4 random;
  attribute vec3 color;
  
  uniform mat4 modelMatrix;
  uniform mat4 viewMatrix;
  uniform mat4 projectionMatrix;
  uniform float uTime;
  uniform float uSpread;
  uniform float uBaseSize;
  uniform float uSizeRandomness;
  
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vRandom = random;
    vColor = color;
    
    vec3 pos = position * uSpread;
    pos.z *= 10.0;
    
    vec4 mPos = modelMatrix * vec4(pos, 1.0);
    float t = uTime;
    mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);
    mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);
    mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);
    
    vec4 mvPos = viewMatrix * mPos;

    if (uSizeRandomness == 0.0) {
      gl_PointSize = uBaseSize;
    } else {
      gl_PointSize = (uBaseSize * (1.0 + uSizeRandomness * (random.x - 0.5))) / length(mvPos.xyz);
    }

    gl_Position = projectionMatrix * mvPos;
  }
`,YY=`
  precision highp float;
  
  uniform float uTime;
  uniform float uAlphaParticles;
  varying vec4 vRandom;
  varying vec3 vColor;
  
  void main() {
    vec2 uv = gl_PointCoord.xy;
    float d = length(uv - vec2(0.5));
    
    if(uAlphaParticles < 0.5) {
      if(d > 0.5) {
        discard;
      }
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), 1.0);
    } else {
      float circle = smoothstep(0.5, 0.4, d) * 0.8;
      gl_FragColor = vec4(vColor + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28), circle);
    }
  }
`,KY=({particleCount:n=200,particleSpread:t=10,speed:e=.1,particleColors:i,moveParticlesOnHover:s=!1,particleHoverFactor:r=1,alphaParticles:o=!1,particleBaseSize:a=100,sizeRandomness:l=1,cameraDistance:u=20,disableRotation:h=!1,className:d})=>{const f=M.useRef(null),p=M.useRef({x:0,y:0});return M.useEffect(()=>{const g=f.current;if(!g)return;const y=new UX({depth:!1,alpha:!0}),A=y.gl;g.appendChild(A.canvas),A.clearColor(0,0,0,0);const m=new LY(A,{fov:15});m.position.set(0,0,u);const v=()=>{if(!g)return;const O=g.clientWidth,j=g.clientHeight;y.setSize(O,j),m.perspective({aspect:A.canvas.width/A.canvas.height})};window.addEventListener("resize",v,!1),v();const w=O=>{const j=O.clientX/window.innerWidth*2-1,N=-(O.clientY/window.innerHeight*2-1);p.current={x:j,y:N}};s&&window.addEventListener("mousemove",w);const S=n,T=new Float32Array(S*3),P=new Float32Array(S*4),_=new Float32Array(S*3),k=i&&i.length>0?i:WY;for(let O=0;O<S;O++){let j,N,$,H;do j=Math.random()*2-1,N=Math.random()*2-1,$=Math.random()*2-1,H=j*j+N*N+$*$;while(H>1||H===0);const W=Math.cbrt(Math.random());T.set([j*W,N*W,$*W],O*3),P.set([Math.random(),Math.random(),Math.random(),Math.random()],O*4);const G=GY(k[Math.floor(Math.random()*k.length)]);_.set(G,O*3)}const L=new NX(A,{position:{size:3,data:T},random:{size:4,data:P},color:{size:3,data:_}}),D=new BX(A,{vertex:XY,fragment:YY,uniforms:{uTime:{value:0},uSpread:{value:t},uBaseSize:{value:a},uSizeRandomness:{value:l},uAlphaParticles:{value:o?1:0}},transparent:!0,depthTest:!1}),R=new HY(A,{mode:A.POINTS,geometry:L,program:D});let I,B=performance.now(),F=0;const V=O=>{I=requestAnimationFrame(V);const j=O-B;B=O,F+=j*e,D.uniforms.uTime.value=F*.001,s&&(R.position.x+=(-p.current.x*r-R.position.x)*.05,R.position.y+=(-p.current.y*r-R.position.y)*.05),h||(R.rotation.x=Math.sin(F*2e-4)*.1,R.rotation.y=Math.cos(F*5e-4)*.15,R.rotation.z+=.01*e),y.render({scene:R,camera:m})};return I=requestAnimationFrame(V),()=>{window.removeEventListener("resize",v),s&&window.removeEventListener("mousemove",w),cancelAnimationFrame(I),g&&g.contains(A.canvas)&&g.removeChild(A.canvas)}},[n,t,e,s,r,o,a,l,u,h,i,d]),C.jsx("div",{ref:f,className:`particles-container ${d}`})};const qY=({isInFullscreen:n})=>{if(n)return null;const[t,e]=M.useState({x:0,y:0}),[i,s]=M.useState(!1),[r,o]=M.useState(!0);M.useEffect(()=>{document.body.classList.add("custom-cursor-active");const l=d=>{o(!0),e({x:d.clientX,y:d.clientY});const f=d.target.closest('a, button, .glare-container, [role="button"], [onClick]');s(!!f)},u=()=>{o(!1)},h=()=>{o(!0)};return window.addEventListener("mousemove",l),window.addEventListener("mousedown",u),window.addEventListener("mouseup",h),()=>{document.body.classList.remove("custom-cursor-active"),window.removeEventListener("mousemove",l),window.removeEventListener("mousedown",u),window.removeEventListener("mouseup",h)}},[]);const a=`custom-cursor ${i?"hovering":""}`;return C.jsx(bt.div,{className:a,style:{left:t.x,top:t.y,opacity:r?1:0,transition:"opacity 0.2s ease-in-out"},children:C.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M8 4V23L14 17L18 25L21 23L17 15L24 13L8 4Z",fill:"white"})})})};function QY(){const[n,t]=M.useState(null),[e,i]=M.useState(null),s=Zx("(min-width: 1024px)"),[r,o]=M.useState(!1);M.useEffect(()=>{fetch("/data/portfolioData.json").then(d=>d.json()).then(d=>t(d))},[]),M.useEffect(()=>{document.documentElement.classList.add("dark")},[]);const a=d=>i(d),l=()=>i(null),u=M.useCallback((d,f=500)=>{const p=document.getElementById(d);if(!p){console.warn(`Scroll target element not found: #${d}`);return}const g=document.querySelector("nav"),y=g?g.offsetHeight:0,A=window.scrollY||window.pageYOffset,m=p.getBoundingClientRect().top+A-y-10,v=m-A;let w=null;const S=(P,_,k,L)=>(P/=L,-k*P*(P-2)+_),T=P=>{w===null&&(w=P);const _=P-w,k=S(_,A,v,f);window.scrollTo(0,k),_<f?requestAnimationFrame(T):window.scrollTo(0,m)};requestAnimationFrame(T)},[]),h=M.useCallback(d=>{u(d)},[u]);return n?C.jsxs("div",{children:[s&&C.jsx(qY,{isInFullscreen:r}),C.jsx(KY,{particleColors:["#ff2a2a","#00ffff","#ff00ff","#ffffff"],particleCount:1200,speed:.2,particleBaseSize:40,alphaParticles:!1,moveParticlesOnHover:!0,particleHoverFactor:2.5,sizeRandomness:.8}),C.jsx("div",{className:"site-overlay"}),C.jsx(j$,{onLinkClick:h,openModal:a}),C.jsxs("div",{className:"relative z-10",children:[C.jsxs("main",{children:[C.jsx(xH,{onLinkClick:h}),C.jsx(TH,{scrollToSection:h}),(()=>{const d=n.blades.find(f=>f.id==="ai-automation");return d?C.jsx(PM,{data:d,openModal:a,neonColor:d.color||"purple"},d.id):null})(),(()=>{const d=n.blades.find(y=>y.id==="interactive-media"),f=n.blades.find(y=>y.id==="project-management");if(!d)return null;const p=[...d.portfolio||[],...(f==null?void 0:f.portfolio)||[]],g={...d,portfolio:p};return C.jsx(PM,{data:g,openModal:a,neonColor:g.color||"cyan"},g.id)})(),C.jsx(RH,{id:"skills-stack",blades:n.blades,openModal:a}),C.jsx(_H,{data:n.experience,openModal:a}),C.jsx(kH,{data:n.testimonials,openModal:a}),C.jsx(MH,{data:n.personalInfo})]}),C.jsx(LH,{data:n.personalInfo})]}),C.jsx(vX,{data:e,onClose:l,setIsInFullscreen:o})]}):C.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center text-white",children:"Loading Portfolio..."})}_b.createRoot(document.getElementById("root")).render(C.jsx(fs.StrictMode,{children:C.jsx(QY,{})}));
